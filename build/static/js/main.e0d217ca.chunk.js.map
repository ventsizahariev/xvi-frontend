{"version":3,"sources":["img/ic_bsc_16.svg","img/ic_gmx_custom.svg","img/ic_glp_40.svg","img/ic_binance_logo.svg","img/ic_language24.svg","img/ic_checked.svg","img/ic_glp_24.svg","img/ic_velas_24.svg","img/ic_gmx_40.svg","img/ic_wallet_24.svg","img/ic_arbitrum_96.svg","img/ic_avalanche_96.svg","img/ic_banxa.svg","img/ic_multiswap.svg","img/ic_settings_16.svg","img/ic_synapse.svg","img/ic_velas_16.svg","img/logo_GMX_small.svg","img/ic_eth_40.svg","img/DROP_DOWN.svg","img/buy_gmx.svg","img/coinbaseWallet.png","img/gmx-logo-with-name.svg","img/ic_arbitrum_16.svg","img/ic_avalanche_16.svg","img/ic_avax_30.svg","img/ic_bsc_96.svg","img/ic_buy_glp.svg","img/ic_coingecko_16.svg","img/ic_convert_down.svg","img/ic_copy_16.svg","img/ic_cost.svg","img/ic_discord.svg","img/ic_github.svg","img/ic_glp_custom.svg","img/ic_gmx_arbitrum.svg","img/ic_gmx_avax.svg","img/ic_hop.svg","img/ic_liquidity.svg","img/ic_medium.svg","img/ic_metamask_16.svg","img/ic_new_link_16.svg","img/ic_olympus_arbitrum.svg","img/ic_sign_out_16.svg","img/ic_simpleswaps.svg","img/ic_stats.svg","img/ic_telegram.svg","img/ic_totaluser.svg","img/ic_trading.svg","img/ic_twitter.svg","img/ic_velas_logo.svg","img/logo_GMX.svg","img/long.svg","img/metamask.png","img/position-share-bg.png","img/short.svg","img/swap.svg","img/walletconnect-circle-blue.svg","img/ic_arbitrum_24.svg","img/ic_avalanche_24.svg","img/ic_avax_24.svg","img/ic_avax_40.svg","img/ic_bnb_24.svg","img/ic_bnb_40.svg","img/ic_btc.b_24.svg","img/ic_btc.b_40.svg","img/ic_btc_24.svg","img/ic_btc_40.svg","img/ic_busd_24.svg","img/ic_busd_40.svg","img/ic_dai_24.svg","img/ic_dai_40.svg","img/ic_eth_24.svg","img/ic_frax_24.svg","img/ic_frax_40.svg","img/ic_gmx_24.svg","img/ic_link_24.svg","img/ic_link_40.svg","img/ic_mim_24.svg","img/ic_mim_40.svg","img/ic_settings_24.svg","img/ic_tether_24.svg","img/ic_uni_24.svg","img/ic_uni_40.svg","img/ic_usdc.e_24.svg","img/ic_usdc.e_40.svg","img/ic_usdc_24.svg","img/ic_usdc_40.svg","img/ic_usdt_24.svg","img/ic_usdt_40.svg","img/ic_wavax_24.svg","img/ic_wavax_40.svg","img/ic_wbnb_24.svg","img/ic_wbnb_40.svg","img/ic_weth_24.svg","img/ic_weth_40.svg","img sync /^/.*$","img/Anyswap.png","img/Anyswap.svg","img/Artwork.svg","img/Artwork_gmx.svg","img/Banxa.png","img/Hop.png","img/Hop.svg","img/Hop_dark.png","img/Hop_dark.svg","img/Synapse.png","img/Synapse.svg","img/binance.png","img/bscscan.png","img/btn_big_arbitrum.png","img/btn_big_avalanche.png","img/btn_big_bsc.png","img/btn_big_purchasegmx.png","img/btn_big_purchasegmx.svg","img/buy_gmx_bond.svg","img/buy_transfer_eth.svg","img/coingecko.png","img/cross.svg","img/flag_en.svg","img/flag_es.svg","img/flag_fr.svg","img/flag_ja.svg","img/flag_ko.svg","img/flag_ru.svg","img/flag_zh.svg","img/glp_icon.svg","img/gmx-logo-final-white-small.png","img/gmx-logo-final-white.png","img/gmx-logo-final.png","img/gmx-logo-glow.png","img/gmx_logo.svg","img/graphite-01.png","img/ic-communityproject.svg","img/ic_arbitrum_hover_16.svg","img/ic_arrowleft16.svg","img/ic_arrowright16.svg","img/ic_bsc.svg","img/ic_cash.png","img/ic_cash.svg","img/ic_coingecko_hover_16.svg","img/ic_gmx.svg","img/ic_gmx_30.svg","img/ic_gmx_64.svg","img/ic_gmx_big.svg","img/ic_gmx_footer.svg","img/ic_info.svg","img/ic_menu_dots.svg","img/ic_metamask_hover_16.svg","img/ic_olympus.svg","img/ic_selector_dropdowns.svg","img/ic_sign in_16.svg","img/ic_stats_big.svg","img/ic_tokens.svg","img/ic_transfer_avax.svg","img/lg_arbitrum.svg","img/metamask-text.svg","img/page-not-found.svg","img/trading.jpg","img/wallet-connect-text.svg","img/wave-01.png","img/wave-02.png","img sync /^/ic_.*_24/.svg$","img sync /^/ic_.*_40/.svg$","../ /^/.*/messages/.po$/ groupOptions: {} namespace object","config/Addresses.js","config/Tokens.js","lib/legacy.js","components/Footer/Footer.js","config/chains.js","domain/common.js","domain/prices.js","domain/legacy.js","components/TokenCard/TokenCard.js","components/Header/HeaderLink.tsx","pages/Home/Home.js","config/ui.js","components/Tooltip/Tooltip.js","config/Fees/FEES_42161.js","config/Fees/index.js","config/Fees/FEES_43113.js","components/Common/SEO.js","pages/Dashboard/TooltipCard.js","domain/useTotalVolume.js","pages/Dashboard/AssetDropdown.js","pages/Dashboard/DashboardV2.js","pages/Dashboard/Dashboard.js","pages/Ecosystem/Ecosystem.js","components/Modal/Modal.js","lib/useLockBodyScroll.js","pages/Stake/StakeV1.js","components/Checkbox/Checkbox.js","pages/Stake/StakeV2.js","pages/Stake/Stake.js","components/Tab/Tab.js","components/Common/Portal.js","components/Tooltip/TooltipWithPortal.js","components/Exchange/TokenSelector.js","components/Exchange/ExchangeInfoRow.js","components/Exchange/ConfirmationBox.js","components/Exchange/OrdersToa.js","components/Referrals/referralsHelper.js","domain/referrals.js","components/Exchange/SwapBox.js","components/Exchange/ChartTokenSelector.js","components/Exchange/ExchangeTVChart.js","components/Exchange/PositionSeller.js","components/Exchange/PositionEditor.js","components/Common/SpinningLoader.js","components/Exchange/PositionShare.js","lib/useLoadImage.js","components/Exchange/PositionDropdown.js","components/Exchange/PositionsList.js","components/Exchange/OrderEditor.js","components/Exchange/OrdersList.js","components/Exchange/TradeHistory.js","components/Exchange/ExchangeWalletTokens.js","components/Exchange/ExchangeBanner.js","pages/Exchange/Exchange.js","pages/Actions/Actions.js","pages/OrdersOverview/OrdersOverview.js","pages/PositionsOverview/PositionsOverview.js","components/Common/Loader.js","components/Referrals/JoinReferralCode.js","components/Common/Card.js","components/Referrals/EmptyMessage.js","components/Referrals/InfoCard.js","components/Referrals/AddAffiliateCode.js","components/Referrals/AffiliatesStats.js","components/Referrals/TradersStats.js","pages/Referrals/Referrals.js","components/BuyInputSection/BuyInputSection.js","components/Glp/GlpSwap.js","pages/BuyGlp/BuyGlp.js","components/Common/Button.js","pages/BuyLeveragePro/BuyLeveragePro.js","pages/Buy/Buy.js","pages/NftWallet/NftWallet.js","pages/ClaimEsGmx/ClaimEsGmx.js","pages/BeginAccountTransfer/BeginAccountTransfer.js","pages/CompleteAccountTransfer/CompleteAccountTransfer.js","config/events.js","components/EventToast/AnnouncementIcon.js","components/EventToast/EventToast.js","components/EventToast/useEventToast.js","components/EventToast/EventToastContainer.js","pages/PageNotFound/PageNotFound.js","pages/ReferralTerms/ReferralTerms.js","pages/TermsAndConditions/TermsAndConditions.js","components/ModalViews/RedirectModal.js","pages/Jobs/Jobs.js","lib/i18n.js","components/AddressDropdown/AddressDropdown.js","components/Modal/ModalWithPortal.js","components/NetworkDropdown/NetworkDropdown.js","components/NetworkDropdown/LanguagePopupHome.js","components/Header/AppHeaderUser.tsx","components/Header/AppHeaderLinks.tsx","components/Header/Header.tsx","App/App.js","lib/useRouteQuery.js","lib/useScrollToTop.js","reportWebVitals.js","index.tsx"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","webpackAsyncContext","Promise","then","ids","t","CONTRACTS","Treasury","BUSD","GMT","Vault","Router","Reader","AmmFactory","AmmFactoryV2","OrderBook","OrderBookReader","GmxMigrator","USDG","NATIVE_TOKEN","XGMT","GMT_USDG_PAIR","XGMT_USDG_PAIR","GMT_USDG_FARM","XGMT_USDG_FARM","USDG_YIELD_TRACKER","XGMT_YIELD_TRACKER","GMT_USDG_FARM_TRACKER_XGMT","GMT_USDG_FARM_TRACKER_NATIVE","XGMT_USDG_FARM_TRACKER_XGMT","XGMT_USDG_FARM_TRACKER_NATIVE","AUTO","AUTO_USDG_PAIR","AUTO_USDG_FARM","AUTO_USDG_FARM_TRACKER_XGMT","AUTO_USDG_FARM_TRACKER_NATIVE","GMT_GMX_IOU","XGMT_GMX_IOU","GMT_USDG_GMX_IOU","XGMT_USDG_GMX_IOU","PositionRouter","VaultReader","ReferralStorage","GlpManager","GMX","GLP","RewardRouter","RewardReader","ES_GMX","BN_GMX","StakedGmxTracker","BonusGmxTracker","FeeGmxTracker","StakedGlpTracker","FeeGlpTracker","StakedGmxDistributor","StakedGlpDistributor","GmxVester","GlpVester","PositionManager","Leverage","StakedLeverageTracker","LeverageBnbPool","LeverageVelasPool","ES_GMX_IOU","ReferralReader","OrderExecutor","UniswapGmxEthPool","TraderJoeGmxAvaxPool","getContract","chainId","name","XGMT_EXCLUDED_ACCOUNTS","TOKENS","symbol","decimals","address","coingeckoUrl","imageUrl","ethers","constants","AddressZero","isNative","isWrapped","baseSymbol","isUsdg","isStable","priceFeed","isShortable","ADDITIONAL_TOKENS","CHAIN_IDS","TOKENS_MAP","TOKENS_BY_SYMBOL_MAP","j","length","tokens","concat","i","token","WRAPPED_TOKENS_MAP","NATIVE_TOKENS_MAP","getWrappedToken","getNativeToken","getTokens","isValidToken","getToken","getTokenBySymbol","getWhitelistedTokens","filter","PLACEHOLDER_ACCOUNT","Wallet","createRandom","AVALANCHE","BSC_TESTNET","ARBITRUM_TESTNET","ARBITRUM","VELAS_TESTNET","CHAIN_ID","SELECTED_NETWORK_LOCAL_STORAGE_KEY","IS_NETWORK_DISABLED","CHAIN_NAMES_MAP","GAS_PRICE_ADJUSTMENT_MAP","MAX_GAS_PRICE_MAP","WALLET_CONNECT_LOCALSTORAGE_KEY","SHOULD_EAGER_CONNECT_LOCALSTORAGE_KEY","CURRENT_PROVIDER_LOCALSTORAGE_KEY","LANGUAGE_LOCALSTORAGE_KEY","getChainName","USDG_ADDRESS","MAX_LEVERAGE","SECONDS_PER_YEAR","USDG_DECIMALS","USD_DECIMALS","BASIS_POINTS_DIVISOR","DUST_BNB","DUST_USD","expandDecimals","PRECISION","GLP_DECIMALS","DEFAULT_MAX_USDG_AMOUNT","TAX_BASIS_POINTS","MARGIN_FEE_BASIS_POINTS","LIQUIDATION_FEE","THRESHOLD_REDEMPTION_VALUE","FUNDING_RATE_PRECISION","SWAP","INCREASE","DECREASE","LONG","SHORT","MARKET","LIMIT","STOP","LEVERAGE_ORDER_OPTIONS","SWAP_ORDER_OPTIONS","SWAP_OPTIONS","SLIPPAGE_BPS_KEY","REFERRAL_CODE_KEY","REFERRAL_CODE_QUERY_PARAM","TRIGGER_PREFIX_ABOVE","TRIGGER_PREFIX_BELOW","GLPPOOLCOLORS","ETH","BTC","USDC","USDT","MIM","FRAX","DAI","UNI","AVAX","LINK","HIGH_EXECUTION_FEES_MAP","ICONLINKS","coingecko","bsctestnet","bsc","platformTokens","supportedChainIds","injectedConnector","InjectedConnector","getWalletConnectConnector","localStorage","getItem","WalletConnectConnector","rpc","BSC_RPC_PROVIDERS","qrcode","deserialize","data","entries","key","value","_type","bigNumberify","isHomeSite","window","location","hash","helperToast","content","opts","toast","dismiss","success","error","useLocalStorageByChainId","defaultValue","useLocalStorage","internalValue","setInternalValue","setValue","useCallback","useLocalStorageSerializeKey","JSON","stringify","getLiquidationPriceFromDelta","liquidationAmount","size","collateral","averagePrice","isLong","eq","gt","priceDelta","sub","mul","div","add","replaceNativeTokenAddress","path","nativeTokenAddress","updatedPath","push","getMarginFee","sizeDelta","afterFeeUsd","getServerBaseUrl","isLocal","isDevelopment","getServerUrl","isTriggerRatioInverted","fromTokenInfo","toTokenInfo","maxPrice","lt","getExchangeRate","tokenAInfo","tokenBInfo","inverted","minPrice","getMostAbundantStableToken","infoTokens","availableAmount","whitelistedTokens","stableToken","find","info","getTokenInfo","adjustedAvailableAmount","adjustForDecimals","shouldInvertTriggerRatio","tokenA","tokenB","getExchangeRateDisplay","rate","rateValue","formatAmount","omitSymbols","adjustForDecimalsFactory","n","number","amount","divDecimals","mulDecimals","getFeeBasisPoints","usdgDelta","feeBasisPoints","taxBasisPoints","increment","usdgSupply","totalTokenWeights","usdgAmount","initialAmount","nextAmount","targetAmount","weight","getTargetUsdgAmount","toNumber","initialDiff","nextDiff","rebateBps","averageDiff","taxBps","getBuyGlpFromAmount","toAmount","fromTokenAddress","glpPrice","fromToken","fromAmount","getSellGlpToAmount","getNextFromAmount","toTokenAddress","toTokenPriceUsd","ratio","forSwap","fromTokenMinPrice","toTokenMaxPrice","toToken","contractMinPrice","contractMaxPrice","fromAmountBasedOnRatio","adjustDecimals","isZero","swapFeeBasisPoints","feeBasisPoints0","feeBasisPoints1","getNextToAmount","toAmountBasedOnRatio","getSwapFeeBasisPoints","redemptionAmount","expectedAmount","getProfitPrice","closePrice","position","profitPrice","calculatePositionDelta","price","lastIncreasedTime","delta","pendingDelta","minProfitExpired","Date","now","hasProfit","lte","deltaPercentage","pendingDeltaPercentage","getDeltaStr","deltaStr","deltaPercentageStr","getLeverage","increaseSize","collateralDelta","increaseCollateral","entryFundingRate","cumulativeFundingRate","includeDelta","nextSize","gte","remainingCollateral","fundingFee","getLiquidationPrice","adjustedDelta","positionFee","liquidationPriceForFees","liquidationPriceForMaxLeverage","getUsd","tokenAddress","max","orderOption","triggerPriceUsd","getTriggerPrice","getPositionKey","account","collateralTokenAddress","indexTokenAddress","getPositionContractKey","collateralToken","indexToken","utils","solidityKeccak256","RPC_PROVIDERS","FALLBACK_PROVIDERS","shortenAddress","left","Math","floor","substring","formatDateTime","time","formatDateFn","getTimeRemaining","parseInt","diff","hours","minutes","formatDate","activateInjectedProvider","providerName","ethereum","providers","isCoinbaseWallet","isMetaMask","provider","setSelectedProvider","getInjectedConnector","useChainId","chainIdFromLocalStorage","removeItem","includes","clearWalletConnectData","clearWalletLinkData","x","startsWith","getProvider","library","getSigner","_","sample","StaticJsonRpcProvider","getFallbackProvider","getContractCall","contractInfo","arg0","arg1","method","params","additionalArgs","onError","isAddress","contract","Contract","abi","fetcher","args","contractCall","shouldCallFallback","handleFallback","reject","fallbackProvider","console","result","catch","contractName","setTimeout","BigNumber","from","pow","limitDecimals","maxDecimals","amountStr","toString","undefined","split","dotIndex","indexOf","substr","formatKeyAmount","tokenDecimals","displayDecimals","useCommas","_parseOrdersData","ordersData","indexes","extractor","uintPropsLength","addressPropsLength","uintProps","addressProps","count","orders","sliced","slice","order","index","parseDecreaseOrdersData","decreaseOrdersData","triggerPrice","triggerAboveThreshold","type","parseIncreaseOrdersData","increaseOrdersData","purchaseToken","purchaseTokenAmount","parseSwapOrdersData","swapOrdersData","shouldUnwrap","amountIn","minOut","triggerRatio","every","getOrderKey","useAccountOrders","flagOrdersEnabled","overrideAccount","useWeb3React","connectedAccount","shouldRequest","orderBookAddress","orderBookReaderAddress","useSWR","dedupingInterval","active","orderBookContract","orderBookReaderContract","fetchIndexesFromServer","ordersIndexesUrl","fetch","res","json","ret","toLowerCase","val","sort","a","b","swap","increase","decrease","fetchLastIndex","_hex","fetchLastIndexes","all","getRange","to","_indexes","getIndexes","knownIndexes","lastIndex","getOrders","parseFunc","serverIndexes","lastIndexes","swapOrders","increaseOrders","decreaseOrders","mutate","formatUnits","minDecimals","padEnd","padDecimals","numberWithCommas","formatAmountFree","parseFloat","trimZeroDecimals","parseValue","pValue","isNaN","parseUnits","parts","replace","join","getExplorerUrl","usePrevious","ref","useRef","useEffect","current","setGasPrice","txnOpts","maxGasPrice","premium","getGasPrice","gasPrice","getFeeData","feeData","maxPriorityFeePerGas","maxFeePerGas","getGasLimit","estimateGas","gasLimit","approveTokens","setIsApproving","spender","onApproveSubmitted","pendingTxns","setPendingTxns","includeMessage","Token","approve","MaxUint256","txUrl","href","target","rel","pendingTxn","message","failMsg","finally","shouldRaiseGasError","balance","replaceNative","NETWORK_METADATA","chainName","nativeCurrency","rpcUrls","blockExplorerUrls","addNetwork","metadata","request","switchNetwork","setItem","document","reload","chainIdHex","getInjectedHandler","activate","fn","UnsupportedChainIdError","className","onClick","errString","setTokenUsingIndexPrices","indexPrices","indexPrice","indexPriceBn","spreadBps","MAX_PRICE_DEVIATION_BASIS_POINTS","minPrimaryPrice","halfSpreadBps","getInfoTokens","tokenBalances","vaultTokenInfo","fundingRateInfo","vaultPropsLength","parse","poolAmount","reservedAmount","bufferAmount","maxUsdgAmount","globalShortSize","maxGlobalShortSize","maxGlobalLongSize","guaranteedUsd","maxPrimaryPrice","maxAvailableShort","hasMaxAvailableShort","availableUsd","maxAvailableLong","hasMaxAvailableLong","remainingLongSize","maxLongCapacity","managedUsd","managedAmount","fundingRate","CHART_PERIODS","getTotalVolumeSum","volumes","volume","getBalanceAndSupplyData","balances","balanceData","supplyData","getDepositBalanceData","depositBalances","getVestingData","vestingInfo","pairAmount","vestedAmount","escrowedBalance","claimedAmounts","claimable","maxVestableAmount","averageStakedAmount","getStakingData","stakingInfo","tokensPerInterval","averageStakedAmounts","cumulativeRewards","totalSupply","getProcessedData","depositBalanceData","stakingData","vestingData","aum","nativeTokenPrice","stakedGmxSupply","gmxPrice","gmxBalance","gmx","gmxBalanceUsd","gmxSupply","gmxSupplyUsd","stakedGmxSupplyUsd","gmxInStakedGmx","gmxInStakedGmxUsd","esGmxBalance","esGmx","esGmxBalanceUsd","stakedGmxTrackerSupply","stakedGmxTracker","stakedGmxTrackerSupplyUsd","stakedEsGmxSupply","stakedEsGmxSupplyUsd","esGmxInStakedGmx","esGmxInStakedGmxUsd","bnGmxInFeeGmx","bonusGmxInFeeGmx","feeGmxSupply","feeGmxTracker","feeGmxSupplyUsd","stakedGmxTrackerRewards","stakedGmxTrackerRewardsUsd","bonusGmxTrackerRewards","bonusGmxTracker","feeGmxTrackerRewards","feeGmxTrackerRewardsUsd","boostBasisPoints","stakedGmxTrackerAnnualRewardsUsd","gmxAprForEsGmx","feeGmxTrackerAnnualRewardsUsd","gmxAprForNativeToken","gmxBoostAprForNativeToken","gmxAprTotal","gmxAprTotalWithBoost","gmxAprForNativeTokenWithBoost","totalGmxRewardsUsd","glpSupply","glp","glpSupplyUsd","glpBalance","glpInStakedGlp","glpBalanceUsd","stakedGlpTrackerRewards","stakedGlpTracker","stakedGlpTrackerRewardsUsd","feeGlpTrackerRewards","feeGlpTracker","feeGlpTrackerRewardsUsd","stakedGlpTrackerAnnualRewardsUsd","glpAprForEsGmx","feeGlpTrackerAnnualRewardsUsd","glpAprForNativeToken","glpAprTotal","totalGlpRewardsUsd","totalEsGmxRewards","totalEsGmxRewardsUsd","gmxVesterRewards","gmxVester","glpVesterRewards","glpVester","totalVesterRewards","totalVesterRewardsUsd","totalNativeTokenRewards","totalNativeTokenRewardsUsd","totalRewardsUsd","options","image","getPageTitle","isHashZero","HashZero","isAddressZero","useDebounce","delay","useState","debouncedValue","setDebouncedValue","handler","clearTimeout","host","getHomeUrl","getBaseUrl","getAppBaseUrl","importImage","tokenImage","require","default","getPositionForOrder","positionsMap","getOrderError","positionForOrder","arrayURLFetcher","url","urlArr","shouldShowRedirectModal","timestamp","expiryTime","getTime","isValidTimestamp","footerLinks","home","text","link","external","app","socialLinks","icon","twitterIcon","mediumIcon","githubIcon","telegramIcon","discordIcon","Footer","showRedirectModal","redirectPopupTimestamp","isHome","cx","style","fontSize","color","src","logoImg","alt","height","platform","isAppLink","baseUrl","activeClassName","parseEther","nativeTokenSymbol","defaultCollateralSymbol","defaultFlagOrdersEnabled","positionReaderPropsLength","v2","wrappedTokenSymbol","SWAP_ORDER_EXECUTION_GAS_FEE","INCREASE_ORDER_EXECUTION_GAS_FEE","DECREASE_ORDER_EXECUTION_GAS_FEE","getConstant","bscTestnetGraphClient","createClient","nissohGraphClient","testnetReferralsGraphClient","uri","ApolloClient","cache","InMemoryCache","timezoneOffset","getTimezoneOffset","getChartPricesFromChainlink","period","hostname","timeDiff","response","prices","uniqTs","Set","forEach","item","has","Number","getCandlesFromPrices","periodTime","candles","first","prevTsGroup","prevPrice","h","l","c","ts","tsGroup","min","open","close","high","low","useChartPrices","priceFeedAddress","currentAveragePrice","swrKey","warn","focusThrottleInterval","updatePrices","currentAveragePriceString","retPrices","useMemo","periodSeconds","priceData","getStablePriceData","_prices","currentCandleTime","last","averagePriceValue","newCandle","appendCurrentAveragePrice","newPrices","prevTime","fillGaps","getGmxGraphClient","useAllOrdersStats","query","gql","setRes","graphClient","orderStat","useInfoTokens","vaultReaderAddress","vaultAddress","positionRouterAddress","whitelistedTokenAddresses","indexPricesUrl","refreshInterval","refreshWhenHidden","useUserStat","userStat","useLiquidationsData","setData","_data","liquidatedPositions","markPrice","useAllPositions","aggregatedTradeOpens","dataItem","initialPosition","getPosition","positionData","getFundingFee","marginFee","fee","collateralDiffPercent","danger","Boolean","useAllOrders","charAt","toUpperCase","orderFromChain","path0","path1","path2","createdTimestamp","usePositionsForOrders","reduce","memo","invariant","condition","errorMsg","useTrades","forSingleAccount","afterId","urlItem","URL","searchParams","append","trades","updateTrades","item0","item1","data0","data1","time0","time1","block0","blockNumber","block1","useMinExecutionFee","multiplier","minExecutionFee","finalExecutionFee","estimatedExecutionFee","finalExecutionFeeUSD","isFeeHigh","getHighExecutionFee","minExecutionFeeUSD","minExecutionFeeErrorMessage","useHasOutdatedUi","hasOutdatedUi","useLeveragePrice","libraries","poolAddress","UniPool","uniPoolSlot0","updateUniPoolSlot0","updateNativeTokenPrice","leverageAddress","UniToken","poolTokenPrice","Pool","sqrtPriceX96","tick","priceOf","toSignificant","useTotalGmxStaked","stakedGmxTrackerAddress","totalStakedGmx","updateStakedGmxSupply","total","approvePlugin","pluginAddress","sentMsg","routerAddress","callContract","createSwapOrder","executionFee","shouldWrap","createIncreaseOrder","fromETH","createDecreaseOrder","cancelSwapOrder","cancelDecreaseOrder","cancelIncreaseOrder","handleCancelOrder","func","successMsg","cancelMultipleOrders","ordersWithTypes","d","allIndexes","groupBy","v","updateDecreaseOrder","updateIncreaseOrder","updateSwapOrder","_executeOrder","feeReceiver","positionManagerAddress","executeSwapOrder","executeIncreaseOrder","executeDecreaseOrder","NOT_ENOUGH_FUNDS","USER_DENIED","SLIPPAGE","RPC_ERROR","TX_ERROR_PATTERNS","msg","extractError","ex","patterns","pattern","matchCode","matchMessage","ToastifyDebug","props","setOpen","old","children","Array","isArray","hideSuccessMsg","autoCloseToast","errorData","originalError","autoClose","TokenCard","changeNetwork","network","BuyLink","gmxBigIcon","glpBigIcon","HeaderLink","isHomeLink","exact","isOnHomePage","Home","bscPositionStatsUrl","bscPositionStats","bscTotalVolumeUrl","bscTotalVolumeSum","totalVolumeSum","openInterest","totalLongPositionSizes","totalShortPositionSizes","bscUserStats","totalUsers","uniqueCount","LaunchExchangeButton","tradingIcon","statsIcon","totaluserIcon","toFixed","liquidityIcon","costIcon","simpleSwapIcon","bscIcon","IS_TOUCH","Tooltip","visible","setVisible","intervalCloseRef","intervalOpenRef","trigger","onMouseEnter","clearInterval","onMouseClick","onMouseLeave","disableHandleStyle","handleClassName","handle","renderContent","FEES_42161","feeUsd","createFeeList","list","FEES","getFeeHistory","reverse","SEO","customMeta","meta","title","description","Helmet","property","TooltipCard","arbitrum","showDollar","decimalsForConversion","TooltipCardRow","label","ACTIVE_CHAIN_IDS","AssetDropdown","assetSymbol","assetInfo","unavailableTokenSymbols","Button","as","Items","Item","coingeckoIcon","addTokenToMetamask","metamaskIcon","getCurrentFeesUsd","tokenAddresses","fees","currentFeesUsd","tokenInfo","DashboardV2","totalVolume","chain","acc","sum","useTotalVolume","positionStats","updatePositionStats","hourlyVolumes","updateHourlyVolumes","currentVolumeInfo","dailyVolumes","hourlyVolume","secondsPerHour","minTime","cv","getVolumeInfo","positionStatsInfo","getPositionStats","getWhitelistedTokenAddresses","leverageMarketCap","stakedLeverageSupplyUsd","tvl","glpMarketCap","tokenList","visibleTokens","isTempHidden","readerAddress","glpManagerAddress","glpAddress","usdgAddress","tokensForSupplyQuery","aums","updateAums","ReaderV2","updateFees","totalSupplies","updateTotalSupplies","VaultV2","updateTotalTokenWeights","nativeToken","feeUSD","currentFees","feeHistory","totalFeesDistributed","totalFees","round","stakedLeverageTrackerAddress","stakedLeverageSupply","leveragePrice","updateLeveragePrice","totalFloorPriceFundUsd","nativeTokenFloorPriceFund","glpFloorPriceFund","usdcFloorPriceFund","ethFloorPriceFundUsd","glpFloorPriceFundUsd","adjustedUsdgSupply","getWeightText","currentWeightBps","targetWeightBps","weightText","gmxDistributionData","stableGlp","totalGlp","glpPool","fullname","stablePercentage","element","arr","gmxActiveIndex","setGMXActiveIndex","onGMXDistributionChartLeave","glpActiveIndex","setGLPActiveIndex","onGLPPoolChartLeave","CustomTooltip","payload","backgroundColor","on","removeAllListeners","bsc24Icon","velas24Icon","velas","gmx40Icon","testnet","PieChart","width","Pie","cy","innerRadius","outerRadius","fill","dataKey","startAngle","endAngle","paddingAngle","onMouseOut","entry","Cell","hexToRgba","cursor","stroke","strokeWidth","y","textAnchor","dominantBaseline","glp40Icon","bsc16Icon","velas16Icon","utilization","Dashboard","NETWORK_ICONS","NETWORK_ICON_ALTS","Ecosystem","linkLabel","chainIds","about","creatorLink","creatorLabel","Modal","isVisible","setIsVisible","zIndex","onAfterOpen","disableBodyScrollLock","modalRef","disableLock","disableBodyScroll","enableBodyScroll","clearAllBodyScrollLocks","useLockBodyScroll","keyCode","log","addEventListener","removeEventListener","motion","initial","animate","exit","variants","hidden","opacity","transition","duration","overflow","HOURS_PER_YEAR","StakeModal","maxAmount","stakingTokenSymbol","stakingTokenAddress","farmAddress","isStaking","setIsStaking","isApproving","tokenAllowance","updateTokenAllowance","needApproval","getError","placeholder","onChange","YieldFarm","stake","disabled","getPrimaryText","UnstakeModal","isUnstaking","setIsUnstaking","unstake","StakeV1","isStakeModalVisible","setIsStakeModalVisible","stakeModalTitle","setStakeModalTitle","stakeModalMaxAmount","setStakeModalMaxAmount","stakeValue","setStakeValue","setStakingTokenAddress","stakingFarmAddress","setStakingFarmAddress","isUnstakeModalVisible","setIsUnstakeModalVisible","unstakeModalTitle","setUnstakeModalTitle","unstakeModalMaxAmount","setUnstakeModalMaxAmount","unstakeValue","setUnstakeValue","unstakingFarmAddress","setUnstakingFarmAddress","connectWallet","ammFactoryAddressV2","gmtAddress","xgmtAddress","autoAddress","busdAddress","gmtUsdgPairAddress","xgmtUsdgPairAddress","autoUsdgPairAddress","gmtUsdgFarmAddress","xgmtUsdgFarmAddress","autoUsdgFarmAddress","usdgYieldTracker","xgmtYieldTracker","gmtUsdgFarmTrackerXgmt","gmtUsdgFarmTrackerNative","xgmtUsdgFarmTrackerXgmt","xgmtUsdgFarmTrackerNative","autoUsdgFarmTrackerXgmt","autoUsdgFarmTrackerNative","yieldTrackers","pairTokens","yieldTokens","xgmtSupply","updateXgmtSupply","updateBalances","updateStakingInfo","totalStakedInfo","updateTotalStakedInfo","pairInfo","updatePairInfo","pairData","balance0","balance1","getPairData","totalStakedData","getTotalStakedData","processedData","gmtUsdg","xgmtUsdg","autoUsdg","xgmtPrice","gmtUsdgPrice","xgmtUsdgPrice","bnbPrice","bnbBusd","autoUsdgPrice","usdgAnnualRewardsUsd","usdg","xgmtAnnualRewardsUsd","xgmt","gmtUsdgAnnualRewardsXmgtUsd","gmtUsdgFarmXgmt","gmtUsdgAnnualRewardsNativeUsd","gmtUsdgFarmNative","gmtUsdgTotalAnnualRewardsUsd","xgmtUsdgAnnualRewardsXmgtUsd","xgmtUsdgFarmXgmt","xgmtUsdgAnnualRewardsNativeUsd","xgmtUsdgFarmNative","xgmtUsdgTotalAnnualRewardsUsd","autoUsdgAnnualRewardsXgmtUsd","autoUsdgFarmXgmt","autoUsdgAnnualRewardsNativeUsd","autoUsdgFarmNative","autoUsdgTotalAnnualRewardsUsd","usdgBalance","usdgTotalStaked","usdgTotalStakedUsd","usdgSupplyUsd","usdgApr","usdgRewards","xgmtBalance","xgmtBalanceUsd","xgmtTotalStaked","xgmtTotalStakedUsd","xgmtSupplyUsd","xgmtApr","xgmtRewards","gmtUsdgFarmBalance","gmtUsdgFarm","gmtUsdgBalance","gmtUsdgBalanceUsd","gmtUsdgSupply","gmtUsdgSupplyUsd","gmtUsdgStaked","gmtUsdgStakedUsd","gmtUsdgFarmSupplyUsd","gmtUsdgApr","gmtUsdgXgmtRewards","gmtUsdgNativeRewards","gmtUsdgTotalRewards","gmtUsdgTotalStaked","gmtUsdgTotalStakedUsd","xgmtUsdgBalance","xgmtUsdgFarmBalance","xgmtUsdgFarm","xgmtUsdgBalanceUsd","xgmtUsdgSupply","xgmtUsdgSupplyUsd","xgmtUsdgStaked","xgmtUsdgStakedUsd","xgmtUsdgFarmSupplyUsd","xgmtUsdgApr","xgmtUsdgXgmtRewards","xgmtUsdgNativeRewards","xgmtUsdgTotalRewards","xgmtUsdgTotalStaked","xgmtUsdgTotalStakedUsd","autoUsdgBalance","autoUsdgFarmBalance","autoUsdgFarm","autoUsdgBalanceUsd","autoUsdgStaked","autoUsdgStakedUsd","autoUsdgFarmSupplyUsd","autoUsdgApr","autoUsdgXgmtRewards","autoUsdgNativeRewards","autoUsdgTotalRewards","autoUsdgTotalStaked","autoUsdgTotalStakedUsd","totalStakedUsd","buyXgmtUrl","buyGmtUrl","addGmtUsdgLpUrl","addXgmtUsdgLpUrl","buyAutoUrl","addAutoUsdgLpUrl","claim","rewards","YieldToken","Checkbox","isChecked","setIsChecked","selected","rewardRouterAddress","stakeMethodName","burnAmount","unstakingTokenSymbol","unstakeMethodName","multiplierPointsAmount","rewardReductionBasisPoints","VesterDepositModal","stakeTokenLabel","reserveAmount","maxReserveAmount","vesterAddress","isDepositing","setIsDepositing","nextReserveAmount","nextDepositAmount","additionalReserveAmount","Vester","VesterWithdrawModal","isWithdrawing","setIsWithdrawing","CompoundModal","isCompounding","setIsCompounding","shouldClaimGmx","setShouldClaimGmx","shouldStakeGmx","setShouldStakeGmx","shouldClaimEsGmx","setShouldClaimEsGmx","shouldStakeEsGmx","setShouldStakeEsGmx","shouldStakeMultiplierPoints","setShouldStakeMultiplierPoints","shouldClaimWeth","setShouldClaimWeth","shouldConvertWeth","setShouldConvertWeth","gmxAddress","ClaimModal","isClaiming","setIsClaiming","StakeV2","esGmxSupplyUsd","setStakingTokenSymbol","setStakeMethodName","unstakeModalReservedAmount","setUnstakeModalReservedAmount","setUnstakingTokenSymbol","setUnstakeMethodName","isVesterDepositModalVisible","setIsVesterDepositModalVisible","vesterDepositTitle","setVesterDepositTitle","vesterDepositStakeTokenLabel","setVesterDepositStakeTokenLabel","vesterDepositMaxAmount","setVesterDepositMaxAmount","vesterDepositBalance","setVesterDepositBalance","vesterDepositEscrowedBalance","setVesterDepositEscrowedBalance","vesterDepositVestedAmount","setVesterDepositVestedAmount","vesterDepositAverageStakedAmount","setVesterDepositAverageStakedAmount","vesterDepositMaxVestableAmount","setVesterDepositMaxVestableAmount","vesterDepositValue","setVesterDepositValue","vesterDepositReserveAmount","setVesterDepositReserveAmount","vesterDepositMaxReserveAmount","setVesterDepositMaxReserveAmount","vesterDepositAddress","setVesterDepositAddress","isVesterWithdrawModalVisible","setIsVesterWithdrawModalVisible","vesterWithdrawTitle","setVesterWithdrawTitle","vesterWithdrawAddress","setVesterWithdrawAddress","isCompoundModalVisible","setIsCompoundModalVisible","isClaimModalVisible","setIsClaimModalVisible","rewardReaderAddress","esGmxAddress","bnGmxAddress","bonusGmxTrackerAddress","feeGmxTrackerAddress","stakedGlpTrackerAddress","feeGlpTrackerAddress","stakedGmxDistributorAddress","stakedGlpDistributorAddress","gmxVesterAddress","glpVesterAddress","vesterAddresses","excludedEsGmxAccounts","walletTokens","depositTokens","rewardTrackersForDepositBalances","rewardTrackersForStakingInfo","walletBalances","esGmxSupply","bscGmxStaked","totalGmxStaked","totalRewardTokens","totalRewardTokensAndGlp","hasMultiplierPoints","totalSupplyUsd","totalGmxSupply","maxUnstakeableGmx","gmxVesterPairAmount","availableTokens","stakedTokens","divisor","earnMsg","renderMultiplierPointsLabel","renderMultiplierPointsValue","gmxAmountStr","esGmxAmountStr","mpAmountStr","glpStr","s","showUnstakeGmxModal","showUnstakeEsGmxModal","remainingVestableAmount","showGmxVesterDepositModal","gmxVesterVestedAmount","showGlpVesterDepositModal","glpVesterVestedAmount","Stake","Tab","option","setOption","optionLabels","icons","opt","Portal","root","body","el","createElement","appendChild","removeChild","createPortal","TooltipWithPortal","coords","setCoords","tooltipWidth","setTooltipWidth","handlerRef","updateTooltipCoords","rect","getBoundingClientRect","top","scrollY","fitHandleWidth","closeOnDoubleClick","TokenSelector","isModalVisible","setIsModalVisible","searchKeyword","setSearchKeyword","mintingCap","showMintingCap","selectedTokenLabel","showBalances","showTokenImgInDropdown","showSymbolImage","showNewCaret","getTokenState","onSelectToken","filteredTokens","onSearchKeywordChange","onKeyDown","autoFocus","tokenIndex","tokenPopupImage","mintAmount","balanceUsd","tokenState","portalClassName","dropDownIcon","ExchangeInfoRow","isTop","isWarning","HIGH_SPREAD_THRESHOLD","ConfirmationBox","fromTokenUsd","toTokenUsd","isSwap","isMarketOrder","isShort","isHigherSlippageAllowed","setIsHigherSlippageAllowed","onConfirmationClick","setIsConfirming","shortCollateralAddress","hasExistingPosition","leverage","existingPosition","existingLiquidationPrice","displayLiquidationPrice","shortCollateralToken","isPendingConfirmation","feesUsd","isSubmitting","fromUsdMin","toUsdMax","nextAveragePrice","feeBps","savedSlippageAmount","isProfitWarningAccepted","setIsProfitWarningAccepted","isTriggerWarningAccepted","setIsTriggerWarningAccepted","isLimitOrdersVisible","setIsLimitOrdersVisible","onCancelOrderClick","collateralAfterFees","existingOrder","wrappedToken","sameToken","existingOrders","existingTriggerOrders","decreaseOrdersThatWillBeExecuted","hasPendingProfit","spread","fromSpread","toSpread","isHigh","getSpread","showSpread","allowedSlippage","renderSpreadWarning","renderFeeWarning","MIN_PROFIT_TIME","renderMinProfitWarning","renderExistingOrderWarning","sizeInToken","p","triggerPricePrefix","renderExistingTriggerErrors","existingTriggerOrderLength","orderText","renderExistingTriggerWarning","renderMain","renderExecutionFee","renderAvailableLiquidity","availableLiquidity","isLiquidityRisk","riskThresholdBps","poolWithoutBuffer","adjustedMaxGlobalShortSize","sizeTokens","renderMarginSection","renderSwapSection","action","OrdersToa","isPluginApproving","approveOrderBook","REFERRAL_CODE_REGEX","REGEX_VERIFY_BYTES32","isRecentReferralCodeNotExpired","referralCodeInfo","getReferralCodeTakenStatus","referralCode","referralCodeBytes32","encodeReferralCode","getReferralCodeOwner","ownerArbitrum","ownerAvax","takenOnArb","takenOnAvax","referralCodeTakenInfo","both","status","getTierIdDisplay","tierId","tierRebateInfo","tierDiscountInfo","deserializeSampleStats","input","parsedData","obj1","getSampleReferrarStat","obj2","currentValue","hex","ownerOnOtherNetwork","discountUsd","totalRebateUsd","tradedReferralsCount","registeredReferralsCount","ownerOnOtherChain","codeString","owner","isTaken","isTakenByCurrentUser","getUSDValue","ACTIVE_CHAINS","getGraphClient","decodeReferralCode","hexCode","parseBytes32String","String","fromCharCode","trim","final","formatBytes32String","getCodeOwnersData","codes","variables","codeOwners","referralCodes","useReferralsData","loading","setLoading","arbitrumCodes","avalancheCodes","codeOwnersOnAvax","codeOwnersOnArbitrum","main","useUserCodesOnAllChain","startOfDayTimestamp","typeIds","referralTotalStatsId","rebateDistributions","discountDistributions","prepareStatsItem","distributions","transactionHash","receiver","getAddress","typeId","referrerTotalStats","referrerTierInfo","referrerLastDayStats","cumulativeStats","getCumulativeStats","referralTotalStats","referralStorageAddress","referralCodeHex","setTraderReferralCodeByUser","codeOwner","useUserReferralCode","localStorageCode","onChainCode","localStorageCodeOwner","test","attachedOnChain","userReferralCode","userReferralCodeString","validateReferralCodeExists","referralCodeOwner","SWAP_ICONS","longImg","shortImg","swapImg","leverageSliderHandle","dragging","restProps","prefixCls","overlay","placement","Handle","SwapBox","pendingPositions","setPendingPositions","setFromTokenAddress","setToTokenAddress","swapOption","setSwapOption","tokenSelection","setTokenSelection","isConfirming","setIsPendingConfirmation","savedIsPnlInLeverage","orderBookApproved","positionRouterApproved","isWaitingForPluginApproval","approvePositionRouter","setIsWaitingForPluginApproval","isWaitingForPositionRouterApproval","setIsWaitingForPositionRouterApproval","isPositionRouterApproving","savedShouldDisableOrderValidation","fromValue","setFromValue","toValue","setToValue","anchorOnFromAmount","setAnchorOnFromAmount","isWaitingForApproval","setIsWaitingForApproval","setIsSubmitting","modalError","setModalError","setShortCollateralAddress","leverageOption","setLeverageOption","isLeverageSliderEnabled","setIsLeverageSliderEnabled","hasLeverageOption","ordersToaOpen","setOrdersToaOpen","setOrderOption","positionKey","orderOptions","orderOptionLabels","triggerPriceValue","setTriggerPriceValue","fromTokens","stableTokens","indexTokens","shortableTokens","toTokens","needOrderBookApproval","prevNeedOrderBookApproval","needPositionRouterApproval","prevNeedPositionRouterApproval","tokenAllowanceAddress","Api","fromBalance","toBalance","isPotentialWrap","isWrapOrUnwrap","prevFromTokenAddress","prevNeedApproval","prevToTokenAddress","triggerRatioValue","setTriggerRatioValue","triggerRatioInverted","maxToTokenOut","maxToTokenOutUSD","maxFromTokenInUSD","maxFromTokenIn","maxSwapAmountUsd","entryMarkPrice","exitMarkPrice","nextToAmount","nextToValue","nextFromAmount","nextFromValue","updateSwapAmounts","leverageMultiplier","fromUsdMinAfterFee","toNumerator","toDenominator","baseFromAmountUsd","swapFees","updateLeverageAmounts","nextDelta","nextHasProfit","nextPrice","getNextAveragePrice","liquidationPrice","getToLabel","currentRate","usdgFromAmount","getSwapError","requiredAmount","swapAmount","sizeUsd","stableTokenAmount","getLeverageError","wrap","WETH","unwrap","multiPath","increasePosition","tokenAddress0","refPrice","priceBasisPoints","priceLimit","boundedFromAmount","contractAddress","tokenSymbol","updatedAt","pendingChanges","isStopOrder","showFromAndToSection","showTriggerPriceSection","showTriggerRatioSection","feeTokenPrice","borrowFeeText","hasZeroBorrowFee","setFromValueToMaximumAvailable","maxAvailableAmount","Fragment","shouldShowMaxButton","updatedTokenSelection","getTokenLabel","evt","positive","negative","step","marks","modal","errorCode","isPrimaryEnabled","isSupportedChain","indexTokenInfo","nextToAmountUsd","outputCurrency","inputCurrency","externalSwapUrl","externalSwapName","swapTokenSymbol","renderErrorModal","ChartTokenSelector","selectedToken","onSelect","marginLeft","getChartToken","ExchangeTVChart","positions","savedShouldShowPositionLines","currentChart","setCurrentChart","currentSeries","setCurrentSeries","setPeriod","hoveredCandlestick","setHoveredCandlestick","chartToken","setChartToken","tmp","marketName","previousMarketName","currentOrders","chartRef","updatePriceData","chartInited","setChartInited","scaleChart","timeScale","setVisibleRange","onCrosshairMove","seriesPrices","values","point","chart","createChart","offsetWidth","offsetHeight","layout","textColor","fontFamily","localization","timeFormatter","businessDayOrTimestamp","grid","vertLines","horzLines","rightOffset","borderVisible","barSpacing","timeVisible","fixLeftEdge","priceScale","crosshair","horzLine","vertLine","mode","subscribeCrosshairMove","series","addCandlestickSeries","lineColor","topColor","bottomColor","lineWidth","priceLineColor","downColor","wickDownColor","upColor","wickUpColor","interval","setInterval","resizeChart","resize","lines","createPriceLine","line","removePriceLine","deltaPrice","candleStatsHtml","candlestick","timeThreshold","average","ORDER_SIZE_DUST_USD","getTokenAmount","usdAmount","shouldSwap","receiveToken","isCollateralWrapped","isSameToken","isUnwrap","PositionSeller","keepLeverage","setKeepLeverage","prevIsVisible","savedRecieveTokenAddress","setSavedRecieveTokenAddress","swapToToken","setSwapToToken","maxAmountFormatted","maxAmountFormattedFree","convertedAmount","convertedAmountFormatted","nextLeverage","nextLiquidationPrice","isClosing","nextCollateral","isNotEnoughReceiveTokenLiquidity","isCollateralPoolCapacityExceeded","swapFeeToken","swapFee","isSwapAllowed","receiveAmount","convertedReceiveAmount","executionFeeUsd","residualSize","abs","deductions","collateralInfo","receiveTokenInfo","onClickPrimary","minProfitExpiration","minProfitTimeExpired","withdrawETH","prefix","warning","tokenOptionInfo","convertedTokenAmount","maxInUsd","maxIn","maxOut","maxOutUsd","fromInfo","toInfo","getSwapLimits","DEPOSIT","WITHDRAW","EDIT_OPTIONS","PositionEditor","nextLeverageExcludingPnl","isSwapping","setIsSwapping","isDeposit","isWithdrawal","resetForm","depositCollateral","collateralSnapshot","expectingCollateralChange","withdrawCollateral","SpinningLoader","ROOT_SHARE_URL","UPLOAD_URL","UPLOAD_SHARE","config","quality","canvasWidth","canvasHeight","getShareURL","imageInfo","PositionShareCard","positionRef","userAffiliateCode","uploadedImageInfo","uploadedImageError","sharePositionBgImg","deltaAfterFeesPercentageStr","homeURL","backgroundImage","gmxLogo","PositionShare","setIsPositionShareModalOpen","isPositionShareModalOpen","positionToShare","affiliateCodes","setAffiliateCodes","parsedAffiliateCodes","useAffiliateCodes","setUploadedImageInfo","setUploadedImageError","useCopyToClipboard","copyToClipboard","sourceLoaded","setSourceLoaded","img","Image","onload","useLoadImage","shareBgImg","tweetLink","hashtag","finalURL","encodeURIComponent","getTwitterIntentURL","toJpeg","dataUrl","download","click","PositionDropdown","handleEditCollateral","handleShare","handleMarketSelect","fontWeight","getOrdersForPosition","hasMatchingIndexToken","hasMatchingCollateralToken","PositionsList","positionsDataIsLoading","setListSection","showPnlAfterFees","setMarket","positionToEditKey","setPositionToEditKey","positionToSellKey","setPositionToSellKey","setPositionToShare","isPositionEditorVisible","setIsPositionEditorVisible","isPositionSellerVisible","setIsPositionSellerVisible","setCollateralTokenAddress","editPosition","sellPosition","onPositionClick","positionOrders","hasPositionProfit","positionDelta","borrowFeeRate","collateralAfterFee","hasLowCollateral","muted","netValue","deltaBeforeFeesStr","deltaAfterFeesStr","colSpan","hasOrderError","hasPendingChanges","OrderEditor","setEditingOrder","initialRatio","indexTokenMarkPrice","OrdersList","hideActions","cancelOrderIdList","setCancelOrderIdList","editingOrder","onCancelClick","onEditClick","renderHead","isAllOrdersSelected","allOrderIds","renderEmptyRow","renderActions","renderLargeList","markExchangeRate","orderId","prevState","indexTokenSymbol","collateralTokenInfo","collateralUSD","renderSmallList","getOrderActionTitle","actionDisplay","renderLiquidationTooltip","liquidationData","minCollateral","borrowFee","loss","getLiquidationData","liquidationsDataMap","TradeHistory","shouldShowPaginationButtons","pageIds","setPageIds","pageIndex","setPageIndex","liquidationsData","getMsg","trade","tradeData","defaultMsg","tokenAmount","tokenIn","tokenOut","amountOut","acceptablePrice","flags","isOrderExecution","isLiquidation","longShortDisplay","executionPriceDisplay","executionPrice","sizeDeltaDisplay","priceDisplay","getPositionDisplay","fromAmountDisplay","toAmountDisplay","amountInDisplay","minOutDisplay","tradesWithMessages","txhash","lastTrade","ExchangeWalletTokens","ExchangeBanner","hideBanner","xmlns","viewBox","transform","notifications","pushSuccessNotification","pushErrorNotification","getTokenAddress","applyPendingChanges","getPositions","positionQuery","updatedPositions","propsLength","collateralTokens","contractKey","hasRealisedProfit","realisedPnl","updatedPosition","closingFee","hasProfitAfterFees","pendingDeltaAfterFees","deltaPercentageAfterFees","getPositionQuery","Exchange","forwardRef","setSavedIsPnlInLeverage","savedShowPnlAfterFees","setSavedShouldShowPositionLines","showBanner","setShowBanner","bannerHidden","setBannerHidden","setUpdatedPositions","currentAccount","defaultTokenSelection","selectedSwapOption","newTokenSelection","positionDataError","useImperativeHandle","onUpdatePosition","onClosePosition","onIncreasePosition","indexTokenItem","onDecreasePosition","onCancelIncreasePosition","blockGap","timeGap","onCancelDecreasePosition","setIsPluginApproving","setIsPositionRouterApproving","isCancelMultipleOrderProcessing","setIsCancelMultipleOrderProcessing","onMultipleCancelClick","tx","wait","LIST_SECTIONS","listSection","LIST_SECTIONS_LABELS","Orders","Positions","renderCancelOrderButton","getListSection","section","hiddenLimit","Actions","useParams","checkSummedAccount","pnlUrl","updateOrders","OrdersOverview","openTotal","executedTotal","cancelledTotal","stats","positionsForOrders","openDecrease","openIncrease","openSwap","executedDecrease","executedIncrease","executedSwap","cancelledDecrease","cancelledIncrease","cancelledSwap","executeOrder","preventDefault","shouldExecute","nearExecute","diffPercent","invalidToken","invert","near","PositionsOverview","diffToLiq","feesPerHour","liqTime","Loader","ReferralCodeForm","callAfterSuccess","setReferralCode","inputRef","isValidating","setIsValidating","referralCodeExists","setReferralCodeExists","debouncedReferralCode","event","isEdit","cancelled","codeExists","checkReferralCode","focus","onSubmit","JoinReferralCode","Card","tooltipText","EmptyMessage","InfoCard","toolTipPosition","AffiliateCodeForm","handleCreateReferralCode","recentlyAddedCodes","setRecentlyAddedCodes","isProcessing","setIsProcessing","setError","referralCodeCheckStatus","setReferralCodeCheckStatus","checkCodeTakenStatus","takenStatus","buttonError","takenInfo","trimmedValue","getCodeError","AddAffiliateCode","AffiliatesStats","referralsData","isAddReferralCodeModalOpen","setIsAddReferralCodeModalOpen","addNewModalRef","allReferralCodes","finalAffiliatesTotalStats","referrerRebates","scope","stat","referrerRebate","rebate","explorerURL","TradersStats","traderTier","isEditModalOpen","setIsEditModalOpen","editModalRef","TRADERS","AFFILIATES","TAB_OPTIONS","Referrals","walletAccount","queryAccount","activeTab","setActiveTab","deserializer","mutateCodeOwner","useCodeOwner","referrerTier","mutateReferrerTier","useReferrerTier","registerReferralCode","isReferralCodeAvailable","renderAffiliatesTab","BuyInputSection","topLeftLabel","topRightLabel","onClickTopRightLabel","inputValue","onInputValueChange","onClickMax","showMaxButton","staticInput","tokenBalance","clickable","GlpSwap","isBuying","setIsBuying","history","useHistory","swapLabel","tabLabel","swapValue","setSwapValue","glpValue","setGlpValue","swapTokenAddress","setSwapTokenAddress","anchorOnSwapAmount","setAnchorOnSwapAmount","setFeeBasisPoints","tokensForBalanceAndSupplyQuery","balancesAndSupplies","lastPurchaseTime","RewardTracker","redemptionTime","inCooldownWindow","reserveAmountUsd","maxSellAmount","isSwapTokenCapReached","swapToken","swapTokenInfo","swapTokenBalance","glpAmount","swapUsdMin","glpUsdMax","feeGlpTrackerApr","stakedGlpTrackerApr","onSwapValueChange","onGlpValueChange","onSelectSwapToken","totalApr","getBuyGlpToAmount","nextValue","getSellGlpFromAmount","switchSwapOption","pathname","fillMaxAmount","nextUsdgAmount","payLabel","receiveLabel","payBalance","receiveBalance","selectToken","feePercentageText","arbitrum16Icon","avalanche16Icon","defaultTokenName","glp24Icon","arrowIcon","minGlp","buyGlp","sellGlp","tooltipIconPosition","tokenFeeBps","availableAmountUsd","amountLeftToDeposit","isCapReached","swapUrl","renderFees","BuyGlp","buyGLPIcon","imgSrc","align","rest","classNames","ConnectWalletButton","BuyLeveragePro","onNetworkSelect","Banxa","Synapse","Multiswap","Hop","Binance","avax30Icon","gmxAvax","gmxArbitrum","ohmArbitrum","BuyGMXGLP","buyGMXIcon","NftWallet","nftAddress","setNftAddress","nftId","setNftId","setReceiver","getTransferError","ERC721","transferNft","transferError","VEST_WITH_GMX_ARB","VEST_WITH_GLP_ARB","VEST_WITH_GMX_AVAX","VEST_WITH_GLP_AVAX","getVestingDataV2","combinedAverageStakedAmount","cumulativeReward","transferredCumulativeReward","bonusReward","transferredAverageStakedAmount","getVestingValues","minRatio","vestingDataItem","currentRatio","nextMaxVestableEsGmx","nextTransferredCumulativeReward","totalCumulativeReward","nextCombinedAverageStakedAmount","nextTransferredAverageStakedAmount","nextRatio","initialStakingAmount","nextStakingAmount","ClaimEsGmx","selectedOption","setSelectedOption","isArbitrum","esGmxIouAddress","esGmxIouBalance","arbRewardReaderAddress","avaxRewardReaderAddress","arbVesterAdddresses","avaxVesterAdddresses","arbVestingInfo","avaxVestingInfo","arbVestingData","avaxVestingData","stakingToken","arbitrumIcon","avaIcon","ValidationRow","isValid","BeginAccountTransfer","isTransferring","setIsTransferring","isTransferSubmittedModalVisible","setIsTransferSubmittedModalVisible","parsedReceiver","gmxVesterBalance","glpVesterBalance","cumulativeGmxRewards","cumulativeGlpRewards","transferredCumulativeGmxRewards","transferredCumulativeGlpRewards","pendingReceiver","gmxAllowance","gmxStaked","hasVestedGmx","hasVestedGlp","hasStakedGmx","hasStakedGlp","hasPendingReceiver","completeTransferLink","pendingTransferLink","CompleteAccountTransfer","sender","isCorrectAccount","homeEventsData","isActive","validTill","bodyText","buttons","newTab","appEventsData","Icon","strokeLinecap","strokeLinejoin","EventToast","button","useEventToast","visited","setVisited","isFuture","custom","EventToastContainer","useWindowScroll","breakpoint","createBreakpoint","XL","L","S","useBreakpoint","reverseOrder","gutter","containerClassName","containerStyle","right","toastOptions","Infinity","PageNotFound","homeUrl","tradePageUrl","ReferralTerms","TermsAndConditions","RedirectPopupModal","redirectModalVisible","setRedirectModalVisible","appRedirectUrl","setRedirectPopupTimestamp","setShouldHideRedirectModal","shouldHideRedirectModal","removeRedirectPopupTimestamp","NoJob","Jobs","scrollTo","locales","en","es","ko","ja","defaultLocale","dynamicActivate","locale","messages","i18n","load","loadLocaleData","plurals","zh","ru","fr","AddressDropdown","accountUrl","disconnectAccountAndCloseSettings","M","ensName","setENSName","JsonRpcProvider","lookupAddress","resolveENS","useENS","copy","externalLink","disconnect","ModalWithPortal","LANGUAGE_MODAL_KEY","NETWORK_MODAL_KEY","NetworkDropdown","currentLanguage","activeModal","setActiveModal","small","NavIcons","selectorLabel","DesktopDropdown","modalName","getModalProps","LanguageModalContent","NetworkModalContent","networkOptions","openSettings","getModalContent","velasIcon","NetworkMenuItems","settingsIcon","language24Icon","networkIcon","handleNetworkSelect","checkedIcon","LanguagePopupHome","isLanguageModalOpen","setIsLanguageModalOpen","AppHeaderUser","setWalletModalVisible","showConnectionOptions","connectWalletImg","getAccountUrl","AppHeaderLinks","clickCloseIcon","AnimatePresence","fadeVariants","slideVariants","Header","isDrawerVisible","setIsDrawerVisible","isNativeSelectorModalVisible","setIsNativeSelectorModalVisible","logoSmallImg","getLibrary","Web3Provider","autoRefreshOnNetworkChange","Zoom","cssTransition","enter","appendPosition","collapse","collapseDuration","FullApp","exchangeRef","connector","deactivate","useLocation","activatingConnector","setActivatingConnector","triedEager","tried","setTried","shouldTryWalletConnect","rawData","connected","SyntaxError","currentProviderName","isAuthorized","useEagerConnect","suppress","injected","handleConnect","handleChainChanged","handleAccountsChanged","accounts","handleNetworkChanged","networkId","removeListener","useInactiveListener","search","React","URLSearchParams","useRouteQuery","get","encodedReferralCode","queryParams","delete","navigator","disconnectAccount","connectInjectedWallet","userOnMobileDevice","userAgent","attemptActivateWallet","walletModalVisible","selectedToPage","setSelectedToPage","isSettingsVisible","setIsSettingsVisible","setSavedSlippageAmount","slippageAmount","setSlippageAmount","isPnlInLeverage","setIsPnlInLeverage","shouldDisableOrderValidation","setShouldDisableOrderValidation","setShowPnlAfterFees","setSavedShowPnlAfterFees","setSavedShouldDisableOrderValidation","decodedRefCode","checkPendingTxns","updatedPendingTxns","getTransactionReceipt","receipt","wsVaultAbi","wsProvider","getWsProvider","wsVault","wsPositionRouter","callExchangeRef","off","slippage","limit","hideProgressBar","newestOnTop","closeOnClick","draggable","pauseOnHover","metamaskImg","hasCoinBaseWalletExtension","coinbaseImg","walletConnect","UserRejectedRequestErrorWalletConnect","getWalletConnectHandler","walletConnectImg","basisPoints","App","unlisten","listen","useScrollToTop","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"igskBAAA,OAAe,cAA0B,qC,u0uCCAzC,OAAe,cAA0B,yC,81kHCAzC,OAAe,cAA0B,qC,kCCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,yC,owqDCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,uC,8ECAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,wC,wCCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,oC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,0C,yDCAzC,OAAe,cAA0B,qC,6CCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,8C,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,yC,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,kC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,+C,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,oC,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,yC,+BCAzC,OAAe,cAA0B,oC,+BCAzC,OAAe,cAA0B,gC,+BCAzC,OAAe,cAA0B,oC,+BCAzC,OAAe,cAA0B,6C,+BCAzC,OAAe,cAA0B,iC,+BCAzC,OAAe,cAA0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","file":"static/js/main.e0d217ca.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/ic_bsc_16.8de996f1.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_custom.fd35b66a.svg\";","export default __webpack_public_path__ + \"static/media/ic_glp_40.087335c1.svg\";","export default __webpack_public_path__ + \"static/media/ic_binance_logo.46794a16.svg\";","export default __webpack_public_path__ + \"static/media/ic_language24.ceaebef6.svg\";","export default __webpack_public_path__ + \"static/media/ic_checked.b4f2217c.svg\";","export default __webpack_public_path__ + \"static/media/ic_glp_24.eff381d9.svg\";","export default __webpack_public_path__ + \"static/media/ic_velas_24.d647cbd7.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_40.8cd483b1.svg\";","export default __webpack_public_path__ + \"static/media/ic_wallet_24.4be97369.svg\";","export default __webpack_public_path__ + \"static/media/ic_arbitrum_96.b12913b6.svg\";","export default __webpack_public_path__ + \"static/media/ic_avalanche_96.b6255c50.svg\";","export default __webpack_public_path__ + \"static/media/ic_banxa.06412144.svg\";","export default __webpack_public_path__ + \"static/media/ic_multiswap.e577f4fa.svg\";","export default __webpack_public_path__ + \"static/media/ic_settings_16.9d97766b.svg\";","export default __webpack_public_path__ + \"static/media/ic_synapse.b100121a.svg\";","export default __webpack_public_path__ + \"static/media/ic_velas_16.d647cbd7.svg\";","export default __webpack_public_path__ + \"static/media/logo_GMX_small.f593fa5c.svg\";","export default __webpack_public_path__ + \"static/media/ic_eth_40.5e255508.svg\";","export default __webpack_public_path__ + \"static/media/DROP_DOWN.ef525fad.svg\";","export default __webpack_public_path__ + \"static/media/buy_gmx.01459500.svg\";","export default __webpack_public_path__ + \"static/media/coinbaseWallet.ae86a337.png\";","export default __webpack_public_path__ + \"static/media/gmx-logo-with-name.03a4464f.svg\";","export default __webpack_public_path__ + \"static/media/ic_arbitrum_16.f4c1a9fe.svg\";","export default __webpack_public_path__ + \"static/media/ic_avalanche_16.90aca01d.svg\";","export default __webpack_public_path__ + \"static/media/ic_avax_30.403cd87e.svg\";","export default __webpack_public_path__ + \"static/media/ic_bsc_96.369f1d28.svg\";","export default __webpack_public_path__ + \"static/media/ic_buy_glp.8eb00e6a.svg\";","export default __webpack_public_path__ + \"static/media/ic_coingecko_16.ef20d202.svg\";","export default __webpack_public_path__ + \"static/media/ic_convert_down.74b7eb02.svg\";","export default __webpack_public_path__ + \"static/media/ic_copy_16.fafdf331.svg\";","export default __webpack_public_path__ + \"static/media/ic_cost.56371371.svg\";","export default __webpack_public_path__ + \"static/media/ic_discord.be4d716c.svg\";","export default __webpack_public_path__ + \"static/media/ic_github.dbd4de8a.svg\";","export default __webpack_public_path__ + \"static/media/ic_glp_custom.11dd75db.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_arbitrum.59f04e87.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_avax.fb50658c.svg\";","export default __webpack_public_path__ + \"static/media/ic_hop.0f4a98a0.svg\";","export default __webpack_public_path__ + \"static/media/ic_liquidity.f00d35e4.svg\";","export default __webpack_public_path__ + \"static/media/ic_medium.f6051b2e.svg\";","export default __webpack_public_path__ + \"static/media/ic_metamask_16.aa3dce32.svg\";","export default __webpack_public_path__ + \"static/media/ic_new_link_16.5b7cb7bf.svg\";","export default __webpack_public_path__ + \"static/media/ic_olympus_arbitrum.b358dc93.svg\";","export default __webpack_public_path__ + \"static/media/ic_sign_out_16.1b0564f3.svg\";","export default __webpack_public_path__ + \"static/media/ic_simpleswaps.4cd51f2a.svg\";","export default __webpack_public_path__ + \"static/media/ic_stats.f0a18011.svg\";","export default __webpack_public_path__ + \"static/media/ic_telegram.af1a4a66.svg\";","export default __webpack_public_path__ + \"static/media/ic_totaluser.e274ef10.svg\";","export default __webpack_public_path__ + \"static/media/ic_trading.2c53815a.svg\";","export default __webpack_public_path__ + \"static/media/ic_twitter.9f35b403.svg\";","export default __webpack_public_path__ + \"static/media/ic_velas_logo.d647cbd7.svg\";","export default __webpack_public_path__ + \"static/media/logo_GMX.b956aa96.svg\";","export default __webpack_public_path__ + \"static/media/long.0bc4a064.svg\";","export default __webpack_public_path__ + \"static/media/metamask.4b5d438a.png\";","export default __webpack_public_path__ + \"static/media/position-share-bg.900fbfaa.png\";","export default __webpack_public_path__ + \"static/media/short.1f94a0c2.svg\";","export default __webpack_public_path__ + \"static/media/swap.40fb8e49.svg\";","export default __webpack_public_path__ + \"static/media/walletconnect-circle-blue.31c29967.svg\";","export default __webpack_public_path__ + \"static/media/ic_arbitrum_24.21ec7bfe.svg\";","export default __webpack_public_path__ + \"static/media/ic_avalanche_24.be4891c9.svg\";","export default __webpack_public_path__ + \"static/media/ic_avax_24.43583fc4.svg\";","export default __webpack_public_path__ + \"static/media/ic_avax_40.ba220dde.svg\";","export default __webpack_public_path__ + \"static/media/ic_bnb_24.369f1d28.svg\";","export default __webpack_public_path__ + \"static/media/ic_bnb_40.369f1d28.svg\";","export default __webpack_public_path__ + \"static/media/ic_btc.b_24.bab8cadc.svg\";","export default __webpack_public_path__ + \"static/media/ic_btc.b_40.1560513c.svg\";","export default __webpack_public_path__ + \"static/media/ic_btc_24.f992927a.svg\";","export default __webpack_public_path__ + \"static/media/ic_btc_40.1560513c.svg\";","export default __webpack_public_path__ + \"static/media/ic_busd_24.2432ce58.svg\";","export default __webpack_public_path__ + \"static/media/ic_busd_40.2432ce58.svg\";","export default __webpack_public_path__ + \"static/media/ic_dai_24.bafa9da6.svg\";","export default __webpack_public_path__ + \"static/media/ic_dai_40.6f901476.svg\";","export default __webpack_public_path__ + \"static/media/ic_eth_24.6b1d8a1d.svg\";","export default __webpack_public_path__ + \"static/media/ic_frax_24.7349c478.svg\";","export default __webpack_public_path__ + \"static/media/ic_frax_40.1e127166.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_24.2b59d7e0.svg\";","export default __webpack_public_path__ + \"static/media/ic_link_24.0d641e52.svg\";","export default __webpack_public_path__ + \"static/media/ic_link_40.4bb3a048.svg\";","export default __webpack_public_path__ + \"static/media/ic_mim_24.b6a1708c.svg\";","export default __webpack_public_path__ + \"static/media/ic_mim_40.42c8b575.svg\";","export default __webpack_public_path__ + \"static/media/ic_settings_24.25d2f4a7.svg\";","export default __webpack_public_path__ + \"static/media/ic_tether_24.a7c88dcd.svg\";","export default __webpack_public_path__ + \"static/media/ic_uni_24.47e903f7.svg\";","export default __webpack_public_path__ + \"static/media/ic_uni_40.efe1f12f.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdc.e_24.0952740b.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdc.e_40.27f415ba.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdc_24.0952740b.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdc_40.27f415ba.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdt_24.5ab8778d.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdt_40.e357d24a.svg\";","export default __webpack_public_path__ + \"static/media/ic_wavax_24.43583fc4.svg\";","export default __webpack_public_path__ + \"static/media/ic_wavax_40.ba36eda4.svg\";","export default __webpack_public_path__ + \"static/media/ic_wbnb_24.369f1d28.svg\";","export default __webpack_public_path__ + \"static/media/ic_wbnb_40.369f1d28.svg\";","export default __webpack_public_path__ + \"static/media/ic_weth_24.bc395894.svg\";","export default __webpack_public_path__ + \"static/media/ic_weth_40.334ca16a.svg\";","var map = {\n\t\"./Anyswap.png\": 514,\n\t\"./Anyswap.svg\": 515,\n\t\"./Artwork.svg\": 516,\n\t\"./Artwork_gmx.svg\": 517,\n\t\"./Banxa.png\": 518,\n\t\"./DROP_DOWN.svg\": 285,\n\t\"./Hop.png\": 519,\n\t\"./Hop.svg\": 520,\n\t\"./Hop_dark.png\": 521,\n\t\"./Hop_dark.svg\": 522,\n\t\"./Synapse.png\": 523,\n\t\"./Synapse.svg\": 524,\n\t\"./binance.png\": 525,\n\t\"./bscscan.png\": 526,\n\t\"./btn_big_arbitrum.png\": 527,\n\t\"./btn_big_avalanche.png\": 528,\n\t\"./btn_big_bsc.png\": 529,\n\t\"./btn_big_purchasegmx.png\": 530,\n\t\"./btn_big_purchasegmx.svg\": 531,\n\t\"./buy_gmx.svg\": 286,\n\t\"./buy_gmx_bond.svg\": 532,\n\t\"./buy_transfer_eth.svg\": 533,\n\t\"./coinbaseWallet.png\": 287,\n\t\"./coingecko.png\": 534,\n\t\"./cross.svg\": 535,\n\t\"./flag_en.svg\": 536,\n\t\"./flag_es.svg\": 537,\n\t\"./flag_fr.svg\": 538,\n\t\"./flag_ja.svg\": 539,\n\t\"./flag_ko.svg\": 540,\n\t\"./flag_ru.svg\": 541,\n\t\"./flag_zh.svg\": 542,\n\t\"./glp_icon.svg\": 543,\n\t\"./gmx-logo-final-white-small.png\": 544,\n\t\"./gmx-logo-final-white.png\": 545,\n\t\"./gmx-logo-final.png\": 546,\n\t\"./gmx-logo-glow.png\": 547,\n\t\"./gmx-logo-with-name.svg\": 288,\n\t\"./gmx_logo.svg\": 548,\n\t\"./graphite-01.png\": 549,\n\t\"./ic-communityproject.svg\": 550,\n\t\"./ic_arbitrum_16.svg\": 289,\n\t\"./ic_arbitrum_24.svg\": 356,\n\t\"./ic_arbitrum_96.svg\": 236,\n\t\"./ic_arbitrum_hover_16.svg\": 551,\n\t\"./ic_arrowleft16.svg\": 552,\n\t\"./ic_arrowright16.svg\": 553,\n\t\"./ic_avalanche_16.svg\": 290,\n\t\"./ic_avalanche_24.svg\": 357,\n\t\"./ic_avalanche_96.svg\": 237,\n\t\"./ic_avax_24.svg\": 358,\n\t\"./ic_avax_30.svg\": 291,\n\t\"./ic_avax_40.svg\": 359,\n\t\"./ic_banxa.svg\": 238,\n\t\"./ic_binance_logo.svg\": 168,\n\t\"./ic_bnb_24.svg\": 360,\n\t\"./ic_bnb_40.svg\": 361,\n\t\"./ic_bsc.svg\": 554,\n\t\"./ic_bsc_16.svg\": 126,\n\t\"./ic_bsc_96.svg\": 292,\n\t\"./ic_btc.b_24.svg\": 362,\n\t\"./ic_btc.b_40.svg\": 363,\n\t\"./ic_btc_24.svg\": 364,\n\t\"./ic_btc_40.svg\": 365,\n\t\"./ic_busd_24.svg\": 366,\n\t\"./ic_busd_40.svg\": 367,\n\t\"./ic_buy_glp.svg\": 293,\n\t\"./ic_cash.png\": 555,\n\t\"./ic_cash.svg\": 556,\n\t\"./ic_checked.svg\": 192,\n\t\"./ic_coingecko_16.svg\": 294,\n\t\"./ic_coingecko_hover_16.svg\": 557,\n\t\"./ic_convert_down.svg\": 295,\n\t\"./ic_copy_16.svg\": 296,\n\t\"./ic_cost.svg\": 297,\n\t\"./ic_dai_24.svg\": 368,\n\t\"./ic_dai_40.svg\": 369,\n\t\"./ic_discord.svg\": 298,\n\t\"./ic_eth_24.svg\": 370,\n\t\"./ic_eth_40.svg\": 270,\n\t\"./ic_frax_24.svg\": 371,\n\t\"./ic_frax_40.svg\": 372,\n\t\"./ic_github.svg\": 299,\n\t\"./ic_glp_24.svg\": 193,\n\t\"./ic_glp_40.svg\": 164,\n\t\"./ic_glp_custom.svg\": 300,\n\t\"./ic_gmx.svg\": 558,\n\t\"./ic_gmx_24.svg\": 373,\n\t\"./ic_gmx_30.svg\": 559,\n\t\"./ic_gmx_40.svg\": 225,\n\t\"./ic_gmx_64.svg\": 560,\n\t\"./ic_gmx_arbitrum.svg\": 301,\n\t\"./ic_gmx_avax.svg\": 302,\n\t\"./ic_gmx_big.svg\": 561,\n\t\"./ic_gmx_custom.svg\": 137,\n\t\"./ic_gmx_footer.svg\": 562,\n\t\"./ic_hop.svg\": 303,\n\t\"./ic_info.svg\": 563,\n\t\"./ic_language24.svg\": 169,\n\t\"./ic_link_24.svg\": 374,\n\t\"./ic_link_40.svg\": 375,\n\t\"./ic_liquidity.svg\": 304,\n\t\"./ic_medium.svg\": 305,\n\t\"./ic_menu_dots.svg\": 564,\n\t\"./ic_metamask_16.svg\": 306,\n\t\"./ic_metamask_hover_16.svg\": 565,\n\t\"./ic_mim_24.svg\": 376,\n\t\"./ic_mim_40.svg\": 377,\n\t\"./ic_multiswap.svg\": 239,\n\t\"./ic_new_link_16.svg\": 307,\n\t\"./ic_olympus.svg\": 566,\n\t\"./ic_olympus_arbitrum.svg\": 308,\n\t\"./ic_selector_dropdowns.svg\": 567,\n\t\"./ic_settings_16.svg\": 240,\n\t\"./ic_settings_24.svg\": 378,\n\t\"./ic_sign in_16.svg\": 568,\n\t\"./ic_sign_out_16.svg\": 309,\n\t\"./ic_simpleswaps.svg\": 310,\n\t\"./ic_stats.svg\": 311,\n\t\"./ic_stats_big.svg\": 569,\n\t\"./ic_synapse.svg\": 241,\n\t\"./ic_telegram.svg\": 312,\n\t\"./ic_tether_24.svg\": 379,\n\t\"./ic_tokens.svg\": 570,\n\t\"./ic_totaluser.svg\": 313,\n\t\"./ic_trading.svg\": 314,\n\t\"./ic_transfer_avax.svg\": 571,\n\t\"./ic_twitter.svg\": 315,\n\t\"./ic_uni_24.svg\": 380,\n\t\"./ic_uni_40.svg\": 381,\n\t\"./ic_usdc.e_24.svg\": 382,\n\t\"./ic_usdc.e_40.svg\": 383,\n\t\"./ic_usdc_24.svg\": 384,\n\t\"./ic_usdc_40.svg\": 385,\n\t\"./ic_usdt_24.svg\": 386,\n\t\"./ic_usdt_40.svg\": 387,\n\t\"./ic_velas_16.svg\": 242,\n\t\"./ic_velas_24.svg\": 194,\n\t\"./ic_velas_logo.svg\": 316,\n\t\"./ic_wallet_24.svg\": 226,\n\t\"./ic_wavax_24.svg\": 388,\n\t\"./ic_wavax_40.svg\": 389,\n\t\"./ic_wbnb_24.svg\": 390,\n\t\"./ic_wbnb_40.svg\": 391,\n\t\"./ic_weth_24.svg\": 392,\n\t\"./ic_weth_40.svg\": 393,\n\t\"./lg_arbitrum.svg\": 572,\n\t\"./logo_GMX.svg\": 317,\n\t\"./logo_GMX_small.svg\": 243,\n\t\"./long.svg\": 318,\n\t\"./metamask-text.svg\": 573,\n\t\"./metamask.png\": 319,\n\t\"./page-not-found.svg\": 574,\n\t\"./position-share-bg.png\": 320,\n\t\"./short.svg\": 321,\n\t\"./swap.svg\": 322,\n\t\"./trading.jpg\": 575,\n\t\"./wallet-connect-text.svg\": 576,\n\t\"./walletconnect-circle-blue.svg\": 323,\n\t\"./wave-01.png\": 577,\n\t\"./wave-02.png\": 578\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 513;","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQgAAAAsCAMAAACuYtZZAAAAZlBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+Vn2moAAAAInRSTlMABhQdEgsKKUeEstIZdbP/wlfRwTjgpJRm8fDhhaNlk3ZW+c569wAAAsRJREFUeAHs0AEBwEAMAjFaCv4lbz7+IiHSrJ+3I40vfVzOo72it3JaxHLxI4IIIogggggiiCDia9cMdx5FwSj8aw84Ug4qCoL96t7/Te68YL7GjrPpn0nsxCepLXrA8IQ3NoY/IULp5keLJ0YbHKM1/gfd3PQni7Ak6b6bXU9y8DigIz1+hx9JsvefKwITyfBsVCIOgrPkjlGp7WDiPJqPFWF6kvHpISgox6R+DXKyI35DpK6LJn6oCPEwW/rNw6bEZC4Hc+0iu/Irmttw7wDdKKB8bSKwaDRPF6bpANUM96/aTT2GR3dOEeLBY9p7ABY6vDJkGJakG1N24krVdp+h5qRRaceyNPptgfg0O8dBuiVKt/spRbTiAa8esP4qQjFIxABwnMq85GO2K3Hm+PBVogcCqWp8zAaIMrKTHAL1CUVE8sgDJk7YU+fXlYgrOiJVneBaxjBrS44d4LkC41SOFtClergALkPI7oQiJoYjD5HUeGFMzU/qGi9T0ZKZ+1IZFRMzY5mpZ2ctvLTMfWQaiogAwY4nFOG4HHuY8ILnhtqJCFSlMryvKnIv57DOWGlWKph+Dstii4h6r8BTiggvHnQ88iCBTv8kct2JUAylMtyIgsvirOstFKNrJdV9l4atkTOWRmRSOw9YORx5QHIo5HEnAjaVylhrf5WsZKy0WivSYkmtRQQ9RFM4oQiTmW76q3/WReChh/h8sPqdiI51Yi1/3L4eafZ1DFOOClBz/69+sIiQe93SbE4oAj5TmOOzWHj0pLc0KChOOxHI9EXpMpN0ul5pZWi2pZFl+LkHnJOMUyf9Z7m0bIP6blNY8D59xoZROETV88Wf/5T3Eb6dVm3wPp4r3sS5v/bFjL83KRtcIlRL6/EuYfkbRFzvLC8Rl4hLxCXiEnGJuET8A+HaTFa3F17bC68Np9uG02sL8rYF+T+idSlyqmiqtwAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/Anyswap.491d1f32.svg\";","export default __webpack_public_path__ + \"static/media/Artwork.a2d41b8c.svg\";","export default __webpack_public_path__ + \"static/media/Artwork_gmx.cc61d732.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAAoCAMAAABO8gGqAAABcVBMVEUAAAAoKDwnKTsnKTsnKTuGh5HJyc6urrWFhpA1Nkehoqrx8vO7vMF4eoVCRFRrbHhQUWARbooBqMcRcojKys////+vr7ZdX2zW19ry8vMUZIIBo8cBqMYBrMUUbYCTlJ0iN00BnsgAoscArMUDqbwiO0zl5ee8vcLX2NsNd50Bp8YBrcYAscQPgpHk5OYeRF8AmcgAo8cUaYEBssUAtsMdTl0Gh7gBmckPdpMPe5IBtsQIn6mgoalcXmtqa3gWVnoBlcoAmckDmMAlMUQiOUwDqr0Bu8MYYm4lL0QDicIBlMoAu8MDtrolM0MSYI0Bj8oFi7clMkQFpbMAv8EUd34iNU0Bi8sBkMsbTGgZXm8AwMIAxMEiPUwKb6gBi8wLeqcKl6EAv8IBxcEMl5YbRWkBhs0gPVYgRFUBwMIAycAdUlwGeLwBhswRY4wPh48Fuq8UVoQBgs0Azr8YaWwKbKkBzsAKqZ4ZS3IDfcQCxLcbXmRL8BeXAAAABHRSTlMAM7D2JaXEwgAAAp1JREFUeAHszjEBADAQArF7wL/myigDURA4OaWsg3OK+VCqCaeaSbkFF/xswQUfa2XRJa8OxNFNYF6gvUkz7u7u7u7u7m6f/1UqZArW/9wNhZ26kd+JZWvy/uMsjOPGQg8c247rOmHblrwm4a8UQ+K2HUswIp3JGhL0BOEmGRGHBzm6FYA29IXwUBCe5eMgUlAVQKUpLCouKTUvKFyaBO4KwCdBSSoqyMrgWV7wcUGK/VFeUZmpqq4xJej4SLIWSlpSIbGjgm6KBJE6eGgxVo/TSzRUFDU2NbeYEvRpUT39OCE7h9sKpJVHBblU8x0hh0a0tVd0dFZ1dfcYFrRCgp6sy6QRCeb0liNBligQwoXndSxEb19FPxtoHhwyJDg8goy6lAofNxyH7mUk6Ftqy5Eg1pJ6zoix8YnJKTY90z07ZzokQvepVa5xyg0mRs6hQ4KIpdJDzC8s9hXCtXRwaXnFtGDeX9MCHryNkaD6Oh4VrBcYFGJ1bXxdXjc2Z7e2jQjWlyk8lAC4q1v6+IgEVSjCgjmBJJlmZ3dvcR+rg6XDo2MzIaG6LGhaS/3zSTAIBaaJFrhePkuxgJPTtbOgPL+4vDIqWKYap1CGUhoPCbIUPBBaEM+SWu4Livv1ze7eLVPc3R89PBoQ1MvDW9UMetifpF1OgtKJBFPBCWIJPdHs6fn0hWleLx/eDAi6tgK6iYQ2COOQIBBHQT0iNb85HbD3j2fYg30VcBY3D8IefPj8MprieNAsikeC2sbTAXboRJG5+v54Pl0bn5BncVf37MXlw8/vPwrWkUdBXQrXrVZEKZDa8DDFyLAO92r0RCmA6/8rr0iFhKCWNjAEgWmwsmq0RY0XjDpw1IGjDhx14KAfwBz0Q8CDfhB90E9DAACtALoxSNWoNwAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQgAAAAsCAYAAACZvCZrAAAFLElEQVR4Ae3aBWwcRxTG8QjKQqsUEtOJpTJzw+U2zMmGmZlJVIYwYznMya0ZjslU58Jo2Nu43L7Os2ej7eiMMt+30s8ws+a7f2Zn044PIrpbeFDonPAA4EHhbnsceDBJeEC4P2EBwAOyBZ0rIiFrkWSdAAAgm/BgO1kKdeUAAFhJdJaBUCYBABAIAKhzIAAAEAgAQCAAAIEAAAQCABAIAEAg8tcEHIExrqhPc/ui26Pt78wBAAIRmRXs4h3pIe9wH3lGBLa30V80AAJx6aszT0dXHFt+bslxZ+H841Q49xTlzzpDeTOcFJmWHM2dlr4/PD1zBq8a7qwgluU7vMP95B4cINfAMLlGFfbm8QbmELoIVa1Q2qvzANCAgbjyyekuRYuPUNHCY1Q4/wQVzLHioFNkajKFJ6dRaEI6BcdlkX9MDvlHe5zBCcGR/LHuoSE9R8Qhu18eZfYuKIuuvdnQT9QVVHl0qWK+izoP0IAQiPOrTmpFC49TwTyOw2nKm3mW8qaLOExJqYhDcEKGiEO2CEMO+TQ3eYd7yTMsQK7BQZ9reO7MrL4ch0JKf7+I0j88vx+BgDYGlxiFi07PLFygr8ifp888tyKzS8ESV5eCha4ukRkuLTzR9YV/tMvvG+khD8dhqIjDoBDl9I9QVp98yvyI43CO0t45Tym9LlJG72saAgEJBpuUvOfg00IrcgaGjOz+uZRZEYdfKO09jsMFSu51iZJ7XKWzXa6VucbecrSAQIwU9gtOYXu8c+TYcuV8thz7GoBA1ENgftSR1a/gQMaHHIcopb4t4tDzEundOQ7X6czrt4SSA80YiPaCT46fF3T5mo/98T6/7Xxd4iMqPI0HGyR8IMx9W3sbO74pMw/+UOt/+dP7np+Z+vZFEYfLIg7X6OyblXE49UoJnXzJoAYOhE9wxuGLEwinHFPvqsyU4yvifH6/YP/ZOQyG/Fx4wAECEdvxDZk719bpCZH24TVN78ZxuEGnXyumUy+X0skXY3TipdsNvYLwC3ocfiUQDiUCqgNCWQ0rFHUOqwjAJYa5Y+15EQiK7V6/oi4fl/xOsXb6NV41lJKza7l2ppvZO7yC2jfTJUbvGs6fqczLz48N0LgAgeDLitjezSPN3eu/4FUEu/3Tzjo9KU6/VrrjxAsmnXih/EAz3+acWcP5vesRCA0POEjcQFgrB46DZefasl/376n10ppXDMeeLT9/9KnfKX3gH45mDEQXZf9B9YWcdyifv31NMQFIvEDk6O1tYVCVmfs2abVeRfT4q8vhx/887xxIzRkIdl6Iqk96+X6ZoKufv4o9C6dg4HYnJPQKIrZjrd+KgrqS4PfN3es+55DU5XM2cyB6225TjpRzM2QcDOFp9fPbboF+JDnl2Ew82CChA8GXEhyD6vAt0NiejTN4v6IVBMIa99P/D12Jg/r5z9vONay9BwDc5ty7cYUSBUNZSdjfdpp7NnzOG5vGd9u6sPLvxNt7NizncQ5JC/pFta8yLvE3KR3S/QAIhE1sp7zUkMx9WzTewJTv14m1wdmiKYEAQCBquNSwrxSMnet28DhvVJoyHvb5qt43dnxt8KVIGwoEAALBYns3zLQ/4dX/L1Exv3PdAXVlwe/zOM+3ojgwzbqrAYBA1IK5a50uVwa2SwUAQCDkSqFyRbDWj180AAIBAAgEACAQANDwEAgAQCAAAIEAAATiAdsgAMADViAeFJKsCQAA2YQHORB3cynkAFYSAFg5JMkm3N2ODxmJB3kQABLeg1Yc/gOptOvB5Z4VkgAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/Hop.4b77c9e3.svg\";","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/Hop_dark.423942af.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQgAAAAsCAMAAACuYtZZAAABmFBMVEUAAAD///////////////////////+PcOZ/UON5R+KNT+iFQeWSYOi4hfWIP+aRP+iIP+WUP+ibPeqSPOiiauz///////////////95VON4U+O3N/C1LO9+WOL///////9yS+F4SeO/JvK+IvF4SOP///////////////9+WOWHVeXRQPbKHvTRO/b///////////+pOOyxKu6+KfG7JvCxKu+wRPH///////////////////////////////////+qL+21J+/CIvLTS/PCIPK2J++sMuz///////////+eT+2iOOu3QfG8MPDNQPbUH/beGff1Zv/gGPjVIfXNNvS+MvOiNuv///////96SOKHQeaZQ+noMvrvDfv3A/3vC/vmRPmHP+V6R+J7SOKIQuaXQefvDfz3Bf2ZQeehNuuzPu27MPDUHfbeG/fTIfWiNuurMuy2J/DBIPGtQO2wKu68KPGwKe7NKvXKHvR3SOJ4SOJ3UuK/SfG0Ku+7QfF7V+OUPuidPeqIQOaRPueQP+eQT+iFQOV6R+MNOs0rAAAAhnRSTlMABhQdEgsKKXb/V/84Gf+z/7OF4SkpZYRWdnVmwVeT////wv//lIU4s1dXOMI44MLSdv+U0v9H4dFHV6PBGbJ10v/gKf//o/DxZkekR3Y4lIUZk4VHZrN2pPHwdjiz/8Ip8fDS4Xaz4XazV3WUhYWkpP//V/+z/2bB//+FOMJHZrKF/8KzVzMrutwAAANDSURBVHgB7NDFAQRBCERRfHxa8091PYK9Ur8Fzo+IRdMnTMRqHslzUyaxQGFC6oHClfQ90f8QgAAEIACxAOLTuq2AeLcfOyDO67dcZ2qI8y6/rdQzM8TV+m/rYz65LYvt9nkgju7mDWSXp2Q5JdsfxkqscmunzMzMzPjqf4+isrv3iQq6yZzfQlf4W5gZZhkrYRHlFRoqqyo1VVckZGuQmlm6ImrrNNQ31GtqrP0ZtZDbYGeQl6yIpmYNLa1tmpqbfkYdV3WeU9JnxF9//6Pp3//+T45mfdUJDsJkRDkTmMlEPjClqhj59g4iYcqOIK8QmBnkDSiW24MalnoRnV3dPQp6evv6k6MW5mWRBFrUOdmY8ui6GMYF6ccUhQyAox+5HvoSwMYsEaiy50ZYSLeIgcGh4ZHRMYDxicmp6aGZgaSodBHbDUmYdYAGOQsCURBxGn4OgEUZIk+SrTmAjEcrhypBJADkHLIUi5hfWFT90vLK6pqixfWNpLCYi1AtiwINzUL2tjZcF8C2iTIOiWCEcxgXHEk5pqyRzGguxSI2t7aLInZ2d5YU7W1tQnKz52jJS5p4x6NpL7yJANNH9H0E4BFQy6GI/8J8hw1quwTUQjfdW2P/4HDq6Bhg/Phk6vDgNGlrSCFVP0urYQ6ZmmOB4k2EhXOcW1kSoU9VqjHuIgaStourWiblh+XZ+YU+LC/Oz5LXAs7q8c2qDxayLyL0JiERqI0x0EtjDgooFNss5SIur641Xd9cJkcjX1LH1ZA8h3bGFxE8BhYqEVxfKhBliHwXZBQULfIUi6hu1nB7d6upufpnNIehWWa2ozruCoizX0W4oSGMMFIisEYYvjpQYxI1WKBAYIiO0JNpfmLf/3hiP9QmZIWLiBGXxDJC9lWEpKrFkdFFmkXM5qjCI4ooj/F3OCfT/I54fNTw9Pyi6fXxl0vjnRwvwRT9K54R7H3EjL2T/WdDoRve0AhlNTbwEmGOJZ42opr8UB6YaWqGslqaCA7MqFuLuxuw4QmIkTJUJ2ruoYEns3vqD/XB29a2VjA9OpzfPjqcPzrBgxWMBsRoQIwGxGhAjAYEK4geXUwGXV44urwQuuB0dMEpdAny6BJkAMRHfxzYlb9eAAAAAElFTkSuQmCC\"","export default __webpack_public_path__ + \"static/media/Synapse.3cfd1d07.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQgAAAAsCAMAAACuYtZZAAAAn1BMVEUAAAD////////////////////////1vjzzuzPzui/yvDTyujD////////////////2xE3/////////////////1nrzuzH////////////////zvTb1wELzvDL0wEbyvDb////////////////////////0uzDzuzHzuy/////////////////////////////0vDLyujD////////1wD3k7xDPAAAANXRSTlMABhQdEgsKZqT/o/EpRzgZOIX/wcIZ0nbx4JSEScJFiVeEk6NlsvbR8vDS4dFmpLPB8FZ1ZcrSjpcAAAKDSURBVHgB7NABAcBQFAFAD/SPvPX4LsIBRz2PB5ycPi7Wge7UhNJpBHV+i1jEIr527aipUR8IAPjTP4KSpGxigaoK0P49AFDv7vt/ttvNmpnrVfrgE7TZmcBOlIf8Jlkk5hsQNwHCRRTfBgjnEKNEgCAHkrhyCHJgieuGYAeWuGYIdri7uTsjkUgKRamW6kIh2GEjNmckUnBh0ECCvUyI+y07CJbY3n8NkUkps7wQQtndRUKQBDuQxIwDQki67UBdao14eESJpw1ebpFg84SX55dZiJJulWtJbWopKGRtqoTqSJXIxlSaOxtTl8LF/mDqZOkQD/H/jzwtXuNXngzPP+KXOYhDroWAFNuh7WwONNQGOttTJqEBa6HVrrPHzgYzPbifj0uGIIeYJdAhZgl0iE8lUhiMMUWOHAxBF91bGv6EfbaljLQUpK6kYOdIwzf0jJ5ArgRiy3VyHqKz1vZQe4iee+nFqt2YE4RwVdSiTmEFxbRjF4z8bS1LY8sO55fG6BCoTR5ClAeAwoBEiPETQvPoKTIYDEVbrKFYvlOxjKhYvp8vlqKzBMGNIUqwaZp2DkIyhJ8GfipxLByC68PH5+vzg+vEPIQ9gbAdZdkRhOBFIpRCp9KnS4egOkkS5MAVcx5CwXQCMVA2HENMrXuftpPQueEH01X8iU0S7BBHMzOiqaqqafPkGIJaJX8aOIZI8vaX3Bf02yOYvdy3vV48hJf47R3mvzXyt0T8CyF2AGAzGP+GEMpSr1sOZY/ppFf2GR6Jb4T6cpRS+NBqdRszUdiq8w5h89Y7hO18cggQ4R88sxEgAkSACBABIkD855JwmCwcL+Tjhf7AaThwGo4g8xHkP7gaLtKObnJaAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/btn_big_arbitrum.ff6ad480.png\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAf8AAAB/CAMAAADW6DvgAAABF1BMVEUbIDIeITUbHDAXGCwhGi2HLjhhJjNhJzNOIzJPIzI8HzBYJjNrKDRqKDRYJTM7Hy+QMDhGITGsNTwqHC51KjWaMTqPMDkzHi8eIDYbHDBFITB0KjYeITaiMzt+LDceITajMzt9LDdCIDCZMTo4HzA+IDBLKDmBMT15LzuuOD+TND05JjhRIzJyKjVwKjU2Hi+RMDgyHi8oIzdSIzJUKTp7LDYjGy5PJDKeMjuELThAIDBjJjSbMjqKLzg5HzBUJDJ5LDYlGy5hJzSSMDkfGSxqKDUpHC5EITEnGy5VJDMcGS02HS9DIDFAIDFFITFDIDAsHC4eITYcHzMaGy8TFiMeITUAAAASFiIcHzJlLDowJDduLjpCJjgHX8VeAAAAWXRSTlM4+O////////////////////////////+18P//+f/////////////////////////////////////////////////////////////////////6vvJR+SRTwHfs7R4AAA1sSURBVHgB7d2Hmuo6lgVgute2jKRNkLYoTcPgQ01NzjnnnKdzvO//HAOc2+jjkGRjwFT5vzmHtSwkWTaDwTe+iZOowJYqkY2GWhP2KIMvkLGsRuMJnf9Hm6lDiwq/UeBGRDOPBfUwGgh+bfZCuEY08ZvfGPzCt3Ca1vhMOCLL3DrCl5zBUWLUyRZYBVpMI54i/yRa5iHdOn+wnzmYqcGVvjX4xcx/OWszwldacIQxOCM6xVwOJ0gAWr6Uy4rQKpvyv6WoeDRHJoUrKEW4zuATTiOFrawhIFobT/4hJOdbELFFL36N0C6aeu9XEXdgFJcTXCYa1xB2N8zfCoCsISAq5doouXFKcTmfvPgNg5aRVZZwJ+SUGkecZwyuY4LcLH/GPlERR8hY6TYHOXKV31J4dqKVGgpOU4RrqZJuk390+JJTdBB+sNT6JCfl//zEspoTjmNcT8IQtChepeX8FQ4RGyQ0rlhuMMkhv7ESvBfR8miCI1SLE1tvkO+XLuZPFse4INiiYQjmJpPcuJxN1/E7vCtGqcMpYWhzZfvSav5acJRUJUDD10ITcIv8zcwCxuD9Icf7U8KocA2aTCbjclS8+c+Q7Zd/JeVfOzR+e5kpQdJq/noa8Y6RZt51wBrUIJO1cm3BSnGh1qxZi5j6jVWbn//R4SgaFsFUY9ThIrKNAuG9E11V5VwgywWdu7Yn43JNbezCFhxBM7/GbeavcMycg6u/7DQGmejV4mOIdpvZy3DytWG5ZtSaU2tmA7niys/8S4v5k8WBOAou7Q2Ob5C/FBEfQrpoV5VSOmXd1EuEXi3ay18L9knJmpruPClkiQXhA2G/JmiDBABxpVrLn7/c5UnhNxgCFHLogA+Fpt5rtMI6rMlUt5R/1NihobKCYwxLi3c5RxofjRG0I2CLprqd/DmFz1Zwkh23df1TiGioRwGpAC3kTwpbc6UizoohtpK/BEJTPeeQCtBC/joCmLPKyrZsYfw3TGisx0BGAfLzrzBndsgTOV57/WuLdvT5pwI0z98ts8PPOxymCOewwbuhlm8Od2YcMgqQmb+MqhWhHgkG5xjzUWZ+wa9p3BcTGhYg5Z+Oc4gwarOKGuYfmfBuRL+xJNwVYx8VEVmGKX+ktZ4VJK0MAWI/yEe/8lsG9yQaNQswLA1A5Zsa/CpS+ByvOpTgFNWfAFqN98SkG7H3YwW5BUinqxeLZSUY/Nrby9tiPhmGNImPGs0Qu5oLQOKI96W4/+WPANQqQPhcUgdg8Ot+o3DtnEl0gXAUf5hNH1WEiLsihXoF8FvLoqiKwW8cnLQlheYouPzx3zB619MR9Qrgt2aOgCP5a0Gu/HtC4WYzvx4D9QrAfvcc1OA3/cabtHckndQ46/pnhzb0GDULQNVuj2LwWyvvfRAuCZ8ZDbT/TJKiG2369JxD3QIA2sev939imHkAuwYwkvaGAGewJ1aEVvQC0KAAM7fb/6MVNoRHAohCG0wVz20AakZLeowmBdC8yx9BsCVhEZWgFcQlkER9m5M+vajRpAD0lvJ3Oi3IXwgtMZU5PgGkyqAtPSY0KkCIu/wRkNrklKAdxCM6kn+sIjqB3u/Hf0YBnE35816bdGsNMIU5+JTSFXXl8HVBeHpi0bAAVcrfyv7enw4GrSBe0P71vwgdOnv/gqdnIxoWgGWXf7R7e39tNsDMHNL1Ly8WnUB+y+DZVUDDAojd5Q8+XEs4ZdAGql4FcMtXA7iZQzeYd5K/cGYIhAPhIP+ogcSEIdpgl+ORX3stVhFdsfIbhCdnHbJQIHzJyi5/Z1IN2m9AXPmtqeAasng1aIt+Hy8YKoDGBRC7y59U+vkNGmD9lsY14rLVk5VGsUYbaFGMCI8RK1xRAN7lj3DyRrIJJeFK0W8JrjFLf49OKR44kATGFQXQsstf0emtBOGrG1D5NW5jxqbQNX6teNhp4/EVBSC7y9/ozz/dqgE8WzG1sWJz/fWfvG2qZ5oXgHf5g4FzAUlYSBeOVhfoHCo8Ex5B+43iZdi0ADru8g+ggHMksOCh7N4Y0nNLv6ZAOixiowIQ7/LXTkWcR4oFvY6gVz9j//UVQbYaS4MCpPwlVLiIVDDodcFwWThI2lCD2DCkugXQu/wx08hAqjLoPVosCgOAFYAkMg+pVgEo5V8R8uhiiDWZEHoPQaOpwcYUX4pKzesUYJc/LQ1y6elovPB+qdF7gOFUY0srHOGY57kFSPlr5vqPuUbcW89U6uKQ7Zhj1t3AlH9BATX4rYD76slCUc7Lw0nzKF58z2bKPwYoQjZ6RP49KlmwEwTA+QrI+QKk/IMgauSilwccn+i5YJAQ4xKxYSynC5DypwoAI5OZsSm8X2ncTy8GjSR9d0DdCqQCpPy1A6CQhRZMAIwR3E2PWGFfhUzCYUjHCpDyr7CmIzK4StC7/wc/YZ/TyHBmZygWtMk/zSTF5r3l6d56wyD4UkA9MYT5YQE+5x8o8y29VuHeeiYYHBCFutLOUCrANn9ibHHGqz3urCdscURmFOd3hmKxzV8bbDmHM4QN7qxHpSIk+Yu/vJ0ht82/ynmUvLToPfiDP9EGzZHmsaT9n2gv52+C4M56hk3jp37ztgW2+aelhZWMr5m/j54EjVOMxtXE8pDW+RNfepdEaQm9x3/wJ4xWCK/z1xE7fLehX3n/5tCr8cGfiEJL1vmHs72S4G53dNmgl7HiP6CkvfyjPvcq0VIRavrt3/nd38v8wvICvUNSaZzHaC9/ptPLShMi6vp9v/YHTfPv0UgRztMGrZDhYvCH+4mHgwloTX/kN6q8A2QOX+iNg+CS0E72Ieg4+ON4aluxVIT6/sRv/WnOE6EW+3quMrgoalwnDjkoQ9i+/x97nD14gWc9f+Y3/hwXRSPY04uVRgYmNDcpFesU7eCPsYcqbEhl0dBf+LW/RK/R0c4MxGiG5iOlHAFIBn+IfVMCqAyExv7qr//mb1FTj8pKkEVJoyFfsY0Z3/8XNIaFQe++hlODTFx/yGelJfP7H9VbYdG7d/oKubRBPhkqVqbO93++zgQfD5VFKXgQU1SCbBUyxTErG5Fk5G8qPcXHI2/e+6XDvcXX0WT4MnPIZ2zWTK9U7AhJVv6kFKAiPpzCbyzlIS8hDYQaAl1e3CtrkGTn71gARIWPRvxnFvfF9f+hEi4s7tNMr17+6Xhf+LD5q0e8v4lQRzA4TuZpptcgf7I2e4R5f6Z+S+POuO4/U2bHZ3pW6Yikdv5OpdCdw0ej/Rah6wJjH03KtKfXLP+Dk90BHw2pmfdF9/Mfe4NE0kzvmvzJWuxhfEACKIVOU2mIwmTMrKWN8x+OBfus4NmNizGhtoI6P0vV29s4zI7QisGvG3xJLJ5Wej3FC6Euo9Bhxq8ti6qd7A/v/yWM56aavpyGBd1FM+99JWjV4BMOhfexnYfaKKDDJEx9gTvk7wyeGS0bHy41Gp2mvbpD/sR4XlLOiuYPFwRCp8WVvn3+YDyrYQgOcFM/NWiCAj5OAVL+72MFOF8EhzN0GXGJM+g2KeLN848aTyeOgqaLq8IRLmFCt1ERb50/FJ6LjCpLOE/lzQpE4Z0XICN/xhORcbCSuypkXGLjOy9ARv464knQMHBEjpB7j5/xvguQkT8pPIV5CBGZXO6qUNT7LkBG/uBnCJ/ZoQbOPW2lBFeS5yhAdCfzp85P91kT6hFDyMK4iix9Qbjs7/7+Hx5aADl9/RvX7RlfZQm3Ey2uEXKegAf+0ft/+ucHFsDR6fwR0FU0rKzgtpRcfawbF/m1f8ER7uWtrPlNbvX9678BZ/LnrobPHHFzxGhKFsUs6/r/Z7/2N6fuX9kbF+Df/wNn87fyRDO+9hnXsJ7WAdBViLjIeu//7NT4oXDTAph/w/n8xXZxgxd3owi1OacJNfznfxGOmaV16o0KIIQL+YPRJVJWmnBHFFBPRCS0IxYrDdy0AHim/Gnc/oyv3RuBoljwCBToRvlr86FmfFdsgZCTiEehQLfJn7gbM77g8BikkEMrTXggCnST/BHwaGYRNOFhrMElRilB0v0CkMvOn+nB0/3KCh4q4CxRyiB5hgL89/8gO3+jHxn+lCMeTRROoqFySJ6jAP87QX7+CLg3Go0EmI/eKo0uUBHHmbTSf6IC/N+30en86c17/+JXLOiIgCMoOkK3SEE4S78tRwGolb+KD3luZ0roDGMPbz1qdFAs6OKzo6pm/sbirqLfKgjdoQRAQloTOinOIk6Kr35tWcZa+aN6SP5+WRK6ggJ2nNLoLrMcD0vCFyaTcqSCYr8WFBfVaBiz8y8e8RqelYiaLSI6wllsEXREp9nNpRPxmUzGJStWzmBL+5XDltGKuZxIRv7K4K4o/PyAtgnFkNAJgQAZW4OuE7+2nA/LRQjKmog9UwckZKxSajyhwXdwmmPcnXvDFulqYdAB8XWuNAHPkb8vTjSVDQ6QUYPvfg8nGf/mi5JwV8GkIwjFWPBgw2nBeA7s/UrXG8u/N/j+D753oVGMu5Jw+KX1jyLWRiAQnoNREbXy/94PBj/80Y+/8+mEP/6NrU/39ZOf7v9L/PrPfuvTI/zhT3/61aeNn/7k0/P76qtPB77z4x/9P4Qy24RAkldyAAAAAElFTkSuQmCC\"","export default __webpack_public_path__ + \"static/media/btn_big_bsc.5e5ec82b.png\";","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/btn_big_purchasegmx.86c08dee.svg\";","export default __webpack_public_path__ + \"static/media/buy_gmx_bond.ed3174dc.svg\";","export default __webpack_public_path__ + \"static/media/buy_transfer_eth.373e200e.svg\";","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/cross.2c9772ea.svg\";","export default __webpack_public_path__ + \"static/media/flag_en.c92a8361.svg\";","export default __webpack_public_path__ + \"static/media/flag_es.4ba7dfef.svg\";","export default __webpack_public_path__ + \"static/media/flag_fr.589da1a2.svg\";","export default __webpack_public_path__ + \"static/media/flag_ja.81aa61af.svg\";","export default __webpack_public_path__ + \"static/media/flag_ko.97c8fe63.svg\";","export default __webpack_public_path__ + \"static/media/flag_ru.0c71e16b.svg\";","export default __webpack_public_path__ + \"static/media/flag_zh.fd0e8daf.svg\";","export default __webpack_public_path__ + \"static/media/glp_icon.ef02d046.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABPCAQAAAC3gKgqAAADyUlEQVR4Ae3BfWhVdQDH4e/Z3Uvb2lZukS5sOEI3UHS95xbBqg2iQmcvpCRZZClYkBoWaAvpD0ncHxVCFjE0iyE6eyFqK6K3RRTaiy1ptaXljDnL29h2t7v7iZGeTuuen9vd7r3nynke+Xw+n8/n800EWToXUMKrVCnVkcELwPsUKbWxlH5GbcZS6mI23/OPk9QqVZHNTv7VxiVKTawkhFMDAaUeKujkv4LUKdWQTzP/9zWlSi2sI0w0O8hU6qCSbqIbYLlSBYW04O4w5UoFWNQTwWQ3OfI+aujFbIhV8jqKaePsuqiQlxGggfHZT768iyX8xfiMsF5eRSnfMn7dVMmLyOJlJqaFafIe7mOQiYnwFJa8hXl0MHG91MhLyKWJ2LRRLO/gEYaJ1TYC8gau5iixC7JIXsAFvI1ZK3sxOcAsJR9PEMGki/mUcBCTF8lUcnEDv2MyxCpJoo4g7vpZqmTiIj7EbDc5kkSABkzaKVOykMYzmP1AuU6jmM8x2UW2koNb+AOTAe6VA7WcxN0QDysZmMkXmO0gUw5YbMakkwVKNNJ5DrODzNIYFPEBJs3kKbG4iz5MgixWFFzPcdyFeUyJxGV8h9lWAoqKxxnB3TEWKlE4j0bMPmOGbAQIyEYBb2DSQqESg/sZxKSXm+XAA6yWA1fQhbsIm5QIzOMnzOqxZKOCI3RzrRxYzRDuTnCj4o3z2YNZC4Wykc9+Rr3LNNnI4TVMPmGG4otHCWNyjIVyYB1hRkXYKAfKOYzJs6QpfriGXzEJs1YOVNLNGT1Uy4HlDODuFLcrXriQdzDbR55sFNKK00dcLBtZvITJV5QoPthIBJOfmS8bFk8z1hbSZKOUbzDZTqamHtX0YBLiQTlQQy9j/cmtcuAO+nDXzzJNNabzMWaNZMtGMW1E8yUzZSOdBkzaKdNUIo0tmB1itmwE2Iab58mQjWLaMNlJtqYOt3EKkyB3yoHFBHHTx91yoJZe3IV4SONi6awo0V5dLpNf1KiQLI1C6bpHZXJ3SIusDp2GpXo9qXS56VKddUCTRwbbmWqvkCUbRbRiso88TR7L6GeqDbJCDlRxHHdh1mqymEM78dDBXDmwgRHc/cZ1mgyy2UW8NJErGwW8icl7FCp2rCREvAyzRg5cyRHcRdikWLGATuLpKFfJgTUM4+4ENykW5NNMvL1FgWzk0oTJp0zXxLGeMPE2wgY5MJcfMdlKQBNDJT0kQi/VcmAFIdz1s0Qu0hVdjpoV0fhZik1Al2JZ6IzXVag5iii6dOXKq7Dk8/l8Pp/Pd676GwYUP6Kwt1/bAAAAAElFTkSuQmCC\"","export default __webpack_public_path__ + \"static/media/gmx-logo-final-white.b7833ed6.png\";","export default __webpack_public_path__ + \"static/media/gmx-logo-final.0b59e423.png\";","export default __webpack_public_path__ + \"static/media/gmx-logo-glow.83c5aea5.png\";","export default __webpack_public_path__ + \"static/media/gmx_logo.2b33868e.svg\";","export default __webpack_public_path__ + \"static/media/graphite-01.6f3526cd.png\";","export default __webpack_public_path__ + \"static/media/ic-communityproject.9b5f97dd.svg\";","export default __webpack_public_path__ + \"static/media/ic_arbitrum_hover_16.d779b479.svg\";","export default __webpack_public_path__ + \"static/media/ic_arrowleft16.21502a04.svg\";","export default __webpack_public_path__ + \"static/media/ic_arrowright16.b425521a.svg\";","export default __webpack_public_path__ + \"static/media/ic_bsc.8de996f1.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAAsCAYAAAAq/ZsdAAAFI0lEQVR4Ac1ZA5AsSRCd2FkMvm2cbdu2bdu2bdt3obN9X6tGrW3vxv6x509e5dwtukZdXYt5EW9ZNf1eZFZmVbVJL8yyfJpZlT2UYIw4VzrVlC3IJXINChNhriLXZJOh56gon4Ahbw5RHs8SO+JRwrmmbEMuIfuYiRzgNYNzcK4pG5Gryk9j+vCkGs7JGgOiqYdjj7MEzj/OErrfCHHuBBiS9slR5XpMpXTEMZtf037hcdYgiPAEe3gHU7bghBkw43hrsNWoGZw77iLNqnqWWVW+yVElNR1xDG2mZ51gCRxg1BDOHT8nkrQFFfgLpVvP+rmorRUe6ekJPtrTU3P6Lt7PDRh6Ydy85CjSlVRkxKxIusr2TrXVMBq3NnVtOGq2b5An1TBdxyfFiPwRFbmep/cc1FCvMfRgTzfY/yqLzP6iehJTTVEW5SqyRA3FU0zUEP7dUkRiW13W0X3EIu/Tx9kCDyTjsZbABWNvRi1ckUuUOr0phpxdTuDGzg742+MG4vdrDLWEQvG/v9DfB4c01ofiG9WysiWmCUF5+cxcVaniMYNrxhGNgl6scnpg578anbsfMHgKjcj+oznmfcesyKuoyCC/GT784vDBwnfqk66hY63Bv+g6WiFuRpVf5dyrwT8eD/DCR/3fWBeDZauaYaMHW1IVBwfl9SLV7HTeUylGJxnQ5Cq3B9a4fEA8G6CSeu4Pac2cQP7jrNXVsOPpPelK+Ff8JbyoaBoVOMBbzW6iRYAFVjhrURmsLGxFwRre0xiDy6q1fzuAeKGgSIVDNvKkK+Uq19rKJdKLQzsAHmI5ZmEpIbBVcReK1c0tV3fB8kebMvUnB5rS1W+ouBgl8PKk5iZg8fWAH0Vy07a6DPbbySFsCrc193JFh+k9qVDkBHixnUmxNNx6VTesvL8ZRYuZov2mnREqnHYsmv0A3/ZriwHLw0kILOuI3o2rioUi6WFtqLKJ8Pv1LtCLCk9qYzP/qYZdj+7Xu4H9KjHdiHIP00S5iUVgb+KCL3rjJVkXvNHkppaXtsCOp/bqPmIcawudwDRS5S9RMxutaxsWdHZFDN7tikGxEzKiLwQJhrYhPbDpg208Z6YWxpD0i4ihXMojSChB2JC5x1ti8OfgUFNNxEvt2jl7Egcs+LSexxBoduc0Ql4RQxsVtukuy9hUGWAkNWMOI0GYsqacwxATJbMitxk1YysqgwOJl6fX4BZIA/ydHTPr92o4YoEPhXKvJUy5P40amlZUmZBij7XEv6dMQW80s6Gt3u3kv1CxhT4wIUQu4Dcr7dCIbfYPVTAszYnEIsAAK6PGzFEkPNSLeOkYMvS3ETP2deWwB3GwZriPEGw0dyODsPDdeqNXXiv+v2OTndxbnj9rYC/iRBHxMs2PxAqHnLu6DnY5vk/sDo8K/I23uVpKCRxJwsNCvhvgiUxyM5uXdMKitxoMmUHiBYspDlWdkavIMs8WaObq6gRBuAnFNYELvYVJQexD+HeMJptmx5Eobc6tMPeLWjhyrk/IEHNiVd5BU3qiNefvGq6ewy7+Y6kJPNhtWdIFtnVlsNFDicdwYUOIPEJ2zFXjrx8bKMO5RC5KGqFfqwzdyyE3+bQN8ktVmPldNWxyeyvsv71T2AxS6D4PK0q6D79+d22N/vyRqIBYjionAvohf6d7wIuXReJGkGcuGF8zqMWYCzZKlqBTTIg4UcNQdISBR2GBF1rCxGejhjF/S4cVhj9aYlHBZ/Lf1/Gn4QFxc+PIdK9a/gVaRiAcqhHzNAAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/ic_cash.21569a1d.svg\";","export default __webpack_public_path__ + \"static/media/ic_coingecko_hover_16.ef20d202.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx.bf8fb0b1.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_30.375de394.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_64.f4caeaad.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_big.a0a74216.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_footer.e7821eb2.svg\";","export default __webpack_public_path__ + \"static/media/ic_info.f334ee0a.svg\";","export default __webpack_public_path__ + \"static/media/ic_menu_dots.87c2cfaa.svg\";","export default __webpack_public_path__ + \"static/media/ic_metamask_hover_16.aa3dce32.svg\";","export default __webpack_public_path__ + \"static/media/ic_olympus.70b17676.svg\";","export default __webpack_public_path__ + \"static/media/ic_selector_dropdowns.aaf0b8f0.svg\";","export default __webpack_public_path__ + \"static/media/ic_sign in_16.b6f5b1d9.svg\";","export default __webpack_public_path__ + \"static/media/ic_stats_big.4a4ebfb7.svg\";","export default __webpack_public_path__ + \"static/media/ic_tokens.6a27251b.svg\";","export default __webpack_public_path__ + \"static/media/ic_transfer_avax.53893264.svg\";","export default __webpack_public_path__ + \"static/media/lg_arbitrum.bdf133fe.svg\";","export default __webpack_public_path__ + \"static/media/metamask-text.2f9c2df2.svg\";","export default __webpack_public_path__ + \"static/media/page-not-found.bb90d073.svg\";","export default __webpack_public_path__ + \"static/media/trading.7ea1604c.jpg\";","export default __webpack_public_path__ + \"static/media/wallet-connect-text.78166b41.svg\";","export default __webpack_public_path__ + \"static/media/wave-01.3c9bce1e.png\";","export default __webpack_public_path__ + \"static/media/wave-02.4a56e8c7.png\";","var map = {\n\t\"./ic_arbitrum_24.svg\": 356,\n\t\"./ic_avalanche_24.svg\": 357,\n\t\"./ic_avax_24.svg\": 358,\n\t\"./ic_bnb_24.svg\": 360,\n\t\"./ic_btc.b_24.svg\": 362,\n\t\"./ic_btc_24.svg\": 364,\n\t\"./ic_busd_24.svg\": 366,\n\t\"./ic_dai_24.svg\": 368,\n\t\"./ic_eth_24.svg\": 370,\n\t\"./ic_frax_24.svg\": 371,\n\t\"./ic_glp_24.svg\": 193,\n\t\"./ic_gmx_24.svg\": 373,\n\t\"./ic_link_24.svg\": 374,\n\t\"./ic_mim_24.svg\": 376,\n\t\"./ic_settings_24.svg\": 378,\n\t\"./ic_tether_24.svg\": 379,\n\t\"./ic_uni_24.svg\": 380,\n\t\"./ic_usdc.e_24.svg\": 382,\n\t\"./ic_usdc_24.svg\": 384,\n\t\"./ic_usdt_24.svg\": 386,\n\t\"./ic_velas_24.svg\": 194,\n\t\"./ic_wallet_24.svg\": 226,\n\t\"./ic_wavax_24.svg\": 388,\n\t\"./ic_wbnb_24.svg\": 390,\n\t\"./ic_weth_24.svg\": 392\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 731;","var map = {\n\t\"./ic_avax_40.svg\": 359,\n\t\"./ic_bnb_40.svg\": 361,\n\t\"./ic_btc.b_40.svg\": 363,\n\t\"./ic_btc_40.svg\": 365,\n\t\"./ic_busd_40.svg\": 367,\n\t\"./ic_dai_40.svg\": 369,\n\t\"./ic_eth_40.svg\": 270,\n\t\"./ic_frax_40.svg\": 372,\n\t\"./ic_glp_40.svg\": 164,\n\t\"./ic_gmx_40.svg\": 225,\n\t\"./ic_link_40.svg\": 375,\n\t\"./ic_mim_40.svg\": 377,\n\t\"./ic_uni_40.svg\": 381,\n\t\"./ic_usdc.e_40.svg\": 383,\n\t\"./ic_usdc_40.svg\": 385,\n\t\"./ic_usdt_40.svg\": 387,\n\t\"./ic_wavax_40.svg\": 389,\n\t\"./ic_wbnb_40.svg\": 391,\n\t\"./ic_weth_40.svg\": 393\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 732;","var map = {\n\t\"./en/messages.po\": [\n\t\t792,\n\t\t4\n\t],\n\t\"./es/messages.po\": [\n\t\t793,\n\t\t5\n\t],\n\t\"./fr/messages.po\": [\n\t\t794,\n\t\t6\n\t],\n\t\"./ja/messages.po\": [\n\t\t795,\n\t\t7\n\t],\n\t\"./ko/messages.po\": [\n\t\t796,\n\t\t8\n\t],\n\t\"./ru/messages.po\": [\n\t\t797,\n\t\t9\n\t],\n\t\"./zh/messages.po\": [\n\t\t798,\n\t\t10\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 7);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 773;\nmodule.exports = webpackAsyncContext;","const CONTRACTS = {\n  56: {\n    // bsc mainnet\n    Treasury: \"0xa44E7252a0C137748F523F112644042E5987FfC7\",\n    BUSD: \"0xe9e7cea3dedca5984780bafc599bd69add087d56\",\n    GMT: \"0x99e92123eB77Bc8f999316f622e5222498438784\",\n    Vault: \"0xc73A8DcAc88498FD4b4B1b2AaA37b0a2614Ff67B\",\n    Router: \"0xD46B23D042E976F8666F554E928e0Dc7478a8E1f\",\n    Reader: \"0x087A618fD25c92B61254DBe37b09E5E8065FeaE7\",\n    AmmFactory: \"0xBCfCcbde45cE874adCB698cC183deBcF17952812\",\n    AmmFactoryV2: \"0xcA143Ce32Fe78f1f7019d7d551a6402fC5350c73\",\n    OrderBook: \"0x1111111111111111111111111111111111111111\",\n    OrderBookReader: \"0x1111111111111111111111111111111111111111\",\n    GmxMigrator: \"0xDEF2af818514c1Ca1A9bBe2a4D45E28f260063f9\",\n    USDG: \"0x85E76cbf4893c1fbcB34dCF1239A91CE2A4CF5a7\",\n    NATIVE_TOKEN: \"0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c\",\n    XGMT: \"0xe304ff0983922787Fd84BC9170CD21bF78B16B10\",\n    GMT_USDG_PAIR: \"0xa41e57459f09a126F358E118b693789d088eA8A0\",\n    XGMT_USDG_PAIR: \"0x0b622208fc0691C2486A3AE6B7C875b4A174b317\",\n    GMT_USDG_FARM: \"0x3E8B08876c791dC880ADC8f965A02e53Bb9C0422\",\n    XGMT_USDG_FARM: \"0x68D7ee2A16AB7c0Ee1D670BECd144166d2Ae0759\",\n    USDG_YIELD_TRACKER: \"0x0EF0Cf825B8e9F89A43FfD392664131cFB4cfA89\",\n    XGMT_YIELD_TRACKER: \"0x82A012A9b3003b18B6bCd6052cbbef7Fa4892e80\",\n    GMT_USDG_FARM_TRACKER_XGMT: \"0x08FAb024BEfcb6068847726b2eccEAd18b6c23Cd\",\n    GMT_USDG_FARM_TRACKER_NATIVE: \"0xd8E26637B34B2487Cad1f91808878a391134C5c2\",\n    XGMT_USDG_FARM_TRACKER_XGMT: \"0x026A02F7F26C1AFccb9Cba7C4df3Dc810F4e92e8\",\n    XGMT_USDG_FARM_TRACKER_NATIVE: \"0x22458CEbD14a9679b2880147d08CA1ce5aa40E84\",\n    AUTO: \"0xa184088a740c695E156F91f5cC086a06bb78b827\",\n    AUTO_USDG_PAIR: \"0x0523FD5C53ea5419B4DAF656BC1b157dDFE3ce50\",\n    AUTO_USDG_FARM: \"0xE6958298328D02051769282628a3b4178D0F3A47\",\n    AUTO_USDG_FARM_TRACKER_XGMT: \"0x093b8be41c1A30704De84a9521632f9a139c08bd\",\n    AUTO_USDG_FARM_TRACKER_NATIVE: \"0x23ed48E5dce3acC7704d0ce275B7b9a0e346b63A\",\n    GMT_GMX_IOU: \"0x47052469970C2484729875CC9E2dd2683fcE71fb\",\n    XGMT_GMX_IOU: \"0xeB3733DFe3b68C9d26898De2493A3Bb59FDb4A7B\",\n    GMT_USDG_GMX_IOU: \"0x481312655F81b5e249780A6a49735335BF6Ca7f4\",\n    XGMT_USDG_GMX_IOU: \"0x8095F1A92526C304623483018aA28cC6E62EB1e1\",\n    PositionRouter: \"0x0000000000000000000000000000000000000000\",\n    VaultReader: \"0x0000000000000000000000000000000000000000\",\n    ReferralStorage: \"0x0000000000000000000000000000000000000000\",\n    GlpManager: \"0x0000000000000000000000000000000000000000\",\n    GMX: \"0x0000000000000000000000000000000000000000\",\n    GLP: \"0x0000000000000000000000000000000000000000\",\n    RewardRouter: \"0x0000000000000000000000000000000000000000\",\n    RewardReader: \"0x0000000000000000000000000000000000000000\",\n    ES_GMX: \"0x0000000000000000000000000000000000000000\",\n    BN_GMX: \"0x0000000000000000000000000000000000000000\",\n    StakedGmxTracker: \"0x0000000000000000000000000000000000000000\",\n    BonusGmxTracker: \"0x0000000000000000000000000000000000000000\",\n    FeeGmxTracker: \"0x0000000000000000000000000000000000000000\",\n    StakedGlpTracker: \"0x0000000000000000000000000000000000000000\",\n    FeeGlpTracker: \"0x0000000000000000000000000000000000000000\",\n    StakedGmxDistributor: \"0x0000000000000000000000000000000000000000\",\n    StakedGlpDistributor: \"0x0000000000000000000000000000000000000000\",\n    GmxVester: \"0x0000000000000000000000000000000000000000\",\n    GlpVester: \"0x0000000000000000000000000000000000000000\",\n  },\n  97: {\n    // bsc testnet\n    Vault: \"0xD74C004f5253F6DF31ba4fB1cFe8d6075987ed4F\",\n    Router: \"0xe473EbFfdB39119E369F8Fc206a9EAf3690BD932\",\n    Reader: \"0x36F6A0320adc8e97f5d3b638A32477958A6d245A\",\n    AmmFactory: \"0x6725f303b657a9451d8ba641348b6761a6cc7a17\",\n    AmmFactoryV2: \"0x1111111111111111111111111111111111111111\",\n    OrderBook: \"0x9afD7B4f0b58d65F6b2978D3581383a06b2ac4e9\",\n    OrderBookReader: \"0x0713562970D1A802Fa3FeB1D15F9809943982Ea9\",\n    GmxMigrator: \"0xd5a0815194bE614c1E7Ac8a05CfcA87F9A650d48\",\n    USDG: \"0x12fE23885BaF83f8eEB5FCa67Ff93Ad2158F3258\",\n    GMT: \"0xedba0360a44f885ed390fad01aa34d00d2532817\",\n    NATIVE_TOKEN: \"0x612777Eea37a44F7a95E3B101C39e1E2695fa6C2\",\n    XGMT: \"0x28cba798eca1a3128ffd1b734afb93870f22e613\",\n    GMT_USDG_PAIR: \"0xe0b0a315746f51932de033ab27223d85114c6b85\",\n    XGMT_USDG_PAIR: \"0x0108de1eea192ce8448080c3d90a1560cf643fa0\",\n    GMT_USDG_FARM: \"0xbe3cB06CE03cA692b77902040479572Ba8D01b0B\",\n    XGMT_USDG_FARM: \"0x138E92195D4B99CE3618092D3F9FA830d9A69B4b\",\n    USDG_YIELD_TRACKER: \"0x62B49Bc3bF252a5DB26D88ccc7E61119e3179B4f\",\n    XGMT_YIELD_TRACKER: \"0x5F235A582e0993eE9466FeEb8F7B4682993a57d0\",\n    GMT_USDG_FARM_TRACKER_XGMT: \"0x4f8EE3aE1152422cbCaFACd4e3041ba2D859913C\",\n    GMT_USDG_FARM_TRACKER_NATIVE: \"0xd691B26E544Fe370f39A776964c991363aF72e56\",\n    XGMT_USDG_FARM_TRACKER_XGMT: \"0xfd5617CFB082Ba9bcD62d654603972AE312bC695\",\n    XGMT_USDG_FARM_TRACKER_NATIVE: \"0x0354387DD85b7D8aaD1611B3D167A384d6AE0c28\",\n    AUTO: \"0xa184088a740c695E156F91f5cC086a06bb78b827\",\n    AUTO_USDG_PAIR: \"0x0523FD5C53ea5419B4DAF656BC1b157dDFE3ce50\",\n    AUTO_USDG_FARM: \"0xE6958298328D02051769282628a3b4178D0F3A47\",\n    AUTO_USDG_FARM_TRACKER_XGMT: \"0x093b8be41c1A30704De84a9521632f9a139c08bd\",\n    AUTO_USDG_FARM_TRACKER_NATIVE: \"0x23ed48E5dce3acC7704d0ce275B7b9a0e346b63A\",\n    GMT_GMX_IOU: \"0x47052469970C2484729875CC9E2dd2683fcE71fb\",\n    XGMT_GMX_IOU: \"0xeB3733DFe3b68C9d26898De2493A3Bb59FDb4A7B\",\n    GMT_USDG_GMX_IOU: \"0x481312655F81b5e249780A6a49735335BF6Ca7f4\",\n    XGMT_USDG_GMX_IOU: \"0x8095F1A92526C304623483018aA28cC6E62EB1e1\",\n    PositionRouter: \"0x17fc528F694569ba65AAB686119ACDf68fb95d16\",\n    PositionManager: \"0x4D03EACb713F07E280C8E9Aa2c3328D852ecf2fD\",\n    // VaultReader: \"0xf06baB18bD60A027461a27a3A39D79206a9BE683\",\n    VaultReader: \"0xb2F7d4F7bd7b227993Fca7F777EB88036d5EC161\",\n    ReferralStorage: \"0xB82ac2e8BC966cD4c1150bBf139E693Bc10A9615\",\n    GlpManager: \"0xbB76d057F67aFC2e5051Ee7f613f745A05c9E407\",\n    Leverage: \"0x6ea80DC7513e6A82c9fb7FE9b8DB7d604483C133\",\n    GLP: \"0xAEe7EB3d6aDe34d4dc9d9Cd0b5855298F7dea0B1\",\n    RewardRouter: \"0x0000000000000000000000000000000000000000\",\n    RewardReader: \"0x29dD42637A9F926C82A69a589A5257b1C8eE976f\",\n    ES_GMX: \"0x0000000000000000000000000000000000000000\",\n    BN_GMX: \"0x0000000000000000000000000000000000000000\",\n    StakedLeverageTracker: \"0x0000000000000000000000000000000000000000\",\n    BonusGmxTracker: \"0x0000000000000000000000000000000000000000\",\n    FeeGmxTracker: \"0x0000000000000000000000000000000000000000\",\n    StakedGlpTracker: \"0x0000000000000000000000000000000000000000\",\n    FeeGlpTracker: \"0x0000000000000000000000000000000000000000\",\n    StakedGmxDistributor: \"0x0000000000000000000000000000000000000000\",\n    StakedGlpDistributor: \"0x0000000000000000000000000000000000000000\",\n    GmxVester: \"0x0000000000000000000000000000000000000000\",\n    GlpVester: \"0x0000000000000000000000000000000000000000\",\n    LeverageBnbPool: \"0xA45BF88675197E3d8e22b80DA86eE16208bb82F3\"\n  },\n  111: {\n    // bsc testnet\n    Vault: \"0xD74C004f5253F6DF31ba4fB1cFe8d6075987ed4F\",\n    Router: \"0xe473EbFfdB39119E369F8Fc206a9EAf3690BD932\",\n    Reader: \"0x36F6A0320adc8e97f5d3b638A32477958A6d245A\",\n    AmmFactory: \"0x6725f303b657a9451d8ba641348b6761a6cc7a17\",\n    AmmFactoryV2: \"0x1111111111111111111111111111111111111111\",\n    OrderBook: \"0x9afD7B4f0b58d65F6b2978D3581383a06b2ac4e9\",\n    OrderBookReader: \"0x0713562970D1A802Fa3FeB1D15F9809943982Ea9\",\n    GmxMigrator: \"0xd5a0815194bE614c1E7Ac8a05CfcA87F9A650d48\",\n    USDG: \"0x12fE23885BaF83f8eEB5FCa67Ff93Ad2158F3258\",\n    GMT: \"0xedba0360a44f885ed390fad01aa34d00d2532817\",\n    NATIVE_TOKEN: \"0x612777Eea37a44F7a95E3B101C39e1E2695fa6C2\",\n    XGMT: \"0x28cba798eca1a3128ffd1b734afb93870f22e613\",\n    GMT_USDG_PAIR: \"0xe0b0a315746f51932de033ab27223d85114c6b85\",\n    XGMT_USDG_PAIR: \"0x0108de1eea192ce8448080c3d90a1560cf643fa0\",\n    GMT_USDG_FARM: \"0xbe3cB06CE03cA692b77902040479572Ba8D01b0B\",\n    XGMT_USDG_FARM: \"0x138E92195D4B99CE3618092D3F9FA830d9A69B4b\",\n    USDG_YIELD_TRACKER: \"0x62B49Bc3bF252a5DB26D88ccc7E61119e3179B4f\",\n    XGMT_YIELD_TRACKER: \"0x5F235A582e0993eE9466FeEb8F7B4682993a57d0\",\n    GMT_USDG_FARM_TRACKER_XGMT: \"0x4f8EE3aE1152422cbCaFACd4e3041ba2D859913C\",\n    GMT_USDG_FARM_TRACKER_NATIVE: \"0xd691B26E544Fe370f39A776964c991363aF72e56\",\n    XGMT_USDG_FARM_TRACKER_XGMT: \"0xfd5617CFB082Ba9bcD62d654603972AE312bC695\",\n    XGMT_USDG_FARM_TRACKER_NATIVE: \"0x0354387DD85b7D8aaD1611B3D167A384d6AE0c28\",\n    AUTO: \"0xa184088a740c695E156F91f5cC086a06bb78b827\",\n    AUTO_USDG_PAIR: \"0x0523FD5C53ea5419B4DAF656BC1b157dDFE3ce50\",\n    AUTO_USDG_FARM: \"0xE6958298328D02051769282628a3b4178D0F3A47\",\n    AUTO_USDG_FARM_TRACKER_XGMT: \"0x093b8be41c1A30704De84a9521632f9a139c08bd\",\n    AUTO_USDG_FARM_TRACKER_NATIVE: \"0x23ed48E5dce3acC7704d0ce275B7b9a0e346b63A\",\n    GMT_GMX_IOU: \"0x47052469970C2484729875CC9E2dd2683fcE71fb\",\n    XGMT_GMX_IOU: \"0xeB3733DFe3b68C9d26898De2493A3Bb59FDb4A7B\",\n    GMT_USDG_GMX_IOU: \"0x481312655F81b5e249780A6a49735335BF6Ca7f4\",\n    XGMT_USDG_GMX_IOU: \"0x8095F1A92526C304623483018aA28cC6E62EB1e1\",\n    PositionRouter: \"0x17fc528F694569ba65AAB686119ACDf68fb95d16\",\n    PositionManager: \"0x4D03EACb713F07E280C8E9Aa2c3328D852ecf2fD\",\n    // VaultReader: \"0xf06baB18bD60A027461a27a3A39D79206a9BE683\",\n    VaultReader: \"0xb2F7d4F7bd7b227993Fca7F777EB88036d5EC161\",\n    ReferralStorage: \"0xB82ac2e8BC966cD4c1150bBf139E693Bc10A9615\",\n    GlpManager: \"0xbB76d057F67aFC2e5051Ee7f613f745A05c9E407\",\n    Leverage: \"0x6ea80DC7513e6A82c9fb7FE9b8DB7d604483C133\",\n    GLP: \"0xAEe7EB3d6aDe34d4dc9d9Cd0b5855298F7dea0B1\",\n    RewardRouter: \"0x0000000000000000000000000000000000000000\",\n    RewardReader: \"0x29dD42637A9F926C82A69a589A5257b1C8eE976f\",\n    ES_GMX: \"0x0000000000000000000000000000000000000000\",\n    BN_GMX: \"0x0000000000000000000000000000000000000000\",\n    StakedLeverageTracker: \"0x0000000000000000000000000000000000000000\",\n    BonusGmxTracker: \"0x0000000000000000000000000000000000000000\",\n    FeeGmxTracker: \"0x0000000000000000000000000000000000000000\",\n    StakedGlpTracker: \"0x0000000000000000000000000000000000000000\",\n    FeeGlpTracker: \"0x0000000000000000000000000000000000000000\",\n    StakedGmxDistributor: \"0x0000000000000000000000000000000000000000\",\n    StakedGlpDistributor: \"0x0000000000000000000000000000000000000000\",\n    GmxVester: \"0x0000000000000000000000000000000000000000\",\n    GlpVester: \"0x0000000000000000000000000000000000000000\",\n    LeverageVelasPool: \"0xA45BF88675197E3d8e22b80DA86eE16208bb82F3\"\n  },\n  421611: {\n    // arbitrum testnet\n    Vault: \"0xBc9BC47A7aB63db1E0030dC7B60DDcDe29CF4Ffb\",\n    Router: \"0xe0d4662cdfa2d71477A7DF367d5541421FAC2547\",\n    VaultReader: \"0xFc371E380262536c819D12B9569106bf032cC41c\",\n    Reader: \"0x2E093c70E3A7E4919611d2555dFd8D697d2fC0a1\",\n    GlpManager: \"0xD875d99E09118d2Be80579b9d23E83469077b498\",\n    RewardRouter: \"0x0000000000000000000000000000000000000000\",\n    RewardReader: \"0x0000000000000000000000000000000000000000\",\n    NATIVE_TOKEN: \"0xB47e6A5f8b33b3F17603C83a0535A9dcD7E32681\",\n    GLP: \"0xb4f81Fa74e06b5f762A104e47276BA9b2929cb27\",\n    GMX: \"0x0000000000000000000000000000000000000000\",\n    ES_GMX: \"0x0000000000000000000000000000000000000000\",\n    BN_GMX: \"0x0000000000000000000000000000000000000000\",\n    USDG: \"0xBCDCaF67193Bf5C57be08623278fCB69f4cA9e68\",\n    ES_GMX_IOU: \"0x0000000000000000000000000000000000000000\",\n    StakedGmxTracker: \"0x0000000000000000000000000000000000000000\",\n    BonusGmxTracker: \"0x0000000000000000000000000000000000000000\",\n    FeeGmxTracker: \"0x0000000000000000000000000000000000000000\",\n    StakedGlpTracker: \"0x0000000000000000000000000000000000000000\",\n    FeeGlpTracker: \"0x0000000000000000000000000000000000000000\",\n\n    StakedGmxDistributor: \"0x0000000000000000000000000000000000000000\",\n    StakedGlpDistributor: \"0x0000000000000000000000000000000000000000\",\n\n    GmxVester: \"0x0000000000000000000000000000000000000000\",\n    GlpVester: \"0x0000000000000000000000000000000000000000\",\n\n    OrderBook: \"0xebD147E5136879520dDaDf1cA8FBa48050EFf016\",\n    OrderBookReader: \"0xC492c8d82DC576Ad870707bb40EDb63E2026111E\",\n\n    PositionRouter: \"0xB4bB78cd12B097603e2b55D2556c09C17a5815F8\",\n    PositionManager: \"0x168aDa266c2f10C1F37973B213d6178551030e44\",\n\n    // UniswapGmxEthPool: \"0x80A9ae39310abf666A87C743d6ebBD0E8C42158E\",\n    ReferralStorage: \"0x0000000000000000000000000000000000000000\",\n    ReferralReader: \"0x0000000000000000000000000000000000000000\",\n  },\n  42161: {\n    // arbitrum mainnet\n    Vault: \"0x489ee077994B6658eAfA855C308275EAd8097C4A\",\n    Router: \"0xaBBc5F99639c9B6bCb58544ddf04EFA6802F4064\",\n    VaultReader: \"0xfebB9f4CAC4cD523598fE1C5771181440143F24A\",\n    Reader: \"0x2b43c90D1B727cEe1Df34925bcd5Ace52Ec37694\",\n    GlpManager: \"0x321F653eED006AD1C29D174e17d96351BDe22649\",\n    RewardRouter: \"0xA906F338CB21815cBc4Bc87ace9e68c87eF8d8F1\",\n    RewardReader: \"0x8BFb8e82Ee4569aee78D03235ff465Bd436D40E0\",\n    NATIVE_TOKEN: \"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1\",\n    GLP: \"0x4277f8F2c384827B5273592FF7CeBd9f2C1ac258\",\n    GMX: \"0xfc5A1A6EB076a2C7aD06eD22C90d7E710E35ad0a\",\n    ES_GMX: \"0xf42Ae1D54fd613C9bb14810b0588FaAa09a426cA\",\n    BN_GMX: \"0x35247165119B69A40edD5304969560D0ef486921\",\n    USDG: \"0x45096e7aA921f27590f8F19e457794EB09678141\",\n    ES_GMX_IOU: \"0x6260101218eC4cCfFF1b778936C6f2400f95A954\",\n    StakedGmxTracker: \"0x908C4D94D34924765f1eDc22A1DD098397c59dD4\",\n    BonusGmxTracker: \"0x4d268a7d4C16ceB5a606c173Bd974984343fea13\",\n    FeeGmxTracker: \"0xd2D1162512F927a7e282Ef43a362659E4F2a728F\",\n    StakedGlpTracker: \"0x1aDDD80E6039594eE970E5872D247bf0414C8903\",\n    FeeGlpTracker: \"0x4e971a87900b931fF39d1Aad67697F49835400b6\",\n\n    StakedGmxDistributor: \"0x23208B91A98c7C1CD9FE63085BFf68311494F193\",\n    StakedGlpDistributor: \"0x60519b48ec4183a61ca2B8e37869E675FD203b34\",\n\n    GmxVester: \"0x199070DDfd1CFb69173aa2F7e20906F26B363004\",\n    GlpVester: \"0xA75287d2f8b217273E7FCD7E86eF07D33972042E\",\n\n    OrderBook: \"0x09f77E8A13De9a35a7231028187e9fD5DB8a2ACB\",\n    OrderExecutor: \"0x7257ac5D0a0aaC04AA7bA2AC0A6Eb742E332c3fB\",\n    OrderBookReader: \"0xa27C20A7CF0e1C68C0460706bB674f98F362Bc21\",\n\n    PositionRouter: \"0x3D6bA331e3D9702C5e8A8d254e5d8a285F223aba\",\n    PositionManager: \"0x87a4088Bd721F83b6c2E5102e2FA47022Cb1c831\",\n\n    UniswapGmxEthPool: \"0x80A9ae39310abf666A87C743d6ebBD0E8C42158E\",\n    ReferralStorage: \"0xe6fab3f0c7199b0d34d7fbe83394fc0e0d06e99d\",\n    ReferralReader: \"0x8Aa382760BCdCe8644C33e6C2D52f6304A76F5c8\",\n  },\n  43114: {\n    // avalanche\n    Vault: \"0x9ab2De34A33fB459b538c43f251eB825645e8595\",\n    Router: \"0x5F719c2F1095F7B9fc68a68e35B51194f4b6abe8\",\n    VaultReader: \"0x66eC8fc33A26feAEAe156afA3Cb46923651F6f0D\",\n    Reader: \"0x2eFEE1950ededC65De687b40Fd30a7B5f4544aBd\",\n    GlpManager: \"0xe1ae4d4b06A5Fe1fc288f6B4CD72f9F8323B107F\",\n    RewardRouter: \"0x82147C5A7E850eA4E28155DF107F2590fD4ba327\",\n    RewardReader: \"0x04Fc11Bd28763872d143637a7c768bD96E44c1b6\",\n    NATIVE_TOKEN: \"0xB31f66AA3C1e785363F0875A1B74E27b85FD66c7\",\n    GLP: \"0x01234181085565ed162a948b6a5e88758CD7c7b8\",\n    GMX: \"0x62edc0692BD897D2295872a9FFCac5425011c661\",\n    ES_GMX: \"0xFf1489227BbAAC61a9209A08929E4c2a526DdD17\",\n    BN_GMX: \"0x8087a341D32D445d9aC8aCc9c14F5781E04A26d2\",\n    USDG: \"0xc0253c3cC6aa5Ab407b5795a04c28fB063273894\",\n    ES_GMX_IOU: \"0x6260101218eC4cCfFF1b778936C6f2400f95A954\", // placeholder address\n\n    StakedGmxTracker: \"0x2bD10f8E93B3669b6d42E74eEedC65dd1B0a1342\",\n    BonusGmxTracker: \"0x908C4D94D34924765f1eDc22A1DD098397c59dD4\",\n    FeeGmxTracker: \"0x4d268a7d4C16ceB5a606c173Bd974984343fea13\",\n    StakedGlpTracker: \"0x9e295B5B976a184B14aD8cd72413aD846C299660\",\n    FeeGlpTracker: \"0xd2D1162512F927a7e282Ef43a362659E4F2a728F\",\n\n    StakedGmxDistributor: \"0xfc5A1A6EB076a2C7aD06eD22C90d7E710E35ad0a\",\n    StakedGlpDistributor: \"0xDd593Cf40734199afc9207eBe9ffF23dA4Bf7720\",\n\n    GmxVester: \"0x472361d3cA5F49c8E633FB50385BfaD1e018b445\",\n    GlpVester: \"0x62331A7Bd1dfB3A7642B7db50B5509E57CA3154A\",\n\n    OrderBook: \"0x4296e307f108B2f583FF2F7B7270ee7831574Ae5\",\n    OrderExecutor: \"0x4296e307f108B2f583FF2F7B7270ee7831574Ae5\",\n    OrderBookReader: \"0xccFE3E576f8145403d3ce8f3c2f6519Dae40683B\",\n\n    PositionRouter: \"0x195256074192170d1530527abC9943759c7167d8\",\n    PositionManager: \"0xF2ec2e52c3b5F8b8bd5A3f93945d05628A233216\",\n\n    TraderJoeGmxAvaxPool: \"0x0c91a070f862666bbcce281346be45766d874d98\",\n    ReferralStorage: \"0x827ed045002ecdabeb6e2b0d1604cf5fc3d322f8\",\n    ReferralReader: \"0x505Ce16D3017be7D76a7C2631C0590E71A975083\",\n  },\n};\n\nexport function getContract(chainId, name) {\n  if (!CONTRACTS[chainId]) {\n    throw new Error(`Unknown chainId ${chainId}`);\n  }\n  if (!CONTRACTS[chainId][name]) {\n    throw new Error(`Unknown contract \"${name}\" for chainId ${chainId}`);\n  }\n  return CONTRACTS[chainId][name];\n}\n\nexport const XGMT_EXCLUDED_ACCOUNTS = [\n  \"0x330eef6b9b1ea6edd620c825c9919dc8b611d5d5\",\n  \"0xd9b1c23411adbb984b1c4be515fafc47a12898b2\",\n  \"0xa633158288520807f91ccc98aa58e0ea43acb400\",\n  \"0xffd0a93b4362052a336a7b22494f1b77018dd34b\",\n];\n","import { ethers } from \"ethers\";\nimport { getContract } from \"./Addresses\";\n\nconst TOKENS = {\n  56: [\n    {\n      name: \"Bitcoin (BTCB)\",\n      symbol: \"BTC\",\n      decimals: 18,\n      address: \"0x7130d2A12B9BCbFAe4f2634d864A1Ee1Ce3Ead9c\",\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/binance-bitcoin\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/14108/small/Binance-bitcoin.png\",\n    },\n    {\n      name: \"Ethereum\",\n      symbol: \"ETH\",\n      decimals: 18,\n      address: \"0x2170Ed0880ac9A755fd29B2688956BD959F933F8\",\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/ethereum\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/279/small/ethereum.png\",\n    },\n    {\n      name: \"Binance Coin\",\n      symbol: \"BNB\",\n      decimals: 18,\n      address: ethers.constants.AddressZero,\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/binance-coin\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/825/small/binance-coin-logo.png\",\n      isNative: true,\n    },\n    {\n      name: \"Wrapped Binance Coin\",\n      symbol: \"WBNB\",\n      decimals: 18,\n      address: getContract(56, \"NATIVE_TOKEN\"),\n      isWrapped: true,\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/binance-coin\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/825/small/binance-coin-logo.png\",\n      baseSymbol: \"BNB\",\n    },\n    {\n      name: \"USD Gambit\",\n      symbol: \"USDG\",\n      decimals: 18,\n      address: getContract(56, \"USDG\"),\n      isUsdg: true,\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/usd-gambit\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/15886/small/usdg-02.png\",\n    },\n    {\n      name: \"Binance USD\",\n      symbol: \"BUSD\",\n      decimals: 18,\n      address: \"0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56\",\n      isStable: true,\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/binance-usd\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/9576/small/BUSD.png\",\n    },\n    {\n      name: \"USD Coin\",\n      symbol: \"USDC\",\n      decimals: 18,\n      address: \"0x8AC76a51cc950d9822D68b83fE1Ad97B32Cd580d\",\n      isStable: true,\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/usd-coin\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/6319/small/USD_Coin_icon.png\",\n    },\n    {\n      name: \"Tether\",\n      symbol: \"USDT\",\n      decimals: 18,\n      address: \"0x55d398326f99059fF775485246999027B3197955\",\n      isStable: true,\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/tether\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/325/small/Tether-logo.png\",\n    },\n  ],\n  97: [\n    {\n      name: \"Binance Coin\",\n      symbol: \"BNB\",\n      decimals: 18,\n      address: ethers.constants.AddressZero,\n      priceFeed: '0x2514895c72f50D8bd4B4F9b1110F0D6bD2c97526',\n      isNative: true,\n      isShortable: true,\n    },\n    {\n      name: \"Wrapped Binance Coin\",\n      symbol: \"WBNB\",\n      decimals: 18,\n      address: \"0x612777Eea37a44F7a95E3B101C39e1E2695fa6C2\",\n      priceFeed: '0x2514895c72f50D8bd4B4F9b1110F0D6bD2c97526',\n      isWrapped: true,\n      baseSymbol: \"BNB\",\n    },\n    {\n      name: \"Bitcoin (BTCB)\",\n      symbol: \"BTC\",\n      decimals: 8,\n      address: \"0xb19C12715134bee7c4b1Ca593ee9E430dABe7b56\",\n      priceFeed: '0x5741306c21795FdCBb9b265Ea0255F499DFe515C',\n      isShortable: true,\n    },\n    {\n      name: \"Ethereum\",\n      symbol: \"ETH\",\n      decimals: 18,\n      address: \"0x1958f7C067226c7C8Ac310Dc994D0cebAbfb2B02\",\n      priceFeed: '0x143db3CEEfbdfe5631aDD3E50f7614B6ba708BA7',\n      isShortable: true,\n    },\n    {\n      name: \"Binance USD\",\n      symbol: \"BUSD\",\n      decimals: 18,\n      address: \"0x3F223C4E5ac67099CB695834b20cCd5E5D5AA9Ef\",\n      priceFeed: '0x8F460c4F4Fa9F87AeA4f29B4Ee91d1b8e97163BA',\n      isStable: true,\n      isShortable: true,\n    },\n  ],\n  111: [\n    {\n      name: \"Velas\",\n      symbol: \"VLX\",\n      decimals: 18,\n      address: ethers.constants.AddressZero,\n      isNative: true,\n      isShortable: true,\n    },\n    {\n      name: \"Wrapped Velas\",\n      symbol: \"WVLX\",\n      decimals: 18,\n      address: \"0x612777Eea37a44F7a95E3B101C39e1E2695fa6C2\",\n      isWrapped: true,\n      baseSymbol: \"VLX\",\n    },\n    {\n      name: \"Bitcoin (BTCB)\",\n      symbol: \"BTC\",\n      decimals: 8,\n      address: \"0xb19C12715134bee7c4b1Ca593ee9E430dABe7b56\",\n      isShortable: true,\n    },\n    {\n      name: \"Ethereum\",\n      symbol: \"ETH\",\n      decimals: 18,\n      address: \"0x1958f7C067226c7C8Ac310Dc994D0cebAbfb2B02\",\n      isShortable: true,\n    },\n    {\n      name: \"USD Gambit\",\n      symbol: \"USDG\",\n      decimals: 18,\n      address: \"0x12fE23885BaF83f8eEB5FCa67Ff93Ad2158F3258\",\n      isUsdg: true,\n    },\n    {\n      name: \"Binance USD\",\n      symbol: \"BUSD\",\n      decimals: 18,\n      address: \"0x3F223C4E5ac67099CB695834b20cCd5E5D5AA9Ef\",\n      isStable: true,\n      isShortable: true,\n    },\n  ],\n};\n\nconst ADDITIONAL_TOKENS = {\n  42161: [\n    {\n      name: \"GMX\",\n      symbol: \"GMX\",\n      address: getContract(42161, \"GMX\"),\n      decimals: 18,\n    },\n    {\n      name: \"Escrowed GMX\",\n      symbol: \"esGMX\",\n      address: getContract(42161, \"ES_GMX\"),\n      decimals: 18,\n    },\n    {\n      name: \"GMX LP\",\n      symbol: \"GLP\",\n      address: getContract(42161, \"GLP\"),\n      decimals: 18,\n    },\n  ],\n  43114: [\n    {\n      name: \"GMX\",\n      symbol: \"GMX\",\n      address: getContract(43114, \"GMX\"),\n      decimals: 18,\n    },\n    {\n      name: \"Escrowed GMX\",\n      symbol: \"esGMX\",\n      address: getContract(43114, \"ES_GMX\"),\n      decimals: 18,\n    },\n    {\n      name: \"GMX LP\",\n      symbol: \"GLP\",\n      address: getContract(42161, \"GLP\"),\n      decimals: 18,\n    },\n  ],\n};\n\nconst CHAIN_IDS = [97, 111];\n\nconst TOKENS_MAP = {};\nconst TOKENS_BY_SYMBOL_MAP = {};\n\nfor (let j = 0; j < CHAIN_IDS.length; j++) {\n  const chainId = CHAIN_IDS[j];\n  TOKENS_MAP[chainId] = {};\n  TOKENS_BY_SYMBOL_MAP[chainId] = {};\n  let tokens = TOKENS[chainId];\n  if (ADDITIONAL_TOKENS[chainId]) {\n    tokens = tokens.concat(ADDITIONAL_TOKENS[chainId]);\n  }\n\n  for (let i = 0; i < tokens.length; i++) {\n    const token = tokens[i];\n    TOKENS_MAP[chainId][token.address] = token;\n    TOKENS_BY_SYMBOL_MAP[chainId][token.symbol] = token;\n  }\n}\n\nconst WRAPPED_TOKENS_MAP = {};\nconst NATIVE_TOKENS_MAP = {};\nfor (const chainId of CHAIN_IDS) {\n  for (const token of TOKENS[chainId]) {\n    if (token.isWrapped) {\n      WRAPPED_TOKENS_MAP[chainId] = token;\n    } else if (token.isNative) {\n      NATIVE_TOKENS_MAP[chainId] = token;\n    }\n  }\n}\n\nexport function getWrappedToken(chainId) {\n  return WRAPPED_TOKENS_MAP[chainId];\n}\n\nexport function getNativeToken(chainId) {\n  return NATIVE_TOKENS_MAP[chainId];\n}\n\nexport function getTokens(chainId) {\n  return TOKENS[chainId];\n}\n\nexport function isValidToken(chainId, address) {\n  if (!TOKENS_MAP[chainId]) {\n    throw new Error(`Incorrect chainId ${chainId}`);\n  }\n  return address in TOKENS_MAP[chainId];\n}\n\nexport function getToken(chainId, address) {\n  if (!TOKENS_MAP[chainId]) {\n    throw new Error(`Incorrect chainId ${chainId}`);\n  }\n  if (!TOKENS_MAP[chainId][address]) {\n    throw new Error(`Incorrect address \"${address}\" for chainId ${chainId}`);\n  }\n  return TOKENS_MAP[chainId][address];\n}\n\nexport function getTokenBySymbol(chainId, symbol) {\n  const token = TOKENS_BY_SYMBOL_MAP[chainId][symbol];\n  if (!token) {\n    throw new Error(`Incorrect symbol \"${symbol}\" for chainId ${chainId}`);\n  }\n  return token;\n}\n\nexport function getWhitelistedTokens(chainId) {\n  return TOKENS[chainId].filter((token) => token.symbol !== \"USDG\");\n}\n","import React, {useCallback, useEffect, useRef, useState} from \"react\";\nimport {InjectedConnector} from \"@web3-react/injected-connector\";\nimport {\n  UserRejectedRequestError as UserRejectedRequestErrorWalletConnect,\n  WalletConnectConnector,\n} from \"@web3-react/walletconnect-connector\";\nimport {toast} from \"react-toastify\";\nimport {UnsupportedChainIdError, useWeb3React} from \"@web3-react/core\";\nimport {useLocalStorage} from \"react-use\";\nimport {ethers} from \"ethers\";\nimport {format as formatDateFn} from \"date-fns\";\nimport Token from \"../abis/Token.json\";\nimport _ from \"lodash\";\nimport {getContract} from \"../config/Addresses\";\nimport useSWR from \"swr\";\n\nimport OrderBookReader from \"../abis/OrderBookReader.json\";\nimport OrderBook from \"../abis/OrderBook.json\";\n\nimport {getWhitelistedTokens, isValidToken} from \"../config/Tokens\";\n\nconst {AddressZero} = ethers.constants;\n\nexport const UI_VERSION = \"1.3\";\n\n// use a random placeholder account instead of the zero address as the zero address might have tokens\nexport const PLACEHOLDER_ACCOUNT = ethers.Wallet.createRandom().address;\n\nexport const BSC = 56;\nexport const AVALANCHE = 43114;\nexport const BSC_TESTNET = 97;\nexport const ARBITRUM_TESTNET = 421611;\nexport const ARBITRUM = 42161;\nexport const VELAS = 106;\nexport const VELAS_TESTNET = 111;\n// TODO take it from web3\nexport const DEFAULT_CHAIN_ID = BSC_TESTNET;\nexport const CHAIN_ID = DEFAULT_CHAIN_ID;\n\nexport const MIN_PROFIT_TIME = 0;\n\nconst SELECTED_NETWORK_LOCAL_STORAGE_KEY = \"SELECTED_NETWORK\";\n\nexport const IS_NETWORK_DISABLED = {\n  [ARBITRUM]: false,\n  [AVALANCHE]: false,\n  [BSC_TESTNET]: false,\n  [VELAS_TESTNET]: false\n};\n\nconst CHAIN_NAMES_MAP = {\n  [BSC_TESTNET]: \"BSCTestnet\",\n  [VELAS_TESTNET]: \"VelasTestnet\"\n};\n\nconst GAS_PRICE_ADJUSTMENT_MAP = {\n  [ARBITRUM]: \"0\",\n  [AVALANCHE]: \"3000000000\", // 3 gwei\n  [BSC_TESTNET]: \"200000000\",\n  [VELAS_TESTNET]: \"200000000\",\n};\n\nconst MAX_GAS_PRICE_MAP = {\n  [AVALANCHE]: \"200000000000\", // 200 gwei\n  [BSC_TESTNET]: \"2000000000\",\n  [VELAS_TESTNET]: \"2000000000\",\n};\n\nconst alchemyWhitelistedDomains = [\"gmx.io\", \"app.gmx.io\"];\n\nexport function getAlchemyHttpUrl() {\n  if (alchemyWhitelistedDomains.includes(window.location.host)) {\n    return \"https://arb-mainnet.g.alchemy.com/v2/ha7CFsr1bx5ZItuR6VZBbhKozcKDY4LZ\";\n  }\n  return \"https://arb-mainnet.g.alchemy.com/v2/EmVYwUw0N2tXOuG0SZfe5Z04rzBsCbr2\";\n}\n\nexport function getAlchemyWsUrl() {\n  if (alchemyWhitelistedDomains.includes(window.location.host)) {\n    return \"wss://arb-mainnet.g.alchemy.com/v2/ha7CFsr1bx5ZItuR6VZBbhKozcKDY4LZ\";\n  }\n  return \"wss://arb-mainnet.g.alchemy.com/v2/EmVYwUw0N2tXOuG0SZfe5Z04rzBsCbr2\";\n}\n\nexport const WALLET_CONNECT_LOCALSTORAGE_KEY = \"walletconnect\";\nexport const WALLET_LINK_LOCALSTORAGE_PREFIX = \"-walletlink\";\nexport const SHOULD_EAGER_CONNECT_LOCALSTORAGE_KEY = \"eagerconnect\";\nexport const CURRENT_PROVIDER_LOCALSTORAGE_KEY = \"currentprovider\";\nexport const LANGUAGE_LOCALSTORAGE_KEY = \"LANGUAGE_KEY\";\n\nexport function getChainName(chainId) {\n  return CHAIN_NAMES_MAP[chainId];\n}\n\nexport const USDG_ADDRESS = getContract(CHAIN_ID, \"USDG\");\nexport const MAX_LEVERAGE = 100 * 10000;\n\nexport const MAX_PRICE_DEVIATION_BASIS_POINTS = 750;\nexport const DEFAULT_GAS_LIMIT = 1 * 1000 * 1000;\nexport const SECONDS_PER_YEAR = 31536000;\nexport const USDG_DECIMALS = 18;\nexport const USD_DECIMALS = 30;\nexport const BASIS_POINTS_DIVISOR = 10000;\nexport const DEPOSIT_FEE = 30;\nexport const DUST_BNB = \"2000000000000000\";\nexport const DUST_USD = expandDecimals(1, USD_DECIMALS);\nexport const PRECISION = expandDecimals(1, 30);\nexport const GLP_DECIMALS = 18;\nexport const LEVERAGE_DECIMALS = 18;\nexport const DEFAULT_MAX_USDG_AMOUNT = expandDecimals(200 * 1000 * 1000, 18);\n\nexport const TAX_BASIS_POINTS = 50;\nexport const STABLE_TAX_BASIS_POINTS = 5;\nexport const MINT_BURN_FEE_BASIS_POINTS = 25;\nexport const SWAP_FEE_BASIS_POINTS = 30;\nexport const STABLE_SWAP_FEE_BASIS_POINTS = 1;\nexport const MARGIN_FEE_BASIS_POINTS = 10;\n\nexport const LIQUIDATION_FEE = expandDecimals(5, USD_DECIMALS);\n\nexport const TRADES_PAGE_SIZE = 100;\n\nexport const GLP_COOLDOWN_DURATION = 15 * 60;\nexport const THRESHOLD_REDEMPTION_VALUE = expandDecimals(993, 27); // 0.993\nexport const FUNDING_RATE_PRECISION = 1000000;\n\nexport const SWAP = \"Swap\";\nexport const INCREASE = \"Increase\";\nexport const DECREASE = \"Decrease\";\nexport const LONG = \"Long\";\nexport const SHORT = \"Short\";\n\nexport const MARKET = \"Market\";\nexport const LIMIT = \"Limit\";\nexport const STOP = \"Stop\";\nexport const LEVERAGE_ORDER_OPTIONS = [MARKET, LIMIT, STOP];\nexport const SWAP_ORDER_OPTIONS = [MARKET, LIMIT];\nexport const SWAP_OPTIONS = [LONG, SHORT, SWAP];\nexport const DEFAULT_SLIPPAGE_AMOUNT = 30;\nexport const DEFAULT_HIGHER_SLIPPAGE_AMOUNT = 100;\n\nexport const SLIPPAGE_BPS_KEY = \"Exchange-swap-slippage-basis-points-v3\";\nexport const CLOSE_POSITION_RECEIVE_TOKEN_KEY = \"Close-position-receive-token\";\nexport const IS_PNL_IN_LEVERAGE_KEY = \"Exchange-swap-is-pnl-in-leverage\";\nexport const SHOW_PNL_AFTER_FEES_KEY = \"Exchange-swap-show-pnl-after-fees\";\nexport const DISABLE_ORDER_VALIDATION_KEY = \"disable-order-validation\";\nexport const SHOULD_SHOW_POSITION_LINES_KEY = \"Exchange-swap-should-show-position-lines\";\nexport const REFERRAL_CODE_KEY = \"GMX-referralCode\";\nexport const REFERRAL_CODE_QUERY_PARAM = \"ref\";\nexport const REFERRALS_SELECTED_TAB_KEY = \"Referrals-selected-tab\";\nexport const MAX_REFERRAL_CODE_LENGTH = 20;\n\nexport const TRIGGER_PREFIX_ABOVE = \">\";\nexport const TRIGGER_PREFIX_BELOW = \"<\";\n\nexport const MIN_PROFIT_BIPS = 0;\n\nexport const GLPPOOLCOLORS = {\n  ETH: \"#6062a6\",\n  BTC: \"#F7931A\",\n  \"BTC.b\": \"#F7931A\",\n  USDC: \"#2775CA\",\n  \"USDC.e\": \"#2A5ADA\",\n  USDT: \"#67B18A\",\n  MIM: \"#9695F8\",\n  FRAX: \"#000\",\n  DAI: \"#FAC044\",\n  UNI: \"#E9167C\",\n  AVAX: \"#E84142\",\n  LINK: \"#3256D6\",\n};\n\nexport const HIGH_EXECUTION_FEES_MAP = {\n  [ARBITRUM]: 3, // 3 USD\n  [AVALANCHE]: 3, // 3 USD\n};\n\nexport function getHighExecutionFee(chainId) {\n  return HIGH_EXECUTION_FEES_MAP[chainId] || 3;\n}\n\nexport const ICONLINKS = {\n  [BSC_TESTNET]: {\n    GMX: {\n      coingecko: \"https://www.coingecko.com/en/coins/gmx\",\n      bsctestnet: \"https://snowtrace.io/address/0x62edc0692bd897d2295872a9ffcac5425011c661\",\n    },\n    GLP: {\n      bsctestnet: \"https://snowtrace.io/address/0x9e295B5B976a184B14aD8cd72413aD846C299660\",\n    },\n    AVAX: {\n      coingecko: \"https://www.coingecko.com/en/coins/bsctestnet\",\n    },\n    ETH: {\n      coingecko: \"https://www.coingecko.com/en/coins/weth\",\n      bsctestnet: \"https://snowtrace.io/address/0x49d5c2bdffac6ce2bfdb6640f4f80f226bc10bab\",\n    },\n    BTC: {\n      coingecko: \"https://www.coingecko.com/en/coins/wrapped-bitcoin\",\n      bsctestnet: \"https://snowtrace.io/address/0x50b7545627a5162f82a992c33b87adc75187b218\",\n    },\n    \"BTC.b\": {\n      coingecko: \"https://www.coingecko.com/en/coins/wrapped-bitcoin\",\n      bsctestnet: \"https://snowtrace.io/address/0x152b9d0FdC40C096757F570A51E494bd4b943E50\",\n    },\n    MIM: {\n      coingecko: \"https://www.coingecko.com/en/coins/magic-internet-money\",\n      bsctestnet: \"https://snowtrace.io/address/0x130966628846bfd36ff31a822705796e8cb8c18d\",\n    },\n    \"USDC.e\": {\n      coingecko: \"https://www.coingecko.com/en/coins/usd-coin-bsctestnet-bridged-usdc-e\",\n      bsctestnet: \"https://snowtrace.io/address/0xa7d7079b0fead91f3e65f86e8915cb59c1a4c664\",\n    },\n    USDC: {\n      coingecko: \"https://www.coingecko.com/en/coins/usd-coin\",\n      bsctestnet: \"https://snowtrace.io/address/0xb97ef9ef8734c71904d8002f8b6bc66dd9c48a6e\",\n    },\n  },\n  [VELAS_TESTNET]: {\n    GMX: {\n      coingecko: \"https://www.coingecko.com/en/coins/gmx\",\n      bsc: \"https://snowtrace.io/address/0x62edc0692bd897d2295872a9ffcac5425011c661\",\n    },\n    GLP: {\n      bsc: \"https://snowtrace.io/address/0x9e295B5B976a184B14aD8cd72413aD846C299660\",\n    },\n    AVAX: {\n      coingecko: \"https://www.coingecko.com/en/coins/bsc\",\n    },\n    ETH: {\n      coingecko: \"https://www.coingecko.com/en/coins/weth\",\n      bsc: \"https://snowtrace.io/address/0x49d5c2bdffac6ce2bfdb6640f4f80f226bc10bab\",\n    },\n    BTC: {\n      coingecko: \"https://www.coingecko.com/en/coins/wrapped-bitcoin\",\n      bsc: \"https://snowtrace.io/address/0x50b7545627a5162f82a992c33b87adc75187b218\",\n    },\n    \"BTC.b\": {\n      coingecko: \"https://www.coingecko.com/en/coins/wrapped-bitcoin\",\n      bsc: \"https://snowtrace.io/address/0x152b9d0FdC40C096757F570A51E494bd4b943E50\",\n    },\n    MIM: {\n      coingecko: \"https://www.coingecko.com/en/coins/magic-internet-money\",\n      bsc: \"https://snowtrace.io/address/0x130966628846bfd36ff31a822705796e8cb8c18d\",\n    },\n    \"USDC.e\": {\n      coingecko: \"https://www.coingecko.com/en/coins/usd-coin-bsc-bridged-usdc-e\",\n      bsc: \"https://snowtrace.io/address/0xa7d7079b0fead91f3e65f86e8915cb59c1a4c664\",\n    },\n    USDC: {\n      coingecko: \"https://www.coingecko.com/en/coins/usd-coin\",\n      bsc: \"https://snowtrace.io/address/0xb97ef9ef8734c71904d8002f8b6bc66dd9c48a6e\",\n    },\n  },\n};\n\nexport const platformTokens = {\n  42161: {\n    // arbitrum\n    GMX: {\n      name: \"GMX\",\n      symbol: \"GMX\",\n      decimals: 18,\n      address: getContract(ARBITRUM, \"GMX\"),\n      imageUrl: \"https://assets.coingecko.com/coins/images/18323/small/arbit.png?1631532468\",\n    },\n    GLP: {\n      name: \"GMX LP\",\n      symbol: \"GLP\",\n      decimals: 18,\n      address: getContract(ARBITRUM, \"StakedGlpTracker\"), // address of fsGLP token because user only holds fsGLP\n      imageUrl: \"https://github.com/gmx-io/gmx-assets/blob/main/GMX-Assets/PNG/GLP_LOGO%20ONLY.png?raw=true\",\n    },\n  },\n  43114: {\n    // avalanche\n    GMX: {\n      name: \"GMX\",\n      symbol: \"GMX\",\n      decimals: 18,\n      address: getContract(AVALANCHE, \"GMX\"),\n      imageUrl: \"https://assets.coingecko.com/coins/images/18323/small/arbit.png?1631532468\",\n    },\n    GLP: {\n      name: \"GMX LP\",\n      symbol: \"GLP\",\n      decimals: 18,\n      address: getContract(AVALANCHE, \"StakedGlpTracker\"), // address of fsGLP token because user only holds fsGLP\n      imageUrl: \"https://github.com/gmx-io/gmx-assets/blob/main/GMX-Assets/PNG/GLP_LOGO%20ONLY.png?raw=true\",\n    },\n  },\n};\n\nconst supportedChainIds = [BSC_TESTNET, VELAS_TESTNET];\n\nconst injectedConnector = new InjectedConnector({\n  supportedChainIds,\n});\n\nconst getWalletConnectConnector = () => {\n  const chainId = localStorage.getItem(SELECTED_NETWORK_LOCAL_STORAGE_KEY) || DEFAULT_CHAIN_ID;\n  return new WalletConnectConnector({\n    rpc: {\n      [BSC_TESTNET]: BSC_RPC_PROVIDERS[0],\n      [BSC]: BSC_RPC_PROVIDERS[0],\n      [ARBITRUM_TESTNET]: \"https://rinkeby.arbitrum.io/rpc\",\n    },\n    qrcode: true,\n    chainId,\n  });\n};\n\nexport function isSupportedChain(chainId) {\n  return supportedChainIds.includes(chainId);\n}\n\nexport function deserialize(data) {\n  for (const [key, value] of Object.entries(data)) {\n    if (value._type === \"BigNumber\") {\n      data[key] = bigNumberify(value.value);\n    }\n  }\n  return data;\n}\n\nexport function isHomeSite() {\n  // return process.env.REACT_APP_IS_HOME_SITE === \"true\";\n  return window.location.hash === \"#/\";\n}\n\nexport const helperToast = {\n  success: (content, opts) => {\n    toast.dismiss();\n    toast.success(content, opts);\n  },\n  error: (content, opts) => {\n    toast.dismiss();\n    toast.error(content, opts);\n  },\n};\n\nexport function useLocalStorageByChainId(chainId, key, defaultValue) {\n  const [internalValue, setInternalValue] = useLocalStorage(key, {});\n\n  const setValue = useCallback(\n    (value) => {\n      setInternalValue((internalValue) => {\n        if (typeof value === \"function\") {\n          value = value(internalValue[chainId] || defaultValue);\n        }\n        const newInternalValue = {\n          ...internalValue,\n          [chainId]: value,\n        };\n        return newInternalValue;\n      });\n    },\n    [chainId, setInternalValue, defaultValue]\n  );\n\n  let value;\n  if (chainId in internalValue) {\n    value = internalValue[chainId];\n  } else {\n    value = defaultValue;\n  }\n\n  return [value, setValue];\n}\n\nexport function useLocalStorageSerializeKey(key, value, opts) {\n  key = JSON.stringify(key);\n  return useLocalStorage(key, value, opts);\n}\n\nfunction getTriggerPrice(tokenAddress, max, info, orderOption, triggerPriceUsd) {\n  // Limit/stop orders are executed with price specified by user\n  if (orderOption && orderOption !== MARKET && triggerPriceUsd) {\n    return triggerPriceUsd;\n  }\n\n  // Market orders are executed with current market price\n  if (!info) {\n    return;\n  }\n  if (max && !info.maxPrice) {\n    return;\n  }\n  if (!max && !info.minPrice) {\n    return;\n  }\n  return max ? info.maxPrice : info.minPrice;\n}\n\nexport function getLiquidationPriceFromDelta({liquidationAmount, size, collateral, averagePrice, isLong}) {\n  if (!size || size.eq(0)) {\n    return;\n  }\n\n  if (liquidationAmount.gt(collateral)) {\n    const liquidationDelta = liquidationAmount.sub(collateral);\n    const priceDelta = liquidationDelta.mul(averagePrice).div(size);\n    return isLong ? averagePrice.add(priceDelta) : averagePrice.sub(priceDelta);\n  }\n\n  const liquidationDelta = collateral.sub(liquidationAmount);\n  const priceDelta = liquidationDelta.mul(averagePrice).div(size);\n\n  return isLong ? averagePrice.sub(priceDelta) : averagePrice.add(priceDelta);\n}\n\nexport const replaceNativeTokenAddress = (path, nativeTokenAddress) => {\n  if (!path) {\n    return;\n  }\n\n  let updatedPath = [];\n  for (let i = 0; i < path.length; i++) {\n    let address = path[i];\n    if (address === AddressZero) {\n      address = nativeTokenAddress;\n    }\n    updatedPath.push(address);\n  }\n\n  return updatedPath;\n};\n\nexport function getMarginFee(sizeDelta) {\n  if (!sizeDelta) {\n    return bigNumberify(0);\n  }\n  const afterFeeUsd = sizeDelta.mul(BASIS_POINTS_DIVISOR - MARGIN_FEE_BASIS_POINTS).div(BASIS_POINTS_DIVISOR);\n  return sizeDelta.sub(afterFeeUsd);\n}\n\nexport function getServerBaseUrl(chainId) {\n  if (isLocal()) {\n    return \"http://185.158.114.248:8080\";\n  }\n  if (isDevelopment()) {\n    return \"http://185.158.114.248:8080\";\n  }\n  return \"https://api.leveragepro.io\";\n}\n\nexport function getServerUrl(chainId, path) {\n  return `${getServerBaseUrl(chainId)}${path}`;\n}\n\nexport function isTriggerRatioInverted(fromTokenInfo, toTokenInfo) {\n  if (!toTokenInfo || !fromTokenInfo) return false;\n  if (toTokenInfo.isStable || toTokenInfo.isUsdg) return true;\n  if (toTokenInfo.maxPrice) return toTokenInfo.maxPrice.lt(fromTokenInfo.maxPrice);\n  return false;\n}\n\nexport function getExchangeRate(tokenAInfo, tokenBInfo, inverted) {\n  if (!tokenAInfo || !tokenAInfo.minPrice || !tokenBInfo || !tokenBInfo.maxPrice) {\n    return;\n  }\n  if (inverted) {\n    return tokenAInfo.minPrice.mul(PRECISION).div(tokenBInfo.maxPrice);\n  }\n  return tokenBInfo.maxPrice.mul(PRECISION).div(tokenAInfo.minPrice);\n}\n\nexport function getMostAbundantStableToken(chainId, infoTokens) {\n  const whitelistedTokens = getWhitelistedTokens(chainId);\n  let availableAmount;\n  let stableToken = whitelistedTokens.find((t) => t.isStable);\n  for (let i = 0; i < whitelistedTokens.length; i++) {\n    const info = getTokenInfo(infoTokens, whitelistedTokens[i].address);\n    if (!info.isStable || !info.availableAmount) {\n      continue;\n    }\n\n    const adjustedAvailableAmount = adjustForDecimals(info.availableAmount, info.decimals, USD_DECIMALS);\n    if (!availableAmount || adjustedAvailableAmount.gt(availableAmount)) {\n      availableAmount = adjustedAvailableAmount;\n      stableToken = info;\n    }\n  }\n  return stableToken;\n}\n\nexport function shouldInvertTriggerRatio(tokenA, tokenB) {\n  if (tokenB.isStable || tokenB.isUsdg) return true;\n  if (tokenB.maxPrice && tokenA.maxPrice && tokenB.maxPrice.lt(tokenA.maxPrice)) return true;\n  return false;\n}\n\nexport function getExchangeRateDisplay(rate, tokenA, tokenB, opts = {}) {\n  if (!rate || !tokenA || !tokenB) return \"0\";\n  if (shouldInvertTriggerRatio(tokenA, tokenB)) {\n    [tokenA, tokenB] = [tokenB, tokenA];\n    rate = PRECISION.mul(PRECISION).div(rate);\n  }\n  const rateValue = formatAmount(rate, USD_DECIMALS, tokenA.isStable || tokenA.isUsdg ? 2 : 4, true);\n  if (opts.omitSymbols) {\n    return rateValue;\n  }\n  return `${rateValue} ${tokenA.symbol}/${tokenB.symbol}`;\n}\n\nconst adjustForDecimalsFactory = (n) => (number) => {\n  if (n === 0) {\n    return number;\n  }\n  if (n > 0) {\n    return number.mul(expandDecimals(1, n));\n  }\n  return number.div(expandDecimals(1, -n));\n};\n\nexport function adjustForDecimals(amount, divDecimals, mulDecimals) {\n  return amount.mul(expandDecimals(1, mulDecimals)).div(expandDecimals(1, divDecimals));\n}\n\nexport function getTargetUsdgAmount(token, usdgSupply, totalTokenWeights) {\n  if (!token || !token.weight || !usdgSupply) {\n    return;\n  }\n\n  if (usdgSupply.eq(0)) {\n    return bigNumberify(0);\n  }\n\n  return token.weight.mul(usdgSupply).div(totalTokenWeights);\n}\n\nexport function getFeeBasisPoints(\n  token,\n  usdgDelta,\n  feeBasisPoints,\n  taxBasisPoints,\n  increment,\n  usdgSupply,\n  totalTokenWeights\n) {\n  if (!token || !token.usdgAmount || !usdgSupply || !totalTokenWeights) {\n    return 0;\n  }\n\n  feeBasisPoints = bigNumberify(feeBasisPoints);\n  taxBasisPoints = bigNumberify(taxBasisPoints);\n\n  const initialAmount = token.usdgAmount;\n  let nextAmount = initialAmount.add(usdgDelta);\n  if (!increment) {\n    nextAmount = usdgDelta.gt(initialAmount) ? bigNumberify(0) : initialAmount.sub(usdgDelta);\n  }\n\n  const targetAmount = getTargetUsdgAmount(token, usdgSupply, totalTokenWeights);\n  if (!targetAmount || targetAmount.eq(0)) {\n    return feeBasisPoints.toNumber();\n  }\n\n  const initialDiff = initialAmount.gt(targetAmount)\n    ? initialAmount.sub(targetAmount)\n    : targetAmount.sub(initialAmount);\n  const nextDiff = nextAmount.gt(targetAmount) ? nextAmount.sub(targetAmount) : targetAmount.sub(nextAmount);\n\n  if (nextDiff.lt(initialDiff)) {\n    const rebateBps = taxBasisPoints.mul(initialDiff).div(targetAmount);\n    return rebateBps.gt(feeBasisPoints) ? 0 : feeBasisPoints.sub(rebateBps).toNumber();\n  }\n\n  let averageDiff = initialDiff.add(nextDiff).div(2);\n  if (averageDiff.gt(targetAmount)) {\n    averageDiff = targetAmount;\n  }\n  const taxBps = taxBasisPoints.mul(averageDiff).div(targetAmount);\n  return feeBasisPoints.add(taxBps).toNumber();\n}\n\nexport function getBuyGlpToAmount(fromAmount, swapTokenAddress, infoTokens, glpPrice, usdgSupply, totalTokenWeights) {\n  const defaultValue = {amount: bigNumberify(0), feeBasisPoints: 0};\n  if (!fromAmount || !swapTokenAddress || !infoTokens || !glpPrice || !usdgSupply || !totalTokenWeights) {\n    return defaultValue;\n  }\n\n  const swapToken = getTokenInfo(infoTokens, swapTokenAddress);\n  if (!swapToken || !swapToken.minPrice) {\n    return defaultValue;\n  }\n\n  let glpAmount = fromAmount.mul(swapToken.minPrice).div(glpPrice);\n  glpAmount = adjustForDecimals(glpAmount, swapToken.decimals, USDG_DECIMALS);\n\n  let usdgAmount = fromAmount.mul(swapToken.minPrice).div(PRECISION);\n  usdgAmount = adjustForDecimals(usdgAmount, swapToken.decimals, USDG_DECIMALS);\n  const feeBasisPoints = getFeeBasisPoints(\n    swapToken,\n    usdgAmount,\n    MINT_BURN_FEE_BASIS_POINTS,\n    TAX_BASIS_POINTS,\n    true,\n    usdgSupply,\n    totalTokenWeights\n  );\n\n  glpAmount = glpAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR);\n\n  return {amount: glpAmount, feeBasisPoints};\n}\n\nexport function getSellGlpFromAmount(toAmount, swapTokenAddress, infoTokens, glpPrice, usdgSupply, totalTokenWeights) {\n  const defaultValue = {amount: bigNumberify(0), feeBasisPoints: 0};\n  if (!toAmount || !swapTokenAddress || !infoTokens || !glpPrice || !usdgSupply || !totalTokenWeights) {\n    return defaultValue;\n  }\n\n  const swapToken = getTokenInfo(infoTokens, swapTokenAddress);\n  if (!swapToken || !swapToken.maxPrice) {\n    return defaultValue;\n  }\n\n  let glpAmount = toAmount.mul(swapToken.maxPrice).div(glpPrice);\n  glpAmount = adjustForDecimals(glpAmount, swapToken.decimals, USDG_DECIMALS);\n\n  let usdgAmount = toAmount.mul(swapToken.maxPrice).div(PRECISION);\n  usdgAmount = adjustForDecimals(usdgAmount, swapToken.decimals, USDG_DECIMALS);\n  const feeBasisPoints = getFeeBasisPoints(\n    swapToken,\n    usdgAmount,\n    MINT_BURN_FEE_BASIS_POINTS,\n    TAX_BASIS_POINTS,\n    false,\n    usdgSupply,\n    totalTokenWeights\n  );\n\n  glpAmount = glpAmount.mul(BASIS_POINTS_DIVISOR).div(BASIS_POINTS_DIVISOR - feeBasisPoints);\n\n  return {amount: glpAmount, feeBasisPoints};\n}\n\nexport function getBuyGlpFromAmount(toAmount, fromTokenAddress, infoTokens, glpPrice, usdgSupply, totalTokenWeights) {\n  const defaultValue = {amount: bigNumberify(0)};\n  if (!toAmount || !fromTokenAddress || !infoTokens || !glpPrice || !usdgSupply || !totalTokenWeights) {\n    return defaultValue;\n  }\n\n  const fromToken = getTokenInfo(infoTokens, fromTokenAddress);\n  if (!fromToken || !fromToken.minPrice) {\n    return defaultValue;\n  }\n\n  let fromAmount = toAmount.mul(glpPrice).div(fromToken.minPrice);\n  fromAmount = adjustForDecimals(fromAmount, GLP_DECIMALS, fromToken.decimals);\n\n  const usdgAmount = toAmount.mul(glpPrice).div(PRECISION);\n  const feeBasisPoints = getFeeBasisPoints(\n    fromToken,\n    usdgAmount,\n    MINT_BURN_FEE_BASIS_POINTS,\n    TAX_BASIS_POINTS,\n    true,\n    usdgSupply,\n    totalTokenWeights\n  );\n\n  fromAmount = fromAmount.mul(BASIS_POINTS_DIVISOR).div(BASIS_POINTS_DIVISOR - feeBasisPoints);\n\n  return {amount: fromAmount, feeBasisPoints};\n}\n\nexport function getSellGlpToAmount(toAmount, fromTokenAddress, infoTokens, glpPrice, usdgSupply, totalTokenWeights) {\n  const defaultValue = {amount: bigNumberify(0)};\n  if (!toAmount || !fromTokenAddress || !infoTokens || !glpPrice || !usdgSupply || !totalTokenWeights) {\n    return defaultValue;\n  }\n\n  const fromToken = getTokenInfo(infoTokens, fromTokenAddress);\n  if (!fromToken || !fromToken.maxPrice) {\n    return defaultValue;\n  }\n\n  let fromAmount = toAmount.mul(glpPrice).div(fromToken.maxPrice);\n  fromAmount = adjustForDecimals(fromAmount, GLP_DECIMALS, fromToken.decimals);\n\n  const usdgAmount = toAmount.mul(glpPrice).div(PRECISION);\n  const feeBasisPoints = getFeeBasisPoints(\n    fromToken,\n    usdgAmount,\n    MINT_BURN_FEE_BASIS_POINTS,\n    TAX_BASIS_POINTS,\n    false,\n    usdgSupply,\n    totalTokenWeights\n  );\n\n  fromAmount = fromAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR);\n\n  return {amount: fromAmount, feeBasisPoints};\n}\n\nexport function getNextFromAmount(\n  chainId,\n  toAmount,\n  fromTokenAddress,\n  toTokenAddress,\n  infoTokens,\n  toTokenPriceUsd,\n  ratio,\n  usdgSupply,\n  totalTokenWeights,\n  forSwap\n) {\n  const defaultValue = {amount: bigNumberify(0)};\n\n  if (!toAmount || !fromTokenAddress || !toTokenAddress || !infoTokens) {\n    return defaultValue;\n  }\n\n  if (fromTokenAddress === toTokenAddress) {\n    return {amount: toAmount};\n  }\n\n  const fromToken = getTokenInfo(infoTokens, fromTokenAddress);\n  const toToken = getTokenInfo(infoTokens, toTokenAddress);\n\n  if (fromToken.isNative && toToken.isWrapped) {\n    return {amount: toAmount};\n  }\n\n  if (fromToken.isWrapped && toToken.isNative) {\n    return {amount: toAmount};\n  }\n\n  // the realtime price should be used if it is for a transaction to open / close a position\n  // or if the transaction involves doing a swap and opening / closing a position\n  // otherwise use the contract price instead of realtime price for swaps\n\n  let fromTokenMinPrice;\n  if (fromToken) {\n    fromTokenMinPrice = forSwap ? fromToken.contractMinPrice : fromToken.minPrice;\n  }\n\n  let toTokenMaxPrice;\n  if (toToken) {\n    toTokenMaxPrice = forSwap ? toToken.contractMaxPrice : toToken.maxPrice;\n  }\n\n  if (!fromToken || !fromTokenMinPrice || !toToken || !toTokenMaxPrice) {\n    return defaultValue;\n  }\n\n  const adjustDecimals = adjustForDecimalsFactory(fromToken.decimals - toToken.decimals);\n\n  let fromAmountBasedOnRatio;\n  if (ratio && !ratio.isZero()) {\n    fromAmountBasedOnRatio = toAmount.mul(ratio).div(PRECISION);\n  }\n\n  const fromAmount =\n    ratio && !ratio.isZero() ? fromAmountBasedOnRatio : toAmount.mul(toTokenMaxPrice).div(fromTokenMinPrice);\n\n  let usdgAmount = fromAmount.mul(fromTokenMinPrice).div(PRECISION);\n  usdgAmount = adjustForDecimals(usdgAmount, toToken.decimals, USDG_DECIMALS);\n  const swapFeeBasisPoints =\n    fromToken.isStable && toToken.isStable ? STABLE_SWAP_FEE_BASIS_POINTS : SWAP_FEE_BASIS_POINTS;\n  const taxBasisPoints = fromToken.isStable && toToken.isStable ? STABLE_TAX_BASIS_POINTS : TAX_BASIS_POINTS;\n  const feeBasisPoints0 = getFeeBasisPoints(\n    fromToken,\n    usdgAmount,\n    swapFeeBasisPoints,\n    taxBasisPoints,\n    true,\n    usdgSupply,\n    totalTokenWeights\n  );\n  const feeBasisPoints1 = getFeeBasisPoints(\n    toToken,\n    usdgAmount,\n    swapFeeBasisPoints,\n    taxBasisPoints,\n    false,\n    usdgSupply,\n    totalTokenWeights\n  );\n  const feeBasisPoints = feeBasisPoints0 > feeBasisPoints1 ? feeBasisPoints0 : feeBasisPoints1;\n\n  return {\n    amount: adjustDecimals(fromAmount.mul(BASIS_POINTS_DIVISOR).div(BASIS_POINTS_DIVISOR - feeBasisPoints)),\n    feeBasisPoints,\n  };\n}\n\nexport function getNextToAmount(\n  chainId,\n  fromAmount,\n  fromTokenAddress,\n  toTokenAddress,\n  infoTokens,\n  toTokenPriceUsd,\n  ratio,\n  usdgSupply,\n  totalTokenWeights,\n  forSwap\n) {\n  const defaultValue = {amount: bigNumberify(0)};\n  if (!fromAmount || !fromTokenAddress || !toTokenAddress || !infoTokens) {\n    return defaultValue;\n  }\n\n  if (fromTokenAddress === toTokenAddress) {\n    return {amount: fromAmount};\n  }\n\n  const fromToken = getTokenInfo(infoTokens, fromTokenAddress);\n  const toToken = getTokenInfo(infoTokens, toTokenAddress);\n\n  if (fromToken.isNative && toToken.isWrapped) {\n    return {amount: fromAmount};\n  }\n\n  if (fromToken.isWrapped && toToken.isNative) {\n    return {amount: fromAmount};\n  }\n\n  // the realtime price should be used if it is for a transaction to open / close a position\n  // or if the transaction involves doing a swap and opening / closing a position\n  // otherwise use the contract price instead of realtime price for swaps\n\n  let fromTokenMinPrice;\n  if (fromToken) {\n    fromTokenMinPrice = forSwap ? fromToken.contractMinPrice : fromToken.minPrice;\n  }\n\n  let toTokenMaxPrice;\n  if (toToken) {\n    toTokenMaxPrice = forSwap ? toToken.contractMaxPrice : toToken.maxPrice;\n  }\n\n  if (!fromTokenMinPrice || !toTokenMaxPrice) {\n    return defaultValue;\n  }\n\n  const adjustDecimals = adjustForDecimalsFactory(toToken.decimals - fromToken.decimals);\n\n  let toAmountBasedOnRatio = bigNumberify(0);\n  if (ratio && !ratio.isZero()) {\n    toAmountBasedOnRatio = fromAmount.mul(PRECISION).div(ratio);\n  }\n\n  if (toTokenAddress === USDG_ADDRESS) {\n    const feeBasisPoints = getSwapFeeBasisPoints(fromToken.isStable);\n\n    if (ratio && !ratio.isZero()) {\n      const toAmount = toAmountBasedOnRatio;\n      return {\n        amount: adjustDecimals(toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR)),\n        feeBasisPoints,\n      };\n    }\n\n    const toAmount = fromAmount.mul(fromTokenMinPrice).div(PRECISION);\n    return {\n      amount: adjustDecimals(toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR)),\n      feeBasisPoints,\n    };\n  }\n\n  if (fromTokenAddress === USDG_ADDRESS) {\n    const redemptionValue = toToken.redemptionAmount\n      .mul(toTokenPriceUsd || toTokenMaxPrice)\n      .div(expandDecimals(1, toToken.decimals));\n\n    if (redemptionValue.gt(THRESHOLD_REDEMPTION_VALUE)) {\n      const feeBasisPoints = getSwapFeeBasisPoints(toToken.isStable);\n\n      const toAmount =\n        ratio && !ratio.isZero()\n          ? toAmountBasedOnRatio\n          : fromAmount.mul(toToken.redemptionAmount).div(expandDecimals(1, toToken.decimals));\n\n      return {\n        amount: adjustDecimals(toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR)),\n        feeBasisPoints,\n      };\n    }\n\n    const expectedAmount = fromAmount;\n\n    const stableToken = getMostAbundantStableToken(chainId, infoTokens);\n    if (!stableToken || stableToken.availableAmount.lt(expectedAmount)) {\n      const toAmount =\n        ratio && !ratio.isZero()\n          ? toAmountBasedOnRatio\n          : fromAmount.mul(toToken.redemptionAmount).div(expandDecimals(1, toToken.decimals));\n      const feeBasisPoints = getSwapFeeBasisPoints(toToken.isStable);\n      return {\n        amount: adjustDecimals(toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR)),\n        feeBasisPoints,\n      };\n    }\n\n    const feeBasisPoints0 = getSwapFeeBasisPoints(true);\n    const feeBasisPoints1 = getSwapFeeBasisPoints(false);\n\n    if (ratio && !ratio.isZero()) {\n      const toAmount = toAmountBasedOnRatio\n        .mul(BASIS_POINTS_DIVISOR - feeBasisPoints0 - feeBasisPoints1)\n        .div(BASIS_POINTS_DIVISOR);\n      return {\n        amount: adjustDecimals(toAmount),\n        path: [USDG_ADDRESS, stableToken.address, toToken.address],\n        feeBasisPoints: feeBasisPoints0 + feeBasisPoints1,\n      };\n    }\n\n    // get toAmount for USDG => stableToken\n    let toAmount = fromAmount.mul(PRECISION).div(stableToken.maxPrice);\n    // apply USDG => stableToken fees\n    toAmount = toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints0).div(BASIS_POINTS_DIVISOR);\n\n    // get toAmount for stableToken => toToken\n    toAmount = toAmount.mul(stableToken.minPrice).div(toTokenPriceUsd || toTokenMaxPrice);\n    // apply stableToken => toToken fees\n    toAmount = toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints1).div(BASIS_POINTS_DIVISOR);\n\n    return {\n      amount: adjustDecimals(toAmount),\n      path: [USDG_ADDRESS, stableToken.address, toToken.address],\n      feeBasisPoints: feeBasisPoints0 + feeBasisPoints1,\n    };\n  }\n\n  const toAmount =\n    ratio && !ratio.isZero()\n      ? toAmountBasedOnRatio\n      : fromAmount.mul(fromTokenMinPrice).div(toTokenPriceUsd || toTokenMaxPrice);\n\n  let usdgAmount = fromAmount.mul(fromTokenMinPrice).div(PRECISION);\n  usdgAmount = adjustForDecimals(usdgAmount, fromToken.decimals, USDG_DECIMALS);\n  const swapFeeBasisPoints =\n    fromToken.isStable && toToken.isStable ? STABLE_SWAP_FEE_BASIS_POINTS : SWAP_FEE_BASIS_POINTS;\n  const taxBasisPoints = fromToken.isStable && toToken.isStable ? STABLE_TAX_BASIS_POINTS : TAX_BASIS_POINTS;\n  const feeBasisPoints0 = getFeeBasisPoints(\n    fromToken,\n    usdgAmount,\n    swapFeeBasisPoints,\n    taxBasisPoints,\n    true,\n    usdgSupply,\n    totalTokenWeights\n  );\n  const feeBasisPoints1 = getFeeBasisPoints(\n    toToken,\n    usdgAmount,\n    swapFeeBasisPoints,\n    taxBasisPoints,\n    false,\n    usdgSupply,\n    totalTokenWeights\n  );\n  const feeBasisPoints = feeBasisPoints0 > feeBasisPoints1 ? feeBasisPoints0 : feeBasisPoints1;\n\n  return {\n    amount: adjustDecimals(toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR)),\n    feeBasisPoints,\n  };\n}\n\nexport function getProfitPrice(closePrice, position) {\n  let profitPrice;\n  if (position && position.averagePrice && closePrice) {\n    profitPrice = position.isLong\n      ? position.averagePrice.mul(BASIS_POINTS_DIVISOR + MIN_PROFIT_BIPS).div(BASIS_POINTS_DIVISOR)\n      : position.averagePrice.mul(BASIS_POINTS_DIVISOR - MIN_PROFIT_BIPS).div(BASIS_POINTS_DIVISOR);\n  }\n  return profitPrice;\n}\n\nexport function calculatePositionDelta(\n  price,\n  {size, collateral, isLong, averagePrice, lastIncreasedTime},\n  sizeDelta\n) {\n  if (!sizeDelta) {\n    sizeDelta = size;\n  }\n  const priceDelta = averagePrice.gt(price) ? averagePrice.sub(price) : price.sub(averagePrice);\n  let delta = sizeDelta.mul(priceDelta).div(averagePrice);\n  const pendingDelta = delta;\n\n  const minProfitExpired = lastIncreasedTime + MIN_PROFIT_TIME < Date.now() / 1000;\n  const hasProfit = isLong ? price.gt(averagePrice) : price.lt(averagePrice);\n  if (!minProfitExpired && hasProfit && delta.mul(BASIS_POINTS_DIVISOR).lte(size.mul(MIN_PROFIT_BIPS))) {\n    delta = bigNumberify(0);\n  }\n\n  const deltaPercentage = delta.mul(BASIS_POINTS_DIVISOR).div(collateral);\n  const pendingDeltaPercentage = pendingDelta.mul(BASIS_POINTS_DIVISOR).div(collateral);\n\n  return {\n    delta,\n    pendingDelta,\n    pendingDeltaPercentage,\n    hasProfit,\n    deltaPercentage,\n  };\n}\n\nexport function getDeltaStr({delta, deltaPercentage, hasProfit}) {\n  let deltaStr;\n  let deltaPercentageStr;\n\n  if (delta.gt(0)) {\n    deltaStr = hasProfit ? \"+\" : \"-\";\n    deltaPercentageStr = hasProfit ? \"+\" : \"-\";\n  } else {\n    deltaStr = \"\";\n    deltaPercentageStr = \"\";\n  }\n  deltaStr += `$${formatAmount(delta, USD_DECIMALS, 2, true)}`;\n  deltaPercentageStr += `${formatAmount(deltaPercentage, 2, 2)}%`;\n\n  return {deltaStr, deltaPercentageStr};\n}\n\nexport function getLeverage({\n                              size,\n                              sizeDelta,\n                              increaseSize,\n                              collateral,\n                              collateralDelta,\n                              increaseCollateral,\n                              entryFundingRate,\n                              cumulativeFundingRate,\n                              hasProfit,\n                              delta,\n                              includeDelta,\n                            }) {\n  if (!size && !sizeDelta) {\n    return;\n  }\n  if (!collateral && !collateralDelta) {\n    return;\n  }\n\n  let nextSize = size ? size : bigNumberify(0);\n  if (sizeDelta) {\n    if (increaseSize) {\n      nextSize = size.add(sizeDelta);\n    } else {\n      if (sizeDelta.gte(size)) {\n        return;\n      }\n      nextSize = size.sub(sizeDelta);\n    }\n  }\n\n  let remainingCollateral = collateral ? collateral : bigNumberify(0);\n  if (collateralDelta) {\n    if (increaseCollateral) {\n      remainingCollateral = collateral.add(collateralDelta);\n    } else {\n      if (collateralDelta.gte(collateral)) {\n        return;\n      }\n      remainingCollateral = collateral.sub(collateralDelta);\n    }\n  }\n\n  if (delta && includeDelta) {\n    if (hasProfit) {\n      remainingCollateral = remainingCollateral.add(delta);\n    } else {\n      if (delta.gt(remainingCollateral)) {\n        return;\n      }\n\n      remainingCollateral = remainingCollateral.sub(delta);\n    }\n  }\n\n  if (remainingCollateral.eq(0)) {\n    return;\n  }\n\n  remainingCollateral = sizeDelta\n    ? remainingCollateral.mul(BASIS_POINTS_DIVISOR - MARGIN_FEE_BASIS_POINTS).div(BASIS_POINTS_DIVISOR)\n    : remainingCollateral;\n  if (entryFundingRate && cumulativeFundingRate) {\n    const fundingFee = size.mul(cumulativeFundingRate.sub(entryFundingRate)).div(FUNDING_RATE_PRECISION);\n    remainingCollateral = remainingCollateral.sub(fundingFee);\n  }\n\n  return nextSize.mul(BASIS_POINTS_DIVISOR).div(remainingCollateral);\n}\n\nexport function getLiquidationPrice(data) {\n  let {\n    isLong,\n    size,\n    collateral,\n    averagePrice,\n    entryFundingRate,\n    cumulativeFundingRate,\n    sizeDelta,\n    collateralDelta,\n    increaseCollateral,\n    increaseSize,\n    delta,\n    hasProfit,\n    includeDelta,\n  } = data;\n  if (!size || !collateral || !averagePrice) {\n    return;\n  }\n\n  let nextSize = size ? size : bigNumberify(0);\n  let remainingCollateral = collateral;\n\n  if (sizeDelta) {\n    if (increaseSize) {\n      nextSize = size.add(sizeDelta);\n    } else {\n      if (sizeDelta.gte(size)) {\n        return;\n      }\n      nextSize = size.sub(sizeDelta);\n    }\n\n    if (includeDelta && !hasProfit) {\n      const adjustedDelta = sizeDelta.mul(delta).div(size);\n      remainingCollateral = remainingCollateral.sub(adjustedDelta);\n    }\n  }\n\n  if (collateralDelta) {\n    if (increaseCollateral) {\n      remainingCollateral = remainingCollateral.add(collateralDelta);\n    } else {\n      if (collateralDelta.gte(remainingCollateral)) {\n        return;\n      }\n      remainingCollateral = remainingCollateral.sub(collateralDelta);\n    }\n  }\n\n  let positionFee = getMarginFee(size).add(LIQUIDATION_FEE);\n  if (entryFundingRate && cumulativeFundingRate) {\n    const fundingFee = size.mul(cumulativeFundingRate.sub(entryFundingRate)).div(FUNDING_RATE_PRECISION);\n    positionFee = positionFee.add(fundingFee);\n  }\n\n  const liquidationPriceForFees = getLiquidationPriceFromDelta({\n    liquidationAmount: positionFee,\n    size: nextSize,\n    collateral: remainingCollateral,\n    averagePrice,\n    isLong,\n  });\n\n  const liquidationPriceForMaxLeverage = getLiquidationPriceFromDelta({\n    liquidationAmount: nextSize.mul(BASIS_POINTS_DIVISOR).div(MAX_LEVERAGE),\n    size: nextSize,\n    collateral: remainingCollateral,\n    averagePrice,\n    isLong,\n  });\n\n  if (!liquidationPriceForFees) {\n    return liquidationPriceForMaxLeverage;\n  }\n  if (!liquidationPriceForMaxLeverage) {\n    return liquidationPriceForFees;\n  }\n\n  if (isLong) {\n    // return the higher price\n    return liquidationPriceForFees.gt(liquidationPriceForMaxLeverage)\n      ? liquidationPriceForFees\n      : liquidationPriceForMaxLeverage;\n  }\n\n  // return the lower price\n  return liquidationPriceForFees.lt(liquidationPriceForMaxLeverage)\n    ? liquidationPriceForFees\n    : liquidationPriceForMaxLeverage;\n}\n\nexport function getUsd(amount, tokenAddress, max, infoTokens, orderOption, triggerPriceUsd) {\n  if (!amount) {\n    return;\n  }\n  if (tokenAddress === USDG_ADDRESS) {\n    return amount.mul(PRECISION).div(expandDecimals(1, 18));\n  }\n  const info = getTokenInfo(infoTokens, tokenAddress);\n  const price = getTriggerPrice(tokenAddress, max, info, orderOption, triggerPriceUsd);\n  if (!price) {\n    return;\n  }\n\n  return amount.mul(price).div(expandDecimals(1, info.decimals));\n}\n\nexport function getPositionKey(account, collateralTokenAddress, indexTokenAddress, isLong, nativeTokenAddress) {\n  const tokenAddress0 = collateralTokenAddress === AddressZero ? nativeTokenAddress : collateralTokenAddress;\n  const tokenAddress1 = indexTokenAddress === AddressZero ? nativeTokenAddress : indexTokenAddress;\n  return account + \":\" + tokenAddress0 + \":\" + tokenAddress1 + \":\" + isLong;\n}\n\nexport function getPositionContractKey(account, collateralToken, indexToken, isLong) {\n  return ethers.utils.solidityKeccak256(\n    [\"address\", \"address\", \"address\", \"bool\"],\n    [account, collateralToken, indexToken, isLong]\n  );\n}\n\nexport function getSwapFeeBasisPoints(isStable) {\n  return isStable ? STABLE_SWAP_FEE_BASIS_POINTS : SWAP_FEE_BASIS_POINTS;\n}\n\n// BSC TESTNET\n// const BSC_RPC_PROVIDERS = [getServerUrl(BSC_TESTNET, \"/provider/\" + BSC_TESTNET)];\nconst VELAS_RPC_PROVIDERS = [\"https://api.testnet.velas.com\"];\n\nconst BSC_RPC_PROVIDERS = [\n  \"https://data-seed-prebsc-1-s1.binance.org:8545/\",\n  \"https://data-seed-prebsc-2-s1.binance.org:8545/\",\n  \"https://data-seed-prebsc-1-s2.binance.org:8545/\",\n  \"https://data-seed-prebsc-2-s2.binance.org:8545/\",\n  \"https://data-seed-prebsc-1-s3.binance.org:8545/\",\n  \"https://data-seed-prebsc-2-s3.binance.org:8545/\"\n]\n\n// BSC MAINNET\n// export const BSC_RPC_PROVIDERS = [\n//   \"https://bsc-dataseed.binance.org\",\n//   \"https://bsc-dataseed1.defibit.io\",\n//   \"https://bsc-dataseed1.ninicoin.io\",\n//   \"https://bsc-dataseed2.defibit.io\",\n//   \"https://bsc-dataseed3.defibit.io\",\n//   \"https://bsc-dataseed4.defibit.io\",\n//   \"https://bsc-dataseed2.ninicoin.io\",\n//   \"https://bsc-dataseed3.ninicoin.io\",\n//   \"https://bsc-dataseed4.ninicoin.io\",\n//   \"https://bsc-dataseed1.binance.org\",\n//   \"https://bsc-dataseed2.binance.org\",\n//   \"https://bsc-dataseed3.binance.org\",\n//   \"https://bsc-dataseed4.binance.org\",\n// ];\n\nexport const RPC_PROVIDERS = {\n  [BSC_TESTNET]: BSC_RPC_PROVIDERS,\n  [VELAS_TESTNET]: VELAS_RPC_PROVIDERS\n};\n\nconst FALLBACK_PROVIDERS = {\n  [BSC_TESTNET]: [\"https://bsc-testnet.gateway.pokt.network/v1/lb/626f37766c499d003aada23b\"],\n  [VELAS_TESTNET]: [\"https://velas-testnet.gateway.pokt.network/v1/lb/626f37766c499d003aada23b\"]\n}\n\nexport function shortenAddress(address, length) {\n  if (!length) {\n    return \"\";\n  }\n  if (!address) {\n    return address;\n  }\n  if (address.length < 10) {\n    return address;\n  }\n  let left = Math.floor((length - 3) / 2) + 1;\n  return address.substring(0, left) + \"...\" + address.substring(address.length - (length - (left + 3)), address.length);\n}\n\nexport function formatDateTime(time) {\n  return formatDateFn(time * 1000, \"dd MMM yyyy, h:mm a\");\n}\n\nexport function getTimeRemaining(time) {\n  const now = parseInt(Date.now() / 1000);\n  if (time < now) {\n    return \"0h 0m\";\n  }\n  const diff = time - now;\n  const hours = parseInt(diff / (60 * 60));\n  const minutes = parseInt((diff - hours * 60 * 60) / 60);\n  return `${hours}h ${minutes}m`;\n}\n\nexport function formatDate(time) {\n  return formatDateFn(time * 1000, \"dd MMM yyyy\");\n}\n\nexport function hasMetaMaskWalletExtension() {\n  return window.ethereum;\n}\n\nexport function hasCoinBaseWalletExtension() {\n  const {ethereum} = window;\n\n  if (!ethereum?.providers && !ethereum?.isCoinbaseWallet) {\n    return false;\n  }\n  return window.ethereum.isCoinbaseWallet || ethereum.providers.find(({isCoinbaseWallet}) => isCoinbaseWallet);\n}\n\nexport function activateInjectedProvider(providerName) {\n  const {ethereum} = window;\n\n  if (!ethereum?.providers && !ethereum?.isCoinbaseWallet && !ethereum?.isMetaMask) {\n    return undefined;\n  }\n\n  let provider;\n  if (ethereum?.providers) {\n    switch (providerName) {\n      case \"CoinBase\":\n        provider = ethereum.providers.find(({isCoinbaseWallet}) => isCoinbaseWallet);\n        break;\n      case \"MetaMask\":\n      default:\n        provider = ethereum.providers.find(({isMetaMask}) => isMetaMask);\n        break;\n    }\n  }\n\n  if (provider) {\n    ethereum.setSelectedProvider(provider);\n  }\n}\n\nexport function getInjectedConnector() {\n  return injectedConnector;\n}\n\nexport function useChainId() {\n  let chainId;\n\n  const chainIdFromLocalStorage = localStorage.getItem(SELECTED_NETWORK_LOCAL_STORAGE_KEY);\n  if (chainIdFromLocalStorage) {\n    chainId = parseInt(chainIdFromLocalStorage);\n    if (!chainId) {\n      // localstorage value is invalid\n      localStorage.removeItem(SELECTED_NETWORK_LOCAL_STORAGE_KEY);\n    }\n  }\n\n  if (!chainId || !supportedChainIds.includes(chainId)) {\n    chainId = DEFAULT_CHAIN_ID;\n  }\n  return {chainId};\n}\n\nexport function useENS(address) {\n  const [ensName, setENSName] = useState();\n\n  useEffect(() => {\n    async function resolveENS() {\n      if (address) {\n        const provider = new ethers.providers.JsonRpcProvider(\"https://rpc.ankr.com/eth\");\n        const name = await provider.lookupAddress(address.toLowerCase());\n        if (name) setENSName(name);\n      }\n    }\n\n    resolveENS();\n  }, [address]);\n\n  return {ensName};\n}\n\nexport function clearWalletConnectData() {\n  localStorage.removeItem(WALLET_CONNECT_LOCALSTORAGE_KEY);\n}\n\nexport function clearWalletLinkData() {\n  Object.entries(localStorage)\n    .map((x) => x[0])\n    .filter((x) => x.startsWith(WALLET_LINK_LOCALSTORAGE_PREFIX))\n    .map((x) => localStorage.removeItem(x));\n}\n\nexport function useEagerConnect(setActivatingConnector) {\n  const {activate, active} = useWeb3React();\n  const [tried, setTried] = useState(false);\n\n  useEffect(() => {\n    (async function () {\n      if (Boolean(localStorage.getItem(SHOULD_EAGER_CONNECT_LOCALSTORAGE_KEY)) !== true) {\n        // only works with WalletConnect\n        clearWalletConnectData();\n        // force clear localStorage connection for MM/CB Wallet (Brave legacy)\n        clearWalletLinkData();\n        return;\n      }\n\n      let shouldTryWalletConnect = false;\n      try {\n        // naive validation to not trigger Wallet Connect if data is corrupted\n        const rawData = localStorage.getItem(WALLET_CONNECT_LOCALSTORAGE_KEY);\n        if (rawData) {\n          const data = JSON.parse(rawData);\n          if (data && data.connected) {\n            shouldTryWalletConnect = true;\n          }\n        }\n      } catch (ex) {\n        if (ex instanceof SyntaxError) {\n          // rawData is not a valid json\n          clearWalletConnectData();\n        }\n      }\n\n      if (shouldTryWalletConnect) {\n        try {\n          const connector = getWalletConnectConnector();\n          setActivatingConnector(connector);\n          await activate(connector, undefined, true);\n          // in case Wallet Connect is activated no need to check injected wallet\n          return;\n        } catch (ex) {\n          // assume data in localstorage is corrupted and delete it to not retry on next page load\n          clearWalletConnectData();\n        }\n      }\n\n      try {\n        const connector = getInjectedConnector();\n        const currentProviderName = localStorage.getItem(CURRENT_PROVIDER_LOCALSTORAGE_KEY) ?? false;\n        if (currentProviderName !== false) {\n          activateInjectedProvider(currentProviderName);\n        }\n        const authorized = await connector.isAuthorized();\n        if (authorized) {\n          setActivatingConnector(connector);\n          await activate(connector, undefined, true);\n        }\n      } catch (ex) {\n      }\n\n      setTried(true);\n    })();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []); // intentionally only running on mount (make sure it's only mounted once :))\n\n  // if the connection worked, wait until we get confirmation of that to flip the flag\n  useEffect(() => {\n    if (!tried && active) {\n      setTried(true);\n    }\n  }, [tried, active]);\n\n  return tried;\n}\n\nexport function useInactiveListener(suppress = false) {\n  const injected = getInjectedConnector();\n  const {active, error, activate} = useWeb3React();\n\n  useEffect(() => {\n    const {ethereum} = window;\n    if (ethereum && ethereum.on && !active && !error && !suppress) {\n      const handleConnect = () => {\n        activate(injected);\n      };\n      const handleChainChanged = (chainId) => {\n        activate(injected);\n      };\n      const handleAccountsChanged = (accounts) => {\n        if (accounts.length > 0) {\n          activate(injected);\n        }\n      };\n      const handleNetworkChanged = (networkId) => {\n        activate(injected);\n      };\n\n      ethereum.on(\"connect\", handleConnect);\n      ethereum.on(\"chainChanged\", handleChainChanged);\n      ethereum.on(\"accountsChanged\", handleAccountsChanged);\n      ethereum.on(\"networkChanged\", handleNetworkChanged);\n\n      return () => {\n        if (ethereum.removeListener) {\n          ethereum.removeListener(\"connect\", handleConnect);\n          ethereum.removeListener(\"chainChanged\", handleChainChanged);\n          ethereum.removeListener(\"accountsChanged\", handleAccountsChanged);\n          ethereum.removeListener(\"networkChanged\", handleNetworkChanged);\n        }\n      };\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [active, error, suppress, activate]);\n}\n\nexport function getProvider(library, chainId) {\n  let provider;\n  if (library) {\n    return library.getSigner();\n  }\n  provider = _.sample(RPC_PROVIDERS[chainId]);\n  return new ethers.providers.StaticJsonRpcProvider(provider, {chainId});\n}\n\nexport function getFallbackProvider(chainId) {\n  if (!FALLBACK_PROVIDERS[chainId]) {\n    return;\n  }\n\n  const provider = _.sample(FALLBACK_PROVIDERS[chainId]);\n  return new ethers.providers.StaticJsonRpcProvider(provider, {chainId});\n}\n\nexport const getContractCall = ({provider, contractInfo, arg0, arg1, method, params, additionalArgs, onError}) => {\n  if (ethers.utils.isAddress(arg0)) {\n    const address = arg0;\n    const contract = new ethers.Contract(address, contractInfo.abi, provider);\n\n    if (additionalArgs) {\n      return contract[method](...params.concat(additionalArgs));\n    }\n    return contract[method](...params);\n  }\n\n  if (!provider) {\n    return;\n  }\n\n  return provider[method](arg1, ...params);\n};\n\n// prettier-ignore\nexport const fetcher = (library, contractInfo, additionalArgs) => (...args) => {\n  // eslint-disable-next-line\n  const [id, chainId, arg0, arg1, ...params] = args;\n  const provider = getProvider(library, chainId);\n\n  const method = ethers.utils.isAddress(arg0) ? arg1 : arg0;\n\n  const contractCall = getContractCall({\n    provider,\n    contractInfo,\n    arg0,\n    arg1,\n    method,\n    params,\n    additionalArgs,\n  })\n\n  let shouldCallFallback = true\n\n  const handleFallback = async (resolve, reject, error) => {\n    if (!shouldCallFallback) {\n      return\n    }\n    // prevent fallback from being called twice\n    shouldCallFallback = false\n\n    const fallbackProvider = getFallbackProvider(chainId)\n    if (!fallbackProvider) {\n      reject(error)\n      return\n    }\n\n    console.info(\"using fallbackProvider for\", method)\n    const fallbackContractCall = getContractCall({\n      provider: fallbackProvider,\n      contractInfo,\n      arg0,\n      arg1,\n      method,\n      params,\n      additionalArgs,\n    })\n\n    fallbackContractCall.then((result) => resolve(result)).catch((e) => {\n      console.error(\"fallback fetcher error\", id, contractInfo.contractName, method, e);\n      reject(e)\n    })\n  }\n\n  return new Promise(async (resolve, reject) => {\n    contractCall.then((result) => {\n      shouldCallFallback = false\n      resolve(result)\n    }).catch((e) => {\n      console.error(\"fetcher error\", id, contractInfo.contractName, method, e);\n      handleFallback(resolve, reject, e)\n    })\n\n    setTimeout(() => {\n      handleFallback(resolve, reject, \"contractCall timeout\")\n    }, 2000)\n  })\n};\n\nexport function bigNumberify(n) {\n  try {\n    return ethers.BigNumber.from(n);\n  } catch (e) {\n    console.error(\"bigNumberify error\", e);\n    return undefined;\n  }\n}\n\nexport function expandDecimals(n, decimals) {\n  return bigNumberify(n).mul(bigNumberify(10).pow(decimals));\n}\n\nexport const trimZeroDecimals = (amount) => {\n  if (parseFloat(amount) === parseInt(amount)) {\n    return parseInt(amount).toString();\n  }\n  return amount;\n};\n\nexport const limitDecimals = (amount, maxDecimals) => {\n  let amountStr = amount.toString();\n  if (maxDecimals === undefined) {\n    return amountStr;\n  }\n  if (maxDecimals === 0) {\n    return amountStr.split(\".\")[0];\n  }\n  const dotIndex = amountStr.indexOf(\".\");\n  if (dotIndex !== -1) {\n    let decimals = amountStr.length - dotIndex - 1;\n    if (decimals > maxDecimals) {\n      amountStr = amountStr.substr(0, amountStr.length - (decimals - maxDecimals));\n    }\n  }\n  return amountStr;\n};\n\nexport const padDecimals = (amount, minDecimals) => {\n  let amountStr = amount.toString();\n  const dotIndex = amountStr.indexOf(\".\");\n  if (dotIndex !== -1) {\n    const decimals = amountStr.length - dotIndex - 1;\n    if (decimals < minDecimals) {\n      amountStr = amountStr.padEnd(amountStr.length + (minDecimals - decimals), \"0\");\n    }\n  } else {\n    amountStr = amountStr + \".0000\";\n  }\n  return amountStr;\n};\n\nexport const formatKeyAmount = (map, key, tokenDecimals, displayDecimals, useCommas) => {\n  if (!map || !map[key]) {\n    return \"0\";\n  }\n\n  return formatAmount(map[key], tokenDecimals, displayDecimals, useCommas);\n};\n\nexport const formatArrayAmount = (arr, index, tokenDecimals, displayDecimals, useCommas) => {\n  if (!arr || !arr[index]) {\n    return \"0\";\n  }\n\n  return formatAmount(arr[index], tokenDecimals, displayDecimals, useCommas);\n};\n\nfunction _parseOrdersData(ordersData, account, indexes, extractor, uintPropsLength, addressPropsLength) {\n  if (!ordersData || ordersData.length === 0) {\n    return [];\n  }\n  const [uintProps, addressProps] = ordersData;\n  const count = uintProps.length / uintPropsLength;\n\n  const orders = [];\n  for (let i = 0; i < count; i++) {\n    const sliced = addressProps\n      .slice(addressPropsLength * i, addressPropsLength * (i + 1))\n      .concat(uintProps.slice(uintPropsLength * i, uintPropsLength * (i + 1)));\n\n    if (sliced[0] === AddressZero && sliced[1] === AddressZero) {\n      continue;\n    }\n\n    const order = extractor(sliced);\n    order.index = indexes[i];\n    order.account = account;\n    orders.push(order);\n  }\n\n  return orders;\n}\n\nfunction parseDecreaseOrdersData(chainId, decreaseOrdersData, account, indexes) {\n  const extractor = (sliced) => {\n    const isLong = sliced[4].toString() === \"1\";\n    return {\n      collateralToken: sliced[0],\n      indexToken: sliced[1],\n      collateralDelta: sliced[2],\n      sizeDelta: sliced[3],\n      isLong,\n      triggerPrice: sliced[5],\n      triggerAboveThreshold: sliced[6].toString() === \"1\",\n      type: DECREASE,\n    };\n  };\n  return _parseOrdersData(decreaseOrdersData, account, indexes, extractor, 5, 2).filter((order) => {\n    return isValidToken(chainId, order.collateralToken) && isValidToken(chainId, order.indexToken);\n  });\n}\n\nfunction parseIncreaseOrdersData(chainId, increaseOrdersData, account, indexes) {\n  const extractor = (sliced) => {\n    const isLong = sliced[5].toString() === \"1\";\n    return {\n      purchaseToken: sliced[0],\n      collateralToken: sliced[1],\n      indexToken: sliced[2],\n      purchaseTokenAmount: sliced[3],\n      sizeDelta: sliced[4],\n      isLong,\n      triggerPrice: sliced[6],\n      triggerAboveThreshold: sliced[7].toString() === \"1\",\n      type: INCREASE,\n    };\n  };\n  return _parseOrdersData(increaseOrdersData, account, indexes, extractor, 5, 3).filter((order) => {\n    return (\n      isValidToken(chainId, order.purchaseToken) &&\n      isValidToken(chainId, order.collateralToken) &&\n      isValidToken(chainId, order.indexToken)\n    );\n  });\n}\n\nfunction parseSwapOrdersData(chainId, swapOrdersData, account, indexes) {\n  if (!swapOrdersData || !swapOrdersData.length) {\n    return [];\n  }\n\n  const extractor = (sliced) => {\n    const triggerAboveThreshold = sliced[6].toString() === \"1\";\n    const shouldUnwrap = sliced[7].toString() === \"1\";\n\n    return {\n      path: [sliced[0], sliced[1], sliced[2]].filter((address) => address !== AddressZero),\n      amountIn: sliced[3],\n      minOut: sliced[4],\n      triggerRatio: sliced[5],\n      triggerAboveThreshold,\n      type: SWAP,\n      shouldUnwrap,\n    };\n  };\n  return _parseOrdersData(swapOrdersData, account, indexes, extractor, 5, 3).filter((order) => {\n    return order.path.every((token) => isValidToken(chainId, token));\n  });\n}\n\nexport function getOrderKey(order) {\n  return `${order.type}-${order.account}-${order.index}`;\n}\n\nexport function useAccountOrders(flagOrdersEnabled, overrideAccount) {\n  const {library, account: connectedAccount} = useWeb3React();\n  const active = true; // this is used in Actions.js so set active to always be true\n  const account = overrideAccount || connectedAccount;\n\n  const {chainId} = useChainId();\n  const shouldRequest = active && account && flagOrdersEnabled;\n\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const orderBookReaderAddress = getContract(chainId, \"OrderBookReader\");\n  const key = shouldRequest ? [active, chainId, orderBookAddress, account] : false;\n  const {\n    data: orders = [],\n    mutate: updateOrders,\n    error: ordersError,\n  } = useSWR(key, {\n    dedupingInterval: 5000,\n    fetcher: async (active, chainId, orderBookAddress, account) => {\n      const provider = getProvider(library, chainId);\n      const orderBookContract = new ethers.Contract(orderBookAddress, OrderBook.abi, provider);\n      const orderBookReaderContract = new ethers.Contract(orderBookReaderAddress, OrderBookReader.abi, provider);\n\n      const fetchIndexesFromServer = () => {\n        const ordersIndexesUrl = `${getServerBaseUrl(chainId)}/orders_indices?account=${account}`;\n        return fetch(ordersIndexesUrl)\n          .then(async (res) => {\n            const json = await res.json();\n            const ret = {};\n            for (const key of Object.keys(json)) {\n              ret[key.toLowerCase()] = json[key].map((val) => parseInt(val.value)).sort((a, b) => a - b);\n            }\n\n            return ret;\n          })\n          .catch(() => ({swap: [], increase: [], decrease: []}));\n      };\n\n      const fetchLastIndex = async (type) => {\n        const method = type.toLowerCase() + \"OrdersIndex\";\n        return await orderBookContract[method](account).then((res) => bigNumberify(res._hex).toNumber());\n      };\n\n      const fetchLastIndexes = async () => {\n        const [swap, increase, decrease] = await Promise.all([\n          fetchLastIndex(\"swap\"),\n          fetchLastIndex(\"increase\"),\n          fetchLastIndex(\"decrease\"),\n        ]);\n\n        return {swap, increase, decrease};\n      };\n\n      const getRange = (to, from) => {\n        const LIMIT = 10;\n        const _indexes = [];\n        from = from || Math.max(to - LIMIT, 0);\n        for (let i = to - 1; i >= from; i--) {\n          _indexes.push(i);\n        }\n        return _indexes;\n      };\n\n      const getIndexes = (knownIndexes, lastIndex) => {\n        if (knownIndexes.length === 0) {\n          return getRange(lastIndex);\n        }\n        return [\n          ...knownIndexes,\n          ...getRange(lastIndex, knownIndexes[knownIndexes.length - 1] + 1).sort((a, b) => b - a),\n        ];\n      };\n\n      const getOrders = async (method, knownIndexes, lastIndex, parseFunc) => {\n        const indexes = getIndexes(knownIndexes, lastIndex);\n        const ordersData = await orderBookReaderContract[method](orderBookAddress, account, indexes);\n        const orders = parseFunc(chainId, ordersData, account, indexes);\n\n        return orders;\n      };\n\n      try {\n        const [serverIndexes, lastIndexes] = await Promise.all([fetchIndexesFromServer(), fetchLastIndexes()]);\n        const [swapOrders = [], increaseOrders = [], decreaseOrders = []] = await Promise.all([\n          getOrders(\"getSwapOrders\", serverIndexes.swap, lastIndexes.swap, parseSwapOrdersData),\n          getOrders(\"getIncreaseOrders\", serverIndexes.increase, lastIndexes.increase, parseIncreaseOrdersData),\n          getOrders(\"getDecreaseOrders\", serverIndexes.decrease, lastIndexes.decrease, parseDecreaseOrdersData),\n        ]);\n        return [...swapOrders, ...increaseOrders, ...decreaseOrders];\n      } catch (ex) {\n        console.error(ex);\n      }\n    },\n  });\n\n  return [orders, updateOrders, ordersError];\n}\n\nexport const formatAmount = (amount, tokenDecimals, displayDecimals, useCommas, defaultValue) => {\n  if (!defaultValue) {\n    defaultValue = \"0\";\n  }\n  if (amount === undefined || amount.toString().length === 0) {\n    return defaultValue;\n  }\n  if (displayDecimals === undefined) {\n    displayDecimals = 4;\n  }\n  let amountStr = ethers.utils.formatUnits(amount, tokenDecimals);\n  amountStr = limitDecimals(amountStr, displayDecimals);\n  if (displayDecimals !== 0) {\n    amountStr = padDecimals(amountStr, displayDecimals);\n  }\n  if (useCommas) {\n    return numberWithCommas(amountStr);\n  }\n  return amountStr;\n};\n\nexport const formatAmountFree = (amount, tokenDecimals, displayDecimals) => {\n  if (!amount) {\n    return \"0\";\n  }\n  let amountStr = ethers.utils.formatUnits(amount, tokenDecimals);\n  amountStr = limitDecimals(amountStr, displayDecimals);\n  return trimZeroDecimals(amountStr);\n};\n\nexport const parseValue = (value, tokenDecimals) => {\n  const pValue = parseFloat(value);\n  if (isNaN(pValue)) {\n    return undefined;\n  }\n  value = limitDecimals(value, tokenDecimals);\n  const amount = ethers.utils.parseUnits(value, tokenDecimals);\n  return bigNumberify(amount);\n};\n\nexport function numberWithCommas(x) {\n  if (!x) {\n    return \"0\";\n  }\n  var parts = x.toString().split(\".\");\n  parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n  return parts.join(\".\");\n}\n\nexport function getExplorerUrl(chainId) {\n  if (chainId === 3) {\n    return \"https://ropsten.etherscan.io/\";\n  } else if (chainId === 42) {\n    return \"https://kovan.etherscan.io/\";\n  } else if (chainId === BSC) {\n    return \"https://bscscan.com/\";\n  } else if (chainId === BSC_TESTNET) {\n    return \"https://testnet.bscscan.com/\";\n  } else if (chainId === ARBITRUM_TESTNET) {\n    return \"https://testnet.arbiscan.io/\";\n  } else if (chainId === ARBITRUM) {\n    return \"https://arbiscan.io/\";\n  } else if (chainId === AVALANCHE) {\n    return \"https://snowtrace.io/\";\n  }\n  return \"https://etherscan.io/\";\n}\n\nexport function getAccountUrl(chainId, account) {\n  if (!account) {\n    return getExplorerUrl(chainId);\n  }\n  return getExplorerUrl(chainId) + \"address/\" + account;\n}\n\nexport function getTokenUrl(chainId, address) {\n  if (!address) {\n    return getExplorerUrl(chainId);\n  }\n  return getExplorerUrl(chainId) + \"token/\" + address;\n}\n\nexport function usePrevious(value) {\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n}\n\nexport async function setGasPrice(txnOpts, provider, chainId) {\n  let maxGasPrice = MAX_GAS_PRICE_MAP[chainId];\n  const premium = GAS_PRICE_ADJUSTMENT_MAP[chainId] || bigNumberify(0);\n\n  const gasPrice = await provider.getGasPrice();\n\n  if (maxGasPrice) {\n    if (gasPrice.gt(maxGasPrice)) {\n      maxGasPrice = gasPrice;\n    }\n\n    const feeData = await provider.getFeeData();\n\n    // the wallet provider might not return maxPriorityFeePerGas in feeData\n    // in which case we should fallback to the usual getGasPrice flow handled below\n    if (feeData && feeData.maxPriorityFeePerGas) {\n      txnOpts.maxFeePerGas = maxGasPrice;\n      txnOpts.maxPriorityFeePerGas = feeData.maxPriorityFeePerGas.add(premium);\n      return;\n    }\n  }\n\n  txnOpts.gasPrice = gasPrice.add(premium);\n  return;\n}\n\nexport async function getGasLimit(contract, method, params = [], value) {\n  const defaultValue = bigNumberify(0);\n\n  if (!value) {\n    value = defaultValue;\n  }\n\n  let gasLimit = await contract.estimateGas[method](...params, {value});\n\n  if (gasLimit.lt(22000)) {\n    gasLimit = bigNumberify(22000);\n  }\n\n  return gasLimit.mul(11000).div(10000); // add a 10% buffer\n}\n\nexport function approveTokens({\n                                setIsApproving,\n                                library,\n                                tokenAddress,\n                                spender,\n                                chainId,\n                                onApproveSubmitted,\n                                getTokenInfo,\n                                infoTokens,\n                                pendingTxns,\n                                setPendingTxns,\n                                includeMessage,\n                              }) {\n  setIsApproving(true);\n  const contract = new ethers.Contract(tokenAddress, Token.abi, library.getSigner());\n  contract\n    .approve(spender, ethers.constants.MaxUint256)\n    .then(async (res) => {\n      const txUrl = getExplorerUrl(chainId) + \"tx/\" + res.hash;\n      helperToast.success(\n        <div>\n          Approval submitted!{\" \"}\n          <a href={txUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n            View status.\n          </a>\n          <br/>\n        </div>\n      );\n      if (onApproveSubmitted) {\n        onApproveSubmitted();\n      }\n      if (getTokenInfo && infoTokens && pendingTxns && setPendingTxns) {\n        const token = getTokenInfo(infoTokens, tokenAddress);\n        const pendingTxn = {\n          hash: res.hash,\n          message: includeMessage ? `${token.symbol} Approved!` : false,\n        };\n        setPendingTxns([...pendingTxns, pendingTxn]);\n      }\n    })\n    .catch((e) => {\n      console.error(e);\n      let failMsg;\n      if (\n        [\"not enough funds for gas\", \"failed to execute call with revert code InsufficientGasFunds\"].includes(\n          e.data?.message\n        )\n      ) {\n        failMsg = (\n          <div>\n            There is not enough ETH in your account on Arbitrum to send this transaction.\n            <br/>\n            <br/>\n            <a href={\"https://arbitrum.io/bridge-tutorial/\"} target=\"_blank\" rel=\"noopener noreferrer\">\n              Bridge ETH to Arbitrum\n            </a>\n          </div>\n        );\n      } else if (e.message?.includes(\"User denied transaction signature\")) {\n        failMsg = \"Approval was cancelled\";\n      } else {\n        failMsg = \"Approval failed\";\n      }\n      helperToast.error(failMsg);\n    })\n    .finally(() => {\n      setIsApproving(false);\n    });\n}\n\nexport const shouldRaiseGasError = (token, amount) => {\n  if (!amount) {\n    return false;\n  }\n  if (token.address !== AddressZero) {\n    return false;\n  }\n  if (!token.balance) {\n    return false;\n  }\n  if (amount.gte(token.balance)) {\n    return true;\n  }\n  if (token.balance.sub(amount).lt(DUST_BNB)) {\n    return true;\n  }\n  return false;\n};\n\nexport const getTokenInfo = (infoTokens, tokenAddress, replaceNative, nativeTokenAddress) => {\n  if (replaceNative && tokenAddress === nativeTokenAddress) {\n    return infoTokens[AddressZero];\n  }\n  return infoTokens[tokenAddress];\n};\n\nconst NETWORK_METADATA = {\n  [BSC_TESTNET]: {\n    chainId: \"0x\" + BSC_TESTNET.toString(16),\n    chainName: \"BSC Testnet\",\n    nativeCurrency: {\n      name: \"BNB\",\n      symbol: \"BNB\",\n      decimals: 18,\n    },\n    rpcUrls: BSC_RPC_PROVIDERS,\n    blockExplorerUrls: [\"https://testnet.bscscan.com/\"],\n  }\n};\n\nexport const addBscNetwork = async () => {\n  return addNetwork(NETWORK_METADATA[BSC]);\n};\n\nexport const addNetwork = async (metadata) => {\n  await window.ethereum.request({method: \"wallet_addEthereumChain\", params: [metadata]}).catch();\n};\n\nexport const switchNetwork = async (chainId, active) => {\n  if (!active) {\n    // chainId in localStorage allows to switch network even if wallet is not connected\n    // or there is no wallet at all\n    localStorage.setItem(SELECTED_NETWORK_LOCAL_STORAGE_KEY, chainId);\n    document.location.reload();\n    return;\n  }\n\n  try {\n    const chainIdHex = \"0x\" + chainId.toString(16);\n    await window.ethereum.request({\n      method: \"wallet_switchEthereumChain\",\n      params: [{chainId: chainIdHex}],\n    });\n    helperToast.success(\"Connected to \" + getChainName(chainId));\n    return getChainName(chainId);\n  } catch (ex) {\n    // This error code indicates that the chain has not been added to MetaMask.\n    // 4001 error means user has denied the request\n    // If the error code is not 4001, then we need to add the network\n    // https://docs.metamask.io/guide/rpc-api.html#other-rpc-methods\n    if (ex.code !== 4001) {\n      return await addNetwork(NETWORK_METADATA[chainId]);\n    }\n\n    console.error(\"error\", ex);\n  }\n};\n\nexport const getWalletConnectHandler = (activate, deactivate, setActivatingConnector) => {\n  const fn = async () => {\n    const walletConnect = getWalletConnectConnector();\n    setActivatingConnector(walletConnect);\n    activate(walletConnect, (ex) => {\n      if (ex instanceof UnsupportedChainIdError) {\n        helperToast.error(\"Unsupported chain. Switch to Arbitrum network on your wallet and try again\");\n        console.warn(ex);\n      } else if (!(ex instanceof UserRejectedRequestErrorWalletConnect)) {\n        helperToast.error(ex.message);\n        console.warn(ex);\n      }\n      clearWalletConnectData();\n      deactivate();\n    });\n  };\n  return fn;\n};\n\nexport const getInjectedHandler = (activate) => {\n  const fn = async () => {\n    activate(getInjectedConnector(), (e) => {\n      const chainId = localStorage.getItem(SELECTED_NETWORK_LOCAL_STORAGE_KEY) || DEFAULT_CHAIN_ID;\n\n      if (e instanceof UnsupportedChainIdError) {\n        helperToast.error(\n          <div>\n            <div>Your wallet is not connected to {getChainName(chainId)}.</div>\n            <br/>\n            <div className=\"clickable underline margin-bottom\" onClick={() => switchNetwork(chainId, true)}>\n              Switch to {getChainName(chainId)}\n            </div>\n            <div className=\"clickable underline\" onClick={() => switchNetwork(chainId, true)}>\n              Add {getChainName(chainId)}\n            </div>\n          </div>\n        );\n        return;\n      }\n      const errString = e.message ?? e.toString();\n      helperToast.error(errString);\n    });\n  };\n  return fn;\n};\n\nexport function isMobileDevice(navigator) {\n  return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n}\n\nexport function setTokenUsingIndexPrices(token, indexPrices, nativeTokenAddress) {\n  if (!indexPrices) {\n    return;\n  }\n\n  const tokenAddress = token.isNative ? nativeTokenAddress : token.address;\n\n  const indexPrice = indexPrices[tokenAddress];\n  if (!indexPrice) {\n    return;\n  }\n\n  const indexPriceBn = bigNumberify(indexPrice);\n  if (indexPriceBn.eq(0)) {\n    return;\n  }\n\n  const spread = token.maxPrice.sub(token.minPrice);\n  const spreadBps = spread.mul(BASIS_POINTS_DIVISOR).div(token.maxPrice.add(token.minPrice).div(2));\n\n  if (spreadBps.gt(MAX_PRICE_DEVIATION_BASIS_POINTS - 50)) {\n    // only set one of the values as there will be a spread between the index price and the Chainlink price\n    if (indexPriceBn.gt(token.minPrimaryPrice)) {\n      token.maxPrice = indexPriceBn;\n    } else {\n      token.minPrice = indexPriceBn;\n    }\n    return;\n  }\n\n  const halfSpreadBps = spreadBps.div(2).toNumber();\n  token.maxPrice = indexPriceBn.mul(BASIS_POINTS_DIVISOR + halfSpreadBps).div(BASIS_POINTS_DIVISOR);\n  token.minPrice = indexPriceBn.mul(BASIS_POINTS_DIVISOR - halfSpreadBps).div(BASIS_POINTS_DIVISOR);\n}\n\nexport function getInfoTokens(\n  tokens,\n  tokenBalances,\n  whitelistedTokens,\n  vaultTokenInfo,\n  fundingRateInfo,\n  vaultPropsLength,\n  indexPrices,\n  nativeTokenAddress\n) {\n  if (!vaultPropsLength) {\n    vaultPropsLength = 15;\n  }\n  const fundingRatePropsLength = 2;\n  const infoTokens = {};\n\n  for (let i = 0; i < tokens.length; i++) {\n    const token = JSON.parse(JSON.stringify(tokens[i]));\n    if (tokenBalances) {\n      token.balance = tokenBalances[i];\n    }\n    if (token.address === USDG_ADDRESS) {\n      token.minPrice = expandDecimals(1, USD_DECIMALS);\n      token.maxPrice = expandDecimals(1, USD_DECIMALS);\n    }\n    infoTokens[token.address] = token;\n  }\n\n  for (let i = 0; i < whitelistedTokens.length; i++) {\n    const token = JSON.parse(JSON.stringify(whitelistedTokens[i]));\n    if (vaultTokenInfo) {\n      token.poolAmount = vaultTokenInfo[i * vaultPropsLength];\n      token.reservedAmount = vaultTokenInfo[i * vaultPropsLength + 1];\n      token.availableAmount = token.poolAmount.sub(token.reservedAmount);\n      token.usdgAmount = vaultTokenInfo[i * vaultPropsLength + 2];\n      token.redemptionAmount = vaultTokenInfo[i * vaultPropsLength + 3];\n      token.weight = vaultTokenInfo[i * vaultPropsLength + 4];\n      token.bufferAmount = vaultTokenInfo[i * vaultPropsLength + 5];\n      token.maxUsdgAmount = vaultTokenInfo[i * vaultPropsLength + 6];\n      token.globalShortSize = vaultTokenInfo[i * vaultPropsLength + 7];\n      token.maxGlobalShortSize = vaultTokenInfo[i * vaultPropsLength + 8];\n      token.maxGlobalLongSize = vaultTokenInfo[i * vaultPropsLength + 9];\n      token.minPrice = vaultTokenInfo[i * vaultPropsLength + 10];\n      token.maxPrice = vaultTokenInfo[i * vaultPropsLength + 11];\n      token.guaranteedUsd = vaultTokenInfo[i * vaultPropsLength + 12];\n      token.maxPrimaryPrice = vaultTokenInfo[i * vaultPropsLength + 13];\n      token.minPrimaryPrice = vaultTokenInfo[i * vaultPropsLength + 14];\n\n      // save minPrice and maxPrice as setTokenUsingIndexPrices may override it\n      token.contractMinPrice = token.minPrice;\n      token.contractMaxPrice = token.maxPrice;\n\n      token.maxAvailableShort = bigNumberify(0);\n      token.hasMaxAvailableShort = false;\n      if (token.maxGlobalShortSize.gt(0)) {\n        token.hasMaxAvailableShort = true;\n        if (token.maxGlobalShortSize.gt(token.globalShortSize)) {\n          token.maxAvailableShort = token.maxGlobalShortSize.sub(token.globalShortSize);\n        }\n      }\n\n      if (token.maxUsdgAmount.eq(0)) {\n        token.maxUsdgAmount = DEFAULT_MAX_USDG_AMOUNT;\n      }\n\n      token.availableUsd = token.isStable\n        ? token.poolAmount.mul(token.minPrice).div(expandDecimals(1, token.decimals))\n        : token.availableAmount.mul(token.minPrice).div(expandDecimals(1, token.decimals));\n\n      token.maxAvailableLong = bigNumberify(0);\n      token.hasMaxAvailableLong = false;\n      if (token.maxGlobalLongSize.gt(0)) {\n        token.hasMaxAvailableLong = true;\n\n        if (token.maxGlobalLongSize.gt(token.guaranteedUsd)) {\n          const remainingLongSize = token.maxGlobalLongSize.sub(token.guaranteedUsd);\n          token.maxAvailableLong = remainingLongSize.lt(token.availableUsd) ? remainingLongSize : token.availableUsd;\n        }\n      } else {\n        token.maxAvailableLong = token.availableUsd;\n      }\n\n      token.maxLongCapacity =\n        token.maxGlobalLongSize.gt(0) && token.maxGlobalLongSize.lt(token.availableUsd.add(token.guaranteedUsd))\n          ? token.maxGlobalLongSize\n          : token.availableUsd.add(token.guaranteedUsd);\n\n      token.managedUsd = token.availableUsd.add(token.guaranteedUsd);\n      token.managedAmount = token.managedUsd.mul(expandDecimals(1, token.decimals)).div(token.minPrice);\n\n      setTokenUsingIndexPrices(token, indexPrices, nativeTokenAddress);\n    }\n\n    if (fundingRateInfo) {\n      token.fundingRate = fundingRateInfo[i * fundingRatePropsLength];\n      token.cumulativeFundingRate = fundingRateInfo[i * fundingRatePropsLength + 1];\n    }\n\n    if (infoTokens[token.address]) {\n      token.balance = infoTokens[token.address].balance;\n    }\n\n    infoTokens[token.address] = token;\n  }\n\n  return infoTokens;\n}\n\nexport const CHART_PERIODS = {\n  \"5m\": 60 * 5,\n  \"15m\": 60 * 15,\n  \"1h\": 60 * 60,\n  \"4h\": 60 * 60 * 4,\n  \"1d\": 60 * 60 * 24,\n};\n\nexport function getTotalVolumeSum(volumes) {\n  if (!volumes || volumes.length === 0) {\n    return;\n  }\n\n  let volume = bigNumberify(0);\n  for (let i = 0; i < volumes.length; i++) {\n    volume = volume.add(volumes[i].data.volume);\n  }\n\n  return volume;\n}\n\nexport function getBalanceAndSupplyData(balances) {\n  if (!balances || balances.length === 0) {\n    return {};\n  }\n\n  const keys = [\"gmx\", \"esGmx\", \"glp\", \"stakedGmxTracker\"];\n  const balanceData = {};\n  const supplyData = {};\n  const propsLength = 2;\n\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    balanceData[key] = balances[i * propsLength];\n    supplyData[key] = balances[i * propsLength + 1];\n  }\n\n  return {balanceData, supplyData};\n}\n\nexport function getDepositBalanceData(depositBalances) {\n  if (!depositBalances || depositBalances.length === 0) {\n    return;\n  }\n\n  const keys = [\n    \"gmxInStakedGmx\",\n    \"esGmxInStakedGmx\",\n    \"stakedGmxInBonusGmx\",\n    \"bonusGmxInFeeGmx\",\n    \"bnGmxInFeeGmx\",\n    \"glpInStakedGlp\",\n  ];\n  const data = {};\n\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    data[key] = depositBalances[i];\n  }\n\n  return data;\n}\n\nexport function getVestingData(vestingInfo) {\n  if (!vestingInfo || vestingInfo.length === 0) {\n    return;\n  }\n\n  const keys = [\"gmxVester\", \"glpVester\"];\n  const data = {};\n  const propsLength = 7;\n\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    data[key] = {\n      pairAmount: vestingInfo[i * propsLength],\n      vestedAmount: vestingInfo[i * propsLength + 1],\n      escrowedBalance: vestingInfo[i * propsLength + 2],\n      claimedAmounts: vestingInfo[i * propsLength + 3],\n      claimable: vestingInfo[i * propsLength + 4],\n      maxVestableAmount: vestingInfo[i * propsLength + 5],\n      averageStakedAmount: vestingInfo[i * propsLength + 6],\n    };\n\n    data[key + \"PairAmount\"] = data[key].pairAmount;\n    data[key + \"VestedAmount\"] = data[key].vestedAmount;\n    data[key + \"EscrowedBalance\"] = data[key].escrowedBalance;\n    data[key + \"ClaimSum\"] = data[key].claimedAmounts.add(data[key].claimable);\n    data[key + \"Claimable\"] = data[key].claimable;\n    data[key + \"MaxVestableAmount\"] = data[key].maxVestableAmount;\n    data[key + \"AverageStakedAmount\"] = data[key].averageStakedAmount;\n  }\n\n  return data;\n}\n\nexport function getStakingData(stakingInfo) {\n  if (!stakingInfo || stakingInfo.length === 0) {\n    return;\n  }\n\n  const keys = [\"stakedGmxTracker\", \"bonusGmxTracker\", \"feeGmxTracker\", \"stakedGlpTracker\", \"feeGlpTracker\"];\n  const data = {};\n  const propsLength = 5;\n\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    data[key] = {\n      claimable: stakingInfo[i * propsLength],\n      tokensPerInterval: stakingInfo[i * propsLength + 1],\n      averageStakedAmounts: stakingInfo[i * propsLength + 2],\n      cumulativeRewards: stakingInfo[i * propsLength + 3],\n      totalSupply: stakingInfo[i * propsLength + 4],\n    };\n  }\n\n  return data;\n}\n\nexport function getProcessedData(\n  balanceData,\n  supplyData,\n  depositBalanceData,\n  stakingData,\n  vestingData,\n  aum,\n  nativeTokenPrice,\n  stakedGmxSupply,\n  gmxPrice\n) {\n  if (\n    !balanceData ||\n    !supplyData ||\n    !depositBalanceData ||\n    !stakingData ||\n    !vestingData ||\n    !aum ||\n    !nativeTokenPrice ||\n    !stakedGmxSupply ||\n    !gmxPrice\n  ) {\n    return {};\n  }\n\n  const data = {};\n\n  data.gmxBalance = balanceData.gmx;\n  data.gmxBalanceUsd = balanceData.gmx.mul(gmxPrice).div(expandDecimals(1, 18));\n\n  data.gmxSupply = supplyData.gmx\n\n  data.gmxSupplyUsd = data.gmxSupply.mul(gmxPrice).div(expandDecimals(1, 18));\n  data.stakedGmxSupply = stakedGmxSupply;\n  data.stakedGmxSupplyUsd = stakedGmxSupply.mul(gmxPrice).div(expandDecimals(1, 18));\n  data.gmxInStakedGmx = depositBalanceData.gmxInStakedGmx;\n  data.gmxInStakedGmxUsd = depositBalanceData.gmxInStakedGmx.mul(gmxPrice).div(expandDecimals(1, 18));\n\n  data.esGmxBalance = balanceData.esGmx;\n  data.esGmxBalanceUsd = balanceData.esGmx.mul(gmxPrice).div(expandDecimals(1, 18));\n\n  data.stakedGmxTrackerSupply = supplyData.stakedGmxTracker;\n  data.stakedGmxTrackerSupplyUsd = supplyData.stakedGmxTracker.mul(gmxPrice).div(expandDecimals(1, 18));\n  data.stakedEsGmxSupply = data.stakedGmxTrackerSupply.sub(data.stakedGmxSupply);\n  data.stakedEsGmxSupplyUsd = data.stakedEsGmxSupply.mul(gmxPrice).div(expandDecimals(1, 18));\n\n  data.esGmxInStakedGmx = depositBalanceData.esGmxInStakedGmx;\n  data.esGmxInStakedGmxUsd = depositBalanceData.esGmxInStakedGmx.mul(gmxPrice).div(expandDecimals(1, 18));\n\n  data.bnGmxInFeeGmx = depositBalanceData.bnGmxInFeeGmx;\n  data.bonusGmxInFeeGmx = depositBalanceData.bonusGmxInFeeGmx;\n  data.feeGmxSupply = stakingData.feeGmxTracker.totalSupply;\n  data.feeGmxSupplyUsd = data.feeGmxSupply.mul(gmxPrice).div(expandDecimals(1, 18));\n\n  data.stakedGmxTrackerRewards = stakingData.stakedGmxTracker.claimable;\n  data.stakedGmxTrackerRewardsUsd = stakingData.stakedGmxTracker.claimable.mul(gmxPrice).div(expandDecimals(1, 18));\n\n  data.bonusGmxTrackerRewards = stakingData.bonusGmxTracker.claimable;\n\n  data.feeGmxTrackerRewards = stakingData.feeGmxTracker.claimable;\n  data.feeGmxTrackerRewardsUsd = stakingData.feeGmxTracker.claimable.mul(nativeTokenPrice).div(expandDecimals(1, 18));\n\n  data.boostBasisPoints = bigNumberify(0);\n  if (data && data.bnGmxInFeeGmx && data.bonusGmxInFeeGmx && data.bonusGmxInFeeGmx.gt(0)) {\n    data.boostBasisPoints = data.bnGmxInFeeGmx.mul(BASIS_POINTS_DIVISOR).div(data.bonusGmxInFeeGmx);\n  }\n\n  data.stakedGmxTrackerAnnualRewardsUsd = stakingData.stakedGmxTracker.tokensPerInterval\n    .mul(SECONDS_PER_YEAR)\n    .mul(gmxPrice)\n    .div(expandDecimals(1, 18));\n  data.gmxAprForEsGmx =\n    data.stakedGmxTrackerSupplyUsd && data.stakedGmxTrackerSupplyUsd.gt(0)\n      ? data.stakedGmxTrackerAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(data.stakedGmxTrackerSupplyUsd)\n      : bigNumberify(0);\n  data.feeGmxTrackerAnnualRewardsUsd = stakingData.feeGmxTracker.tokensPerInterval\n    .mul(SECONDS_PER_YEAR)\n    .mul(nativeTokenPrice)\n    .div(expandDecimals(1, 18));\n  data.gmxAprForNativeToken =\n    data.feeGmxSupplyUsd && data.feeGmxSupplyUsd.gt(0)\n      ? data.feeGmxTrackerAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(data.feeGmxSupplyUsd)\n      : bigNumberify(0);\n  data.gmxBoostAprForNativeToken = data.gmxAprForNativeToken.mul(data.boostBasisPoints).div(BASIS_POINTS_DIVISOR);\n  data.gmxAprTotal = data.gmxAprForNativeToken.add(data.gmxAprForEsGmx);\n  data.gmxAprTotalWithBoost = data.gmxAprForNativeToken.add(data.gmxBoostAprForNativeToken).add(data.gmxAprForEsGmx);\n  data.gmxAprForNativeTokenWithBoost = data.gmxAprForNativeToken.add(data.gmxBoostAprForNativeToken);\n\n  data.totalGmxRewardsUsd = data.stakedGmxTrackerRewardsUsd.add(data.feeGmxTrackerRewardsUsd);\n\n  data.glpSupply = supplyData.glp;\n  data.glpPrice =\n    data.glpSupply && data.glpSupply.gt(0)\n      ? aum.mul(expandDecimals(1, GLP_DECIMALS)).div(data.glpSupply)\n      : bigNumberify(0);\n\n  data.glpSupplyUsd = supplyData.glp.mul(data.glpPrice).div(expandDecimals(1, 18));\n\n  data.glpBalance = depositBalanceData.glpInStakedGlp;\n  data.glpBalanceUsd = depositBalanceData.glpInStakedGlp.mul(data.glpPrice).div(expandDecimals(1, GLP_DECIMALS));\n\n  data.stakedGlpTrackerRewards = stakingData.stakedGlpTracker.claimable;\n  data.stakedGlpTrackerRewardsUsd = stakingData.stakedGlpTracker.claimable.mul(gmxPrice).div(expandDecimals(1, 18));\n\n  data.feeGlpTrackerRewards = stakingData.feeGlpTracker.claimable;\n  data.feeGlpTrackerRewardsUsd = stakingData.feeGlpTracker.claimable.mul(nativeTokenPrice).div(expandDecimals(1, 18));\n\n  data.stakedGlpTrackerAnnualRewardsUsd = stakingData.stakedGlpTracker.tokensPerInterval\n    .mul(SECONDS_PER_YEAR)\n    .mul(gmxPrice)\n    .div(expandDecimals(1, 18));\n  data.glpAprForEsGmx =\n    data.glpSupplyUsd && data.glpSupplyUsd.gt(0)\n      ? data.stakedGlpTrackerAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(data.glpSupplyUsd)\n      : bigNumberify(0);\n  data.feeGlpTrackerAnnualRewardsUsd = stakingData.feeGlpTracker.tokensPerInterval\n    .mul(SECONDS_PER_YEAR)\n    .mul(nativeTokenPrice)\n    .div(expandDecimals(1, 18));\n  data.glpAprForNativeToken =\n    data.glpSupplyUsd && data.glpSupplyUsd.gt(0)\n      ? data.feeGlpTrackerAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(data.glpSupplyUsd)\n      : bigNumberify(0);\n  data.glpAprTotal = data.glpAprForNativeToken.add(data.glpAprForEsGmx);\n\n  data.totalGlpRewardsUsd = data.stakedGlpTrackerRewardsUsd.add(data.feeGlpTrackerRewardsUsd);\n\n  data.totalEsGmxRewards = data.stakedGmxTrackerRewards.add(data.stakedGlpTrackerRewards);\n  data.totalEsGmxRewardsUsd = data.stakedGmxTrackerRewardsUsd.add(data.stakedGlpTrackerRewardsUsd);\n\n  data.gmxVesterRewards = vestingData.gmxVester.claimable;\n  data.glpVesterRewards = vestingData.glpVester.claimable;\n  data.totalVesterRewards = data.gmxVesterRewards.add(data.glpVesterRewards);\n  data.totalVesterRewardsUsd = data.totalVesterRewards.mul(gmxPrice).div(expandDecimals(1, 18));\n\n  data.totalNativeTokenRewards = data.feeGmxTrackerRewards.add(data.feeGlpTrackerRewards);\n  data.totalNativeTokenRewardsUsd = data.feeGmxTrackerRewardsUsd.add(data.feeGlpTrackerRewardsUsd);\n\n  data.totalRewardsUsd = data.totalEsGmxRewardsUsd.add(data.totalNativeTokenRewardsUsd).add(data.totalVesterRewardsUsd);\n\n  return data;\n}\n\nexport async function addTokenToMetamask(token) {\n  try {\n    const wasAdded = await window.ethereum.request({\n      method: \"wallet_watchAsset\",\n      params: {\n        type: \"ERC20\",\n        options: {\n          address: token.address,\n          symbol: token.symbol,\n          decimals: token.decimals,\n          image: token.imageUrl,\n        },\n      },\n    });\n    if (wasAdded) {\n      // https://github.com/MetaMask/metamask-extension/issues/11377\n      // We can show a toast message when the token is added to metamask but because of the bug we can't. Once the bug is fixed we can show a toast message.\n    }\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nexport function sleep(ms) {\n  return new Promise((resolve) => resolve(), ms);\n}\n\nexport function getPageTitle(data) {\n  return `${data} | Decentralized\n  Perpetual Exchange | GMX`;\n}\n\nexport function isHashZero(value) {\n  return value === ethers.constants.HashZero;\n}\n\nexport function isAddressZero(value) {\n  return value === ethers.constants.AddressZero;\n}\n\nexport function useDebounce(value, delay) {\n  // State and setters for debounced value\n  const [debouncedValue, setDebouncedValue] = useState(value);\n  useEffect(\n    () => {\n      // Update debounced value after delay\n      const handler = setTimeout(() => {\n        setDebouncedValue(value);\n      }, delay);\n      // Cancel the timeout if value changes (also on delay change or unmount)\n      // This is how we prevent debounced value from updating if value is changed ...\n      // .. within the delay period. Timeout gets cleared and restarted.\n      return () => {\n        clearTimeout(handler);\n      };\n    },\n    [value, delay] // Only re-call effect if value or delay changes\n  );\n  return debouncedValue;\n}\n\nexport function isDevelopment() {\n  return !window.location.host?.includes(\"leveragepro.io\");\n}\n\nexport function isLocal() {\n  return window.location.host?.includes(\"localhost\");\n}\n\nexport function getHomeUrl() {\n  return `${getBaseUrl()}/#`;\n}\n\nexport function getAppBaseUrl() {\n  return `${getBaseUrl()}/#`;\n}\n\nexport function getRootShareApiUrl() {\n  if (isLocal()) {\n    return \"https://leveragepro.vercel.app\";\n  }\n\n  return \"https://share.leveragepro.io\";\n}\n\nexport function getBaseUrl() {\n  if (isLocal()) {\n    return \"http://localhost:3010\";\n  }\n  if (isDevelopment()) {\n    return \"http://185.158.114.248\";\n  }\n  return \"https://leveragepro.io\";\n}\n\nexport function getTradePageUrl() {\n  return `${getBaseUrl()}/#/trade`;\n}\n\nexport function importImage(name) {\n  let tokenImage = null;\n  try {\n    tokenImage = require(\"../img/\" + name);\n  } catch (error) {\n    console.error(error);\n  }\n  return tokenImage && tokenImage.default;\n}\n\nexport function getTwitterIntentURL(text, url = \"\", hashtag = \"\") {\n  let finalURL = \"https://twitter.com/intent/tweet?text=\";\n  if (text.length > 0) {\n    finalURL += encodeURIComponent(text.replace(/[\\r\\n]+/g, \" \"))\n      .replace(/\\*%7C/g, \"*|URL:\")\n      .replace(/%7C\\*/g, \"|*\");\n\n    if (hashtag.length > 0) {\n      finalURL += \"&hashtags=\" + encodeURIComponent(hashtag.replace(/#/g, \"\"));\n    }\n    if (url.length > 0) {\n      finalURL += \"&url=\" + encodeURIComponent(url);\n    }\n  }\n  return finalURL;\n}\n\nexport function isValidTimestamp(timestamp) {\n  return new Date(timestamp).getTime() > 0;\n}\n\nexport function getPositionForOrder(account, order, positionsMap) {\n  const key = getPositionKey(account, order.collateralToken, order.indexToken, order.isLong);\n  const position = positionsMap[key];\n  return position && position.size && position.size.gt(0) ? position : null;\n}\n\nexport function getOrderError(account, order, positionsMap, position) {\n  if (order.type !== DECREASE) {\n    return;\n  }\n\n  const positionForOrder = position ? position : getPositionForOrder(account, order, positionsMap);\n\n  if (!positionForOrder) {\n    return \"No open position, order cannot be executed unless a position is opened\";\n  }\n  if (positionForOrder.size.lt(order.sizeDelta)) {\n    return \"Order size is bigger than position, will only be executable if position increases\";\n  }\n\n  if (positionForOrder.size.gt(order.sizeDelta)) {\n    if (positionForOrder.size.sub(order.sizeDelta).lt(positionForOrder.collateral.sub(order.collateralDelta))) {\n      return \"Order cannot be executed as it would reduce the position's leverage below 1\";\n    }\n    if (positionForOrder.size.sub(order.sizeDelta).lt(expandDecimals(5, USD_DECIMALS))) {\n      return \"Order cannot be executed as the remaining position would be smaller than $5.00\";\n    }\n  }\n}\n\nexport function arrayURLFetcher(...urlArr) {\n  const fetcher = (url) => fetch(url).then((res) => res.json());\n  return Promise.all(urlArr.map(fetcher));\n}\n\nexport function shouldShowRedirectModal(timestamp) {\n  const thirtyDays = 1000 * 60 * 60 * 24 * 30;\n  const expiryTime = timestamp + thirtyDays;\n  return !isValidTimestamp(timestamp) || Date.now() > expiryTime;\n}\n","import React from \"react\";\nimport cx from \"classnames\";\nimport { t } from \"@lingui/macro\";\nimport \"./Footer.css\";\nimport logoImg from \"../../img/ic_gmx_custom.svg\";\nimport twitterIcon from \"../../img/ic_twitter.svg\";\nimport discordIcon from \"../../img/ic_discord.svg\";\nimport telegramIcon from \"../../img/ic_telegram.svg\";\nimport githubIcon from \"../../img/ic_github.svg\";\nimport mediumIcon from \"../../img/ic_medium.svg\";\nimport { NavLink } from \"react-router-dom\";\nimport { isHomeSite, getAppBaseUrl, shouldShowRedirectModal } from \"../../lib/legacy\";\n\nconst footerLinks = {\n  home: [\n    { text: t`Terms and Conditions`, link: \"about:blank\", external: true },\n    { text: t`Referral Terms`, link: \"about:blank\", external: true },\n    { text: t`Media Kit`, link: \"about:blank\", external: true },\n    // { text: \"Jobs\", link: \"/jobs\", isAppLink: true },\n  ],\n  app: [\n    { text: t`Media Kit`, link: \"about:blank\", external: true },\n    // { text: \"Jobs\", link: \"/jobs\" },\n  ],\n};\n\nconst socialLinks = [\n  { link: \"about:blank\", name: \"Twitter\", icon: twitterIcon },\n  { link: \"about:blank\", name: \"Medium\", icon: mediumIcon },\n  { link: \"about:blank\", name: \"Github\", icon: githubIcon },\n  { link: \"about:blank\", name: \"Telegram\", icon: telegramIcon },\n  { link: \"about:blank\", name: \"Discord\", icon: discordIcon },\n];\n\nexport default function Footer({ showRedirectModal, redirectPopupTimestamp }) {\n  const isHome = isHomeSite();\n\n  return (\n    <div className=\"Footer\">\n      <div className={cx(\"Footer-wrapper\", { home: isHome })}>\n        <div className=\"Footer-logo\">\n          <a style={{ fontSize: 28, color: \"white\" }}>\n            <img src={logoImg} className=\"big\" alt=\"GMX Logo\" style={{ height: 24 }} />\n            &nbsp;LeveragePro\n          </a>\n        </div>\n        <div className=\"Footer-social-link-block\">\n          {socialLinks.map((platform) => {\n            return (\n              <a\n                key={platform.name}\n                className=\"App-social-link\"\n                href={platform.link}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                <img src={platform.icon} alt={platform.name} />\n              </a>\n            );\n          })}\n        </div>\n        <div className=\"Footer-links\">\n          {footerLinks[isHome ? \"home\" : \"app\"].map(({ external, text, link, isAppLink }) => {\n            if (external) {\n              return (\n                <a key={text} target=\"_blank\" href={link} className=\"Footer-link\" rel=\"noopener noreferrer\">\n                  {text}\n                </a>\n              );\n            }\n            if (isAppLink) {\n              if (shouldShowRedirectModal(redirectPopupTimestamp)) {\n                return (\n                  <div key={text} className=\"Footer-link a\" onClick={() => showRedirectModal(link)}>\n                    {text}\n                  </div>\n                );\n              } else {\n                const baseUrl = getAppBaseUrl();\n                return (\n                  <a key={text} href={baseUrl + link} className=\"Footer-link\">\n                    {text}\n                  </a>\n                );\n              }\n            }\n            return (\n              <NavLink key={link} to={link} className=\"Footer-link\" activeClassName=\"active\">\n                {text}\n              </NavLink>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { ethers } from \"ethers\";\n\nimport {BSC, BSC_TESTNET, VELAS_TESTNET} from \"../lib/legacy\";\n\nconst { parseEther } = ethers.utils;\n\nconst constants = {\n  [BSC]: {\n    nativeTokenSymbol: \"BNB\",\n    defaultCollateralSymbol: \"BUSD\",\n    defaultFlagOrdersEnabled: false,\n    positionReaderPropsLength: 8,\n    v2: false,\n  },\n  [BSC_TESTNET]: {\n    nativeTokenSymbol: \"BNB\",\n    wrappedTokenSymbol: \"WBNB\",\n    defaultCollateralSymbol: \"BUSD\",\n    defaultFlagOrdersEnabled: true,\n    positionReaderPropsLength: 8,\n    v2: true,\n    SWAP_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.01\"),\n    INCREASE_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.01\"),\n    // contract requires that execution fee be strictly greater than instead of gte\n    DECREASE_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.0100001\"),\n  },\n  [VELAS_TESTNET]: {\n    nativeTokenSymbol: \"VLX\",\n    wrappedTokenSymbol: \"WVLX\",\n    defaultCollateralSymbol: \"BUSD\",\n    defaultFlagOrdersEnabled: true,\n    positionReaderPropsLength: 8,\n    v2: true,\n    SWAP_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.01\"),\n    INCREASE_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.01\"),\n    // contract requires that execution fee be strictly greater than instead of gte\n    DECREASE_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.0100001\"),\n  },\n};\n\nexport const getConstant = (chainId, key) => {\n  if (!constants[chainId]) {\n    throw new Error(`Unsupported chainId ${chainId}`);\n  }\n  if (!(key in constants[chainId])) {\n    throw new Error(`Key ${key} does not exist for chainId ${chainId}`);\n  }\n  return constants[chainId][key];\n};\n","import { ApolloClient, InMemoryCache } from \"@apollo/client\";\n\nexport const chainlinkClient = createClient(\"https://api.thegraph.com/subgraphs/name/deividask/chainlink\");\nexport const arbitrumGraphClient = createClient(\"https://api.thegraph.com/subgraphs/name/gmx-io/gmx-stats\");\nexport const avalancheGraphClient = createClient(\"https://api.thegraph.com/subgraphs/name/gmx-io/gmx-avalanche-stats\");\nexport const bscTestnetGraphClient = createClient(\"https://api.thegraph.com/subgraphs/name/gmx-io/gmx-bsctestnet-stats\");\nexport const nissohGraphClient = createClient(\"https://api.thegraph.com/subgraphs/name/nissoh/gmx-vault\");\nexport const arbitrumReferralsGraphClient = createClient(\n  \"https://api.thegraph.com/subgraphs/name/gmx-io/gmx-arbitrum-referrals\"\n);\nexport const avalancheReferralsGraphClient = createClient(\n  \"https://api.thegraph.com/subgraphs/name/gmx-io/gmx-avalanche-referrals\"\n);\nexport const testnetReferralsGraphClient = createClient(\n  \"https://api.thegraph.com/subgraphs/name/gmx-io/gmx-bsctestnet-referrals\"\n);\n\nfunction createClient(uri) {\n  return new ApolloClient({\n    uri,\n    cache: new InMemoryCache(),\n  });\n}\n","import { useMemo } from \"react\";\nimport { gql } from \"@apollo/client\";\nimport useSWR from \"swr\";\nimport { ethers } from \"ethers\";\n\nimport {\n  USD_DECIMALS,\n  CHART_PERIODS,\n  formatAmount,\n  sleep,\n  getServerBaseUrl,\n  BSC_TESTNET,\n  fetcher,\n  PLACEHOLDER_ACCOUNT\n} from \"../lib/legacy\";\nimport { chainlinkClient } from \"./common\";\nimport PriceFeed from \"../abis/PriceFeed.json\";\n\nconst BigNumber = ethers.BigNumber;\n\n// Ethereum network, Chainlink Aggregator contracts\nconst FEED_ID_MAP = {\n  BTC_USD: \"0xae74faa92cb67a95ebcab07358bc222e33a34da7\",\n  ETH_USD: \"0x37bc7498f4ff12c19678ee8fe19d713b87f6a9e6\",\n  BNB_USD: \"0xc45ebd0f901ba6b2b8c7e70b717778f055ef5e6d\",\n  LINK_USD: \"0xdfd03bfc3465107ce570a0397b247f546a42d0fa\",\n  UNI_USD: \"0x68577f915131087199fe48913d8b416b3984fd38\",\n  SUSHI_USD: \"0x7213536a36094cd8a768a5e45203ec286cba2d74\",\n  AVAX_USD: \"0x0fc3657899693648bba4dbd2d8b33b82e875105d\",\n  AAVE_USD: \"0xe3f0dede4b499c07e12475087ab1a084b5f93bc0\",\n  YFI_USD: \"0x8a4d74003870064d41d4f84940550911fbfccf04\",\n  SPELL_USD: \"0x8640b23468815902e011948f3ab173e1e83f9879\",\n};\nconst timezoneOffset = -new Date().getTimezoneOffset() * 60;\n\nfunction fillGaps(prices, periodSeconds) {\n  if (prices.length < 2) {\n    return prices;\n  }\n\n  const newPrices = [prices[0]];\n  let prevTime = prices[0].time;\n  for (let i = 1; i < prices.length; i++) {\n    const { time, open } = prices[i];\n    if (prevTime) {\n      let j = (time - prevTime) / periodSeconds - 1;\n      while (j > 0) {\n        newPrices.push({\n          time: time - j * periodSeconds,\n          open,\n          close: open,\n          high: open * 1.0003,\n          low: open * 0.9996,\n        });\n        j--;\n      }\n    }\n\n    prevTime = time;\n    newPrices.push(prices[i]);\n  }\n\n  return newPrices;\n}\n\nasync function getChartPricesFromChainlink(chainId, symbol, period) {\n  if ([\"WBTC\", \"WETH\", \"WAVAX\"].includes(symbol)) {\n    symbol = symbol.substr(1);\n  } else if (symbol === \"BTC.b\") {\n    symbol = \"BTC\";\n  }\n  const hostname = getServerBaseUrl(chainId);\n  const timeDiff = CHART_PERIODS[period] * 3000;\n  const from = Math.floor(Date.now() / 1000 - timeDiff);\n  const url = `${hostname}/chart_prices/${symbol}?preferableChainId=${chainId}&period=${period}&from=${from}`;\n\n  return await fetch(url)\n    .then((response) => response.json())\n    .then(json => {\n      let result = json?.prices;\n      let prices = [];\n      const uniqTs = new Set();\n      result.forEach((item) => {\n        if (uniqTs.has(item.timestamp)) {\n          return;\n        }\n\n        uniqTs.add(item.timestamp);\n        prices.push([item.timestamp, Number(item.value) / 1e8]);\n      });\n\n      prices.sort(([timeA], [timeB]) => timeA - timeB);\n      prices = getCandlesFromPrices(prices, period);\n      return prices;\n    });\n}\n\nfunction getCandlesFromPrices(prices, period) {\n  const periodTime = CHART_PERIODS[period];\n\n  if (prices.length < 2) {\n    return [];\n  }\n\n  const candles = [];\n  const first = prices[0];\n  let prevTsGroup = Math.floor(first[0] / periodTime) * periodTime;\n  let prevPrice = first[1];\n  let o = prevPrice;\n  let h = prevPrice;\n  let l = prevPrice;\n  let c = prevPrice;\n  for (let i = 1; i < prices.length; i++) {\n    const [ts, price] = prices[i];\n    const tsGroup = Math.floor(ts / periodTime) * periodTime;\n    if (prevTsGroup !== tsGroup) {\n      candles.push({ t: prevTsGroup + timezoneOffset, o, h, l, c });\n      o = c;\n      h = Math.max(o, c);\n      l = Math.min(o, c);\n    }\n    c = price;\n    h = Math.max(h, price);\n    l = Math.min(l, price);\n    prevTsGroup = tsGroup;\n  }\n\n  return candles.map(({ t: time, o: open, c: close, h: high, l: low }) => ({\n    time,\n    open,\n    close,\n    high,\n    low,\n  }));\n}\n\nfunction getChainlinkChartPricesFromGraph(tokenSymbol, period) {\n  if ([\"WBTC\", \"WETH\", \"WAVAX\"].includes(tokenSymbol)) {\n    tokenSymbol = tokenSymbol.substr(1);\n  }\n  const marketName = tokenSymbol + \"_USD\";\n  const feedId = FEED_ID_MAP[marketName];\n  if (!feedId) {\n    throw new Error(`undefined marketName ${marketName}`);\n  }\n\n  const PER_CHUNK = 1000;\n  const CHUNKS_TOTAL = 6;\n  const requests = [];\n  for (let i = 0; i < CHUNKS_TOTAL; i++) {\n    const query = gql(`{\n      rounds(\n        first: ${PER_CHUNK},\n        skip: ${i * PER_CHUNK},\n        orderBy: unixTimestamp,\n        orderDirection: desc,\n        where: {feed: \"${feedId}\"}\n      ) {\n        unixTimestamp,\n        value\n      }\n    }`);\n    requests.push(chainlinkClient.query({ query }));\n  }\n  return Promise.all(requests)\n    .then((chunks) => {\n      let prices = [];\n      const uniqTs = new Set();\n      chunks.forEach((chunk) => {\n        chunk.data.rounds.forEach((item) => {\n          if (uniqTs.has(item.unixTimestamp)) {\n            return;\n          }\n\n          uniqTs.add(item.unixTimestamp);\n          prices.push([item.unixTimestamp, Number(item.value) / 1e8]);\n        });\n      });\n\n      prices.sort(([timeA], [timeB]) => timeA - timeB);\n      prices = getCandlesFromPrices(prices, period);\n      return prices;\n    })\n    .catch((err) => {\n      console.error(err);\n    });\n}\n\nexport function useChartPrices(chainId, symbol, isStable, priceFeedAddress, period, currentAveragePrice) {\n  const swrKey = !isStable && symbol ? [\"getChartCandles\", chainId, symbol, period] : null;\n  let { data: prices, mutate: updatePrices } = useSWR(swrKey, {\n    fetcher: async (...args) => {\n      try {\n        return await getChartPricesFromChainlink(chainId, symbol, period);\n        // return await getChainlinkChartPricesFromGraph(symbol, period);\n      } catch (ex2) {\n        console.warn(\"getChainlinkChartPricesFromGraph failed\");\n        console.warn(ex2);\n        return [];\n      }\n    },\n    dedupingInterval: 600000,\n    focusThrottleInterval: 600000 * 10,\n  });\n\n  const currentAveragePriceString = currentAveragePrice && currentAveragePrice.toString();\n  const retPrices = useMemo(() => {\n    if (isStable) {\n      return getStablePriceData(period);\n    }\n\n    if (!prices) {\n      return [];\n    }\n\n    let _prices = [...prices];\n    if (currentAveragePriceString && prices.length) {\n      _prices = appendCurrentAveragePrice(_prices, BigNumber.from(currentAveragePriceString), period);\n    }\n\n    return fillGaps(_prices, CHART_PERIODS[period]);\n  }, [prices, isStable, currentAveragePriceString, period]);\n\n  return [retPrices, updatePrices];\n}\n\nfunction appendCurrentAveragePrice(prices, currentAveragePrice, period) {\n  const periodSeconds = CHART_PERIODS[period];\n  const currentCandleTime = Math.floor(Date.now() / 1000 / periodSeconds) * periodSeconds + timezoneOffset;\n  const last = prices[prices.length - 1];\n  const averagePriceValue = parseFloat(formatAmount(currentAveragePrice, USD_DECIMALS, 2));\n  if (currentCandleTime === last.time) {\n    last.close = averagePriceValue;\n    last.high = Math.max(last.high, averagePriceValue);\n    last.low = Math.max(last.low, averagePriceValue);\n    return prices;\n  } else {\n    const newCandle = {\n      time: currentCandleTime,\n      open: last.close,\n      close: averagePriceValue,\n      high: averagePriceValue,\n      low: averagePriceValue,\n    };\n    return [...prices, newCandle];\n  }\n}\n\nfunction getStablePriceData(period) {\n  const periodSeconds = CHART_PERIODS[period];\n  const now = Math.floor(Date.now() / 1000 / periodSeconds) * periodSeconds;\n  let priceData = [];\n  for (let i = 100; i > 0; i--) {\n    priceData.push({\n      time: now - i * periodSeconds,\n      open: 1,\n      close: 1,\n      high: 1,\n      low: 1,\n    });\n  }\n  return priceData;\n}\n","import { ethers } from \"ethers\";\nimport { gql } from \"@apollo/client\";\nimport { useState, useEffect, useMemo, useCallback, useRef } from \"react\";\nimport { Token as UniToken } from \"@uniswap/sdk-core\";\nimport { Pool } from \"@uniswap/v3-sdk\";\nimport useSWR from \"swr\";\n\nimport OrderBook from \"../abis/OrderBook.json\";\nimport PositionManager from \"../abis/PositionManager.json\";\nimport Vault from \"../abis/Vault.json\";\nimport Router from \"../abis/Router.json\";\nimport UniPool from \"../abis/UniPool.json\";\nimport Token from \"../abis/Token.json\";\nimport VaultReader from \"../abis/VaultReader.json\";\nimport PositionRouter from \"../abis/PositionRouter.json\";\n\nimport { getContract } from \"../config/Addresses\";\nimport { getConstant } from \"../config/chains\";\nimport {\n  UI_VERSION,\n  // DEFAULT_GAS_LIMIT,\n  bigNumberify,\n  getExplorerUrl,\n  getServerBaseUrl,\n  getServerUrl,\n  setGasPrice,\n  getGasLimit,\n  replaceNativeTokenAddress,\n  getProvider,\n  getOrderKey,\n  fetcher,\n  parseValue,\n  expandDecimals,\n  getInfoTokens,\n  helperToast,\n  getUsd,\n  USD_DECIMALS,\n  getHighExecutionFee,\n  SWAP,\n  INCREASE,\n  DECREASE,\n  BSC_TESTNET, VELAS, VELAS_TESTNET\n} from \"../lib/legacy\";\nimport { getTokens, getTokenBySymbol, getWhitelistedTokens } from \"../config/Tokens\";\n\nimport {nissohGraphClient, bscTestnetGraphClient} from \"./common\";\nimport { groupBy } from \"lodash\";\nexport * from \"./prices\";\n\nconst { AddressZero } = ethers.constants;\n\nfunction getGmxGraphClient(chainId) {\n  if (chainId === BSC_TESTNET) {\n    return bscTestnetGraphClient;\n  }\n  throw new Error(`Unsupported chain ${chainId}`);\n}\n\nexport function useAllOrdersStats(chainId) {\n  const query = gql(`{\n    orderStat(id: \"total\") {\n      openSwap\n      openIncrease\n      openDecrease\n      executedSwap\n      executedIncrease\n      executedDecrease\n      cancelledSwap\n      cancelledIncrease\n      cancelledDecrease\n    }\n  }`);\n\n  const [res, setRes] = useState();\n\n  useEffect(() => {\n    const graphClient = getGmxGraphClient(chainId);\n    if (graphClient) {\n      graphClient.query({ query }).then(setRes).catch(console.warn);\n    }\n  }, [setRes, query, chainId]);\n\n  return res ? res.data.orderStat : null;\n}\n\nexport function useInfoTokens(library, chainId, active, tokenBalances, fundingRateInfo, vaultPropsLength) {\n  const tokens = getTokens(chainId);\n  const vaultReaderAddress = getContract(chainId, \"VaultReader\");\n  const vaultAddress = getContract(chainId, \"Vault\");\n  const positionRouterAddress = getContract(chainId, \"PositionRouter\");\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n\n  const whitelistedTokens = getWhitelistedTokens(chainId);\n  const whitelistedTokenAddresses = whitelistedTokens.map((token) => token.address);\n\n  const { data: vaultTokenInfo } = useSWR(\n    [`useInfoTokens:${active}`, chainId, vaultReaderAddress, \"getVaultTokenInfoV4\"],\n    {\n      fetcher: fetcher(library, VaultReader, [\n        vaultAddress,\n        positionRouterAddress,\n        nativeTokenAddress,\n        expandDecimals(1, 18),\n        whitelistedTokenAddresses,\n      ]),\n    }\n  );\n\n  const indexPricesUrl = getServerUrl(chainId, \"/prices/\" + chainId);\n  const { data: indexPrices } = useSWR([indexPricesUrl], {\n    fetcher: (...args) => fetch(...args).then((res) => res.json()),\n    refreshInterval: 60000,\n    refreshWhenHidden: true,\n  });\n\n  return {\n    infoTokens: getInfoTokens(\n      tokens,\n      tokenBalances,\n      whitelistedTokens,\n      vaultTokenInfo,\n      fundingRateInfo,\n      vaultPropsLength,\n      indexPrices,\n      nativeTokenAddress\n    ),\n  };\n}\n\nexport function useUserStat(chainId) {\n  const query = gql(`{\n    userStat(id: \"total\") {\n      id\n      uniqueCount\n    }\n  }`);\n\n  const [res, setRes] = useState();\n\n  useEffect(() => {\n    getGmxGraphClient(chainId).query({ query }).then(setRes).catch(console.warn);\n  }, [setRes, query, chainId]);\n\n  return res ? res.data.userStat : null;\n}\n\nexport function useLiquidationsData(chainId, account) {\n  const [data, setData] = useState(null);\n  useEffect(() => {\n    if (account) {\n      const query = gql(`{\n         liquidatedPositions(\n           where: {account: \"${account.toLowerCase()}\"}\n           first: 100\n           orderBy: timestamp\n           orderDirection: desc\n         ) {\n           key\n           timestamp\n           borrowFee\n           loss\n           collateral\n           size\n           markPrice\n           type\n         }\n      }`);\n      const graphClient = getGmxGraphClient(chainId);\n      if (!graphClient) {\n        return;\n      }\n\n      graphClient\n        .query({ query })\n        .then((res) => {\n          const _data = res.data.liquidatedPositions.map((item) => {\n            return {\n              ...item,\n              size: bigNumberify(item.size),\n              collateral: bigNumberify(item.collateral),\n              markPrice: bigNumberify(item.markPrice),\n            };\n          });\n          setData(_data);\n        })\n        .catch(console.warn);\n    }\n  }, [setData, chainId, account]);\n\n  return data;\n}\n\nexport function useAllPositions(chainId, library) {\n  const count = 1000;\n  const query = gql(`{\n    aggregatedTradeOpens(\n      first: ${count}\n    ) {\n      account\n      initialPosition{\n        indexToken\n        collateralToken\n        isLong\n        sizeDelta\n      }\n      increaseList {\n        sizeDelta\n      }\n      decreaseList {\n        sizeDelta\n      }\n    }\n  }`);\n\n  const [res, setRes] = useState();\n\n  useEffect(() => {\n    nissohGraphClient.query({ query }).then(setRes).catch(console.warn);\n  }, [setRes, query]);\n\n  const key = res ? `allPositions${count}__` : false;\n  const { data: positions = [] } = useSWR(key, async () => {\n    const provider = getProvider(library, chainId);\n    const vaultAddress = getContract(chainId, \"Vault\");\n    const contract = new ethers.Contract(vaultAddress, Vault.abi, provider);\n    const ret = await Promise.all(\n      res.data.aggregatedTradeOpens.map(async (dataItem) => {\n        try {\n          const { indexToken, collateralToken, isLong } = dataItem.initialPosition;\n          const positionData = await contract.getPosition(dataItem.account, collateralToken, indexToken, isLong);\n          const position = {\n            size: bigNumberify(positionData[0]),\n            collateral: bigNumberify(positionData[1]),\n            entryFundingRate: bigNumberify(positionData[3]),\n            account: dataItem.account,\n          };\n          position.fundingFee = await contract.getFundingFee(collateralToken, position.size, position.entryFundingRate);\n          position.marginFee = position.size.div(1000);\n          position.fee = position.fundingFee.add(position.marginFee);\n\n          const THRESHOLD = 5000;\n          const collateralDiffPercent = position.fee.mul(10000).div(position.collateral);\n          position.danger = collateralDiffPercent.gt(THRESHOLD);\n\n          return position;\n        } catch (ex) {\n          console.error(ex);\n        }\n      })\n    );\n\n    return ret.filter(Boolean);\n  });\n\n  return positions;\n}\n\nexport function useAllOrders(chainId, library) {\n  const query = gql(`{\n    orders(\n      first: 1000,\n      orderBy: createdTimestamp,\n      orderDirection: desc,\n      where: {status: \"open\"}\n    ) {\n      type\n      account\n      index\n      status\n      createdTimestamp\n    }\n  }`);\n\n  const [res, setRes] = useState();\n\n  useEffect(() => {\n    getGmxGraphClient(chainId).query({ query }).then(setRes);\n  }, [setRes, query, chainId]);\n\n  const key = res ? res.data.orders.map((order) => `${order.type}-${order.account}-${order.index}`) : null;\n  const { data: orders = [] } = useSWR(key, () => {\n    const provider = getProvider(library, chainId);\n    const orderBookAddress = getContract(chainId, \"OrderBook\");\n    const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, provider);\n    return Promise.all(\n      res.data.orders.map(async (order) => {\n        try {\n          const type = order.type.charAt(0).toUpperCase() + order.type.substring(1);\n          const method = `get${type}Order`;\n          const orderFromChain = await contract[method](order.account, order.index);\n          const ret = {};\n          for (const [key, val] of Object.entries(orderFromChain)) {\n            ret[key] = val;\n          }\n          if (order.type === \"swap\") {\n            ret.path = [ret.path0, ret.path1, ret.path2].filter((address) => address !== AddressZero);\n          }\n          ret.type = type;\n          ret.index = order.index;\n          ret.account = order.account;\n          ret.createdTimestamp = order.createdTimestamp;\n          return ret;\n        } catch (ex) {\n          console.error(ex);\n        }\n      })\n    );\n  });\n\n  return orders.filter(Boolean);\n}\n\nexport function usePositionsForOrders(chainId, library, orders) {\n  const key = orders ? orders.map((order) => getOrderKey(order) + \"____\") : null;\n  const { data: positions = {} } = useSWR(key, async () => {\n    const provider = getProvider(library, chainId);\n    const vaultAddress = getContract(chainId, \"Vault\");\n    const contract = new ethers.Contract(vaultAddress, Vault.abi, provider);\n    const data = await Promise.all(\n      orders.map(async (order) => {\n        try {\n          const position = await contract.getPosition(\n            order.account,\n            order.collateralToken,\n            order.indexToken,\n            order.isLong\n          );\n          if (position[0].eq(0)) {\n            return [null, order];\n          }\n          return [position, order];\n        } catch (ex) {\n          console.error(ex);\n        }\n      })\n    );\n    return data.reduce((memo, [position, order]) => {\n      memo[getOrderKey(order)] = position;\n      return memo;\n    }, {});\n  });\n\n  return positions;\n}\n\nfunction invariant(condition, errorMsg) {\n  if (!condition) {\n    throw new Error(errorMsg);\n  }\n}\n\nexport function useTrades(chainId, account, forSingleAccount, afterId) {\n  let url =\n    account && account.length > 0\n      ? `${getServerBaseUrl(chainId)}/actions?account=${account}`\n      : !forSingleAccount && `${getServerBaseUrl(chainId)}/actions`;\n\n  if (afterId && afterId.length > 0) {\n    const urlItem = new URL(url);\n    urlItem.searchParams.append(\"after\", afterId);\n    url = urlItem.toString();\n  }\n\n  const { data: trades, mutate: updateTrades } = useSWR(url && url, {\n    dedupingInterval: 10000,\n    fetcher: (...args) => fetch(...args).then((res) => res.json()),\n  });\n\n  if (trades) {\n    trades.sort((item0, item1) => {\n      const data0 = item0.data;\n      const data1 = item1.data;\n      const time0 = parseInt(data0.timestamp);\n      const time1 = parseInt(data1.timestamp);\n      if (time1 > time0) {\n        return 1;\n      }\n      if (time1 < time0) {\n        return -1;\n      }\n\n      const block0 = parseInt(data0.blockNumber);\n      const block1 = parseInt(data1.blockNumber);\n\n      if (isNaN(block0) && isNaN(block1)) {\n        return 0;\n      }\n\n      if (isNaN(block0)) {\n        return 1;\n      }\n\n      if (isNaN(block1)) {\n        return -1;\n      }\n\n      if (block1 > block0) {\n        return 1;\n      }\n\n      if (block1 < block0) {\n        return -1;\n      }\n\n      return 0;\n    });\n  }\n\n  return { trades, updateTrades };\n}\n\nexport function useMinExecutionFee(library, active, chainId, infoTokens) {\n  const positionRouterAddress = getContract(chainId, \"PositionRouter\");\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n\n  const { data: minExecutionFee } = useSWR([active, chainId, positionRouterAddress, \"minExecutionFee\"], {\n    fetcher: fetcher(library, PositionRouter),\n  });\n\n  const { data: gasPrice } = useSWR([\"gasPrice\", chainId], {\n    fetcher: () => {\n      return new Promise(async (resolve, reject) => {\n        const provider = getProvider(library, chainId);\n        if (!provider) {\n          resolve(undefined);\n          return;\n        }\n\n        try {\n          const gasPrice = await provider.getGasPrice();\n          resolve(gasPrice);\n        } catch (e) {\n          console.error(e);\n        }\n      });\n    },\n  });\n\n  let multiplier;\n\n  // if gas prices on Binance are high, the main transaction costs would come from the L2 gas usage\n  // for executing positions this is around 65,000 gas\n  // if gas prices on Ethereum are high, than the gas usage might be higher, this calculation doesn't deal with that\n  // case yet\n  if (chainId === BSC_TESTNET) {\n    multiplier = 700000;\n  } else if (chainId === VELAS_TESTNET) {\n    multiplier = 700000;\n  }\n\n  let finalExecutionFee = minExecutionFee;\n\n  if (gasPrice && minExecutionFee) {\n    const estimatedExecutionFee = gasPrice.mul(multiplier);\n    if (estimatedExecutionFee.gt(minExecutionFee)) {\n      finalExecutionFee = estimatedExecutionFee;\n    }\n  }\n\n  const finalExecutionFeeUSD = getUsd(finalExecutionFee, nativeTokenAddress, false, infoTokens);\n  const isFeeHigh = finalExecutionFeeUSD?.gt(expandDecimals(getHighExecutionFee(chainId), USD_DECIMALS));\n  const errorMessage =\n    isFeeHigh &&\n    `The network cost to send transactions is high at the moment, please check the \"Execution Fee\" value before proceeding.`;\n\n  return {\n    minExecutionFee: finalExecutionFee,\n    minExecutionFeeUSD: finalExecutionFeeUSD,\n    minExecutionFeeErrorMessage: errorMessage,\n  };\n}\n\nexport function useHasOutdatedUi() {\n  const url = getServerUrl(BSC_TESTNET, \"/ui_version\");\n  const { data, mutate } = useSWR([url], {\n    fetcher: (...args) => fetch(...args).then((res) => res.text()),\n  });\n\n  let hasOutdatedUi = false;\n\n  if (data && parseFloat(data) > parseFloat(UI_VERSION)) {\n    hasOutdatedUi = true;\n  }\n\n  return { data: hasOutdatedUi, mutate };\n}\n\nexport function useLeveragePrice(chainId, libraries, active) {\n  const poolAddress = getContract(chainId, chainId === BSC_TESTNET ? \"LeverageBnbPool\" : \"LeverageVelasPool\");\n  const { data: uniPoolSlot0, mutate: updateUniPoolSlot0 } = useSWR(\n    [`StakeV2:uniPoolSlot0:${active}`, chainId, poolAddress, \"slot0\"],\n    {\n      fetcher: fetcher(libraries, UniPool),\n    }\n  );\n\n  const vaultAddress = getContract(chainId, \"Vault\");\n  const nativeTokenAddress = getTokenBySymbol(chainId, \"WBNB\").address;\n  const { data: nativeTokenPrice, mutate: updateNativeTokenPrice } = useSWR(\n    [`StakeV2:ethPrice:${active}`, chainId, vaultAddress, \"getMinPrice\", nativeTokenAddress],\n    {\n      fetcher: fetcher(libraries, Vault),\n    }\n  );\n\n  const leveragePrice = useMemo(() => {\n    if (uniPoolSlot0 && nativeTokenPrice) {\n      const leverageAddress = getContract(BSC_TESTNET, \"Leverage\");\n      const tokenA = new UniToken(BSC_TESTNET, nativeTokenAddress, 18, \"SYMBOL\", \"NAME\");\n      const tokenB = new UniToken(BSC_TESTNET, leverageAddress, 18, \"SYMBOL\", \"NAME\");\n\n      const pool = new Pool(\n        tokenA, // tokenA\n        tokenB, // tokenB\n        10000, // fee\n        uniPoolSlot0.sqrtPriceX96, // sqrtRatioX96\n        1, // liquidity\n        uniPoolSlot0.tick, // tickCurrent\n        []\n      );\n\n      const poolTokenPrice = pool.priceOf(tokenB).toSignificant(6);\n      const poolTokenPriceAmount = parseValue(poolTokenPrice, 18);\n      return poolTokenPriceAmount.mul(nativeTokenPrice).div(expandDecimals(1, 18));\n    }\n  }, [nativeTokenPrice, uniPoolSlot0, nativeTokenAddress]);\n\n  const mutate = useCallback(() => {\n    updateUniPoolSlot0(undefined, true);\n    updateNativeTokenPrice(undefined, true);\n  }, [updateNativeTokenPrice, updateUniPoolSlot0]);\n\n  return { data: leveragePrice, mutate };\n}\n\nexport function useTotalGmxStaked() {\n  const stakedGmxTrackerAddress = getContract(BSC_TESTNET, \"StakedLeverageTracker\");\n  let totalStakedGmx = useRef(bigNumberify(0));\n  const { data: stakedGmxSupply, mutate: updateStakedGmxSupply } = useSWR(\n    [\n      `StakeV2:stakedGmxSupply:${BSC_TESTNET}`,\n      BSC_TESTNET,\n      getContract(BSC_TESTNET, \"Leverage\"),\n      \"balanceOf\",\n      stakedGmxTrackerAddress,\n    ],\n    {\n      fetcher: fetcher(undefined, Token),\n    }\n  );\n\n  const mutate = useCallback(() => {\n    updateStakedGmxSupply();\n  }, [updateStakedGmxSupply]);\n\n  if (stakedGmxSupply) {\n    let total = bigNumberify(stakedGmxSupply);\n    totalStakedGmx.current = total;\n  }\n\n  return {\n    bsc: stakedGmxSupply,\n    total: totalStakedGmx.current,\n    mutate,\n  };\n}\n\n// export function useTotalGmxInLiquidity() {\n//   let poolAddressArbitrum = getContract(ARBITRUM, \"UniswapGmxEthPool\");\n//   let poolAddressAvax = getContract(AVALANCHE, \"TraderJoeGmxAvaxPool\");\n//   let totalGMX = useRef(bigNumberify(0));\n//\n//   const { data: gmxInLiquidityOnArbitrum, mutate: mutateGMXInLiquidityOnArbitrum } = useSWR(\n//     [`StakeV2:gmxInLiquidity:${ARBITRUM}`, ARBITRUM, getContract(ARBITRUM, \"GMX\"), \"balanceOf\", poolAddressArbitrum],\n//     {\n//       fetcher: fetcher(undefined, Token),\n//     }\n//   );\n//   const { data: gmxInLiquidityOnAvax, mutate: mutateGMXInLiquidityOnAvax } = useSWR(\n//     [`StakeV2:gmxInLiquidity:${AVALANCHE}`, AVALANCHE, getContract(AVALANCHE, \"GMX\"), \"balanceOf\", poolAddressAvax],\n//     {\n//       fetcher: fetcher(undefined, Token),\n//     }\n//   );\n//   const mutate = useCallback(() => {\n//     mutateGMXInLiquidityOnArbitrum();\n//     mutateGMXInLiquidityOnAvax();\n//   }, [mutateGMXInLiquidityOnArbitrum, mutateGMXInLiquidityOnAvax]);\n//\n//   if (gmxInLiquidityOnAvax && gmxInLiquidityOnArbitrum) {\n//     let total = bigNumberify(gmxInLiquidityOnArbitrum).add(gmxInLiquidityOnAvax);\n//     totalGMX.current = total;\n//   }\n//   return {\n//     avax: gmxInLiquidityOnAvax,\n//     arbitrum: gmxInLiquidityOnArbitrum,\n//     total: totalGMX.current,\n//     mutate,\n//   };\n// }\n\nexport async function approvePlugin(\n  chainId,\n  pluginAddress,\n  { library, pendingTxns, setPendingTxns, sentMsg, failMsg }\n) {\n  const routerAddress = getContract(chainId, \"Router\");\n  const contract = new ethers.Contract(routerAddress, Router.abi, library.getSigner());\n  return callContract(chainId, contract, \"approvePlugin\", [pluginAddress], {\n    sentMsg,\n    failMsg,\n    pendingTxns,\n    setPendingTxns,\n  });\n}\n\nexport async function createSwapOrder(\n  chainId,\n  library,\n  path,\n  amountIn,\n  minOut,\n  triggerRatio,\n  nativeTokenAddress,\n  opts = {}\n) {\n  const executionFee = getConstant(chainId, \"SWAP_ORDER_EXECUTION_GAS_FEE\");\n  const triggerAboveThreshold = false;\n  let shouldWrap = false;\n  let shouldUnwrap = false;\n  opts.value = executionFee;\n\n  if (path[0] === AddressZero) {\n    shouldWrap = true;\n    opts.value = opts.value.add(amountIn);\n  }\n  if (path[path.length - 1] === AddressZero) {\n    shouldUnwrap = true;\n  }\n  path = replaceNativeTokenAddress(path, nativeTokenAddress);\n\n  const params = [path, amountIn, minOut, triggerRatio, triggerAboveThreshold, executionFee, shouldWrap, shouldUnwrap];\n\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\n\n  return callContract(chainId, contract, \"createSwapOrder\", params, opts);\n}\n\nexport async function createIncreaseOrder(\n  chainId,\n  library,\n  nativeTokenAddress,\n  path,\n  amountIn,\n  indexTokenAddress,\n  minOut,\n  sizeDelta,\n  collateralTokenAddress,\n  isLong,\n  triggerPrice,\n  opts = {}\n) {\n  invariant(!isLong || indexTokenAddress === collateralTokenAddress, \"invalid token addresses\");\n  invariant(indexTokenAddress !== AddressZero, \"indexToken is 0\");\n  invariant(collateralTokenAddress !== AddressZero, \"collateralToken is 0\");\n\n  const fromETH = path[0] === AddressZero;\n\n  path = replaceNativeTokenAddress(path, nativeTokenAddress);\n  const shouldWrap = fromETH;\n  const triggerAboveThreshold = !isLong;\n  const executionFee = getConstant(chainId, \"INCREASE_ORDER_EXECUTION_GAS_FEE\");\n\n  const params = [\n    path,\n    amountIn,\n    indexTokenAddress,\n    minOut,\n    sizeDelta,\n    collateralTokenAddress,\n    isLong,\n    triggerPrice,\n    triggerAboveThreshold,\n    executionFee,\n    shouldWrap,\n  ];\n\n  if (!opts.value) {\n    opts.value = fromETH ? amountIn.add(executionFee) : executionFee;\n  }\n\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\n\n  return callContract(chainId, contract, \"createIncreaseOrder\", params, opts);\n}\n\nexport async function createDecreaseOrder(\n  chainId,\n  library,\n  indexTokenAddress,\n  sizeDelta,\n  collateralTokenAddress,\n  collateralDelta,\n  isLong,\n  triggerPrice,\n  triggerAboveThreshold,\n  opts = {}\n) {\n  invariant(!isLong || indexTokenAddress === collateralTokenAddress, \"invalid token addresses\");\n  invariant(indexTokenAddress !== AddressZero, \"indexToken is 0\");\n  invariant(collateralTokenAddress !== AddressZero, \"collateralToken is 0\");\n\n  const executionFee = getConstant(chainId, \"DECREASE_ORDER_EXECUTION_GAS_FEE\");\n\n  const params = [\n    indexTokenAddress,\n    sizeDelta,\n    collateralTokenAddress,\n    collateralDelta,\n    isLong,\n    triggerPrice,\n    triggerAboveThreshold,\n  ];\n  opts.value = executionFee;\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\n\n  return callContract(chainId, contract, \"createDecreaseOrder\", params, opts);\n}\n\nexport async function cancelSwapOrder(chainId, library, index, opts) {\n  const params = [index];\n  const method = \"cancelSwapOrder\";\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\n\n  return callContract(chainId, contract, method, params, opts);\n}\n\nexport async function cancelDecreaseOrder(chainId, library, index, opts) {\n  const params = [index];\n  const method = \"cancelDecreaseOrder\";\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\n\n  return callContract(chainId, contract, method, params, opts);\n}\n\nexport async function cancelIncreaseOrder(chainId, library, index, opts) {\n  const params = [index];\n  const method = \"cancelIncreaseOrder\";\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\n\n  return callContract(chainId, contract, method, params, opts);\n}\n\nexport function handleCancelOrder(chainId, library, order, opts) {\n  let func;\n  if (order.type === SWAP) {\n    func = cancelSwapOrder;\n  } else if (order.type === INCREASE) {\n    func = cancelIncreaseOrder;\n  } else if (order.type === DECREASE) {\n    func = cancelDecreaseOrder;\n  }\n\n  return func(chainId, library, order.index, {\n    successMsg: \"Order cancelled.\",\n    failMsg: \"Cancel failed.\",\n    sentMsg: \"Cancel submitted.\",\n    pendingTxns: opts.pendingTxns,\n    setPendingTxns: opts.setPendingTxns,\n  });\n}\n\nexport async function cancelMultipleOrders(chainId, library, allIndexes = [], opts) {\n  const ordersWithTypes = groupBy(allIndexes, (v) => v.split(\"-\")[0]);\n  function getIndexes(key) {\n    if (!ordersWithTypes[key]) return;\n    return ordersWithTypes[key].map((d) => d.split(\"-\")[1]);\n  }\n  // params order => swap, increase, decrease\n  const params = [\"Swap\", \"Increase\", \"Decrease\"].map((key) => getIndexes(key) || []);\n  const method = \"cancelMultiple\";\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\n  return callContract(chainId, contract, method, params, opts);\n}\n\nexport async function updateDecreaseOrder(\n  chainId,\n  library,\n  index,\n  collateralDelta,\n  sizeDelta,\n  triggerPrice,\n  triggerAboveThreshold,\n  opts\n) {\n  const params = [index, collateralDelta, sizeDelta, triggerPrice, triggerAboveThreshold];\n  const method = \"updateDecreaseOrder\";\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\n\n  return callContract(chainId, contract, method, params, opts);\n}\n\nexport async function updateIncreaseOrder(\n  chainId,\n  library,\n  index,\n  sizeDelta,\n  triggerPrice,\n  triggerAboveThreshold,\n  opts\n) {\n  const params = [index, sizeDelta, triggerPrice, triggerAboveThreshold];\n  const method = \"updateIncreaseOrder\";\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\n\n  return callContract(chainId, contract, method, params, opts);\n}\n\nexport async function updateSwapOrder(chainId, library, index, minOut, triggerRatio, triggerAboveThreshold, opts) {\n  const params = [index, minOut, triggerRatio, triggerAboveThreshold];\n  const method = \"updateSwapOrder\";\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\n\n  return callContract(chainId, contract, method, params, opts);\n}\n\nexport async function _executeOrder(chainId, library, method, account, index, feeReceiver, opts) {\n  const params = [account, index, feeReceiver];\n  const positionManagerAddress = getContract(chainId, \"PositionManager\");\n  const contract = new ethers.Contract(positionManagerAddress, PositionManager.abi, library.getSigner());\n  return callContract(chainId, contract, method, params, opts);\n}\n\nexport function executeSwapOrder(chainId, library, account, index, feeReceiver, opts) {\n  return _executeOrder(chainId, library, \"executeSwapOrder\", account, index, feeReceiver, opts);\n}\n\nexport function executeIncreaseOrder(chainId, library, account, index, feeReceiver, opts) {\n  return _executeOrder(chainId, library, \"executeIncreaseOrder\", account, index, feeReceiver, opts);\n}\n\nexport function executeDecreaseOrder(chainId, library, account, index, feeReceiver, opts) {\n  return _executeOrder(chainId, library, \"executeDecreaseOrder\", account, index, feeReceiver, opts);\n}\n\nconst NOT_ENOUGH_FUNDS = \"NOT_ENOUGH_FUNDS\";\nconst USER_DENIED = \"USER_DENIED\";\nconst SLIPPAGE = \"SLIPPAGE\";\nconst RPC_ERROR = \"RPC_ERROR\";\n\nconst TX_ERROR_PATTERNS = {\n  [NOT_ENOUGH_FUNDS]: [\n    { msg: \"not enough funds for gas\" },\n    { msg: \"failed to execute call with revert code InsufficientGasFunds\" },\n  ],\n  [USER_DENIED]: [{ msg: \"User denied transaction signature\" }],\n  [SLIPPAGE]: [{ msg: \"Router: mark price lower than limit\" }, { msg: \"Router: mark price higher than limit\" }],\n  [RPC_ERROR]: [\n    // @see https://eips.ethereum.org/EIPS/eip-1474#error-codes\n    { code: -32005 },\n    { msg: \"Non-200 status code\" },\n    { msg: \"Request limit exceeded\" },\n    { msg: \"Internal JSON-RPC error\" },\n    { msg: \"Response has no error or result\" },\n    { msg: \"couldn't connect to the network\" },\n  ],\n};\n\nexport function extractError(ex) {\n  if (!ex) {\n    return [];\n  }\n\n  const message = ex.data?.message || ex.message;\n  const code = ex.code;\n\n  if (!message && !code) {\n    return [];\n  }\n\n  for (const [type, patterns] of Object.entries(TX_ERROR_PATTERNS)) {\n    for (const pattern of patterns) {\n      const matchCode = pattern.code && code === pattern.code;\n      const matchMessage = pattern.msg && message && message.includes(pattern.msg);\n\n      if (matchCode || matchMessage) {\n        return [message, type, ex.data];\n      }\n    }\n  }\n\n  return [message, null, ex.data];\n}\n\nfunction ToastifyDebug(props) {\n  const [open, setOpen] = useState(false);\n  return (\n    <div className=\"Toastify-debug\">\n      <span className=\"Toastify-debug-button\" onClick={() => setOpen((old) => !old)}>\n        {open ? \"Hide error\" : \"Show error\"}\n      </span>\n      {open && <div className=\"Toastify-debug-content\">{props.children}</div>}\n    </div>\n  );\n}\n\nexport async function callContract(chainId, contract, method, params, opts) {\n  try {\n    if (!Array.isArray(params) && typeof params === \"object\" && opts === undefined) {\n      opts = params;\n      params = [];\n    }\n    if (!opts) {\n      opts = {};\n    }\n\n    const txnOpts = {};\n\n    if (opts.value) {\n      txnOpts.value = opts.value;\n    }\n\n    txnOpts.gasLimit = opts.gasLimit ? opts.gasLimit : await getGasLimit(contract, method, params, opts.value);\n\n    await setGasPrice(txnOpts, contract.provider, chainId);\n\n    const res = await contract[method](...params, txnOpts);\n    const txUrl = getExplorerUrl(chainId) + \"tx/\" + res.hash;\n    const sentMsg = opts.sentMsg || \"Transaction sent.\";\n    helperToast.success(\n      <div>\n        {sentMsg}{\" \"}\n        <a href={txUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n          View status.\n        </a>\n        <br />\n      </div>\n    );\n    if (opts.setPendingTxns) {\n      const message = opts.hideSuccessMsg ? undefined : opts.successMsg || \"Transaction completed!\";\n      const pendingTxn = {\n        hash: res.hash,\n        message,\n      };\n      opts.setPendingTxns((pendingTxns) => [...pendingTxns, pendingTxn]);\n    }\n    return res;\n  } catch (e) {\n    let failMsg;\n    let autoCloseToast = 5000;\n\n    const [message, type, errorData] = extractError(e);\n    switch (type) {\n      case NOT_ENOUGH_FUNDS:\n        failMsg = (\n          <div>\n            There is not enough BNB in your account on Binance to send this transaction.\n            <br />\n            <br />\n            <a href={\"https://bscscan.com/bridge-tutorial/\"} target=\"_blank\" rel=\"noopener noreferrer\">\n              Bridge BNB to Binance\n            </a>\n          </div>\n        );\n        break;\n      case USER_DENIED:\n        failMsg = \"Transaction was cancelled.\";\n        break;\n      case SLIPPAGE:\n        failMsg =\n          'The mark price has changed, consider increasing your Allowed Slippage by clicking on the \"...\" icon next to your address.';\n        break;\n      case RPC_ERROR:\n        autoCloseToast = false;\n\n        const originalError = errorData?.error?.message || errorData?.message || message;\n\n        failMsg = (\n          <div>\n            Transaction failed due to RPC error.\n            <br />\n            <br />\n            Please try changing the RPC url in your wallet settings.{\" \"}\n            <a href=\"https://gmxio.gitbook.io/gmx/trading#backup-rpc-urls\" target=\"_blank\" rel=\"noopener noreferrer\">\n              More info\n            </a>\n            <br />\n            {originalError && <ToastifyDebug>{originalError}</ToastifyDebug>}\n          </div>\n        );\n        break;\n      default:\n        autoCloseToast = false;\n\n        failMsg = (\n          <div>\n            {opts.failMsg || \"Transaction failed\"}\n            <br />\n            {message && <ToastifyDebug>{message}</ToastifyDebug>}\n          </div>\n        );\n    }\n    helperToast.error(failMsg, { autoClose: autoCloseToast });\n    throw e;\n  }\n}\n","import React, { useCallback } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Trans } from \"@lingui/macro\";\n\nimport cx from \"classnames\";\n\nimport gmxBigIcon from \"../../img/ic_gmx_custom.svg\";\nimport glpBigIcon from \"../../img/ic_glp_custom.svg\";\n\nimport {switchNetwork, useChainId, isHomeSite, BSC_TESTNET} from \"../../lib/legacy\";\n\nimport { useWeb3React } from \"@web3-react/core\";\n\nimport APRLabel from \"../APRLabel/APRLabel\";\n\nexport default function TokenCard({ showRedirectModal }) {\n  const isHome = isHomeSite();\n  const { chainId } = useChainId();\n  const { active } = useWeb3React();\n\n  const changeNetwork = useCallback(\n    (network) => {\n      if (network === chainId) {\n        return;\n      }\n      if (!active) {\n        setTimeout(() => {\n          return switchNetwork(network, active);\n        }, 500);\n      } else {\n        return switchNetwork(network, active);\n      }\n    },\n    [chainId, active]\n  );\n\n  const BuyLink = ({ className, to, children, network }) => {\n    if (isHome && showRedirectModal) {\n      return (\n        <div className={cx(\"a\", className)} onClick={() => showRedirectModal(to)}>\n          {children}\n        </div>\n      );\n    }\n\n    return (\n      <Link to={to} className={cx(className)} onClick={() => changeNetwork(network)}>\n        {children}\n      </Link>\n    );\n  };\n\n  return (\n    <div className=\"Home-token-card-options\">\n      <div className=\"Home-token-card-option\">\n        <div className=\"Home-token-card-option-icon\">\n          <img src={gmxBigIcon} alt=\"gmxBigIcon\" /> LeveragePro\n        </div>\n        <div className=\"Home-token-card-option-info\">\n          <div className=\"Home-token-card-option-title\">\n            <Trans>\n              LeveragePro is the utility and governance token. Accrues 30% of the platform's generated fees.\n            </Trans>\n          </div>\n          <div className=\"Home-token-card-option-apr\">\n            <Trans>BSC APR:</Trans>\n            {/*<APRLabel chainId={BSC_TESTNET} label=\"gmxAprTotal\" />,{\" \"}*/}\n            {/*<Trans>Avalanche APR:</Trans> <APRLabel chainId={AVALANCHE} label=\"gmxAprTotal\" key=\"AVALANCHE\" />*/}\n          </div>\n          <div className=\"Home-token-card-option-action\">\n            <div className=\"buy\">\n              <BuyLink to=\"/buy_leveragepro\" className=\"default-btn\" network={BSC_TESTNET}>\n                <Trans>Buy on Binance</Trans>\n              </BuyLink>\n            </div>\n            <a\n              href=\"about:blank\"\n              target=\"_blank\"\n              rel=\"noreferrer\"\n              className=\"default-btn read-more\"\n            >\n              <Trans>Read more</Trans>\n            </a>\n          </div>\n        </div>\n      </div>\n      <div className=\"Home-token-card-option\">\n        <div className=\"Home-token-card-option-icon\">\n          <img src={glpBigIcon} alt=\"glpBigIcon\" /> GLP\n        </div>\n        <div className=\"Home-token-card-option-info\">\n          <div className=\"Home-token-card-option-title\">\n            <Trans>GLP is the liquidity provider token. Accrues 70% of the platform's generated fees.</Trans>\n          </div>\n          <div className=\"Home-token-card-option-apr\">\n            <Trans>BSC APR:</Trans>\n            {/*<APRLabel chainId={BSC_TESTNET} label=\"glpAprTotal\" key=\"BSC_TESTNET\" />,{\" \"}*/}\n            {/*<Trans>Avalanche APR:</Trans> <APRLabel chainId={AVALANCHE} label=\"glpAprTotal\" key=\"AVALANCHE\" />*/}\n          </div>\n          <div className=\"Home-token-card-option-action\">\n            <div className=\"buy\">\n              <BuyLink to=\"/buy_glp\" className=\"default-btn\" network={BSC_TESTNET}>\n                <Trans>Buy on Binance</Trans>\n              </BuyLink>\n              {/*<BuyLink to=\"/buy_glp\" className=\"default-btn\" network={AVALANCHE}>*/}\n              {/*  <Trans>Buy on Avalanche</Trans>*/}\n              {/*</BuyLink>*/}\n            </div>\n            <a\n              href=\"about:blank\"\n              target=\"_blank\"\n              rel=\"noreferrer\"\n              className=\"default-btn read-more\"\n            >\n              <Trans>Read more</Trans>\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { ReactNode } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport cx from \"classnames\";\nimport { getAppBaseUrl, getHomeUrl } from \"../../lib/legacy\";\n\nimport \"./Header.css\";\nimport {isHomeSite, shouldShowRedirectModal} from \"../../lib/legacy\";\n\ntype Props = {\n  isHome?: boolean;\n  isHomeLink?: boolean;\n  className?: string;\n  exact?: boolean;\n  to: string;\n  shouldShowRedirectModal?: boolean;\n  showRedirectModal: (to: string) => void;\n  redirectPopupTimestamp: number;\n  children?: ReactNode;\n};\n\nexport function HeaderLink({\n   isHomeLink,\n   className,\n   exact,\n   to,\n   children,\n   redirectPopupTimestamp,\n   showRedirectModal\n}: Props) {\n  const isOnHomePage = window.location.hash === \"#/\";\n  const isHome = isHomeSite();\n\n  if (isHome && !(isHomeLink && !isOnHomePage)) {\n    if (shouldShowRedirectModal(redirectPopupTimestamp)) {\n      return (\n        <div className={cx(\"a\", className, { active: isHomeLink })} onClick={() => showRedirectModal(to)}>\n          {children}\n        </div>\n      );\n    } else {\n      const baseUrl = getAppBaseUrl();\n      return (\n        <a className={cx(\"a\", className, { active: isHomeLink })} href={baseUrl + to}>\n          {children}\n        </a>\n      );\n    }\n  }\n\n  if (isHomeLink) {\n    return (\n      <a href={getHomeUrl()} className={cx(className)}>\n        {children}\n      </a>\n    );\n  }\n\n  return (\n    <NavLink activeClassName=\"active\" className={cx(className)} exact={exact} to={to}>\n      {children}\n    </NavLink>\n  );\n};\n","import React, {useState} from \"react\";\nimport Footer from \"../../components/Footer/Footer\";\n\nimport cx from \"classnames\";\n\nimport \"./Home.css\";\n\nimport simpleSwapIcon from \"../../img/ic_simpleswaps.svg\";\nimport costIcon from \"../../img/ic_cost.svg\";\nimport liquidityIcon from \"../../img/ic_liquidity.svg\";\nimport totaluserIcon from \"../../img/ic_totaluser.svg\";\n\n\nimport bscIcon from \"../../img/ic_bsc_96.svg\";\n// import velasIcon from \"../../img/ic_avalanche_96.svg\";\n\nimport statsIcon from \"../../img/ic_stats.svg\";\nimport tradingIcon from \"../../img/ic_trading.svg\";\n\nimport useSWR from \"swr\";\n\nimport {\n  formatAmount,\n  bigNumberify,\n  numberWithCommas,\n  getServerUrl,\n  USD_DECIMALS,\n  getTotalVolumeSum, BSC_TESTNET,\n} from \"../../lib/legacy\";\n\nimport { useUserStat } from \"../../domain/legacy\";\n\nimport TokenCard from \"../../components/TokenCard/TokenCard\";\n\nimport { Trans } from \"@lingui/macro\";\nimport { HeaderLink } from \"../../components/Header/HeaderLink\";\n\nexport default function Home({ showRedirectModal, redirectPopupTimestamp }) {\n  const [openedFAQIndex, setOpenedFAQIndex] = useState(null)\n  const faqContent = [{\n    id: 1,\n    question: \"What is GMX?\",\n    answer: \"GMX is a decentralized spot and perpetual exchange that supports low swap fees and zero price impact trades.<br><br>Trading is supported by a unique multi-asset pool that earns liquidity providers fees from market making, swap fees, leverage trading (spreads, funding fees & liquidations), and asset rebalancing.<br><br>Dynamic pricing is supported by Chainlink Oracles along with TWAP pricing from leading volume DEXs.\"\n  }, {\n    id: 2,\n    question: \"What is the GMX Governance Token?\",\n    answer: \"The GMX token is the governance token of the GMX ecosystem, it provides the token owner voting rights on the direction of the GMX platform.<br><br>Additionally, when GMX is staked you will earn 30% of the platform-generated fees, you will also earn Escrowed GMX tokens and Multiplier Points.\"\n  }, {\n    id: 3,\n    question: \"What is the GLP Token?\",\n    answer: \"The GLP token represents the liquidity users provide to the GMX platform for Swaps and Margin Trading.<br><br>To provide liquidity to GLP you <a href='https://gmx.io/buy_glp' target='_blank'>trade</a> your crypto asset BTC, ETH, LINK, UNI, USDC, USDT, MIM, or FRAX to the liquidity pool, in exchange, you gain exposure to a diversified index of tokens while earning 50% of the platform trading fees and esGMX.\"\n  }, {\n    id: 4,\n    question: \"What can I trade on GMX? \",\n    answer: \"On GMX you can swap or margin trade any of the following assets: ETH, BTC, LINK, UNI, USDC, USDT, MIM, FRAX, with others to be added.\"\n  }]\n\n  const toggleFAQContent = function(index) {\n    if (openedFAQIndex === index) {\n      setOpenedFAQIndex(null)\n    } else {\n      setOpenedFAQIndex(index)\n    }\n  }\n\n  // BINANCE\n\n  const bscPositionStatsUrl = getServerUrl(BSC_TESTNET, \"/position_stats\");\n  const { data: bscPositionStats } = useSWR([bscPositionStatsUrl], {\n    fetcher: (...args) => fetch(...args).then((res) => res.json()),\n  });\n\n  const bscTotalVolumeUrl = getServerUrl(BSC_TESTNET, \"/total_volume\");\n  const { data: bscTotalVolume } = useSWR([bscTotalVolumeUrl], {\n    fetcher: (...args) => fetch(...args).then((res) => res.json()),\n  });\n\n\n  // Total Volume\n  const bscTotalVolumeSum = getTotalVolumeSum(bscTotalVolume);\n\n  let totalVolumeSum = bigNumberify(0);\n  if (bscTotalVolumeSum) {\n    totalVolumeSum = totalVolumeSum.add(bscTotalVolumeSum);\n  }\n\n  // Open Interest\n\n  let openInterest = bigNumberify(0);\n  if (\n    bscPositionStats &&\n    bscPositionStats.totalLongPositionSizes &&\n    bscPositionStats.totalShortPositionSizes\n  ) {\n    openInterest = openInterest.add(bscPositionStats.totalLongPositionSizes);\n    openInterest = openInterest.add(bscPositionStats.totalShortPositionSizes);\n  }\n\n  // user stat\n  const bscUserStats = useUserStat(BSC_TESTNET);\n  let totalUsers = 0;\n\n  if (bscUserStats && bscUserStats.uniqueCount) {\n    totalUsers += bscUserStats.uniqueCount;\n  }\n\n  const LaunchExchangeButton = () => {\n    return (\n      <HeaderLink\n        className={cx(\"default-btn\")}\n        to=\"/trade\"\n        redirectPopupTimestamp={redirectPopupTimestamp}\n        showRedirectModal={showRedirectModal}\n      >\n        <Trans>Launch Exchange</Trans>\n      </HeaderLink>\n    );\n  };\n\n  return (\n    <div className=\"Home\">\n      <div className=\"Home-top\">\n        {/* <div className=\"Home-top-image\"></div> */}\n        <div className=\"Home-title-section-container default-container\">\n          <div className=\"Home-title-section\">\n            <div className=\"Home-title\">\n              <Trans>\n                Decentralized\n                <br />\n                Perpetual Exchange\n              </Trans>\n            </div>\n            <div className=\"Home-description\">\n              <Trans>\n                Trade BTC, ETH, BNB, BUSD and other top cryptocurrencies with up to 30x leverage directly from your wallet\n              </Trans>\n            </div>\n            <LaunchExchangeButton />\n          </div>\n        </div>\n        <div className=\"Home-latest-info-container default-container\">\n          <div className=\"Home-latest-info-block\">\n            <img src={tradingIcon} alt=\"trading\" className=\"Home-latest-info__icon\" />\n            <div className=\"Home-latest-info-content\">\n              <div className=\"Home-latest-info__title\">\n                <Trans>Total Trading Volume</Trans>\n              </div>\n              <div className=\"Home-latest-info__value\">${formatAmount(totalVolumeSum, USD_DECIMALS, 0, true)}</div>\n            </div>\n          </div>\n          <div className=\"Home-latest-info-block\">\n            <img src={statsIcon} alt=\"trading\" className=\"Home-latest-info__icon\" />\n            <div className=\"Home-latest-info-content\">\n              <div className=\"Home-latest-info__title\">\n                <Trans>Open Interest</Trans>\n              </div>\n              <div className=\"Home-latest-info__value\">${formatAmount(openInterest, USD_DECIMALS, 0, true)}</div>\n            </div>\n          </div>\n          <div className=\"Home-latest-info-block\">\n            <img src={totaluserIcon} alt=\"trading\" className=\"Home-latest-info__icon\" />\n            <div className=\"Home-latest-info-content\">\n              <div className=\"Home-latest-info__title\">\n                <Trans>Total Users</Trans>\n              </div>\n              <div className=\"Home-latest-info__value\">{numberWithCommas(totalUsers.toFixed(0))}</div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className=\"Home-benefits-section\">\n        <div className=\"Home-benefits default-container\">\n          <div className=\"Home-benefit\">\n            <div className=\"Home-benefit-icon\">\n              <img src={liquidityIcon} alt=\"liquidity\" className=\"Home-benefit-icon-symbol\" />\n              <div className=\"Home-benefit-title\">\n                <Trans>Reduce Liquidation Risks</Trans>\n              </div>\n            </div>\n            <div className=\"Home-benefit-description\">\n              <Trans>\n                An aggregate of high-quality price feeds determine when liquidations occur. This keeps positions safe\n                from temporary wicks.\n              </Trans>\n            </div>\n          </div>\n          <div className=\"Home-benefit\">\n            <div className=\"Home-benefit-icon\">\n              <img src={costIcon} alt=\"cost\" className=\"Home-benefit-icon-symbol\" />\n              <div className=\"Home-benefit-title\">\n                <Trans>Save on Costs</Trans>\n              </div>\n            </div>\n            <div className=\"Home-benefit-description\">\n              <Trans>\n                Enter and exit positions with minimal spread and zero price impact. Get the optimal price without\n                incurring additional costs.\n              </Trans>\n            </div>\n          </div>\n          <div className=\"Home-benefit\">\n            <div className=\"Home-benefit-icon\">\n              <img src={simpleSwapIcon} alt=\"simpleswap\" className=\"Home-benefit-icon-symbol\" />\n              <div className=\"Home-benefit-title\">\n                <Trans>Simple Swaps</Trans>\n              </div>\n            </div>\n            <div className=\"Home-benefit-description\">\n              <Trans>\n                Open positions through a simple swap interface. Conveniently swap from any supported asset into the\n                position of your choice.\n              </Trans>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className=\"Home-cta-section\">\n        <div className=\"Home-cta-container default-container\">\n          <div className=\"Home-cta-info\">\n            <div className=\"Home-cta-info__title\">\n              <Trans>Available on your preferred network</Trans>\n            </div>\n            <div className=\"Home-cta-info__description\">\n              <Trans>LeveragePro is currently live on Velas and BSC.</Trans>\n            </div>\n          </div>\n          <div className=\"Home-cta-options\">\n            <div className=\"Home-cta-option Home-cta-option-bsc\">\n              <div className=\"Home-cta-option-icon\">\n                <img src={bscIcon} alt=\"bsc\" />\n              </div>\n              <div className=\"Home-cta-option-info\">\n                <div className=\"Home-cta-option-title\">BSC</div>\n                <div className=\"Home-cta-option-action\">\n                  <LaunchExchangeButton />\n                </div>\n              </div>\n            </div>\n            {/*<div className=\"Home-cta-option Home-cta-option-ava\">*/}\n            {/*  <div className=\"Home-cta-option-icon\">*/}\n            {/*    <img src={avaIcon} alt=\"ava\" />*/}\n            {/*  </div>*/}\n            {/*  <div className=\"Home-cta-option-info\">*/}\n            {/*    <div className=\"Home-cta-option-title\">Avalanche</div>*/}\n            {/*    <div className=\"Home-cta-option-action\">*/}\n            {/*      <LaunchExchangeButton />*/}\n            {/*    </div>*/}\n            {/*  </div>*/}\n            {/*</div>*/}\n          </div>\n        </div>\n      </div>\n      <div className=\"Home-token-card-section\">\n        <div className=\"Home-token-card-container default-container\">\n          <div className=\"Home-token-card-info\">\n            <div className=\"Home-token-card-info__title\">\n              <Trans>Two tokens create our ecosystem</Trans>\n            </div>\n          </div>\n          <TokenCard showRedirectModal={showRedirectModal} />\n        </div>\n      </div>\n\n      {/* <div className=\"Home-video-section\">\n        <div className=\"Home-video-container default-container\">\n          <div className=\"Home-video-block\">\n            <img src={gmxBigIcon} alt=\"gmxbig\" />\n          </div>\n        </div>\n      </div> */}\n      <div className=\"Home-faqs-section\">\n        <div className=\"Home-faqs-container default-container\">\n          <div className=\"Home-faqs-introduction\">\n            <div className=\"Home-faqs-introduction__title\">FAQs</div>\n            <div className=\"Home-faqs-introduction__description\">Most asked questions. If you wish to learn more, please head to our Documentation page.</div>\n            <a href=\"about:blank\" target=\"_blank\" className=\"default-btn Home-faqs-documentation\">Documentation</a>\n          </div>\n          {/*<div className=\"Home-faqs-content-block\">*/}\n          {/*  {*/}\n          {/*    faqContent.map((content, index) => (*/}\n          {/*      <div className=\"Home-faqs-content\" key={index} onClick={() => toggleFAQContent(index)}>*/}\n          {/*        <div className=\"Home-faqs-content-header\">*/}\n          {/*          <div className=\"Home-faqs-content-header__icon\">*/}\n          {/*            {*/}\n          {/*              openedFAQIndex === index ? <FiMinus className=\"opened\" /> : <FiPlus className=\"closed\" />*/}\n          {/*            }*/}\n          {/*          </div>*/}\n          {/*          <div className=\"Home-faqs-content-header__text\">*/}\n          {/*            { content.question }*/}\n          {/*          </div>*/}\n          {/*        </div>*/}\n          {/*        <div className={ openedFAQIndex === index ? \"Home-faqs-content-main opened\" : \"Home-faqs-content-main\" }>*/}\n          {/*          <div className=\"Home-faqs-content-main__text\">*/}\n          {/*            <div dangerouslySetInnerHTML={{__html: content.answer}} >*/}\n          {/*            </div>*/}\n          {/*          </div>*/}\n          {/*        </div>*/}\n          {/*      </div>*/}\n          {/*    ))*/}\n          {/*  }*/}\n          {/*</div>*/}\n        </div>\n      </div>\n      <Footer showRedirectModal={showRedirectModal} redirectPopupTimestamp={redirectPopupTimestamp} />\n    </div>\n  );\n}\n","export const REDIRECT_POPUP_TIMESTAMP_KEY = \"redirect-popup-timestamp\";\r\n\r\nexport const IS_TOUCH = \"ontouchstart\" in window;\r\n","import cx from \"classnames\";\r\nimport { useCallback, useState, useRef } from \"react\";\r\nimport { IS_TOUCH } from \"../../config/ui\";\r\n\r\nconst OPEN_DELAY = 0;\r\nconst CLOSE_DELAY = 100;\r\n\r\nexport default function Tooltip(props) {\r\n  const [visible, setVisible] = useState(false);\r\n  const intervalCloseRef = useRef(null);\r\n  const intervalOpenRef = useRef(null);\r\n\r\n  const position = props.position ?? \"left-bottom\";\r\n  const trigger = props.trigger ?? \"hover\";\r\n\r\n  const onMouseEnter = useCallback(() => {\r\n    if (trigger !== \"hover\" || IS_TOUCH) return;\r\n\r\n    if (intervalCloseRef.current) {\r\n      clearInterval(intervalCloseRef.current);\r\n      intervalCloseRef.current = null;\r\n    }\r\n    if (!intervalOpenRef.current) {\r\n      intervalOpenRef.current = setTimeout(() => {\r\n        setVisible(true);\r\n        intervalOpenRef.current = null;\r\n      }, OPEN_DELAY);\r\n    }\r\n  }, [setVisible, intervalCloseRef, intervalOpenRef, trigger]);\r\n\r\n  const onMouseClick = useCallback(() => {\r\n    if (trigger !== \"click\" && !IS_TOUCH) return;\r\n    if (intervalCloseRef.current) {\r\n      clearInterval(intervalCloseRef.current);\r\n      intervalCloseRef.current = null;\r\n    }\r\n    if (intervalOpenRef.current) {\r\n      clearInterval(intervalOpenRef.current);\r\n      intervalOpenRef.current = null;\r\n    }\r\n\r\n    setVisible(true);\r\n  }, [setVisible, intervalCloseRef, trigger]);\r\n\r\n  const onMouseLeave = useCallback(() => {\r\n    intervalCloseRef.current = setTimeout(() => {\r\n      setVisible(false);\r\n      intervalCloseRef.current = null;\r\n    }, CLOSE_DELAY);\r\n    if (intervalOpenRef.current) {\r\n      clearInterval(intervalOpenRef.current);\r\n      intervalOpenRef.current = null;\r\n    }\r\n  }, [setVisible, intervalCloseRef]);\r\n\r\n  const className = cx(\"Tooltip\", props.className);\r\n\r\n  return (\r\n    <span className={className} onMouseEnter={onMouseEnter} onMouseLeave={onMouseLeave} onClick={onMouseClick}>\r\n      <span\r\n        className={cx({ \"Tooltip-handle\": !props.disableHandleStyle }, [props.handleClassName], { active: visible })}\r\n      >\r\n        {props.handle}\r\n      </span>\r\n      {visible && <div className={cx([\"Tooltip-popup\", position])}>{props.renderContent()}</div>}\r\n    </span>\r\n  );\r\n}\r\n","export const FEES_42161 = [\r\n  { to: 1630514845, feeUsd: \"32.47\" },\r\n  { to: 1631074048, feeUsd: \"50681\" },\r\n  { to: 1631677736, feeUsd: \"124400.69\" },\r\n  { to: 1632278435, feeUsd: \"395299.56\" },\r\n  { to: 1632885416, feeUsd: \"348555.88\" },\r\n  { to: 1633507067, feeUsd: \"302888.51\" },\r\n  { to: 1634095073, feeUsd: \"325532.14\" },\r\n  { to: 1634701754, feeUsd: \"524688.53\" },\r\n  { to: 1635301669, feeUsd: \"727989.27\" },\r\n  { to: 1635914306, feeUsd: \"815838.37\" },\r\n  { to: 1636517248, feeUsd: \"1017108.52\" },\r\n  { to: 1637118096, feeUsd: \"1195695.02\" },\r\n  { to: 1637728323, feeUsd: \"611495.04\" },\r\n  { to: 1638330376, feeUsd: \"1002226.96\" },\r\n  { to: 1638931348, feeUsd: \"1225801.74\" },\r\n  { to: 1639538283, feeUsd: \"638755.06\" },\r\n  { to: 1640135388, feeUsd: \"692132.12\" },\r\n  { to: 1640740756, feeUsd: \"653857.89\" },\r\n  { to: 1641353998, feeUsd: \"932273.45\" },\r\n  { to: 1641954606, feeUsd: \"2010194.53\" },\r\n  { to: 1642557002, feeUsd: \"1424176.23\" },\r\n  { to: 1643166233, feeUsd: \"2131480.58\" },\r\n  { to: 1643765386, feeUsd: \"1184435.13\" },\r\n  { to: 1644371345, feeUsd: \"1205134.15\" },\r\n  { to: 1644979161, feeUsd: \"1206960.25\" },\r\n  { to: 1645579656, feeUsd: \"527326.47\" },\r\n  { to: 1646182611, feeUsd: \"2007742.56\" },\r\n  { to: 1646788756, feeUsd: \"2181383.87\" },\r\n  { to: 1647402638, feeUsd: \"1060151.47\" },\r\n  { to: 1648000826, feeUsd: \"1386779.30\" },\r\n  { to: 1648611300, feeUsd: \"1474852.84\" },\r\n  { to: 1649207110, feeUsd: \"1882364.25\" },\r\n  { to: 1649814371, feeUsd: \"2225265.28\" },\r\n  { to: 1650420021, feeUsd: \"1135279.21\" },\r\n  { to: 1651028602, feeUsd: \"716772.48\" },\r\n  { to: 1651635145, feeUsd: \"820730.6\" },\r\n  { to: 1652236772, feeUsd: \"1833127.03\" },\r\n  { to: 1652840724, feeUsd: \"1931425.93\" },\r\n  { to: 1653430967, feeUsd: \"877425.89\" },\r\n  { to: 1654053714, feeUsd: \"1413630.45\" },\r\n  { to: 1654653280, feeUsd: \"461654.58\" },\r\n  { to: 1655259566, feeUsd: \"1517706.31\" },\r\n  { to: 1655866071, feeUsd: \"1039442.84\" },\r\n  { to: 1656472723, feeUsd: \"493000.42\" },\r\n  { to: 1657074613, feeUsd: \"721743.61\" },\r\n  { to: 1657678876, feeUsd: \"695772.71\" },\r\n  { to: 1658283954, feeUsd: \"1252312.35\" },\r\n  { to: 1658886078, feeUsd: \"1058461.3\" },\r\n  { to: 1659494426, feeUsd: \"1772773.67\" },\r\n  { to: 1660095134, feeUsd: \"877279.21\" },\r\n  { to: 1660698120, feeUsd: \"1729561.45\" },\r\n  { to: 1661309954, feeUsd: \"2163583.24\" },\r\n  { to: 1661907895, feeUsd: \"2245327.53\" },\r\n  { to: 1662518119, feeUsd: \"2097773.87\" },\r\n  { to: 1663124371, feeUsd: \"3151643.25\" },\r\n];\r\n","import { FEES_42161 } from \"./FEES_42161\";\nimport { FEES_43113 } from \"./FEES_43113\";\n\nconst SECONDS_PER_WEEK = 604800;\n\nfunction createFeeList(data) {\n  const list = [];\n  for (let i = 0; i < data.length; i++) {\n    const item = data[i];\n    list.push({\n      from: item.to - SECONDS_PER_WEEK,\n      to: item.to,\n      feeUsd: item.feeUsd,\n    });\n  }\n  return list;\n}\n\nconst FEES = {\n  56: [],\n  42161: createFeeList(FEES_42161),\n  421611: createFeeList(FEES_42161),\n  43114: createFeeList(FEES_43113),\n  97: [],\n  111: [],\n};\n\nexport function getFeeHistory(chainId) {\n  return FEES[chainId].concat([]).reverse();\n}\n","export const FEES_43113 = [\r\n  { to: 1641430800, feeUsd: \"10\" },\r\n  { to: 1641954606, feeUsd: \"506934.29\" },\r\n  { to: 1642557082, feeUsd: \"871367.91\" },\r\n  { to: 1643166266, feeUsd: \"1416130.81\" },\r\n  { to: 1643765429, feeUsd: \"996296.58\" },\r\n  { to: 1644371345, feeUsd: \"869493.46\" },\r\n  { to: 1644979198, feeUsd: \"644299.54\" },\r\n  { to: 1645579694, feeUsd: \"559829.67\" },\r\n  { to: 1646182633, feeUsd: \"1041033.13\" },\r\n  { to: 1646788780, feeUsd: \"525648.29\" },\r\n  { to: 1647402672, feeUsd: \"491566.54\" },\r\n  { to: 1648000896, feeUsd: \"523412.47\" },\r\n  { to: 1648611331, feeUsd: \"482364.71\" },\r\n  { to: 1649207157, feeUsd: \"819772.21\" },\r\n  { to: 1649814371, feeUsd: \"536680.30\" },\r\n  { to: 1650420021, feeUsd: \"297644.50\" },\r\n  { to: 1651028602, feeUsd: \"329239.03\" },\r\n  { to: 1651635172, feeUsd: \"344748.08\" },\r\n  { to: 1652236772, feeUsd: \"809852.39\" },\r\n  { to: 1652840724, feeUsd: \"850963.06\" },\r\n  { to: 1653430967, feeUsd: \"306245.8\" },\r\n  { to: 1654053714, feeUsd: \"539435.12\" },\r\n  { to: 1654653280, feeUsd: \"840894.12\" },\r\n  { to: 1655259566, feeUsd: \"506009.43\" },\r\n  { to: 1655866071, feeUsd: \"526660.33\" },\r\n  { to: 1656472723, feeUsd: \"448733.62\" },\r\n  { to: 1657074613, feeUsd: \"392029.38\" },\r\n  { to: 1657678876, feeUsd: \"348157.7\" },\r\n  { to: 1658283954, feeUsd: \"475489.0\" },\r\n  { to: 1658886078, feeUsd: \"528324.14\" },\r\n  { to: 1659494426, feeUsd: \"411807.72\" },\r\n  { to: 1660095134, feeUsd: \"373497.82\" },\r\n  { to: 1660698120, feeUsd: \"484879.32\" },\r\n  { to: 1661309954, feeUsd: \"426656.64\" },\r\n  { to: 1661907895, feeUsd: \"494117.94\" },\r\n  { to: 1662518119, feeUsd: \"310085.65\" },\r\n  { to: 1663124371, feeUsd: \"435866.01\" },\r\n];\r\n","import { Helmet } from \"react-helmet\";\n\nimport { t } from \"@lingui/macro\";\n\nfunction SEO(props) {\n  const { children, ...customMeta } = props;\n  const meta = {\n    title: t`LeveragePro | Decentralized Perpetual Exchange`,\n    description: t`Trade spot or perpetual BTC, ETH, AVAX and other top cryptocurrencies with up to 30x leverage directly from your wallet on Arbitrum and Avalanche.`,\n    image: \"https://gmx.io/og.png\",\n    type: \"exchange\",\n    ...customMeta,\n  };\n  return (\n    <>\n      <Helmet>\n        <title>{meta.title}</title>\n        <meta name=\"robots\" content=\"follow, index\" />\n        <meta content={meta.description} name=\"description\" />\n        <meta property=\"og:type\" content={meta.type} />\n        <meta property=\"og:site_name\" content=\"GMX\" />\n        <meta property=\"og:description\" content={meta.description} />\n        <meta property=\"og:title\" content={meta.title} />\n        <meta property=\"og:image\" content={meta.image} />\n        <meta name=\"twitter:card\" content=\"summary_large_image\" />\n        <meta name=\"twitter:site\" content=\"@gmx_io\" />\n        <meta name=\"twitter:title\" content={meta.title} />\n        <meta name=\"twitter:description\" content={meta.description} />\n        <meta name=\"twitter:image\" content={meta.image} />\n      </Helmet>\n      {children}\n    </>\n  );\n}\n\nexport default SEO;\n","import { formatAmount, USD_DECIMALS } from \"../../lib/legacy\";\n\nexport default function TooltipCard({\n  title,\n  total,\n  arbitrum,\n  showDollar = true,\n  decimalsForConversion = USD_DECIMALS,\n}) {\n  return (\n    <>\n      <p className=\"Tooltip-row\">\n        <span className=\"label\">{title} on Binance:</span>\n        <span className=\"amount\">\n          {showDollar && \"$\"}\n          {formatAmount(arbitrum, decimalsForConversion, 0, true)}\n        </span>\n      </p>\n      <div className=\"Tooltip-divider\" />\n      <p className=\"Tooltip-row\">\n        <span className=\"label\">Total:</span>\n        <span className=\"amount\">\n          {showDollar && \"$\"}\n          {formatAmount(total, decimalsForConversion, 0, true)}\n        </span>\n      </p>\n    </>\n  );\n}\n\nexport function TooltipCardRow({ label, amount, showDollar = true }) {\n  return (\n    <p className=\"Tooltip-row\">\n      <span className=\"label\">{label}:</span>\n      <span className=\"amount\">\n        {showDollar && \"$\"}\n        {amount}\n      </span>\n    </p>\n  );\n}\n","import useSWR from \"swr\";\nimport {arrayURLFetcher, bigNumberify, BSC_TESTNET, getServerUrl, getTotalVolumeSum} from \"../lib/legacy\";\n\nconst ACTIVE_CHAIN_IDS = [BSC_TESTNET];\n\nexport default function useTotalVolume() {\n  const {data: totalVolume} = useSWR(\n    ACTIVE_CHAIN_IDS.map((chain) => getServerUrl(chain, \"/total_volume\")),\n    {\n      fetcher: arrayURLFetcher,\n    }\n  );\n  if (totalVolume?.length > 0) {\n    return ACTIVE_CHAIN_IDS.reduce(\n      (acc, chainId, index) => {\n        const sum = getTotalVolumeSum(totalVolume[index]);\n        acc[chainId] = sum;\n        acc.total = acc.total.add(sum);\n        return acc;\n      },\n      {total: bigNumberify(0)}\n    );\n  }\n}\n","import { Menu } from \"@headlessui/react\";\nimport { FiChevronDown } from \"react-icons/fi\";\nimport \"./AssetDropdown.css\";\nimport coingeckoIcon from \"../../img/ic_coingecko_16.svg\";\nimport metamaskIcon from \"../../img/ic_metamask_16.svg\";\nimport { addTokenToMetamask, ICONLINKS, platformTokens, useChainId } from \"../../lib/legacy\";\nimport { useWeb3React } from \"@web3-react/core\";\n\nimport { Trans } from \"@lingui/macro\";\n\nfunction AssetDropdown({ assetSymbol, assetInfo }) {\n  const { active } = useWeb3React();\n  const { chainId } = useChainId();\n  let { coingecko } = ICONLINKS[chainId][assetSymbol] || {};\n  const unavailableTokenSymbols =\n    {\n      42161: [\"ETH\"],\n      43114: [\"AVAX\"],\n      97: [\"BNB\"],\n      56: [\"BNB\"]\n    }[chainId] || [];\n\n  return (\n    <Menu>\n      <Menu.Button as=\"div\" className=\"dropdown-arrow center-both\">\n        <FiChevronDown size={20} />\n      </Menu.Button>\n      <Menu.Items as=\"div\" className=\"asset-menu-items\">\n        <Menu.Item>\n          <>\n            {coingecko && (\n              <a href={coingecko} className=\"asset-item\" target=\"_blank\" rel=\"noopener noreferrer\">\n                <img src={coingeckoIcon} alt=\"Open in Coingecko\" />\n                <p>\n                  <Trans>Open in Coingecko</Trans>\n                </p>\n              </a>\n            )}\n          </>\n        </Menu.Item>\n        <Menu.Item>\n          <>\n            {active && unavailableTokenSymbols.indexOf(assetSymbol) < 0 && (\n              <div\n                onClick={() => {\n                  let token = assetInfo\n                    ? { ...assetInfo, image: assetInfo.imageUrl }\n                    : platformTokens[chainId][assetSymbol];\n                  addTokenToMetamask(token);\n                }}\n                className=\"asset-item\"\n              >\n                <img src={metamaskIcon} alt=\"Add to Metamask\" />\n                <p>\n                  <Trans>Add to Metamask</Trans>\n                </p>\n              </div>\n            )}\n          </>\n        </Menu.Item>\n      </Menu.Items>\n    </Menu>\n  );\n}\n\nexport default AssetDropdown;\n","import React, {useEffect, useState} from \"react\";\nimport {Link} from \"react-router-dom\";\nimport {useWeb3React} from \"@web3-react/core\";\nimport {t, Trans} from \"@lingui/macro\";\nimport useSWR from \"swr\";\nimport {Cell, Pie, PieChart, Tooltip} from \"recharts\";\nimport TooltipComponent from \"../../components/Tooltip/Tooltip\";\n\nimport hexToRgba from \"hex-to-rgba\";\nimport {ethers} from \"ethers\";\n\nimport {getWhitelistedTokens} from \"../../config/Tokens\";\nimport {getFeeHistory} from \"../../config/Fees\";\n\nimport {\n  arrayURLFetcher,\n  BASIS_POINTS_DIVISOR,\n  bigNumberify,\n  BSC_TESTNET,\n  DEFAULT_MAX_USDG_AMOUNT,\n  expandDecimals,\n  fetcher,\n  formatAmount, formatArrayAmount,\n  formatDate,\n  formatKeyAmount,\n  getChainName,\n  getPageTitle,\n  getServerUrl,\n  GLP_DECIMALS,\n  GLPPOOLCOLORS,\n  LEVERAGE_DECIMALS,\n  importImage,\n  numberWithCommas,\n  USD_DECIMALS,\n  useChainId,\n  VELAS_TESTNET,\n} from \"../../lib/legacy\";\nimport {useInfoTokens, useLeveragePrice} from \"../../domain/legacy\";\n\nimport {getContract} from \"../../config/Addresses\";\n\nimport VaultV2 from \"../../abis/Vault.json\";\nimport ReaderV2 from \"../../abis/Reader.json\";\nimport GlpManager from \"../../abis/GlpManager.json\";\nimport Token from '../../abis/Token.json'\nimport Footer from \"../../components/Footer/Footer\";\n\nimport \"./DashboardV2.css\";\n\nimport gmx40Icon from \"../../img/ic_gmx_40.svg\";\nimport glp40Icon from \"../../img/ic_glp_40.svg\";\nimport bsc16Icon from \"../../img/ic_bsc_16.svg\";\nimport bsc24Icon from \"../../img/ic_bsc_16.svg\";\nimport velas16Icon from \"../../img/ic_velas_16.svg\";\nimport velas24Icon from \"../../img/ic_velas_24.svg\";\n\nimport SEO from \"../../components/Common/SEO\";\nimport TooltipCard, {TooltipCardRow} from \"./TooltipCard\";\nimport useTotalVolume from \"../../domain/useTotalVolume\";\nimport AssetDropdown from \"./AssetDropdown\";\n\nconst ACTIVE_CHAIN_IDS = [BSC_TESTNET, VELAS_TESTNET];\n\nconst {AddressZero} = ethers.constants;\n\nfunction getVolumeInfo(hourlyVolumes) {\n  if (!hourlyVolumes || hourlyVolumes.length === 0) {\n    return {};\n  }\n  let dailyVolumes = hourlyVolumes.map((hourlyVolume) => {\n    const secondsPerHour = 60 * 60;\n    const minTime = parseInt(Date.now() / 1000 / secondsPerHour) * secondsPerHour - 24 * secondsPerHour;\n    const info = {};\n    let totalVolume = bigNumberify(0);\n    for (let i = 0; i < hourlyVolume.length; i++) {\n      const item = hourlyVolume[i].data;\n      if (parseInt(item.timestamp) < minTime) {\n        break;\n      }\n\n      if (!info[item.token]) {\n        info[item.token] = bigNumberify(0);\n      }\n\n      info[item.token] = info[item.token].add(item.volume);\n      totalVolume = totalVolume.add(item.volume);\n    }\n    info.totalVolume = totalVolume;\n    return info;\n  });\n  if (!dailyVolumes || dailyVolumes.length == 0) {\n    return {};\n  }\n  if (!dailyVolumes.length) {\n    dailyVolumes = [dailyVolumes];\n  }\n  return dailyVolumes.reduce(\n    (acc, cv, index) => {\n      acc.totalVolume = acc.totalVolume.add(cv.totalVolume);\n      acc[ACTIVE_CHAIN_IDS[index]] = cv;\n      return acc;\n    },\n    { totalVolume: bigNumberify(0) }\n  );\n}\n\nfunction getPositionStats(positionStats) {\n  if (!positionStats || positionStats.length === 0) {\n    return null;\n  }\n  if (!positionStats.length) {\n    positionStats = [positionStats];\n  }\n  return positionStats.reduce(\n    (acc, cv, i) => {\n      acc.totalLongPositionSizes = acc.totalLongPositionSizes.add(cv.totalLongPositionSizes);\n      acc.totalShortPositionSizes = acc.totalShortPositionSizes.add(cv.totalShortPositionSizes);\n      acc[ACTIVE_CHAIN_IDS[i]] = cv;\n      return acc;\n    },\n    {\n      totalLongPositionSizes: bigNumberify(0),\n      totalShortPositionSizes: bigNumberify(0),\n    }\n  );\n}\n\nfunction getCurrentFeesUsd(tokenAddresses, fees, infoTokens) {\n  if (!fees || !infoTokens) {\n    return bigNumberify(0);\n  }\n\n  let currentFeesUsd = bigNumberify(0);\n  for (let i = 0; i < tokenAddresses.length; i++) {\n    const tokenAddress = tokenAddresses[i];\n    const tokenInfo = infoTokens[tokenAddress];\n    if (!tokenInfo || !tokenInfo.contractMinPrice) {\n      continue;\n    }\n\n    const feeUsd = fees[i].mul(tokenInfo.contractMinPrice).div(expandDecimals(1, tokenInfo.decimals));\n    currentFeesUsd = currentFeesUsd.add(feeUsd);\n  }\n\n  return currentFeesUsd;\n}\n\nexport default function DashboardV2() {\n  const {active, library} = useWeb3React();\n  const {chainId} = useChainId();\n  const totalVolume = useTotalVolume();\n\n  const chainName = getChainName(chainId);\n\n  const {data: positionStats, mutate: updatePositionStats} = useSWR(\n    ACTIVE_CHAIN_IDS.map((chainId) => getServerUrl(chainId, \"/position_stats\")),\n    {\n      fetcher: arrayURLFetcher,\n    }\n  );\n\n  const {data: hourlyVolumes, mutate: updateHourlyVolumes} = useSWR(\n    ACTIVE_CHAIN_IDS.map((chainId) => getServerUrl(chainId, \"/hourly_volume\")),\n    {\n      fetcher: arrayURLFetcher,\n    }\n  );\n\n  const currentVolumeInfo = getVolumeInfo(hourlyVolumes);\n\n  const positionStatsInfo = getPositionStats(positionStats);\n\n  function getWhitelistedTokenAddresses(chainId) {\n    const whitelistedTokens = getWhitelistedTokens(chainId);\n    return whitelistedTokens.map((token) => token.address);\n  }\n\n  const whitelistedTokens = getWhitelistedTokens(chainId);\n  const whitelistedTokenAddresses = whitelistedTokens.map((token) => token.address);\n  const tokenList = whitelistedTokens.filter((t) => !t.isWrapped);\n  const visibleTokens = tokenList.filter((t) => !t.isTempHidden);\n\n  const readerAddress = getContract(chainId, \"Reader\");\n  const vaultAddress = getContract(chainId, \"Vault\");\n  const glpManagerAddress = getContract(chainId, \"GlpManager\");\n\n  const leverageAddress = getContract(chainId, \"Leverage\");\n  const glpAddress = getContract(chainId, \"GLP\");\n  const usdgAddress = getContract(chainId, \"USDG\");\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\")\n\n  const tokensForSupplyQuery = [leverageAddress, glpAddress, usdgAddress];\n\n\n  const {infoTokens} = useInfoTokens(library, chainId, active, undefined, undefined);\n\n  const {\n    data: aums,\n    mutate: updateAums\n  } = useSWR([`Dashboard:getAums:${active}`, chainId, glpManagerAddress, \"getAums\"], {\n    fetcher: fetcher(library, GlpManager),\n  })\n\n  const {\n    data: fees,\n    mutate: updateFees\n  } = useSWR([`Dashboard:fees1:${active}`, chainId, readerAddress, \"getFees\", vaultAddress], {\n    fetcher: fetcher(library, ReaderV2, [whitelistedTokenAddresses]),\n  })\n\n  const {data: totalSupplies, mutate: updateTotalSupplies} = useSWR(\n    [`Dashboard:totalSupplies:${active}`, chainId, readerAddress, \"getTokenBalancesWithSupplies\", AddressZero],\n    {\n      fetcher: fetcher(library, ReaderV2, [tokensForSupplyQuery]),\n    }\n  );\n\n  const {data: totalTokenWeights, mutate: updateTotalTokenWeights} = useSWR(\n    [`GlpSwap:totalTokenWeights:${active}`, chainId, vaultAddress, \"totalTokenWeights\"],\n    {\n      fetcher: fetcher(library, VaultV2),\n    }\n  );\n\n  const nativeToken = infoTokens[nativeTokenAddress]\n  const currentFeesUsd = getCurrentFeesUsd(whitelistedTokenAddresses, fees, infoTokens);\n\n  const {data: currentFees} = useSWR(infoTokens[AddressZero].contractMinPrice ? \"Dashboard:currentFees\" : null,\n    {\n      fetcher: () => {\n        return Promise.all(\n          ACTIVE_CHAIN_IDS.map((chainId) =>\n            fetcher(null, ReaderV2, [getWhitelistedTokenAddresses(chainId)])(\n              `Dashboard:fees2:${chainId}`,\n              chainId,\n              getContract(chainId, \"Reader\"),\n              \"getFees\",\n              getContract(chainId, \"Vault\")\n            )\n          )\n        ).then((fees) => {\n          return fees.reduce(\n            (acc, cv, i) => {\n              const feeUSD = getCurrentFeesUsd(\n                getWhitelistedTokenAddresses(ACTIVE_CHAIN_IDS[i]),\n                cv,\n                infoTokens\n              );\n              acc[ACTIVE_CHAIN_IDS[i]] = feeUSD;\n              acc.total = acc.total.add(feeUSD);\n              return acc;\n            },\n            {total: bigNumberify(0)}\n          );\n        });\n      },\n    }\n  );\n\n  const feeHistory = getFeeHistory(chainId);\n  const shouldIncludeCurrrentFees = feeHistory.length && parseInt(Date.now() / 1000) - feeHistory[0].to > 60 * 60;\n  let totalFeesDistributed = shouldIncludeCurrrentFees\n    ? parseFloat(bigNumberify(formatAmount(currentFeesUsd, USD_DECIMALS - 2, 0, false)).toNumber()) / 100\n    : 0;\n\n  const totalFees = ACTIVE_CHAIN_IDS.map((chainId) =>\n    getFeeHistory(chainId).reduce((acc, fee) => acc + parseFloat(fee.feeUsd), totalFeesDistributed)\n  )\n    .map((v) => Math.round(v))\n    .reduce(\n      (acc, cv, i) => {\n        acc[ACTIVE_CHAIN_IDS[i]] = cv;\n        acc.total = acc.total + cv;\n        return acc;\n      },\n      {total: 0}\n    );\n\n  const stakedLeverageTrackerAddress = getContract(chainId, \"StakedLeverageTracker\")\n\n  const {\n    data: stakedLeverageSupply,\n    mutate: updateStakedGmxSupply\n  } = useSWR([\"Dashboard:stakedLeverageSupply\", chainId, leverageAddress, \"balanceOf\", stakedLeverageTrackerAddress], {\n    fetcher: fetcher(library, Token),\n  })\n\n  const {\n    data: leveragePrice,\n    mutate: updateLeveragePrice\n  } = useLeveragePrice(chainId, library, active);\n\n  let leverageMarketCap\n  if (leveragePrice && totalSupplies && totalSupplies[1]) {\n    leverageMarketCap = leveragePrice.mul(totalSupplies[1]).div(expandDecimals(1, LEVERAGE_DECIMALS))\n  }\n\n  let stakedLeverageSupplyUsd\n  if (leveragePrice && stakedLeverageSupply) {\n    stakedLeverageSupplyUsd = stakedLeverageSupply.mul(leveragePrice).div(expandDecimals(1, LEVERAGE_DECIMALS))\n  }\n\n  let aum\n  if (aums && aums.length > 0) {\n    aum = aums[0].add(aums[1]).div(2)\n  }\n\n  let tvl\n  if (aum && leveragePrice && stakedLeverageSupply) {\n    tvl = aum.add(leveragePrice.mul(stakedLeverageSupply).div(expandDecimals(1, LEVERAGE_DECIMALS)))\n  }\n\n  let glpPrice;\n  let glpSupply;\n  let glpMarketCap;\n  if (aum && totalSupplies && totalSupplies[3]) {\n    glpSupply = totalSupplies[3]\n    glpPrice = (aum && aum.gt(0) && glpSupply.gt(0)) ? aum.mul(expandDecimals(1, GLP_DECIMALS)).div(glpSupply) : expandDecimals(1, USD_DECIMALS)\n    glpMarketCap = glpPrice.mul(glpSupply).div(expandDecimals(1, GLP_DECIMALS))\n  }\n\n  const nativeTokenFloorPriceFund = expandDecimals(350 + 148 + 384, 18);\n  const glpFloorPriceFund = expandDecimals(660001, 18);\n  const usdcFloorPriceFund = expandDecimals(784598 + 200000, 30);\n\n  let totalFloorPriceFundUsd;\n\n  if (nativeToken && nativeToken.contractMinPrice && glpPrice) {\n    const ethFloorPriceFundUsd = nativeTokenFloorPriceFund.mul(nativeToken.contractMinPrice).div(expandDecimals(1, nativeToken.decimals));\n    const glpFloorPriceFundUsd = glpFloorPriceFund.mul(glpPrice).div(expandDecimals(1, 18));\n\n    totalFloorPriceFundUsd = ethFloorPriceFundUsd.add(glpFloorPriceFundUsd).add(usdcFloorPriceFund);\n  }\n\n  let adjustedUsdgSupply = bigNumberify(0);\n\n  for (let i = 0; i < tokenList.length; i++) {\n    const token = tokenList[i];\n    const tokenInfo = infoTokens[token.address];\n    if (tokenInfo && tokenInfo.usdgAmount) {\n      adjustedUsdgSupply = adjustedUsdgSupply.add(tokenInfo.usdgAmount);\n    }\n  }\n\n  const getWeightText = (tokenInfo) => {\n    if (\n      !tokenInfo.weight ||\n      !tokenInfo.usdgAmount ||\n      !adjustedUsdgSupply ||\n      adjustedUsdgSupply.eq(0) ||\n      !totalTokenWeights\n    ) {\n      return \"...\";\n    }\n\n    const currentWeightBps = tokenInfo.usdgAmount.mul(BASIS_POINTS_DIVISOR).div(adjustedUsdgSupply);\n    // use add(1).div(10).mul(10) to round numbers up\n    const targetWeightBps = tokenInfo.weight.mul(BASIS_POINTS_DIVISOR).div(totalTokenWeights).add(1).div(10).mul(10);\n\n    const weightText = `${formatAmount(currentWeightBps, 2, 2, false)}% / ${formatAmount(\n      targetWeightBps,\n      2,\n      2,\n      false\n    )}%`;\n\n    return (\n      <TooltipComponent\n        handle={weightText}\n        position=\"right-bottom\"\n        renderContent={() => {\n          return (\n            <>\n              <TooltipCardRow\n                label=\"Current Weight\"\n                amount={`${formatAmount(currentWeightBps, 2, 2, false)}%`}\n                showDollar={false}\n              />\n              <TooltipCardRow\n                label=\"Target Weight\"\n                amount={`${formatAmount(targetWeightBps, 2, 2, false)}%`}\n                showDollar={false}\n              />\n              <br/>\n              {currentWeightBps.lt(targetWeightBps) && (\n                <div>\n                  {tokenInfo.symbol} is below its target weight.\n                  <br/>\n                  <br/>\n                  Get lower fees to{\" \"}\n                  <Link to=\"/buy_glp\" target=\"_blank\" rel=\"noopener noreferrer\">\n                    buy GLP\n                  </Link>{\" \"}\n                  with {tokenInfo.symbol},&nbsp; and to{\" \"}\n                  <Link to=\"/trade\" target=\"_blank\" rel=\"noopener noreferrer\">\n                    swap\n                  </Link>{\" \"}\n                  {tokenInfo.symbol} for other tokens.\n                </div>\n              )}\n              {currentWeightBps.gt(targetWeightBps) && (\n                <div>\n                  {tokenInfo.symbol} is above its target weight.\n                  <br/>\n                  <br/>\n                  Get lower fees to{\" \"}\n                  <Link to=\"/trade\" target=\"_blank\" rel=\"noopener noreferrer\">\n                    swap\n                  </Link>{\" \"}\n                  tokens for {tokenInfo.symbol}.\n                </div>\n              )}\n              <br/>\n              <div>\n                <a href=\"about:blank\" target=\"_blank\" rel=\"noopener noreferrer\">\n                  More Info\n                </a>\n              </div>\n            </>\n          );\n        }}\n      />\n    );\n  };\n\n  let stakedPercent = 0;\n\n  let liquidityPercent = 0;\n\n  let notStakedPercent = 100 - stakedPercent - liquidityPercent;\n\n  let gmxDistributionData = [\n    {\n      name: \"staked\",\n      value: stakedPercent,\n      color: \"#4353fa\",\n    },\n    {\n      name: \"in liquidity\",\n      value: liquidityPercent,\n      color: \"#0598fa\",\n    },\n    {\n      name: \"not staked\",\n      value: notStakedPercent,\n      color: \"#5c0af5\",\n    },\n  ];\n\n  const totalStatsStartDate = \"06 Sep 2022\";\n\n  let stableGlp = 0;\n  let totalGlp = 0;\n\n  let glpPool = tokenList.map((token) => {\n    const tokenInfo = infoTokens[token.address];\n    if (tokenInfo.usdgAmount && adjustedUsdgSupply && adjustedUsdgSupply.gt(0)) {\n      const currentWeightBps = tokenInfo.usdgAmount.mul(BASIS_POINTS_DIVISOR).div(adjustedUsdgSupply);\n      if (tokenInfo.isStable) {\n        stableGlp += parseFloat(`${formatAmount(currentWeightBps, 2, 2, false)}`);\n      }\n      totalGlp += parseFloat(`${formatAmount(currentWeightBps, 2, 2, false)}`);\n      return {\n        fullname: token.name,\n        name: token.symbol,\n        value: parseFloat(`${formatAmount(currentWeightBps, 2, 2, false)}`),\n      };\n    }\n    return null;\n  });\n\n  let stablePercentage = totalGlp > 0 ? ((stableGlp * 100) / totalGlp).toFixed(2) : \"0.0\";\n\n  glpPool = glpPool.filter(function (element) {\n    return element !== null;\n  });\n\n  glpPool = glpPool.sort(function (a, b) {\n    if (a.value < b.value) return 1;\n    else return -1;\n  });\n\n  gmxDistributionData = gmxDistributionData.sort(function (a, b) {\n    if (a.value < b.value) return 1;\n    else return -1;\n  });\n\n  const [gmxActiveIndex, setGMXActiveIndex] = useState(null);\n\n  const onGMXDistributionChartEnter = (_, index) => {\n    setGMXActiveIndex(index);\n  };\n\n  const onGMXDistributionChartLeave = (_, index) => {\n    setGMXActiveIndex(null);\n  };\n\n  const [glpActiveIndex, setGLPActiveIndex] = useState(null);\n\n  const onGLPPoolChartEnter = (_, index) => {\n    setGLPActiveIndex(index);\n  };\n\n  const onGLPPoolChartLeave = (_, index) => {\n    setGLPActiveIndex(null);\n  };\n\n  const CustomTooltip = ({active, payload}) => {\n    if (active && payload && payload.length) {\n      return (\n        <div className=\"stats-label\">\n          <div className=\"stats-label-color\" style={{backgroundColor: payload[0].color}}></div>\n          {payload[0].value}% {payload[0].name}\n        </div>\n      );\n    }\n\n    return null;\n  };\n\n  useEffect(() => {\n    if (active) {\n      library.on('block', () => {\n        updatePositionStats(undefined, true)\n        updateHourlyVolumes(undefined, true)\n        updateAums(undefined, true)\n        updateFees(undefined, true)\n        updateTotalSupplies(undefined, true)\n        updateStakedGmxSupply(undefined, true)\n        updateTotalTokenWeights(undefined, true)\n        updateLeveragePrice(undefined, true)\n      })\n      return () => {\n        library.removeAllListeners('block')\n      }\n    }\n  }, [active, library, chainId,\n    updatePositionStats, updateHourlyVolumes,\n    updateAums, updateFees, updateTotalSupplies, updateStakedGmxSupply,\n    updateTotalTokenWeights, updateLeveragePrice])\n\n  return (\n    <SEO title={getPageTitle(\"Dashboard\")}>\n      <div className=\"default-container DashboardV2 page-layout\">\n        <div className=\"section-title-block\">\n          <div className=\"section-title-icon\"></div>\n          <div className=\"section-title-content\">\n            <div className=\"Page-title\">\n              <Trans>Stats</Trans>&nbsp;\n              {chainId === BSC_TESTNET && <img src={bsc24Icon} alt=\"bsc24Icon\" className=\"icon-24\"/>}\n              {chainId === VELAS_TESTNET && <img src={velas24Icon} alt=\"velas24Icon\" className=\"icon-24\"/>}\n            </div>\n            <div className=\"Page-description\">\n              <Trans>\n                {chainName} Total Stats start from {totalStatsStartDate}.<br/> For detailed stats:{\" \"}\n              </Trans>\n            </div>\n          </div>\n        </div>\n        <div className=\"DashboardV2-content\">\n          <div className=\"DashboardV2-cards\">\n            <div className=\"App-card\">\n              <div className=\"App-card-title\">\n                <Trans>Overview</Trans>\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-content\">\n                <div className=\"App-card-row\">\n                  <div className=\"label\">AUM</div>\n                  <div>\n                    <TooltipComponent\n                      handle={`$${formatAmount(tvl, USD_DECIMALS, 0, true)}`}\n                      position=\"right-bottom\"\n                      renderContent={() => (\n                        <span\n                          className=\"label\">{t`Assets Under Management: LeveragePro staked (All chains) + GLP pool (${chainName})`}</span>\n                      )}\n                    />\n                  </div>\n                </div>\n                <div className=\"App-card-row\">\n                  <div className=\"label\">GLP Pool</div>\n                  <div>\n                    <TooltipComponent\n                      handle={`$${formatAmount(aum, USD_DECIMALS, 0, true)}`}\n                      position=\"right-bottom\"\n                      renderContent={() => (\n                        <span className=\"label\">{t`Total value of tokens in GLP pool (${chainName})`}</span>\n                      )}\n                    />\n                  </div>\n                </div>\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>24h Volume</Trans>\n                  </div>\n                  <div>\n                    <TooltipComponent\n                      position=\"right-bottom\"\n                      className=\"nowrap\"\n                      handle={`$${formatAmount(currentVolumeInfo?.[chainId]?.totalVolume, USD_DECIMALS, 0, true)}`}\n                      renderContent={() => (\n                        <TooltipCard\n                          title={t`Volume`}\n                          bsc={currentVolumeInfo?.[BSC_TESTNET].totalVolume}\n                          velas={currentVolumeInfo?.[VELAS_TESTNET].totalVolume}\n                        />\n                      )}\n                    />\n                  </div>\n                </div>\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>Long Positions</Trans>\n                  </div>\n                  <div>\n                    <TooltipComponent\n                      position=\"right-bottom\"\n                      className=\"nowrap\"\n                      handle={`$${formatAmount(\n                        positionStatsInfo?.[chainId]?.totalLongPositionSizes,\n                        USD_DECIMALS,\n                        0,\n                        true\n                      )}`}\n                      renderContent={() => (\n                        <TooltipCard\n                          title={t`Long Positions`}\n                          bsc={positionStatsInfo?.[BSC_TESTNET].totalLongPositionSizes}\n                          velas={positionStatsInfo?.[VELAS_TESTNET].totalLongPositionSizes}\n                          total={positionStatsInfo?.totalLongPositionSizes}\n                        />\n                      )}\n                    />\n                  </div>\n                </div>\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>Short Positions</Trans>\n                  </div>\n                  <div>\n                    <TooltipComponent\n                      position=\"right-bottom\"\n                      className=\"nowrap\"\n                      handle={`$${formatAmount(\n                        positionStatsInfo?.[chainId]?.totalShortPositionSizes,\n                        USD_DECIMALS,\n                        0,\n                        true\n                      )}`}\n                      renderContent={() => (\n                        <TooltipCard\n                          title={t`Short Positions`}\n                          bsc={positionStatsInfo?.[BSC_TESTNET].totalShortPositionSizes}\n                          velas={positionStatsInfo?.[VELAS_TESTNET].totalShortPositionSizes}\n                        />\n                      )}\n                    />\n                  </div>\n                </div>\n                {feeHistory.length ? (\n                  <div className=\"App-card-row\">\n                    <div className=\"label\">\n                      <Trans>Fees since</Trans> {formatDate(feeHistory[0].to)}\n                    </div>\n                    <div>\n                      <TooltipComponent\n                        position=\"right-bottom\"\n                        className=\"nowrap\"\n                        handle={`$${formatAmount(currentFees?.[chainId], USD_DECIMALS, 2, true)}`}\n                        renderContent={() => (\n                          <TooltipCard\n                            title={t`Fees`}\n                            bsc={currentFees?.[BSC_TESTNET]}\n                            velas={currentFees?.[VELAS_TESTNET]}\n                          />\n                        )}\n                      />\n                    </div>\n                  </div>\n                ) : null}\n              </div>\n            </div>\n            <div className=\"App-card\">\n              <div className=\"App-card-title\">\n                <Trans>Total Stats</Trans>\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-content\">\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>Total Fees</Trans>\n                  </div>\n                  <div>\n                    <TooltipComponent\n                      position=\"right-bottom\"\n                      className=\"nowrap\"\n                      handle={`$${numberWithCommas(totalFees?.[chainId])}`}\n                      renderContent={() => (\n                        <TooltipCard\n                          title={t`Total Fees`}\n                          bsc={totalFees?.[BSC_TESTNET]}\n                          velas={totalFees?.[VELAS_TESTNET]}\n                          decimalsForConversion={0}\n                        />\n                      )}\n                    />\n                  </div>\n                </div>\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>Total Volume</Trans>\n                  </div>\n                  <div>\n                    <TooltipComponent\n                      position=\"right-bottom\"\n                      className=\"nowrap\"\n                      handle={`$${formatAmount(totalVolume?.[chainId], USD_DECIMALS, 0, true)}`}\n                      renderContent={() => (\n                        <TooltipCard\n                          title={t`Total Volume`}\n                          bsc={totalVolume?.[BSC_TESTNET]}\n                          velas={totalVolume?.[VELAS_TESTNET]}\n                        />\n                      )}\n                    />\n                  </div>\n                </div>\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>Floor Price Fund</Trans>\n                  </div>\n                  <div>${formatAmount(totalFloorPriceFundUsd, 30, 0, true)}</div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className=\"Tab-title-section\">\n            <div className=\"Page-title\">\n              Tokens\n              {chainId === BSC_TESTNET && <img src={bsc24Icon} alt=\"bsc24Icon\" className=\"icon-24\"/>}\n              {chainId === VELAS_TESTNET && <img src={velas24Icon} alt=\"velas24Icon\" className=\"icon-24\"/>}\n            </div>\n            <div className=\"Page-description\">\n              <Trans>Platform and GLP index tokens.</Trans>\n            </div>\n          </div>\n          <div className=\"DashboardV2-token-cards\">\n            <div className=\"stats-wrapper stats-wrapper--gmx\">\n              <div className=\"App-card\">\n                <div className=\"stats-block\">\n                  <div className=\"App-card-title\">\n                    <div className=\"App-card-title-mark\">\n                      <div className=\"App-card-title-mark-icon\">\n                        <img src={gmx40Icon} alt=\"gmx40Icon\"/>\n                      </div>\n                      <div className=\"App-card-title-mark-info\">\n                        <div className=\"App-card-title-mark-title\">LeveragePro</div>\n                        <div className=\"App-card-title-mark-subtitle\">LeveragePro</div>\n                      </div>\n                      <div>\n                        <AssetDropdown assetSymbol=\"GMX\"/>\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"App-card-divider\"></div>\n                  <div className=\"App-card-content\">\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">Price</div>\n                      <div>\n                        {!leveragePrice && \"$0\"}\n                        {leveragePrice && (\n                          <TooltipComponent\n                            position=\"right-bottom\"\n                            className=\"nowrap\"\n                            handle={\"$\" + formatAmount(leveragePrice, USD_DECIMALS, 2, true)}\n                            renderContent={() => (\n                              <>\n                                <TooltipCardRow\n                                  label=\"Price on Binance\"\n                                  amount={formatAmount(leveragePrice, USD_DECIMALS, 2, true)}\n                                  showDollar={true}\n                                />\n                              </>\n                            )}\n                          />\n                        )}\n                      </div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Supply</Trans>\n                      </div>\n                      <div>{formatArrayAmount(totalSupplies, 1, LEVERAGE_DECIMALS, 0, true)} LeveragePro</div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Total Staked</Trans>\n                      </div>\n                      <div>\n                        <TooltipComponent\n                          position=\"right-bottom\"\n                          className=\"nowrap\"\n                          handle={`$${formatAmount(stakedLeverageSupplyUsd, USD_DECIMALS, 0, true)}`}\n                          renderContent={() => (\n                            <TooltipCard\n                              title={t`Staked`}\n                              testnet={stakedLeverageSupply}\n                              total={stakedLeverageSupply}\n                              decimalsForConversion={LEVERAGE_DECIMALS}\n                              showDollar={false}\n                            />\n                          )}\n                        />\n                      </div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Market Cap</Trans>\n                      </div>\n                      <div>${formatAmount(leverageMarketCap, USD_DECIMALS, 0, true)}</div>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"stats-piechart\" onMouseLeave={onGMXDistributionChartLeave}>\n                  {gmxDistributionData.length > 0 && (\n                    <PieChart width={210} height={210}>\n                      <Pie\n                        data={gmxDistributionData}\n                        cx={100}\n                        cy={100}\n                        innerRadius={73}\n                        outerRadius={80}\n                        fill=\"#8884d8\"\n                        dataKey=\"value\"\n                        startAngle={90}\n                        endAngle={-270}\n                        paddingAngle={2}\n                        onMouseEnter={onGMXDistributionChartEnter}\n                        onMouseOut={onGMXDistributionChartLeave}\n                        onMouseLeave={onGMXDistributionChartLeave}\n                      >\n                        {gmxDistributionData.map((entry, index) => (\n                          <Cell\n                            key={`cell-${index}`}\n                            fill={entry.color}\n                            style={{\n                              filter:\n                                gmxActiveIndex === index\n                                  ? `drop-shadow(0px 0px 6px ${hexToRgba(entry.color, 0.7)})`\n                                  : \"none\",\n                              cursor: \"pointer\",\n                            }}\n                            stroke={entry.color}\n                            strokeWidth={gmxActiveIndex === index ? 1 : 1}\n                          />\n                        ))}\n                      </Pie>\n                      <text x={\"50%\"} y={\"50%\"} fill=\"white\" textAnchor=\"middle\" dominantBaseline=\"middle\">\n                        <Trans>Distribution</Trans>\n                      </text>\n                      <Tooltip content={<CustomTooltip/>}/>\n                    </PieChart>\n                  )}\n                </div>\n              </div>\n              <div className=\"App-card\">\n                <div className=\"stats-block\">\n                  <div className=\"App-card-title\">\n                    <div className=\"App-card-title-mark\">\n                      <div className=\"App-card-title-mark-icon\">\n                        <img src={glp40Icon} alt=\"glp40Icon\"/>\n                        <img src={bsc16Icon} alt=\"bsc16Icon\" className=\"selected-network-symbol icon-16\"/>\n                        <img src={velas16Icon} alt=\"velas16Icon\" className=\"selected-network-symbol icon-16\"/>\n                      </div>\n                      <div className=\"App-card-title-mark-info\">\n                        <div className=\"App-card-title-mark-title\">GLP</div>\n                        <div className=\"App-card-title-mark-subtitle\">GLP</div>\n                      </div>\n                      <div>\n                        <AssetDropdown assetSymbol=\"GLP\"/>\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"App-card-divider\"></div>\n                  <div className=\"App-card-content\">\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Price</Trans>\n                      </div>\n                      <div>${formatAmount(glpPrice, USD_DECIMALS, 3, true)}</div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Supply</Trans>\n                      </div>\n                      <div>{formatAmount(glpSupply, GLP_DECIMALS, 0, true)} GLP</div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Total Staked</Trans>\n                      </div>\n                      <div>${formatAmount(glpMarketCap, USD_DECIMALS, 0, true)}</div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Market Cap</Trans>\n                      </div>\n                      <div>${formatAmount(glpMarketCap, USD_DECIMALS, 0, true)}</div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Stablecoin Percentage</Trans>\n                      </div>\n                      <div>{stablePercentage}%</div>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"stats-piechart\" onMouseOut={onGLPPoolChartLeave}>\n                  {glpPool.length > 0 && (\n                    <PieChart width={210} height={210}>\n                      <Pie\n                        data={glpPool}\n                        cx={100}\n                        cy={100}\n                        innerRadius={73}\n                        outerRadius={80}\n                        fill=\"#8884d8\"\n                        dataKey=\"value\"\n                        startAngle={90}\n                        endAngle={-270}\n                        onMouseEnter={onGLPPoolChartEnter}\n                        onMouseOut={onGLPPoolChartLeave}\n                        onMouseLeave={onGLPPoolChartLeave}\n                        paddingAngle={2}\n                      >\n                        {glpPool.map((entry, index) => (\n                          <Cell\n                            key={`cell-${index}`}\n                            fill={GLPPOOLCOLORS[entry.name]}\n                            style={{\n                              filter:\n                                glpActiveIndex === index\n                                  ? `drop-shadow(0px 0px 6px ${hexToRgba(GLPPOOLCOLORS[entry.name], 0.7)})`\n                                  : \"none\",\n                              cursor: \"pointer\",\n                            }}\n                            stroke={GLPPOOLCOLORS[entry.name]}\n                            strokeWidth={glpActiveIndex === index ? 1 : 1}\n                          />\n                        ))}\n                      </Pie>\n                      <text x={\"50%\"} y={\"50%\"} fill=\"white\" textAnchor=\"middle\" dominantBaseline=\"middle\">\n                        GLP Pool\n                      </text>\n                      <Tooltip content={<CustomTooltip/>}/>\n                    </PieChart>\n                  )}\n                </div>\n              </div>\n            </div>\n            <div className=\"token-table-wrapper App-card\">\n              <div className=\"App-card-title\">\n                <Trans>GLP Index Composition</Trans>{\" \"}\n                <img src={bsc16Icon} alt=\"bsc16Icon\" className=\"icon-16\"/>\n                <img src={velas16Icon} alt=\"velas16Icon\" className=\"icon-16\"/>\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <table className=\"token-table\">\n                <thead>\n                <tr>\n                  <th>\n                    <Trans>TOKEN</Trans>\n                  </th>\n                  <th>\n                    <Trans>PRICE</Trans>\n                  </th>\n                  <th>\n                    <Trans>POOL</Trans>\n                  </th>\n                  <th>\n                    <Trans>WEIGHT</Trans>\n                  </th>\n                  <th>\n                    <Trans>UTILIZATION</Trans>\n                  </th>\n                </tr>\n                </thead>\n                <tbody>\n                {visibleTokens.map((token) => {\n                  const tokenInfo = infoTokens[token.address];\n                  let utilization = bigNumberify(0);\n                  if (tokenInfo && tokenInfo.reservedAmount && tokenInfo.poolAmount && tokenInfo.poolAmount.gt(0)) {\n                    utilization = tokenInfo.reservedAmount.mul(BASIS_POINTS_DIVISOR).div(tokenInfo.poolAmount);\n                  }\n                  let maxUsdgAmount = DEFAULT_MAX_USDG_AMOUNT;\n                  if (tokenInfo.maxUsdgAmount && tokenInfo.maxUsdgAmount.gt(0)) {\n                    maxUsdgAmount = tokenInfo.maxUsdgAmount;\n                  }\n                  const tokenImage = importImage(\"ic_\" + token.symbol.toLowerCase() + \"_40.svg\");\n\n                  return (\n                    <tr key={token.symbol}>\n                      <td>\n                        <div className=\"token-symbol-wrapper\">\n                          <div className=\"App-card-title-info\">\n                            <div className=\"App-card-title-info-icon\">\n                              <img src={tokenImage} alt={token.symbol} width=\"40px\"/>\n                            </div>\n                            <div className=\"App-card-title-info-text\">\n                              <div className=\"App-card-info-title\">{token.name}</div>\n                              <div className=\"App-card-info-subtitle\">{token.symbol}</div>\n                            </div>\n                            <div>\n                              <AssetDropdown assetSymbol={token.symbol} assetInfo={token}/>\n                            </div>\n                          </div>\n                        </div>\n                      </td>\n                      <td>${formatKeyAmount(tokenInfo, \"minPrice\", USD_DECIMALS, 2, true)}</td>\n                      <td>\n                        <TooltipComponent\n                          handle={`$${formatKeyAmount(tokenInfo, \"managedUsd\", USD_DECIMALS, 0, true)}`}\n                          position=\"right-bottom\"\n                          renderContent={() => {\n                            return (\n                              <>\n                                <TooltipCardRow\n                                  label=\"Pool Amount\"\n                                  amount={`${formatKeyAmount(tokenInfo, \"managedAmount\", token.decimals, 2, true)} ${\n                                    token.symbol\n                                  }`}\n                                  showDollar={false}\n                                />\n                                <TooltipCardRow\n                                  label=\"Target Min Amount\"\n                                  amount={`${formatKeyAmount(tokenInfo, \"bufferAmount\", token.decimals, 2, true)} ${\n                                    token.symbol\n                                  }`}\n                                  showDollar={false}\n                                />\n                                <TooltipCardRow\n                                  label={`Max ${tokenInfo.symbol} Capacity`}\n                                  amount={formatAmount(maxUsdgAmount, 18, 0, true)}\n                                  showDollar={true}\n                                />\n                              </>\n                            );\n                          }}\n                        />\n                      </td>\n                      <td>{getWeightText(tokenInfo)}</td>\n                      <td>{formatAmount(utilization, 2, 2, false)}%</td>\n                    </tr>\n                  );\n                })}\n                </tbody>\n              </table>\n            </div>\n            <div className=\"token-grid\">\n              {visibleTokens.map((token) => {\n                const tokenInfo = infoTokens[token.address];\n                let utilization = bigNumberify(0);\n                if (tokenInfo && tokenInfo.reservedAmount && tokenInfo.poolAmount && tokenInfo.poolAmount.gt(0)) {\n                  utilization = tokenInfo.reservedAmount.mul(BASIS_POINTS_DIVISOR).div(tokenInfo.poolAmount);\n                }\n                let maxUsdgAmount = DEFAULT_MAX_USDG_AMOUNT;\n                if (tokenInfo.maxUsdgAmount && tokenInfo.maxUsdgAmount.gt(0)) {\n                  maxUsdgAmount = tokenInfo.maxUsdgAmount;\n                }\n\n                const tokenImage = importImage(\"ic_\" + token.symbol.toLowerCase() + \"_24.svg\");\n                return (\n                  <div className=\"App-card\" key={token.symbol}>\n                    <div className=\"App-card-title\">\n                      <div className=\"mobile-token-card\">\n                        <img src={tokenImage} alt={token.symbol} width=\"20px\"/>\n                        <div className=\"token-symbol-text\">{token.symbol}</div>\n                        <div>\n                          <AssetDropdown assetSymbol={token.symbol} assetInfo={token}/>\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"App-card-divider\"></div>\n                    <div className=\"App-card-content\">\n                      <div className=\"App-card-row\">\n                        <div className=\"label\">Price</div>\n                        <div>${formatKeyAmount(tokenInfo, \"minPrice\", USD_DECIMALS, 2, true)}</div>\n                      </div>\n                      <div className=\"App-card-row\">\n                        <div className=\"label\">Pool</div>\n                        <div>\n                          <TooltipComponent\n                            handle={`$${formatKeyAmount(tokenInfo, \"managedUsd\", USD_DECIMALS, 0, true)}`}\n                            position=\"right-bottom\"\n                            renderContent={() => {\n                              return (\n                                <>\n                                  Pool\n                                  Amount: {formatKeyAmount(tokenInfo, \"managedAmount\", token.decimals, 2, true)}{\" \"}\n                                  {token.symbol}\n                                  <br/>\n                                  <br/>\n                                  Target Min Amount:{\" \"}\n                                  {formatKeyAmount(tokenInfo, \"bufferAmount\", token.decimals, 2, true)} {token.symbol}\n                                  <br/>\n                                  <br/>\n                                  Max {tokenInfo.symbol} Capacity: ${formatAmount(maxUsdgAmount, 18, 0, true)}\n                                </>\n                              );\n                            }}\n                          />\n                        </div>\n                      </div>\n                      <div className=\"App-card-row\">\n                        <div className=\"label\">Weight</div>\n                        <div>{getWeightText(tokenInfo)}</div>\n                      </div>\n                      <div className=\"App-card-row\">\n                        <div className=\"label\">Utilization</div>\n                        <div>{formatAmount(utilization, 2, 2, false)}%</div>\n                      </div>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        </div>\n        <Footer/>\n      </div>\n    </SEO>\n  );\n}\n","import React from \"react\";\r\n\r\nimport DashboardV2 from \"./DashboardV2\";\r\n\r\nexport default function Dashboard(props) {\r\n  return <DashboardV2 />;\r\n}\r\n","import React from \"react\";\nimport { Trans } from \"@lingui/macro\";\nimport SEO from \"../../components/Common/SEO\";\n\nimport Footer from \"../../components/Footer/Footer\";\nimport { getPageTitle, BSC_TESTNET } from \"../../lib/legacy\";\n\nimport bscIcon from \"../../img/ic_bsc_16.svg\";\n\nimport \"./Ecosystem.css\";\n\nconst NETWORK_ICONS = {\n  [BSC_TESTNET]: bscIcon,\n};\n\nconst NETWORK_ICON_ALTS = {\n  [BSC_TESTNET]: \"bsc16Icon\",\n};\n\nexport default function Ecosystem() {\n  const gmxPages = [\n    // {\n    //   title: \"LeveragePro Governance\",\n    //   link: \"about:blank\",\n    //   linkLabel: \"gov.leveragepro.io\",\n    //   about: \"LeveragePro Governance Page\",\n    //   chainIds: [BSC_TESTNET],\n    // },\n    // {\n    //   title: \"LeveragePro Stats\",\n    //   link: \"about:blank\",\n    //   linkLabel: \"stats.leveragepro.io\",\n    //   about: \"LeveragePro Stats Page\",\n    //   chainIds: [BSC_TESTNET],\n    // },\n    // {\n    //   title: \"LeveragePro Proposals\",\n    //   link: \"about:blank\",\n    //   linkLabel: \"snapshot.org\",\n    //   about: \"LeveragePro Proposals Voting page\",\n    //   chainIds: [BSC_TESTNET],\n    // },\n    // {\n    //   title: \"LeveragePro Announcements\",\n    //   link: \"about:blank\",\n    //   linkLabel: \"t.me\",\n    //   about: \"LeveragePro Announcements and Updates\",\n    //   chainIds: [BSC_TESTNET],\n    // },\n  ];\n\n  const communityProjects = [\n    // {\n    //   title: \"LeveragePro Blueberry Club\",\n    //   link: \"about:blank\",\n    //   linkLabel: \"blueberry.club\",\n    //   about: \"LeveragePro Blueberry NFTs\",\n    //   creatorLabel: \"@xm92boi\",\n    //   creatorLink: \"about:blank\",\n    //   chainIds: [BSC_TESTNET],\n    // },\n    // {\n    //   title: \"LeveragePro Leaderboard\",\n    //   link: \"about:blank\",\n    //   linkLabel: \"leveragepro.house\",\n    //   about: \"Leaderboard for LeveragePro traders\",\n    //   creatorLabel: \"@Itburnz\",\n    //   creatorLink: \"about:blank\",\n    //   chainIds: [BSC_TESTNET],\n    // },\n    // {\n    //   title: \"LeveragePro Positions Bot\",\n    //   link: \"about:blank\",\n    //   linkLabel: \"t.me\",\n    //   about: \"Telegram bot for LeveragePro position updates\",\n    //   creatorLabel: \"@zhongfu\",\n    //   creatorLink: \"about:blank\",\n    //   chainIds: [BSC_TESTNET],\n    // },\n    // {\n    //   title: \"Blueberry Pulse\",\n    //   link: \"about:blank\",\n    //   linkLabel: \"substack.com\",\n    //   about: \"LeveragePro Weekly Updates\",\n    //   creatorLabel: \"@puroscohiba\",\n    //   creatorLink: \"about:blank\",\n    //   chainIds: [BSC_TESTNET],\n    // },\n    // {\n    //   title: \"DegenClip\",\n    //   link: \"about:blank\",\n    //   linkLabel: \"degenclip.com\",\n    //   about: \"Community curated tweet collection\",\n    //   creatorLabel: \"@ox21l\",\n    //   creatorLink: \"about:blank\",\n    //   chainIds: [BSC_TESTNET],\n    // },\n    // {\n    //   title: \"LeveragePro Yield Simulator\",\n    //   link: \"about:blank\",\n    //   linkLabel: \"defisims.com\",\n    //   about: \"Yield simulator for LeveragePro\",\n    //   creatorLabel: \"@kyzoeth\",\n    //   creatorLink: \"about:blank\",\n    //   chainIds: [BSC_TESTNET],\n    // },\n    // {\n    //   title: \"LeveragePro Returns Calculator\",\n    //   link: \"about:blank\",\n    //   linkLabel: \"docs.google.com\",\n    //   about: \"Returns calculator for LeveragePro and GLP\",\n    //   creatorLabel: \"@AStoicTrader1\",\n    //   creatorLink: \"about:blank\",\n    //   chainIds: [BSC_TESTNET],\n    // },\n    // {\n    //   title: \"LeveragePro Compound Calculator\",\n    //   link: \"about:blank\",\n    //   linkLabel: \"docs.google.com\",\n    //   about: \"Optimal compound interval calculator\",\n    //   creatorLabel: \"@ChasenKaminsky\",\n    //   creatorLink: \"about:blank\",\n    //   chainIds: [BSC_TESTNET],\n    // },\n    // {\n    //   title: \"LeveragePro Trading Stats\",\n    //   link: \"about:blank\",\n    //   linkLabel: \"t.me\",\n    //   about: \"Telegram bot for Open Interest on LeveragePro\",\n    //   creatorLabel: \"@SniperMonke2\",\n    //   creatorLink: \"about:blank\",\n    //   chainIds: [BSC_TESTNET],\n    // },\n    // {\n    //   title: \"LeveragePro Staking Bot\",\n    //   link: \"about:blank\",\n    //   linkLabel: \"t.me\",\n    //   about: \"LeveragePro staking rewards updates and insights\",\n    //   creatorLabel: \"@LeveragePro_Staking_bot\",\n    //   creatorLink: \"about:blank\",\n    //   chainIds: [BSC_TESTNET],\n    // },\n    // {\n    //   title: \"LeveragePro Staking Calculator\",\n    //   link: \"about:blank\",\n    //   linkLabel: \"leverageprostaking.com\",\n    //   about: \"LeveragePro staking calculator\",\n    //   creatorLabel: \"@n1njawtf\",\n    //   creatorLink: \"about:blank\",\n    //   chainIds: [BSC_TESTNET],\n    // },\n  ];\n\n  const dashboardProjects = [\n    // {\n    //   title: \"LeveragePro Referrals Dashboard\",\n    //   link: \"about:blank\",\n    //   linkLabel: \"LeverageProReferrals.com\",\n    //   about: \"Dashboard for LeveragePro referral stats\",\n    //   creatorLabel: \"@kyzoeth\",\n    //   creatorLink: \"about:blank\",\n    //   chainIds: [BSC_TESTNET],\n    // },\n    // {\n    //   title: \"LeveragePro Terminal\",\n    //   link: \"about:blank\",\n    //   linkLabel: \"LeverageProTerminal.com\",\n    //   about: \"LeveragePro explorer for stats and traders\",\n    //   creatorLabel: \"@vipineth\",\n    //   creatorLink: \"about:blank\",\n    //   chainIds: [BSC_TESTNET],\n    // },\n    // {\n    //   title: \"LeveragePro Analytics\",\n    //   link: \"about:blank\",\n    //   linkLabel: \"LeverageProStats.com\",\n    //   about: \"Financial reports and protocol analytics\",\n    //   creatorLabel: \"@CryptoMessiah\",\n    //   creatorLink: \"about:blank\",\n    //   chainIds: [BSC_TESTNET],\n    // },\n    // {\n    //   title: \"TokenTerminal\",\n    //   link: \"about:blank\",\n    //   linkLabel: \"tokenterminal.com\",\n    //   about: \"LeveragePro fundamentals\",\n    //   creatorLabel: \"@tokenterminal\",\n    //   creatorLink: \"about:blank\",\n    //   chainIds: [BSC_TESTNET],\n    // },\n    // {\n    //   title: \"CryptoFees\",\n    //   link: \"about:blank\",\n    //   linkLabel: \"cryptofees.info\",\n    //   about: \"Fees generated by LeveragePro\",\n    //   creatorLabel: \"@CryptoFeesInfo\",\n    //   creatorLink: \"about:blank\",\n    //   chainIds: [BSC_TESTNET],\n    // },\n    // {\n    //   title: \"Shogun Dashboard (Dune Arbitrum)\",\n    //   link: \"about:blank\",\n    //   linkLabel: \"dune.com\",\n    //   about: \"Protocol analytics\",\n    //   creatorLabel: \"@JamesCliffyz\",\n    //   creatorLink: \"about:blank\",\n    //   chainIds: [BSC_TESTNET],\n    // },\n    // {\n    //   title: \"Shogun Dashboard (Dune Avalanche)\",\n    //   link: \"about:blank\",\n    //   linkLabel: \"dune.com\",\n    //   about: \"Protocol analytics\",\n    //   creatorLabel: \"@JamesCliffyz\",\n    //   creatorLink: \"about:blank\",\n    //   chainIds: [BSC_TESTNET],\n    // },\n    // {\n    //   title: \"LeveragePro Perpetuals Data\",\n    //   link: \"about:blank\",\n    //   linkLabel: \"laevitas.ch\",\n    //   about: \"LeveragePro Perpetuals Data\",\n    //   creatorLabel: \"@laevitas1\",\n    //   creatorLink: \"about:blank\",\n    //   chainIds: [BSC_TESTNET],\n    // },\n  ];\n\n  const integrations = [\n    {\n      title: \"DeBank\",\n      link: \"debank.com\",\n      linkLabe: \"debank.com\",\n      about: \"DeFi Portfolio Tracker\",\n      announcementLabel: \"twitter.com\",\n      announcementLink: \"https://twitter.com/GMX_IO/status/1439711532884152324\",\n      chainIds: [BSC_TESTNET],\n    },\n    {\n      title: \"Defi Llama\",\n      link: \"https://defillama.com\",\n      linkLabel: \"defillama.com\",\n      about: \"Decentralized Finance Dashboard\",\n      announcementLabel: \"twitter.com\",\n      announcementLink: \"https://twitter.com/GMX_IO/status/1438124768033660938\",\n      chainIds: [BSC_TESTNET],\n    },\n    {\n      title: \"Dopex\",\n      link: \"https://dopex.io\",\n      linkLabel: \"dopex.io\",\n      about: \"Decentralized Options Protocol\",\n      announcementLabel: \"twitter.com\",\n      announcementLink: \"https://twitter.com/GMX_IO/status/1482445801523716099\",\n      chainIds: [BSC_TESTNET],\n    },\n    {\n      title: \"Rook\",\n      link: \"https://www.rook.fi/\",\n      linkLabel: \"rook.fi\",\n      about: \"MEV Optimizer\",\n      announcementLabel: \"twitter.com\",\n      announcementLink: \"https://twitter.com/Rook/status/1509613786600116251\",\n      chainIds: [BSC_TESTNET],\n    },\n    {\n      title: \"Jones DAO\",\n      link: \"https://jonesdao.io\",\n      linkLabel: \"jonesdao.io\",\n      about: \"Decentralized Options Strategies\",\n      announcementLabel: \"twitter.com\",\n      announcementLink: \"https://twitter.com/GMX_IO/status/1482788805635678212\",\n      chainIds: [BSC_TESTNET],\n    },\n    {\n      title: \"Yield Yak\",\n      link: \"https://yieldyak.com/\",\n      linkLabel: \"yieldyak.com\",\n      about: \"Yield Optimizer on Avalanche\",\n      announcementLabel: \"twitter.com\",\n      announcementLink: \"https://twitter.com/GMX_IO/status/1484601407378378754\",\n      chainIds: [BSC_TESTNET],\n    },\n    {\n      title: \"Vovo Finance\",\n      link: \"https://vovo.finance/\",\n      linkLabel: \"vovo.finance\",\n      about: \"Structured Products\",\n      announcementLabel: \"twitter.com\",\n      announcementLink: \"https://twitter.com/VovoFinance/status/1531517177790345217\",\n      chainIds: [BSC_TESTNET],\n    },\n    {\n      title: \"Stabilize Protocol\",\n      link: \"https://www.stabilize.finance/\",\n      linkLabel: \"stabilize.finance\",\n      about: \"Yield Vaults\",\n      announcementLabel: \"twitter.com\",\n      announcementLink: \"https://twitter.com/StabilizePro/status/1532348674986082306\",\n      chainIds: [BSC_TESTNET],\n    },\n    {\n      title: \"DODO\",\n      link: \"https://dodoex.io/\",\n      linkLabel: \"dodoex.io\",\n      about: \"Decentralized Trading Protocol\",\n      announcementLabel: \"twitter.com\",\n      announcementLink: \"https://twitter.com/GMX_IO/status/1438899138549145605\",\n      chainIds: [BSC_TESTNET],\n    },\n    {\n      title: \"Open Ocean\",\n      link: \"https://openocean.finance/\",\n      linkLabel: \"openocean.finance\",\n      about: \"DEX Aggregator\",\n      announcementLabel: \"twitter.com\",\n      announcementLink: \"https://twitter.com/GMX_IO/status/1495780826016989191\",\n      chainIds: [BSC_TESTNET],\n    },\n    {\n      title: \"Paraswap\",\n      link: \"https://www.paraswap.io/\",\n      linkLabel: \"paraswap.io\",\n      about: \"DEX Aggregator\",\n      announcementLabel: \"twitter.com\",\n      announcementLink: \"https://twitter.com/paraswap/status/1546869879336222728\",\n      chainIds: [BSC_TESTNET],\n    },\n    {\n      title: \"1inch\",\n      link: \"https://1inch.io/\",\n      linkLabel: \"1inch.io\",\n      about: \"DEX Aggregator\",\n      announcementLabel: \"twitter.com\",\n      announcementLink: \"https://twitter.com/GMX_IO/status/1522247451410845696\",\n      chainIds: [BSC_TESTNET],\n    },\n    {\n      title: \"Firebird Finance\",\n      link: \"https://app.firebird.finance/swap\",\n      linkLabel: \"firebird.finance\",\n      about: \"DEX Aggregator\",\n      announcementLabel: \"twitter.com\",\n      announcementLink: \"https://twitter.com/financefirebird/status/1561767094064238595\",\n      chainIds: [BSC_TESTNET],\n    },\n  ];\n\n  const telegramGroups = [\n    // {\n    //   title: \"LeveragePro\",\n    //   link: \"about:blank\",\n    //   linkLabel: \"t.me\",\n    //   about: \"Telegram Group\",\n    // },\n    // {\n    //   title: \"LeveragePro (Chinese)\",\n    //   link: \"about:blank\",\n    //   linkLabel: \"t.me\",\n    //   about: \"Telegram Group (Chinese)\",\n    // },\n    // {\n    //   title: \"LeveragePro (Portuguese)\",\n    //   link: \"about:blank\",\n    //   linkLabel: \"t.me\",\n    //   about: \"Telegram Group (Portuguese)\",\n    // },\n    // {\n    //   title: \"LeveragePro Trading Chat\",\n    //   link: \"about:blank\",\n    //   linkLabel: \"t.me\",\n    //   about: \"LeveragePro community discussion\",\n    // },\n  ];\n\n  return (\n    <SEO title={getPageTitle(\"Ecosystem Projects\")}>\n      <div className=\"default-container page-layout\">\n        <div>\n          <div className=\"section-title-block\">\n            <div className=\"section-title-icon\"></div>\n            <div className=\"section-title-content\">\n              <div className=\"Page-title\">\n                <Trans>LeveragePro Pages</Trans>\n              </div>\n              <div className=\"Page-description\">\n                <Trans>LeveragePro ecosystem pages.</Trans>\n              </div>\n            </div>\n          </div>\n          <div className=\"DashboardV2-projects\">\n            {gmxPages.map((item) => {\n              const linkLabel = item.linkLabel ? item.linkLabel : item.link;\n              return (\n                <div className=\"App-card\" key={item.title}>\n                  <div className=\"App-card-title\">\n                    {item.title}\n                    <div className=\"App-card-title-icon\">\n                      {item.chainIds.map((network) => (\n                        <img key={network} src={NETWORK_ICONS[network]} alt={NETWORK_ICON_ALTS[network]} />\n                      ))}\n                    </div>\n                  </div>\n                  <div className=\"App-card-divider\"></div>\n                  <div className=\"App-card-content\">\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Link</Trans>\n                      </div>\n                      <div>\n                        <a href={item.link} target=\"_blank\" rel=\"noopener noreferrer\">\n                          {linkLabel}\n                        </a>\n                      </div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>About</Trans>\n                      </div>\n                      <div>{item.about}</div>\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n          <div className=\"Tab-title-section\">\n            <div className=\"Page-title\">\n              <Trans>Community Projects</Trans>\n            </div>\n            <div className=\"Page-description\">\n              <Trans>Projects developed by the LeveragePro community.</Trans>\n            </div>\n          </div>\n          <div className=\"DashboardV2-projects\">\n            {communityProjects.map((item) => {\n              const linkLabel = item.linkLabel ? item.linkLabel : item.link;\n              return (\n                <div className=\"App-card\" key={item.title}>\n                  <div className=\"App-card-title\">\n                    {item.title}\n                    <div className=\"App-card-title-icon\">\n                      {item.chainIds.map((network) => (\n                        <img key={network} src={NETWORK_ICONS[network]} alt={NETWORK_ICON_ALTS[network]} />\n                      ))}\n                    </div>\n                  </div>\n                  <div className=\"App-card-divider\"></div>\n                  <div className=\"App-card-content\">\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Link</Trans>\n                      </div>\n                      <div>\n                        <a href={item.link} target=\"_blank\" rel=\"noopener noreferrer\">\n                          {linkLabel}\n                        </a>\n                      </div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>About</Trans>\n                      </div>\n                      <div>{item.about}</div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Creator</Trans>\n                      </div>\n                      <div>\n                        <a href={item.creatorLink} target=\"_blank\" rel=\"noopener noreferrer\">\n                          {item.creatorLabel}\n                        </a>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n          <div className=\"Tab-title-section\">\n            <div className=\"Page-title\">\n              <Trans>Dashboards</Trans>\n            </div>\n            <div className=\"Page-description\">\n              <Trans>LeveragePro dashboards and analytics.</Trans>\n            </div>\n          </div>\n          <div className=\"DashboardV2-projects\">\n            {dashboardProjects.map((item) => {\n              const linkLabel = item.linkLabel ? item.linkLabel : item.link;\n              return (\n                <div className=\"App-card\" key={item.title}>\n                  <div className=\"App-card-title\">\n                    {item.title}\n                    <div className=\"App-card-title-icon\">\n                      {item.chainIds.map((network) => (\n                        <img key={network} src={NETWORK_ICONS[network]} alt={NETWORK_ICON_ALTS[network]} />\n                      ))}\n                    </div>\n                  </div>\n\n                  <div className=\"App-card-divider\"></div>\n                  <div className=\"App-card-content\">\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Link</Trans>\n                      </div>\n                      <div>\n                        <a href={item.link} target=\"_blank\" rel=\"noopener noreferrer\">\n                          {linkLabel}\n                        </a>\n                      </div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>About</Trans>\n                      </div>\n                      <div>{item.about}</div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Creator</Trans>\n                      </div>\n                      <div>\n                        <a href={item.creatorLink} target=\"_blank\" rel=\"noopener noreferrer\">\n                          {item.creatorLabel}\n                        </a>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n          {/*<div className=\"Tab-title-section\">*/}\n          {/*  <div className=\"Page-title\">*/}\n          {/*    <Trans>Partnerships and Integrations</Trans>*/}\n          {/*  </div>*/}\n          {/*  <div className=\"Page-description\">*/}\n          {/*    <Trans>Projects integrated with LeveragePro.</Trans>*/}\n          {/*  </div>*/}\n          {/*</div>*/}\n          {/*<div className=\"DashboardV2-projects\">*/}\n          {/*  {integrations.map((item) => {*/}\n          {/*    const linkLabel = item.linkLabel ? item.linkLabel : item.link;*/}\n          {/*    return (*/}\n          {/*      <div key={item.title} className=\"App-card\">*/}\n          {/*        <div className=\"App-card-title\">*/}\n          {/*          {item.title}*/}\n          {/*          <div className=\"App-card-title-icon\">*/}\n          {/*            {item.chainIds.map((network) => (*/}\n          {/*              <img key={network} src={NETWORK_ICONS[network]} alt={NETWORK_ICON_ALTS[network]} />*/}\n          {/*            ))}*/}\n          {/*          </div>*/}\n          {/*        </div>*/}\n          {/*        <div className=\"App-card-divider\"></div>*/}\n          {/*        <div className=\"App-card-content\">*/}\n          {/*          <div className=\"App-card-row\">*/}\n          {/*            <div className=\"label\">*/}\n          {/*              <Trans>Link</Trans>*/}\n          {/*            </div>*/}\n          {/*            <div>*/}\n          {/*              <a href={item.link} target=\"_blank\" rel=\"noopener noreferrer\">*/}\n          {/*                {linkLabel}*/}\n          {/*              </a>*/}\n          {/*            </div>*/}\n          {/*          </div>*/}\n          {/*          <div className=\"App-card-row\">*/}\n          {/*            <div className=\"label\">*/}\n          {/*              <Trans>About</Trans>*/}\n          {/*            </div>*/}\n          {/*            <div>{item.about}</div>*/}\n          {/*          </div>*/}\n          {/*          <div className=\"App-card-row\">*/}\n          {/*            <div className=\"label\">*/}\n          {/*              <Trans>Announcement</Trans>*/}\n          {/*            </div>*/}\n          {/*            <div>*/}\n          {/*              <a href={item.announcementLink} target=\"_blank\" rel=\"noopener noreferrer\">*/}\n          {/*                {item.announcementLabel}*/}\n          {/*              </a>*/}\n          {/*            </div>*/}\n          {/*          </div>*/}\n          {/*        </div>*/}\n          {/*      </div>*/}\n          {/*    );*/}\n          {/*  })}*/}\n          {/*</div>*/}\n          <div className=\"Tab-title-section\">\n            <div className=\"Page-title\">\n              <Trans>Telegram Groups</Trans>\n            </div>\n            <div className=\"Page-description\">\n              <Trans>Community-led Telegram groups.</Trans>\n            </div>\n          </div>\n          <div className=\"DashboardV2-projects\">\n            {telegramGroups.map((item) => {\n              const linkLabel = item.linkLabel ? item.linkLabel : item.link;\n              return (\n                <div className=\"App-card\" key={item.title}>\n                  <div className=\"App-card-title\">{item.title}</div>\n                  <div className=\"App-card-divider\"></div>\n                  <div className=\"App-card-content\">\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Link</Trans>\n                      </div>\n                      <div>\n                        <a href={item.link} target=\"_blank\" rel=\"noopener noreferrer\">\n                          {linkLabel}\n                        </a>\n                      </div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>About</Trans>\n                      </div>\n                      <div>{item.about}</div>\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n        <Footer />\n      </div>\n    </SEO>\n  );\n}\n","import React, { useRef, useEffect } from \"react\";\nimport cx from \"classnames\";\nimport { motion, AnimatePresence } from \"framer-motion\";\n\nimport { MdClose } from \"react-icons/md\";\n\nimport \"./Modal.css\";\nimport useLockBodyScroll from \"../../lib/useLockBodyScroll\";\n\nexport default function Modal(props) {\n  const { isVisible, setIsVisible, className, zIndex, onAfterOpen, disableBodyScrollLock } = props;\n  const modalRef = useRef(null);\n\n  useLockBodyScroll(modalRef, isVisible, disableBodyScrollLock);\n\n  useEffect(() => {\n    function close(e) {\n      if (e.keyCode === 27) {\n        console.log(window.location.href, className);\n        setIsVisible(false);\n      }\n    }\n    window.addEventListener(\"keydown\", close);\n    return () => window.removeEventListener(\"keydown\", close);\n  }, [setIsVisible]);\n\n  useEffect(() => {\n    if (typeof onAfterOpen === \"function\") onAfterOpen();\n  }, [onAfterOpen]);\n\n  const fadeVariants = {\n    hidden: { opacity: 0 },\n    visible: { opacity: 1 },\n  };\n\n  return (\n    <AnimatePresence>\n      {isVisible && (\n        <motion.div\n          className={cx(\"Modal\", className)}\n          style={{ zIndex }}\n          initial=\"hidden\"\n          animate=\"visible\"\n          exit=\"hidden\"\n          variants={fadeVariants}\n          transition={{ duration: 0.2 }}\n        >\n          <div\n            className=\"Modal-backdrop\"\n            style={{\n              overflow: isVisible ? \"hidden\" : \"visible\",\n              position: \"fixed\",\n            }}\n            onClick={() => setIsVisible(false)}\n          ></div>\n          <div className=\"Modal-content\">\n            <div className=\"Modal-title-bar\">\n              <div className=\"Modal-title\">{props.label}</div>\n              <div className=\"Modal-close-button\" onClick={() => setIsVisible(false)}>\n                <MdClose fontSize={20} className=\"Modal-close-icon\" />\n              </div>\n            </div>\n            <div className=\"divider\" />\n            <div className=\"Modal-body\" ref={modalRef}>\n              {props.children}\n            </div>\n          </div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}\n","import { disableBodyScroll, enableBodyScroll, clearAllBodyScrollLocks } from \"body-scroll-lock\";\r\nimport { useEffect } from \"react\";\r\n\r\nexport default function useLockBodyScroll(ref, isVisible, disableLock) {\r\n  useEffect(() => {\r\n    if (disableLock) {\r\n      return;\r\n    }\r\n\r\n    if (ref.current) {\r\n      isVisible ? disableBodyScroll(ref.current) : enableBodyScroll(ref.current);\r\n    }\r\n\r\n    return () => clearAllBodyScrollLocks();\r\n  }, [ref, disableLock, isVisible]);\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useWeb3React } from \"@web3-react/core\";\r\nimport useSWR from \"swr\";\r\nimport { ethers } from \"ethers\";\r\n\r\nimport {\r\n  getInjectedHandler,\r\n  fetcher,\r\n  formatKeyAmount,\r\n  formatAmount,\r\n  formatAmountFree,\r\n  parseValue,\r\n  useChainId,\r\n  expandDecimals,\r\n  getExplorerUrl,\r\n  approveTokens,\r\n  bigNumberify,\r\n  helperToast,\r\n  CHAIN_ID,\r\n  USD_DECIMALS,\r\n  PRECISION,\r\n} from \"../../lib/legacy\";\r\n\r\nimport { getContract, XGMT_EXCLUDED_ACCOUNTS } from \"../../config/Addresses\";\r\nimport { getTokenBySymbol } from \"../../config/Tokens\";\r\n\r\nimport Reader from \"../../abis/Reader.json\";\r\nimport Token from \"../../abis/Token.json\";\r\nimport YieldToken from \"../../abis/YieldToken.json\";\r\nimport YieldFarm from \"../../abis/YieldFarm.json\";\r\n\r\nimport Modal from \"../../components/Modal/Modal\";\r\nimport Footer from \"../../components/Footer/Footer\";\r\n\r\nimport \"./Stake.css\";\r\n\r\nconst BASIS_POINTS_DIVISOR = 10000;\r\nconst HOURS_PER_YEAR = 8760;\r\n\r\nconst { AddressZero } = ethers.constants;\r\n\r\nfunction getBalanceAndSupplyData(balances) {\r\n  if (!balances || balances.length === 0) {\r\n    return {};\r\n  }\r\n\r\n  const keys = [\r\n    \"usdg\",\r\n    \"gmt\",\r\n    \"xgmt\",\r\n    \"gmtUsdg\",\r\n    \"xgmtUsdg\",\r\n    \"gmtUsdgFarm\",\r\n    \"xgmtUsdgFarm\",\r\n    \"autoUsdg\",\r\n    \"autoUsdgFarm\",\r\n  ];\r\n  const balanceData = {};\r\n  const supplyData = {};\r\n  const propsLength = 2;\r\n\r\n  for (let i = 0; i < keys.length; i++) {\r\n    const key = keys[i];\r\n    balanceData[key] = balances[i * propsLength];\r\n    supplyData[key] = balances[i * propsLength + 1];\r\n  }\r\n\r\n  return { balanceData, supplyData };\r\n}\r\n\r\nfunction getStakingData(stakingInfo) {\r\n  if (!stakingInfo || stakingInfo.length === 0) {\r\n    return;\r\n  }\r\n\r\n  const keys = [\r\n    \"usdg\",\r\n    \"xgmt\",\r\n    \"gmtUsdgFarmXgmt\",\r\n    \"gmtUsdgFarmNative\",\r\n    \"xgmtUsdgFarmXgmt\",\r\n    \"xgmtUsdgFarmNative\",\r\n    \"autoUsdgFarmXgmt\",\r\n    \"autoUsdgFarmNative\",\r\n  ];\r\n  const data = {};\r\n  const propsLength = 2;\r\n\r\n  for (let i = 0; i < keys.length; i++) {\r\n    const key = keys[i];\r\n    data[key] = {\r\n      claimable: stakingInfo[i * propsLength],\r\n      tokensPerInterval: stakingInfo[i * propsLength + 1],\r\n    };\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\nfunction getTotalStakedData(totalStakedInfo) {\r\n  if (!totalStakedInfo || totalStakedInfo.length === 0) {\r\n    return;\r\n  }\r\n\r\n  const keys = [\"usdg\", \"xgmt\"];\r\n  const data = {};\r\n\r\n  for (let i = 0; i < keys.length; i++) {\r\n    const key = keys[i];\r\n    data[key] = totalStakedInfo[i];\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\nfunction getPairData(pairInfo) {\r\n  const keys = [\"gmtUsdg\", \"xgmtUsdg\", \"bnbBusd\", \"autoUsdg\"];\r\n  if (!pairInfo || pairInfo.length === 0 || pairInfo.length !== keys.length * 2) {\r\n    return;\r\n  }\r\n\r\n  const data = {};\r\n  const propsLength = 2;\r\n\r\n  for (let i = 0; i < keys.length; i++) {\r\n    const key = keys[i];\r\n    data[key] = {\r\n      balance0: pairInfo[i * propsLength],\r\n      balance1: pairInfo[i * propsLength + 1],\r\n    };\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\nfunction getProcessedData(balanceData, supplyData, stakingData, totalStakedData, pairData, xgmtSupply) {\r\n  if (!balanceData || !supplyData || !stakingData || !totalStakedData || !pairData || !xgmtSupply) {\r\n    return {};\r\n  }\r\n\r\n  if (!supplyData.gmtUsdg || !supplyData.xgmtUsdg || !supplyData.autoUsdg) {\r\n    return {};\r\n  }\r\n\r\n  // const gmtPrice = pairData.gmtUsdg.balance1.mul(PRECISION).div(pairData.gmtUsdg.balance0)\r\n  const xgmtPrice = pairData.xgmtUsdg.balance0.eq(0)\r\n    ? bigNumberify(0)\r\n    : pairData.xgmtUsdg.balance1.mul(PRECISION).div(pairData.xgmtUsdg.balance0);\r\n  const gmtUsdgPrice = supplyData.gmtUsdg.eq(0)\r\n    ? bigNumberify(0)\r\n    : pairData.gmtUsdg.balance1.mul(PRECISION).mul(2).div(supplyData.gmtUsdg);\r\n  const xgmtUsdgPrice = supplyData.xgmtUsdg.eq(0)\r\n    ? bigNumberify(0)\r\n    : pairData.xgmtUsdg.balance1.mul(PRECISION).mul(2).div(supplyData.xgmtUsdg);\r\n  const bnbPrice = pairData.bnbBusd.balance1.mul(PRECISION).div(pairData.bnbBusd.balance0);\r\n  const autoUsdgPrice = supplyData.autoUsdg.eq(0)\r\n    ? bigNumberify(0)\r\n    : pairData.autoUsdg.balance1.mul(PRECISION).mul(2).div(supplyData.autoUsdg);\r\n\r\n  const usdgAnnualRewardsUsd = stakingData.usdg.tokensPerInterval\r\n    .mul(bnbPrice)\r\n    .mul(HOURS_PER_YEAR)\r\n    .div(expandDecimals(1, 18));\r\n  const xgmtAnnualRewardsUsd = stakingData.xgmt.tokensPerInterval\r\n    .mul(bnbPrice)\r\n    .mul(HOURS_PER_YEAR)\r\n    .div(expandDecimals(1, 18));\r\n\r\n  const gmtUsdgAnnualRewardsXmgtUsd = stakingData.gmtUsdgFarmXgmt.tokensPerInterval\r\n    .mul(xgmtPrice)\r\n    .mul(HOURS_PER_YEAR)\r\n    .div(expandDecimals(1, 18));\r\n  const gmtUsdgAnnualRewardsNativeUsd = stakingData.gmtUsdgFarmNative.tokensPerInterval\r\n    .mul(bnbPrice)\r\n    .mul(HOURS_PER_YEAR)\r\n    .div(expandDecimals(1, 18));\r\n  const gmtUsdgTotalAnnualRewardsUsd = gmtUsdgAnnualRewardsXmgtUsd.add(gmtUsdgAnnualRewardsNativeUsd);\r\n\r\n  const xgmtUsdgAnnualRewardsXmgtUsd = stakingData.xgmtUsdgFarmXgmt.tokensPerInterval\r\n    .mul(xgmtPrice)\r\n    .mul(HOURS_PER_YEAR)\r\n    .div(expandDecimals(1, 18));\r\n  const xgmtUsdgAnnualRewardsNativeUsd = stakingData.xgmtUsdgFarmNative.tokensPerInterval\r\n    .mul(bnbPrice)\r\n    .mul(HOURS_PER_YEAR)\r\n    .div(expandDecimals(1, 18));\r\n  const xgmtUsdgTotalAnnualRewardsUsd = xgmtUsdgAnnualRewardsXmgtUsd.add(xgmtUsdgAnnualRewardsNativeUsd);\r\n\r\n  const autoUsdgAnnualRewardsXgmtUsd = stakingData.autoUsdgFarmXgmt.tokensPerInterval\r\n    .mul(xgmtPrice)\r\n    .mul(HOURS_PER_YEAR)\r\n    .div(expandDecimals(1, 18));\r\n  const autoUsdgAnnualRewardsNativeUsd = stakingData.autoUsdgFarmNative.tokensPerInterval\r\n    .mul(bnbPrice)\r\n    .mul(HOURS_PER_YEAR)\r\n    .div(expandDecimals(1, 18));\r\n  const autoUsdgTotalAnnualRewardsUsd = autoUsdgAnnualRewardsXgmtUsd.add(autoUsdgAnnualRewardsNativeUsd);\r\n\r\n  const data = {};\r\n  data.usdgBalance = balanceData.usdg;\r\n  data.usdgSupply = supplyData.usdg;\r\n  data.usdgTotalStaked = totalStakedData.usdg;\r\n  data.usdgTotalStakedUsd = totalStakedData.usdg.mul(PRECISION).div(expandDecimals(1, 18));\r\n  data.usdgSupplyUsd = supplyData.usdg.mul(PRECISION).div(expandDecimals(1, 18));\r\n  data.usdgApr = data.usdgTotalStaked.eq(0)\r\n    ? undefined\r\n    : usdgAnnualRewardsUsd\r\n        .mul(BASIS_POINTS_DIVISOR)\r\n        .div(totalStakedData.usdg)\r\n        .mul(expandDecimals(1, 18))\r\n        .div(PRECISION);\r\n  data.usdgRewards = stakingData.usdg.claimable;\r\n\r\n  data.xgmtBalance = balanceData.xgmt;\r\n  data.xgmtBalanceUsd = balanceData.xgmt.mul(xgmtPrice).div(expandDecimals(1, 18));\r\n  data.xgmtSupply = xgmtSupply;\r\n  data.xgmtTotalStaked = totalStakedData.xgmt;\r\n  data.xgmtTotalStakedUsd = totalStakedData.xgmt.mul(xgmtPrice).div(expandDecimals(1, 18));\r\n  data.xgmtSupplyUsd = xgmtSupply.mul(xgmtPrice).div(expandDecimals(1, 18));\r\n  data.xgmtApr = data.xgmtSupplyUsd.eq(0)\r\n    ? bigNumberify(0)\r\n    : xgmtAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(data.xgmtTotalStakedUsd);\r\n  data.xgmtRewards = stakingData.xgmt.claimable;\r\n\r\n  data.gmtUsdgFarmBalance = balanceData.gmtUsdgFarm;\r\n\r\n  data.gmtUsdgBalance = balanceData.gmtUsdg;\r\n  data.gmtUsdgBalanceUsd = balanceData.gmtUsdg.mul(gmtUsdgPrice).div(expandDecimals(1, 18));\r\n  data.gmtUsdgSupply = supplyData.gmtUsdg;\r\n  data.gmtUsdgSupplyUsd = supplyData.gmtUsdg.mul(gmtUsdgPrice).div(expandDecimals(1, 18));\r\n  data.gmtUsdgStaked = balanceData.gmtUsdgFarm;\r\n  data.gmtUsdgStakedUsd = balanceData.gmtUsdgFarm.mul(gmtUsdgPrice).div(expandDecimals(1, 18));\r\n  data.gmtUsdgFarmSupplyUsd = supplyData.gmtUsdgFarm.mul(gmtUsdgPrice).div(expandDecimals(1, 18));\r\n  data.gmtUsdgApr = data.gmtUsdgSupplyUsd.eq(0)\r\n    ? bigNumberify(0)\r\n    : data.gmtUsdgFarmSupplyUsd.eq(0)\r\n    ? undefined\r\n    : gmtUsdgTotalAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(data.gmtUsdgSupplyUsd);\r\n  data.gmtUsdgXgmtRewards = stakingData.gmtUsdgFarmXgmt.claimable;\r\n  data.gmtUsdgNativeRewards = stakingData.gmtUsdgFarmNative.claimable;\r\n  data.gmtUsdgTotalRewards = data.gmtUsdgXgmtRewards.add(data.gmtUsdgNativeRewards);\r\n  data.gmtUsdgTotalStaked = supplyData.gmtUsdgFarm;\r\n  data.gmtUsdgTotalStakedUsd = supplyData.gmtUsdgFarm.mul(gmtUsdgPrice).div(expandDecimals(1, 18));\r\n\r\n  data.xgmtUsdgBalance = balanceData.xgmtUsdg;\r\n  data.xgmtUsdgFarmBalance = balanceData.xgmtUsdgFarm;\r\n  data.xgmtUsdgBalanceUsd = balanceData.xgmtUsdg.mul(xgmtUsdgPrice).div(expandDecimals(1, 18));\r\n  data.xgmtUsdgSupply = supplyData.xgmtUsdg;\r\n  data.xgmtUsdgSupplyUsd = supplyData.xgmtUsdg.mul(xgmtUsdgPrice).div(expandDecimals(1, 18));\r\n  data.xgmtUsdgStaked = balanceData.xgmtUsdgFarm;\r\n  data.xgmtUsdgStakedUsd = balanceData.xgmtUsdgFarm.mul(xgmtUsdgPrice).div(expandDecimals(1, 18));\r\n  data.xgmtUsdgFarmSupplyUsd = supplyData.xgmtUsdgFarm.mul(xgmtUsdgPrice).div(expandDecimals(1, 18));\r\n  data.xgmtUsdgApr = data.xgmtUsdgFarmSupplyUsd.eq(0)\r\n    ? undefined\r\n    : xgmtUsdgTotalAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(data.xgmtUsdgFarmSupplyUsd);\r\n  data.xgmtUsdgXgmtRewards = stakingData.xgmtUsdgFarmXgmt.claimable;\r\n  data.xgmtUsdgNativeRewards = stakingData.xgmtUsdgFarmNative.claimable;\r\n  data.xgmtUsdgTotalRewards = data.xgmtUsdgXgmtRewards.add(data.xgmtUsdgNativeRewards);\r\n  data.xgmtUsdgTotalStaked = supplyData.xgmtUsdgFarm;\r\n  data.xgmtUsdgTotalStakedUsd = supplyData.xgmtUsdgFarm.mul(xgmtUsdgPrice).div(expandDecimals(1, 18));\r\n\r\n  data.autoUsdgBalance = balanceData.autoUsdg;\r\n  data.autoUsdgFarmBalance = balanceData.autoUsdgFarm;\r\n  data.autoUsdgBalanceUsd = balanceData.autoUsdg.mul(autoUsdgPrice).div(expandDecimals(1, 18));\r\n  data.autoUsdgStaked = balanceData.autoUsdgFarm;\r\n  data.autoUsdgStakedUsd = balanceData.autoUsdgFarm.mul(autoUsdgPrice).div(expandDecimals(1, 18));\r\n  data.autoUsdgFarmSupplyUsd = supplyData.autoUsdgFarm.mul(autoUsdgPrice).div(expandDecimals(1, 18));\r\n  data.autoUsdgApr = data.autoUsdgFarmSupplyUsd.eq(0)\r\n    ? bigNumberify(0)\r\n    : autoUsdgTotalAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(data.autoUsdgFarmSupplyUsd);\r\n  data.autoUsdgXgmtRewards = stakingData.autoUsdgFarmXgmt.claimable;\r\n  data.autoUsdgNativeRewards = stakingData.autoUsdgFarmNative.claimable;\r\n  data.autoUsdgTotalRewards = data.autoUsdgXgmtRewards.add(data.autoUsdgNativeRewards);\r\n  data.autoUsdgTotalStaked = supplyData.autoUsdgFarm;\r\n  data.autoUsdgTotalStakedUsd = supplyData.autoUsdgFarm.mul(autoUsdgPrice).div(expandDecimals(1, 18));\r\n\r\n  data.totalStakedUsd = data.usdgTotalStakedUsd\r\n    .add(data.xgmtTotalStakedUsd)\r\n    .add(data.gmtUsdgTotalStakedUsd)\r\n    .add(data.xgmtUsdgTotalStakedUsd)\r\n    .add(data.autoUsdgTotalStakedUsd);\r\n\r\n  return data;\r\n}\r\n\r\nfunction StakeModal(props) {\r\n  const {\r\n    isVisible,\r\n    setIsVisible,\r\n    title,\r\n    maxAmount,\r\n    value,\r\n    setValue,\r\n    active,\r\n    account,\r\n    library,\r\n    stakingTokenSymbol,\r\n    stakingTokenAddress,\r\n    farmAddress,\r\n    chainId,\r\n  } = props;\r\n  const [isStaking, setIsStaking] = useState(false);\r\n  const [isApproving, setIsApproving] = useState(false);\r\n\r\n  const { data: tokenAllowance, mutate: updateTokenAllowance } = useSWR(\r\n    [active, chainId, stakingTokenAddress, \"allowance\", account, farmAddress],\r\n    {\r\n      fetcher: fetcher(library, Token),\r\n    }\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (active) {\r\n      library.on(\"block\", () => {\r\n        updateTokenAllowance(undefined, true);\r\n      });\r\n      return () => {\r\n        library.removeAllListeners(\"block\");\r\n      };\r\n    }\r\n  }, [active, library, updateTokenAllowance]);\r\n\r\n  let amount = parseValue(value, 18);\r\n  const needApproval = tokenAllowance && amount && amount.gt(tokenAllowance);\r\n\r\n  const getError = () => {\r\n    if (!amount || amount.eq(0)) {\r\n      return \"Enter an amount\";\r\n    }\r\n    if (maxAmount && amount.gt(maxAmount)) {\r\n      return \"Max amount exceeded\";\r\n    }\r\n  };\r\n\r\n  const onClickPrimary = () => {\r\n    if (needApproval) {\r\n      approveTokens({\r\n        setIsApproving,\r\n        library,\r\n        tokenAddress: stakingTokenAddress,\r\n        spender: farmAddress,\r\n        chainId: CHAIN_ID,\r\n      });\r\n      return;\r\n    }\r\n\r\n    setIsStaking(true);\r\n    const contract = new ethers.Contract(farmAddress, YieldFarm.abi, library.getSigner());\r\n    contract\r\n      .stake(amount)\r\n      .then(async (res) => {\r\n        const txUrl = getExplorerUrl(CHAIN_ID) + \"tx/\" + res.hash;\r\n        helperToast.success(\r\n          <div>\r\n            Stake submitted!{\" \"}\r\n            <a href={txUrl} target=\"_blank\" rel=\"noopener noreferrer\">\r\n              View status.\r\n            </a>\r\n            <br />\r\n          </div>\r\n        );\r\n        setIsVisible(false);\r\n      })\r\n      .catch((e) => {\r\n        console.error(e);\r\n        helperToast.error(\"Stake failed\");\r\n      })\r\n      .finally(() => {\r\n        setIsStaking(false);\r\n      });\r\n  };\r\n\r\n  const isPrimaryEnabled = () => {\r\n    const error = getError();\r\n    if (error) {\r\n      return false;\r\n    }\r\n    if (isApproving) {\r\n      return false;\r\n    }\r\n    if (isStaking) {\r\n      return false;\r\n    }\r\n    return true;\r\n  };\r\n\r\n  const getPrimaryText = () => {\r\n    const error = getError();\r\n    if (error) {\r\n      return error;\r\n    }\r\n    if (isApproving) {\r\n      return `Approving ${stakingTokenSymbol}...`;\r\n    }\r\n    if (needApproval) {\r\n      return `Approve ${stakingTokenSymbol}`;\r\n    }\r\n    if (isStaking) {\r\n      return \"Staking...\";\r\n    }\r\n    return \"Stake\";\r\n  };\r\n\r\n  return (\r\n    <div className=\"StakeModal\">\r\n      <Modal isVisible={isVisible} setIsVisible={setIsVisible} label={title}>\r\n        <div className=\"Exchange-swap-section\">\r\n          <div className=\"Exchange-swap-section-top\">\r\n            <div className=\"muted\">\r\n              <div className=\"Exchange-swap-usd\">Stake</div>\r\n            </div>\r\n            <div className=\"muted align-right clickable\" onClick={() => setValue(formatAmountFree(maxAmount, 18, 18))}>\r\n              Max: {formatAmount(maxAmount, 18, 4, true)}\r\n            </div>\r\n          </div>\r\n          <div className=\"Exchange-swap-section-bottom\">\r\n            <div>\r\n              <input\r\n                type=\"number\"\r\n                placeholder=\"0.0\"\r\n                className=\"Exchange-swap-input\"\r\n                value={value}\r\n                onChange={(e) => setValue(e.target.value)}\r\n              />\r\n            </div>\r\n            <div className=\"PositionEditor-token-symbol\">{stakingTokenSymbol}</div>\r\n          </div>\r\n        </div>\r\n        <div className=\"Exchange-swap-button-container\">\r\n          <button className=\"App-cta Exchange-swap-button\" onClick={onClickPrimary} disabled={!isPrimaryEnabled()}>\r\n            {getPrimaryText()}\r\n          </button>\r\n        </div>\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction UnstakeModal(props) {\r\n  const { isVisible, setIsVisible, title, maxAmount, value, setValue, library, stakingTokenSymbol, farmAddress } =\r\n    props;\r\n  const [isUnstaking, setIsUnstaking] = useState(false);\r\n\r\n  let amount = parseValue(value, 18);\r\n\r\n  const getError = () => {\r\n    if (!amount) {\r\n      return \"Enter an amount\";\r\n    }\r\n    if (amount.gt(maxAmount)) {\r\n      return \"Max amount exceeded\";\r\n    }\r\n  };\r\n\r\n  const onClickPrimary = () => {\r\n    setIsUnstaking(true);\r\n    const contract = new ethers.Contract(farmAddress, YieldFarm.abi, library.getSigner());\r\n    contract\r\n      .unstake(amount)\r\n      .then(async (res) => {\r\n        const txUrl = getExplorerUrl(CHAIN_ID) + \"tx/\" + res.hash;\r\n        helperToast.success(\r\n          <div>\r\n            Unstake submitted!{\" \"}\r\n            <a href={txUrl} target=\"_blank\" rel=\"noopener noreferrer\">\r\n              View status.\r\n            </a>\r\n            <br />\r\n          </div>\r\n        );\r\n        setIsVisible(false);\r\n      })\r\n      .catch((e) => {\r\n        console.error(e);\r\n        helperToast.error(\"Unstake failed\");\r\n      })\r\n      .finally(() => {\r\n        setIsUnstaking(false);\r\n      });\r\n  };\r\n\r\n  const isPrimaryEnabled = () => {\r\n    const error = getError();\r\n    if (error) {\r\n      return false;\r\n    }\r\n    if (isUnstaking) {\r\n      return false;\r\n    }\r\n    return true;\r\n  };\r\n\r\n  const getPrimaryText = () => {\r\n    const error = getError();\r\n    if (error) {\r\n      return error;\r\n    }\r\n    if (isUnstaking) {\r\n      return \"Unstaking...\";\r\n    }\r\n    return \"Unstake\";\r\n  };\r\n\r\n  return (\r\n    <div className=\"StakeModal\">\r\n      <Modal isVisible={isVisible} setIsVisible={setIsVisible} label={title}>\r\n        <div className=\"Exchange-swap-section\">\r\n          <div className=\"Exchange-swap-section-top\">\r\n            <div className=\"muted\">\r\n              <div className=\"Exchange-swap-usd\">Unstake</div>\r\n            </div>\r\n            <div className=\"muted align-right clickable\" onClick={() => setValue(formatAmountFree(maxAmount, 18, 18))}>\r\n              Max: {formatAmount(maxAmount, 18, 4, true)}\r\n            </div>\r\n          </div>\r\n          <div className=\"Exchange-swap-section-bottom\">\r\n            <div>\r\n              <input\r\n                type=\"number\"\r\n                placeholder=\"0.0\"\r\n                className=\"Exchange-swap-input\"\r\n                value={value}\r\n                onChange={(e) => setValue(e.target.value)}\r\n              />\r\n            </div>\r\n            <div className=\"PositionEditor-token-symbol\">{stakingTokenSymbol}</div>\r\n          </div>\r\n        </div>\r\n        <div className=\"Exchange-swap-button-container\">\r\n          <button className=\"App-cta Exchange-swap-button\" onClick={onClickPrimary} disabled={!isPrimaryEnabled()}>\r\n            {getPrimaryText()}\r\n          </button>\r\n        </div>\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function StakeV1() {\r\n  const { chainId } = useChainId();\r\n  const [isStakeModalVisible, setIsStakeModalVisible] = useState(false);\r\n  const [stakeModalTitle, setStakeModalTitle] = useState(\"\");\r\n  const [stakeModalMaxAmount, setStakeModalMaxAmount] = useState(undefined);\r\n  const [stakeValue, setStakeValue] = useState(\"\");\r\n  const [stakingTokenAddress, setStakingTokenAddress] = useState(\"\");\r\n  const [stakingFarmAddress, setStakingFarmAddress] = useState(\"\");\r\n\r\n  const [isUnstakeModalVisible, setIsUnstakeModalVisible] = useState(false);\r\n  const [unstakeModalTitle, setUnstakeModalTitle] = useState(\"\");\r\n  const [unstakeModalMaxAmount, setUnstakeModalMaxAmount] = useState(undefined);\r\n  const [unstakeValue, setUnstakeValue] = useState(\"\");\r\n  const [unstakingFarmAddress, setUnstakingFarmAddress] = useState(\"\");\r\n\r\n  const { activate, active, account, library } = useWeb3React();\r\n  const connectWallet = getInjectedHandler(activate);\r\n\r\n  const readerAddress = getContract(CHAIN_ID, \"Reader\");\r\n  const ammFactoryAddressV2 = getContract(CHAIN_ID, \"AmmFactoryV2\");\r\n  const usdgAddress = getContract(CHAIN_ID, \"USDG\");\r\n  const gmtAddress = getContract(CHAIN_ID, \"GMT\");\r\n  const xgmtAddress = getContract(CHAIN_ID, \"XGMT\");\r\n  const autoAddress = getContract(CHAIN_ID, \"AUTO\");\r\n  const nativeTokenAddress = getContract(CHAIN_ID, \"NATIVE_TOKEN\");\r\n  const busdAddress = getTokenBySymbol(CHAIN_ID, \"BUSD\").address;\r\n\r\n  const gmtUsdgPairAddress = getContract(CHAIN_ID, \"GMT_USDG_PAIR\");\r\n  const xgmtUsdgPairAddress = getContract(CHAIN_ID, \"XGMT_USDG_PAIR\");\r\n  const autoUsdgPairAddress = getContract(CHAIN_ID, \"AUTO_USDG_PAIR\");\r\n  const gmtUsdgFarmAddress = getContract(CHAIN_ID, \"GMT_USDG_FARM\");\r\n  const xgmtUsdgFarmAddress = getContract(CHAIN_ID, \"XGMT_USDG_FARM\");\r\n  const autoUsdgFarmAddress = getContract(CHAIN_ID, \"AUTO_USDG_FARM\");\r\n\r\n  const usdgYieldTracker = getContract(CHAIN_ID, \"USDG_YIELD_TRACKER\");\r\n  const xgmtYieldTracker = getContract(CHAIN_ID, \"XGMT_YIELD_TRACKER\");\r\n  const gmtUsdgFarmTrackerXgmt = getContract(CHAIN_ID, \"GMT_USDG_FARM_TRACKER_XGMT\");\r\n  const gmtUsdgFarmTrackerNative = getContract(CHAIN_ID, \"GMT_USDG_FARM_TRACKER_NATIVE\");\r\n  const xgmtUsdgFarmTrackerXgmt = getContract(CHAIN_ID, \"XGMT_USDG_FARM_TRACKER_XGMT\");\r\n  const xgmtUsdgFarmTrackerNative = getContract(CHAIN_ID, \"XGMT_USDG_FARM_TRACKER_NATIVE\");\r\n  const autoUsdgFarmTrackerXgmt = getContract(CHAIN_ID, \"AUTO_USDG_FARM_TRACKER_XGMT\");\r\n  const autoUsdgFarmTrackerNative = getContract(CHAIN_ID, \"AUTO_USDG_FARM_TRACKER_NATIVE\");\r\n\r\n  const tokens = [\r\n    usdgAddress,\r\n    gmtAddress,\r\n    xgmtAddress,\r\n    gmtUsdgPairAddress,\r\n    xgmtUsdgPairAddress,\r\n    gmtUsdgFarmAddress,\r\n    xgmtUsdgFarmAddress,\r\n    autoUsdgPairAddress,\r\n    autoUsdgFarmAddress,\r\n  ];\r\n\r\n  const yieldTrackers = [\r\n    usdgYieldTracker,\r\n    xgmtYieldTracker,\r\n    gmtUsdgFarmTrackerXgmt,\r\n    gmtUsdgFarmTrackerNative,\r\n    xgmtUsdgFarmTrackerXgmt,\r\n    xgmtUsdgFarmTrackerNative,\r\n    autoUsdgFarmTrackerXgmt,\r\n    autoUsdgFarmTrackerNative,\r\n  ];\r\n\r\n  const pairTokens = [\r\n    gmtAddress,\r\n    usdgAddress,\r\n    xgmtAddress,\r\n    usdgAddress,\r\n    nativeTokenAddress,\r\n    busdAddress,\r\n    autoAddress,\r\n    usdgAddress,\r\n  ];\r\n\r\n  const yieldTokens = [usdgAddress, xgmtAddress];\r\n\r\n  const { data: xgmtSupply, mutate: updateXgmtSupply } = useSWR(\r\n    [active, chainId, readerAddress, \"getTokenSupply\", xgmtAddress],\r\n    {\r\n      fetcher: fetcher(library, Reader, [XGMT_EXCLUDED_ACCOUNTS]),\r\n    }\r\n  );\r\n\r\n  const { data: balances, mutate: updateBalances } = useSWR(\r\n    [\"Stake:balances\", chainId, readerAddress, \"getTokenBalancesWithSupplies\", account || AddressZero],\r\n    {\r\n      fetcher: fetcher(library, Reader, [tokens]),\r\n    }\r\n  );\r\n\r\n  const { data: stakingInfo, mutate: updateStakingInfo } = useSWR(\r\n    [active, chainId, readerAddress, \"getStakingInfo\", account || AddressZero],\r\n    {\r\n      fetcher: fetcher(library, Reader, [yieldTrackers]),\r\n    }\r\n  );\r\n\r\n  const { data: totalStakedInfo, mutate: updateTotalStakedInfo } = useSWR(\r\n    [active, chainId, readerAddress, \"getTotalStaked\"],\r\n    {\r\n      fetcher: fetcher(library, Reader, [yieldTokens]),\r\n    }\r\n  );\r\n\r\n  const { data: pairInfo, mutate: updatePairInfo } = useSWR(\r\n    [active, chainId, readerAddress, \"getPairInfo\", ammFactoryAddressV2],\r\n    {\r\n      fetcher: fetcher(library, Reader, [pairTokens]),\r\n    }\r\n  );\r\n\r\n  const { balanceData, supplyData } = getBalanceAndSupplyData(balances);\r\n  const stakingData = getStakingData(stakingInfo);\r\n  const pairData = getPairData(pairInfo);\r\n  const totalStakedData = getTotalStakedData(totalStakedInfo);\r\n\r\n  const processedData = getProcessedData(balanceData, supplyData, stakingData, totalStakedData, pairData, xgmtSupply);\r\n\r\n  const buyXgmtUrl = `https://exchange.pancakeswap.finance/#/swap?outputCurrency=${xgmtAddress}&inputCurrency=${usdgAddress}`;\r\n  const buyGmtUrl = `https://exchange.pancakeswap.finance/#/swap?outputCurrency=${gmtAddress}&inputCurrency=${usdgAddress}`;\r\n\r\n  const addGmtUsdgLpUrl = `https://exchange.pancakeswap.finance/#/add/${gmtAddress}/${usdgAddress}`;\r\n  const addXgmtUsdgLpUrl = `https://exchange.pancakeswap.finance/#/add/${xgmtAddress}/${usdgAddress}`;\r\n\r\n  const buyAutoUrl = `https://exchange.pancakeswap.finance/#/swap?outputCurrency=${autoAddress}&inputCurrency=${nativeTokenAddress}`;\r\n  const addAutoUsdgLpUrl = `https://exchange.pancakeswap.finance/#/add/${autoAddress}/${usdgAddress}`;\r\n\r\n  useEffect(() => {\r\n    if (active) {\r\n      library.on(\"block\", () => {\r\n        updateXgmtSupply(undefined, true);\r\n        updateBalances(undefined, true);\r\n        updateStakingInfo(undefined, true);\r\n        updateTotalStakedInfo(undefined, true);\r\n        updatePairInfo(undefined, true);\r\n      });\r\n      return () => {\r\n        library.removeAllListeners(\"block\");\r\n      };\r\n    }\r\n  }, [active, library, updateXgmtSupply, updateBalances, updateStakingInfo, updateTotalStakedInfo, updatePairInfo]);\r\n\r\n  const claim = (farmAddress, rewards) => {\r\n    if (!active || !account) {\r\n      helperToast.error(\"Wallet not yet connected\");\r\n      return;\r\n    }\r\n    if (chainId !== CHAIN_ID) {\r\n      helperToast.error(\"Incorrect Network\");\r\n      return;\r\n    }\r\n    if (!rewards || rewards.eq(0)) {\r\n      helperToast.error(\"No rewards to claim yet\");\r\n      return;\r\n    }\r\n\r\n    const contract = new ethers.Contract(farmAddress, YieldToken.abi, library.getSigner());\r\n    contract\r\n      .claim(account)\r\n      .then(async (res) => {\r\n        const txUrl = getExplorerUrl(CHAIN_ID) + \"tx/\" + res.hash;\r\n        helperToast.success(\r\n          <div>\r\n            Claim submitted!{\" \"}\r\n            <a href={txUrl} target=\"_blank\" rel=\"noopener noreferrer\">\r\n              View status.\r\n            </a>\r\n            <br />\r\n          </div>\r\n        );\r\n      })\r\n      .catch((e) => {\r\n        console.error(e);\r\n        helperToast.error(\"Claim failed\");\r\n      });\r\n  };\r\n\r\n  const showUnstakeGmtUsdgModal = () => {\r\n    setIsUnstakeModalVisible(true);\r\n    setUnstakeModalTitle(\"Unstake GMT-USDG\");\r\n    setUnstakeModalMaxAmount(processedData.gmtUsdgFarmBalance);\r\n    setUnstakeValue(\"\");\r\n    setUnstakingFarmAddress(gmtUsdgFarmAddress);\r\n  };\r\n\r\n  const showUnstakeXgmtUsdgModal = () => {\r\n    setIsUnstakeModalVisible(true);\r\n    setUnstakeModalTitle(\"Unstake xGMT-USDG\");\r\n    setUnstakeModalMaxAmount(processedData.xgmtUsdgFarmBalance);\r\n    setUnstakeValue(\"\");\r\n    setUnstakingFarmAddress(xgmtUsdgFarmAddress);\r\n  };\r\n\r\n  const showStakeAutoUsdgModal = () => {\r\n    setIsStakeModalVisible(true);\r\n    setStakeModalTitle(\"Stake AUTO-USDG\");\r\n    setStakeModalMaxAmount(processedData.autoUsdgBalance);\r\n    setStakeValue(\"\");\r\n    setStakingTokenAddress(autoUsdgPairAddress);\r\n    setStakingFarmAddress(autoUsdgFarmAddress);\r\n  };\r\n\r\n  const showUnstakeAutoUsdgModal = () => {\r\n    setIsUnstakeModalVisible(true);\r\n    setUnstakeModalTitle(\"Unstake AUTO-USDG\");\r\n    setUnstakeModalMaxAmount(processedData.autoUsdgFarmBalance);\r\n    setUnstakeValue(\"\");\r\n    setUnstakingFarmAddress(autoUsdgFarmAddress);\r\n  };\r\n\r\n  const hasFeeDistribution = true;\r\n\r\n  return (\r\n    <div className=\"Stake Page page-layout\">\r\n      <StakeModal\r\n        isVisible={isStakeModalVisible}\r\n        setIsVisible={setIsStakeModalVisible}\r\n        title={stakeModalTitle}\r\n        maxAmount={stakeModalMaxAmount}\r\n        value={stakeValue}\r\n        setValue={setStakeValue}\r\n        active={active}\r\n        account={account}\r\n        library={library}\r\n        stakingTokenAddress={stakingTokenAddress}\r\n        farmAddress={stakingFarmAddress}\r\n      />\r\n      <UnstakeModal\r\n        isVisible={isUnstakeModalVisible}\r\n        setIsVisible={setIsUnstakeModalVisible}\r\n        title={unstakeModalTitle}\r\n        maxAmount={unstakeModalMaxAmount}\r\n        value={unstakeValue}\r\n        setValue={setUnstakeValue}\r\n        active={active}\r\n        account={account}\r\n        library={library}\r\n        farmAddress={unstakingFarmAddress}\r\n      />\r\n      <div className=\"Stake-title App-hero\">\r\n        <div className=\"Stake-title-primary App-hero-primary\">\r\n          ${formatKeyAmount(processedData, \"totalStakedUsd\", 30, 0, true)}\r\n        </div>\r\n        <div className=\"Stake-title-secondary\">Total Assets Staked</div>\r\n      </div>\r\n      <div className=\"Stake-note\">\r\n        The Gambit protocol is in beta, please read the&nbsp;\r\n        <a href=\"https://gambit.gitbook.io/gambit/staking\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n          staking details\r\n        </a>\r\n        &nbsp; before participating.\r\n      </div>\r\n      <div className=\"App-warning Stake-warning\">\r\n        The <Link to=\"/migrate\">GMX migration</Link> is in progress, please migrate your GMT, xGMT, GMT-USDG and\r\n        xGMT-USDG tokens.\r\n        <br />\r\n        USDG tokens will continue to function as before and do not need to be migrated.\r\n      </div>\r\n      <div className=\"Stake-cards\">\r\n        <div className=\"App-card primary\">\r\n          <div className=\"Stake-card-title App-card-title\">USDG</div>\r\n          <div className=\"Stake-card-bottom App-card-content\">\r\n            <div className=\"Stake-info App-card-row\">\r\n              <div className=\"label\">APR</div>\r\n              <div>\r\n                {!hasFeeDistribution && \"TBC\"}\r\n                {hasFeeDistribution && `${formatKeyAmount(processedData, \"usdgApr\", 2, 2, true)}%`}\r\n              </div>\r\n            </div>\r\n            <div className=\"Stake-info App-card-row\">\r\n              <div className=\"label\">Staked</div>\r\n              <div>\r\n                {formatKeyAmount(processedData, \"usdgBalance\", 18, 2, true)} ($\r\n                {formatKeyAmount(processedData, \"usdgBalance\", 18, 2, true)})\r\n              </div>\r\n            </div>\r\n            <div className=\"Stake-info App-card-row\">\r\n              <div className=\"label\">Wallet</div>\r\n              <div>\r\n                {formatKeyAmount(processedData, \"usdgBalance\", 18, 2, true)} ($\r\n                {formatKeyAmount(processedData, \"usdgBalance\", 18, 2, true)})\r\n              </div>\r\n            </div>\r\n            <div className=\"App-card-row\">\r\n              <div className=\"label\">Rewards</div>\r\n              <div>\r\n                {!hasFeeDistribution && \"TBC\"}\r\n                {hasFeeDistribution && `${formatKeyAmount(processedData, \"usdgRewards\", 18, 8, true)} WBNB`}\r\n              </div>\r\n            </div>\r\n            <div className=\"Stake-info App-card-row\">\r\n              <div className=\"label\">Total Staked</div>\r\n              <div>\r\n                {formatKeyAmount(processedData, \"usdgTotalStaked\", 18, 2, true)} ($\r\n                {formatKeyAmount(processedData, \"usdgTotalStakedUsd\", 30, 2, true)})\r\n              </div>\r\n            </div>\r\n            <div className=\"Stake-info App-card-row\">\r\n              <div className=\"label\">Total Supply</div>\r\n              <div>\r\n                {formatKeyAmount(processedData, \"usdgSupply\", 18, 2, true)} ($\r\n                {formatKeyAmount(processedData, \"usdgSupplyUsd\", 30, 2, true)})\r\n              </div>\r\n            </div>\r\n            <div className=\"App-card-options\">\r\n              <Link className=\"App-button-option App-card-option\" to=\"/trade\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n                Get USDG\r\n              </Link>\r\n              {active && (\r\n                <button\r\n                  className=\"App-button-option App-card-option\"\r\n                  onClick={() => claim(usdgAddress, processedData.usdgRewards)}\r\n                >\r\n                  Claim\r\n                </button>\r\n              )}\r\n              {!active && (\r\n                <button className=\"App-button-option App-card-option\" onClick={connectWallet}>\r\n                  Connect Wallet\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"App-card\">\r\n          <div className=\"Stake-card-title App-card-title\">xGMT</div>\r\n          <div className=\"Stake-card-bottom App-card-content\">\r\n            <div className=\"Stake-info App-card-row\">\r\n              <div className=\"label\">APR</div>\r\n              <div>\r\n                0.00% (<Link to=\"/migrate\">Migrate</Link>)\r\n              </div>\r\n            </div>\r\n            <div className=\"Stake-info App-card-row\">\r\n              <div className=\"label\">Staked</div>\r\n              <div>\r\n                {formatKeyAmount(processedData, \"xgmtBalance\", 18, 2, true)} ($\r\n                {formatKeyAmount(processedData, \"xgmtBalanceUsd\", USD_DECIMALS, 2, true)})\r\n              </div>\r\n            </div>\r\n            <div className=\"Stake-info App-card-row\">\r\n              <div className=\"label\">Wallet</div>\r\n              <div>\r\n                {formatKeyAmount(processedData, \"xgmtBalance\", 18, 2, true)} ($\r\n                {formatKeyAmount(processedData, \"xgmtBalanceUsd\", USD_DECIMALS, 2, true)})\r\n              </div>\r\n            </div>\r\n            <div className=\"App-card-row\">\r\n              <div className=\"label\">Rewards</div>\r\n              <div>\r\n                {!hasFeeDistribution && \"TBC\"}\r\n                {hasFeeDistribution && `${formatKeyAmount(processedData, \"xgmtRewards\", 18, 8, true)} WBNB`}\r\n              </div>\r\n            </div>\r\n            <div className=\"Stake-info App-card-row\">\r\n              <div className=\"label\">Total Staked</div>\r\n              <div>\r\n                {formatKeyAmount(processedData, \"xgmtTotalStaked\", 18, 2, true)} ($\r\n                {formatKeyAmount(processedData, \"xgmtTotalStakedUsd\", USD_DECIMALS, 2, true)})\r\n              </div>\r\n            </div>\r\n            <div className=\"Stake-info App-card-row\">\r\n              <div className=\"label\">Total Supply</div>\r\n              <div>\r\n                {formatKeyAmount(processedData, \"xgmtSupply\", 18, 2, true)} ($\r\n                {formatKeyAmount(processedData, \"xgmtSupplyUsd\", USD_DECIMALS, 2, true)})\r\n              </div>\r\n            </div>\r\n            <div className=\"App-card-options\">\r\n              <a\r\n                className=\"App-button-option App-card-option\"\r\n                href={buyXgmtUrl}\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n              >\r\n                Get xGMT\r\n              </a>\r\n              {active && (\r\n                <button\r\n                  className=\"App-button-option App-card-option\"\r\n                  onClick={() => claim(xgmtAddress, processedData.xgmtRewards)}\r\n                >\r\n                  Claim\r\n                </button>\r\n              )}\r\n              {!active && (\r\n                <button className=\"App-button-option App-card-option\" onClick={connectWallet}>\r\n                  Connect Wallet\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"App-card\">\r\n          <div className=\"Stake-card-title App-card-title\">GMT-USDG LP</div>\r\n          <div className=\"Stake-card-bottom App-card-content\">\r\n            <div className=\"Stake-info App-card-row\">\r\n              <div className=\"label\">APR</div>\r\n              <div>\r\n                0.00% (<Link to=\"/migrate\">Migrate</Link>)\r\n              </div>\r\n            </div>\r\n            <div className=\"Stake-info App-card-row\">\r\n              <div className=\"label\">Staked</div>\r\n              <div>\r\n                {formatKeyAmount(processedData, \"gmtUsdgStaked\", 18, 4, true)} ($\r\n                {formatKeyAmount(processedData, \"gmtUsdgStakedUsd\", 30, 2, true)})\r\n              </div>\r\n            </div>\r\n            <div className=\"Stake-info App-card-row\">\r\n              <div className=\"label\">Wallet</div>\r\n              <div>\r\n                {formatKeyAmount(processedData, \"gmtUsdgBalance\", 18, 2, true)} ($\r\n                {formatKeyAmount(processedData, \"gmtUsdgBalanceUsd\", USD_DECIMALS, 2, true)})\r\n              </div>\r\n            </div>\r\n            <div className=\"App-card-row\">\r\n              <div className=\"label\">Rewards</div>\r\n              <div>\r\n                {hasFeeDistribution &&\r\n                  processedData.gmtUsdgNativeRewards &&\r\n                  processedData.gmtUsdgNativeRewards.gt(0) &&\r\n                  `${formatKeyAmount(processedData, \"gmtUsdgNativeRewards\", 18, 8, true)} WBNB, `}\r\n                {formatKeyAmount(processedData, \"gmtUsdgXgmtRewards\", 18, 4, true)} xGMT\r\n              </div>\r\n            </div>\r\n            <div className=\"Stake-info App-card-row\">\r\n              <div className=\"label\">Total Staked</div>\r\n              <div>\r\n                {formatKeyAmount(processedData, \"gmtUsdgTotalStaked\", 18, 4, true)} ($\r\n                {formatKeyAmount(processedData, \"gmtUsdgTotalStakedUsd\", 30, 2, true)})\r\n              </div>\r\n            </div>\r\n            <div className=\"App-card-options\">\r\n              <a\r\n                className=\"App-button-option App-card-option\"\r\n                href={buyGmtUrl}\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n              >\r\n                Get GMT\r\n              </a>\r\n              <a\r\n                className=\"App-button-option App-card-option\"\r\n                href={addGmtUsdgLpUrl}\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n              >\r\n                Create\r\n              </a>\r\n              {active && (\r\n                <button className=\"App-button-option App-card-option\" onClick={() => showUnstakeGmtUsdgModal()}>\r\n                  Unstake\r\n                </button>\r\n              )}\r\n              {active && (\r\n                <button\r\n                  className=\"App-button-option App-card-option\"\r\n                  onClick={() => claim(gmtUsdgFarmAddress, processedData.gmtUsdgTotalRewards)}\r\n                >\r\n                  Claim\r\n                </button>\r\n              )}\r\n              {!active && (\r\n                <button className=\"App-button-option App-card-option\" onClick={connectWallet}>\r\n                  Connect Wallet\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"App-card\">\r\n          <div className=\"Stake-card-title App-card-title\">xGMT-USDG LP</div>\r\n          <div className=\"Stake-card-bottom App-card-content\">\r\n            <div className=\"Stake-info App-card-row\">\r\n              <div className=\"label\">APR</div>\r\n              <div>\r\n                0.00% (<Link to=\"/migrate\">Migrate</Link>)\r\n              </div>\r\n            </div>\r\n            <div className=\"Stake-info App-card-row\">\r\n              <div className=\"label\">Staked</div>\r\n              <div>\r\n                {formatKeyAmount(processedData, \"xgmtUsdgStaked\", 18, 4, true)} ($\r\n                {formatKeyAmount(processedData, \"xgmtUsdgStakedUsd\", 30, 2, true)})\r\n              </div>\r\n            </div>\r\n            <div className=\"Stake-info App-card-row\">\r\n              <div className=\"label\">Wallet</div>\r\n              <div>\r\n                {formatKeyAmount(processedData, \"xgmtUsdgBalance\", 18, 2, true)} ($\r\n                {formatKeyAmount(processedData, \"xgmtUsdgBalanceUsd\", USD_DECIMALS, 2, true)})\r\n              </div>\r\n            </div>\r\n            <div className=\"App-card-row\">\r\n              <div className=\"label\">Rewards</div>\r\n              <div>\r\n                {hasFeeDistribution &&\r\n                  processedData.xgmtUsdgNativeRewards &&\r\n                  processedData.xgmtUsdgNativeRewards.gt(0) &&\r\n                  `${formatKeyAmount(processedData, \"xgmtUsdgNativeRewards\", 18, 8, true)} WBNB, `}\r\n                {formatKeyAmount(processedData, \"xgmtUsdgXgmtRewards\", 18, 4, true)} xGMT\r\n              </div>\r\n            </div>\r\n            <div className=\"Stake-info App-card-row\">\r\n              <div className=\"label\">Total Staked</div>\r\n              <div>\r\n                {formatKeyAmount(processedData, \"xgmtUsdgTotalStaked\", 18, 4, true)} ($\r\n                {formatKeyAmount(processedData, \"xgmtUsdgTotalStakedUsd\", 30, 2, true)})\r\n              </div>\r\n            </div>\r\n            <div className=\"App-card-options\">\r\n              <a\r\n                className=\"App-button-option App-card-option\"\r\n                href={buyXgmtUrl}\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n              >\r\n                Get xGMT\r\n              </a>\r\n              <a\r\n                className=\"App-button-option App-card-option\"\r\n                href={addXgmtUsdgLpUrl}\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n              >\r\n                Create\r\n              </a>\r\n              {active && (\r\n                <button className=\"App-button-option App-card-option\" onClick={() => showUnstakeXgmtUsdgModal()}>\r\n                  Unstake\r\n                </button>\r\n              )}\r\n              {active && (\r\n                <button\r\n                  className=\"App-button-option App-card-option\"\r\n                  onClick={() => claim(xgmtUsdgFarmAddress, processedData.xgmtUsdgTotalRewards)}\r\n                >\r\n                  Claim\r\n                </button>\r\n              )}\r\n              {!active && (\r\n                <button className=\"App-button-option App-card-option\" onClick={connectWallet}>\r\n                  Connect Wallet\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"App-card\">\r\n          <div className=\"Stake-card-title App-card-title\">AUTO-USDG LP</div>\r\n          <div className=\"Stake-card-bottom App-card-content\">\r\n            <div className=\"Stake-info App-card-row\">\r\n              <div className=\"label\">APR</div>\r\n              <div>{formatKeyAmount(processedData, \"autoUsdgApr\", 2, 2, true)}%</div>\r\n            </div>\r\n            <div className=\"Stake-info App-card-row\">\r\n              <div className=\"label\">Staked</div>\r\n              <div>\r\n                {formatKeyAmount(processedData, \"autoUsdgStaked\", 18, 4, true)} ($\r\n                {formatKeyAmount(processedData, \"autoUsdgStakedUsd\", 30, 2, true)})\r\n              </div>\r\n            </div>\r\n            <div className=\"Stake-info App-card-row\">\r\n              <div className=\"label\">Wallet</div>\r\n              <div>\r\n                {formatKeyAmount(processedData, \"autoUsdgBalance\", 18, 2, true)} ($\r\n                {formatKeyAmount(processedData, \"autoUsdgBalanceUsd\", USD_DECIMALS, 2, true)})\r\n              </div>\r\n            </div>\r\n            <div className=\"App-card-row\">\r\n              <div className=\"label\">Rewards</div>\r\n              <div>{formatKeyAmount(processedData, \"autoUsdgXgmtRewards\", 18, 4, true)} xGMT</div>\r\n            </div>\r\n            <div className=\"Stake-info App-card-row\">\r\n              <div className=\"label\">Total Staked</div>\r\n              <div>\r\n                {formatKeyAmount(processedData, \"autoUsdgTotalStaked\", 18, 4, true)} ($\r\n                {formatKeyAmount(processedData, \"autoUsdgTotalStakedUsd\", 30, 2, true)})\r\n              </div>\r\n            </div>\r\n            <div className=\"App-card-options\">\r\n              <a\r\n                className=\"App-button-option App-card-option\"\r\n                href={buyAutoUrl}\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n              >\r\n                Get AUTO\r\n              </a>\r\n              <a\r\n                className=\"App-button-option App-card-option\"\r\n                href={addAutoUsdgLpUrl}\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n              >\r\n                Create\r\n              </a>\r\n              {active && (\r\n                <button className=\"App-button-option App-card-option\" onClick={() => showStakeAutoUsdgModal()}>\r\n                  Stake\r\n                </button>\r\n              )}\r\n              {active && (\r\n                <button className=\"App-button-option App-card-option\" onClick={() => showUnstakeAutoUsdgModal()}>\r\n                  Unstake\r\n                </button>\r\n              )}\r\n              {active && (\r\n                <button\r\n                  className=\"App-button-option App-card-option\"\r\n                  onClick={() => claim(autoUsdgFarmAddress, processedData.autoUsdgTotalRewards)}\r\n                >\r\n                  Claim\r\n                </button>\r\n              )}\r\n              {!active && (\r\n                <button className=\"App-button-option App-card-option\" onClick={connectWallet}>\r\n                  Connect Wallet\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nimport cx from \"classnames\";\r\n\r\nimport \"./Checkbox.css\";\r\nimport { ImCheckboxUnchecked, ImCheckboxChecked } from \"react-icons/im\";\r\n\r\nexport default function Checkbox(props) {\r\n  const { isChecked, setIsChecked, disabled, className } = props;\r\n\r\n  return (\r\n    <div\r\n      className={cx(\"Checkbox\", { disabled, selected: isChecked }, className)}\r\n      onClick={() => setIsChecked(!isChecked)}\r\n    >\r\n      <span className=\"Checkbox-icon-wrapper\">\r\n        {isChecked && <ImCheckboxChecked className=\"App-icon Checkbox-icon active\" />}\r\n        {!isChecked && <ImCheckboxUnchecked className=\"App-icon Checkbox-icon inactive\" />}\r\n      </span>\r\n      <span className=\"Checkbox-label\">{props.children}</span>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useCallback } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Trans, t } from \"@lingui/macro\";\nimport { useWeb3React } from \"@web3-react/core\";\n\nimport Modal from \"../../components/Modal/Modal\";\nimport Checkbox from \"../../components/Checkbox/Checkbox\";\nimport Tooltip from \"../../components/Tooltip/Tooltip\";\nimport Footer from \"../../components/Footer/Footer\";\n\nimport Vault from \"../../abis/Vault.json\";\nimport ReaderV2 from \"../../abis/Reader.json\";\nimport Vester from \"../../abis/Vester.json\";\nimport RewardRouter from \"../../abis/RewardRouter.json\";\nimport RewardReader from \"../../abis/RewardReader.json\";\nimport Token from \"../../abis/Token.json\";\nimport GlpManager from \"../../abis/GlpManager.json\";\n\nimport { ethers } from \"ethers\";\nimport {\n  helperToast,\n  bigNumberify,\n  fetcher,\n  formatAmount,\n  formatKeyAmount,\n  formatAmountFree,\n  getChainName,\n  expandDecimals,\n  parseValue,\n  approveTokens,\n  useLocalStorageSerializeKey,\n  useChainId,\n  GLP_DECIMALS,\n  USD_DECIMALS,\n  BASIS_POINTS_DIVISOR,\n  PLACEHOLDER_ACCOUNT,\n  getBalanceAndSupplyData,\n  getDepositBalanceData,\n  getVestingData,\n  getStakingData,\n  getProcessedData,\n  getPageTitle,\n} from \"../../lib/legacy\";\nimport {callContract, useLeveragePrice, useTotalGmxStaked} from \"../../domain/legacy\";\nimport { getConstant } from \"../../config/chains\";\n\nimport useSWR from \"swr\";\n\nimport { getContract } from \"../../config/Addresses\";\n\nimport \"./StakeV2.css\";\nimport SEO from \"../../components/Common/SEO\";\n\nconst { AddressZero } = ethers.constants;\n\nfunction StakeModal(props) {\n  const {\n    isVisible,\n    setIsVisible,\n    chainId,\n    title,\n    maxAmount,\n    value,\n    setValue,\n    active,\n    account,\n    library,\n    stakingTokenSymbol,\n    stakingTokenAddress,\n    farmAddress,\n    rewardRouterAddress,\n    stakeMethodName,\n    setPendingTxns,\n  } = props;\n  const [isStaking, setIsStaking] = useState(false);\n  const [isApproving, setIsApproving] = useState(false);\n\n  const { data: tokenAllowance } = useSWR(\n    active && stakingTokenAddress && [active, chainId, stakingTokenAddress, \"allowance\", account, farmAddress],\n    {\n      fetcher: fetcher(library, Token),\n    }\n  );\n\n  let amount = parseValue(value, 18);\n  const needApproval = farmAddress !== AddressZero && tokenAllowance && amount && amount.gt(tokenAllowance);\n\n  const getError = () => {\n    if (!amount || amount.eq(0)) {\n      return t`Enter an amount`;\n    }\n    if (maxAmount && amount.gt(maxAmount)) {\n      return t`Max amount exceeded`;\n    }\n  };\n\n  const onClickPrimary = () => {\n    if (needApproval) {\n      approveTokens({\n        setIsApproving,\n        library,\n        tokenAddress: stakingTokenAddress,\n        spender: farmAddress,\n        chainId,\n      });\n      return;\n    }\n\n    setIsStaking(true);\n    const contract = new ethers.Contract(rewardRouterAddress, RewardRouter.abi, library.getSigner());\n\n    callContract(chainId, contract, stakeMethodName, [amount], {\n      sentMsg: t`Stake submitted!`,\n      failMsg: t`Stake failed.`,\n      setPendingTxns,\n    })\n      .then(async (res) => {\n        setIsVisible(false);\n      })\n      .finally(() => {\n        setIsStaking(false);\n      });\n  };\n\n  const isPrimaryEnabled = () => {\n    const error = getError();\n    if (error) {\n      return false;\n    }\n    if (isApproving) {\n      return false;\n    }\n    if (isStaking) {\n      return false;\n    }\n    return true;\n  };\n\n  const getPrimaryText = () => {\n    const error = getError();\n    if (error) {\n      return error;\n    }\n    if (isApproving) {\n      return t`Approving ${stakingTokenSymbol}...`;\n    }\n    if (needApproval) {\n      return t`Approve ${stakingTokenSymbol}`;\n    }\n    if (isStaking) {\n      return t`Staking...`;\n    }\n    return t`Stake`;\n  };\n\n  return (\n    <div className=\"StakeModal\">\n      <Modal isVisible={isVisible} setIsVisible={setIsVisible} label={title}>\n        <div className=\"Exchange-swap-section\">\n          <div className=\"Exchange-swap-section-top\">\n            <div className=\"muted\">\n              <div className=\"Exchange-swap-usd\">\n                <Trans>Stake</Trans>\n              </div>\n            </div>\n            <div className=\"muted align-right clickable\" onClick={() => setValue(formatAmountFree(maxAmount, 18, 18))}>\n              Max: {formatAmount(maxAmount, 18, 4, true)}\n            </div>\n          </div>\n          <div className=\"Exchange-swap-section-bottom\">\n            <div>\n              <input\n                type=\"number\"\n                placeholder=\"0.0\"\n                className=\"Exchange-swap-input\"\n                value={value}\n                onChange={(e) => setValue(e.target.value)}\n              />\n            </div>\n            <div className=\"PositionEditor-token-symbol\">{stakingTokenSymbol}</div>\n          </div>\n        </div>\n        <div className=\"Exchange-swap-button-container\">\n          <button className=\"App-cta Exchange-swap-button\" onClick={onClickPrimary} disabled={!isPrimaryEnabled()}>\n            {getPrimaryText()}\n          </button>\n        </div>\n      </Modal>\n    </div>\n  );\n}\n\nfunction UnstakeModal(props) {\n  const {\n    isVisible,\n    setIsVisible,\n    chainId,\n    title,\n    maxAmount,\n    value,\n    setValue,\n    library,\n    unstakingTokenSymbol,\n    rewardRouterAddress,\n    unstakeMethodName,\n    multiplierPointsAmount,\n    reservedAmount,\n    bonusGmxInFeeGmx,\n    setPendingTxns,\n  } = props;\n  const [isUnstaking, setIsUnstaking] = useState(false);\n\n  let amount = parseValue(value, 18);\n  let burnAmount;\n\n  if (\n    multiplierPointsAmount &&\n    multiplierPointsAmount.gt(0) &&\n    amount &&\n    amount.gt(0) &&\n    bonusGmxInFeeGmx &&\n    bonusGmxInFeeGmx.gt(0)\n  ) {\n    burnAmount = multiplierPointsAmount.mul(amount).div(bonusGmxInFeeGmx);\n  }\n\n  const shouldShowReductionAmount = true;\n  let rewardReductionBasisPoints;\n  if (burnAmount && bonusGmxInFeeGmx) {\n    rewardReductionBasisPoints = burnAmount.mul(BASIS_POINTS_DIVISOR).div(bonusGmxInFeeGmx);\n  }\n\n  const getError = () => {\n    if (!amount) {\n      return t`Enter an amount`;\n    }\n    if (amount.gt(maxAmount)) {\n      return t`Max amount exceeded`;\n    }\n  };\n\n  const onClickPrimary = () => {\n    setIsUnstaking(true);\n    const contract = new ethers.Contract(rewardRouterAddress, RewardRouter.abi, library.getSigner());\n    callContract(chainId, contract, unstakeMethodName, [amount], {\n      sentMsg: t`Unstake submitted!`,\n      failMsg: t`Unstake failed.`,\n      successMsg: t`Unstake completed!`,\n      setPendingTxns,\n    })\n      .then(async (res) => {\n        setIsVisible(false);\n      })\n      .finally(() => {\n        setIsUnstaking(false);\n      });\n  };\n\n  const isPrimaryEnabled = () => {\n    const error = getError();\n    if (error) {\n      return false;\n    }\n    if (isUnstaking) {\n      return false;\n    }\n    return true;\n  };\n\n  const getPrimaryText = () => {\n    const error = getError();\n    if (error) {\n      return error;\n    }\n    if (isUnstaking) {\n      return t`Unstaking...`;\n    }\n    return t`Unstake`;\n  };\n\n  return (\n    <div className=\"StakeModal\">\n      <Modal isVisible={isVisible} setIsVisible={setIsVisible} label={title}>\n        <div className=\"Exchange-swap-section\">\n          <div className=\"Exchange-swap-section-top\">\n            <div className=\"muted\">\n              <div className=\"Exchange-swap-usd\">\n                Unstake\n                <Trans>Unstake</Trans>\n              </div>\n            </div>\n            <div className=\"muted align-right clickable\" onClick={() => setValue(formatAmountFree(maxAmount, 18, 18))}>\n              <Trans>Max</Trans>: {formatAmount(maxAmount, 18, 4, true)}\n            </div>\n          </div>\n          <div className=\"Exchange-swap-section-bottom\">\n            <div>\n              <input\n                type=\"number\"\n                placeholder=\"0.0\"\n                className=\"Exchange-swap-input\"\n                value={value}\n                onChange={(e) => setValue(e.target.value)}\n              />\n            </div>\n            <div className=\"PositionEditor-token-symbol\">{unstakingTokenSymbol}</div>\n          </div>\n        </div>\n        {reservedAmount && reservedAmount.gt(0) && (\n          <div className=\"Modal-note\">\n            You have {formatAmount(reservedAmount, 18, 2, true)} tokens reserved for vesting.\n          </div>\n        )}\n        {burnAmount && burnAmount.gt(0) && rewardReductionBasisPoints && rewardReductionBasisPoints.gt(0) && (\n          <div className=\"Modal-note\">\n            Unstaking will burn&nbsp;\n            <a href=\"about:blank\" target=\"_blank\" rel=\"noopener noreferrer\">\n              {formatAmount(burnAmount, 18, 4, true)} Multiplier Points\n            </a>\n            .&nbsp;\n            {shouldShowReductionAmount && (\n              <span>Boost Percentage: -{formatAmount(rewardReductionBasisPoints, 2, 2)}%.</span>\n            )}\n          </div>\n        )}\n        <div className=\"Exchange-swap-button-container\">\n          <button className=\"App-cta Exchange-swap-button\" onClick={onClickPrimary} disabled={!isPrimaryEnabled()}>\n            {getPrimaryText()}\n          </button>\n        </div>\n      </Modal>\n    </div>\n  );\n}\n\nfunction VesterDepositModal(props) {\n  const {\n    isVisible,\n    setIsVisible,\n    chainId,\n    title,\n    maxAmount,\n    value,\n    setValue,\n    balance,\n    vestedAmount,\n    averageStakedAmount,\n    maxVestableAmount,\n    library,\n    stakeTokenLabel,\n    reserveAmount,\n    maxReserveAmount,\n    vesterAddress,\n    setPendingTxns,\n  } = props;\n  const [isDepositing, setIsDepositing] = useState(false);\n\n  let amount = parseValue(value, 18);\n\n  let nextReserveAmount = reserveAmount;\n\n  let nextDepositAmount = vestedAmount;\n  if (amount) {\n    nextDepositAmount = vestedAmount.add(amount);\n  }\n\n  let additionalReserveAmount = bigNumberify(0);\n  if (amount && averageStakedAmount && maxVestableAmount && maxVestableAmount.gt(0)) {\n    nextReserveAmount = nextDepositAmount.mul(averageStakedAmount).div(maxVestableAmount);\n    if (nextReserveAmount.gt(reserveAmount)) {\n      additionalReserveAmount = nextReserveAmount.sub(reserveAmount);\n    }\n  }\n\n  const getError = () => {\n    if (!amount || amount.eq(0)) {\n      return t`Enter an amount`;\n    }\n    if (maxAmount && amount.gt(maxAmount)) {\n      return t`Max amount exceeded`;\n    }\n    if (nextReserveAmount.gt(maxReserveAmount)) {\n      return t`Insufficient staked tokens`;\n    }\n  };\n\n  const onClickPrimary = () => {\n    setIsDepositing(true);\n    const contract = new ethers.Contract(vesterAddress, Vester.abi, library.getSigner());\n\n    callContract(chainId, contract, \"deposit\", [amount], {\n      sentMsg: t`Deposit submitted!`,\n      failMsg: t`Deposit failed!`,\n      successMsg: t`Deposited!`,\n      setPendingTxns,\n    })\n      .then(async (res) => {\n        setIsVisible(false);\n      })\n      .finally(() => {\n        setIsDepositing(false);\n      });\n  };\n\n  const isPrimaryEnabled = () => {\n    const error = getError();\n    if (error) {\n      return false;\n    }\n    if (isDepositing) {\n      return false;\n    }\n    return true;\n  };\n\n  const getPrimaryText = () => {\n    const error = getError();\n    if (error) {\n      return error;\n    }\n    if (isDepositing) {\n      return t`Depositing...`;\n    }\n    return t`Deposit`;\n  };\n\n  return (\n    <SEO title={getPageTitle(\"Earn\")}>\n      <div className=\"StakeModal\">\n        <Modal isVisible={isVisible} setIsVisible={setIsVisible} label={title} className=\"non-scrollable\">\n          <div className=\"Exchange-swap-section\">\n            <div className=\"Exchange-swap-section-top\">\n              <div className=\"muted\">\n                <div className=\"Exchange-swap-usd\">\n                  <Trans>Deposit</Trans>\n                </div>\n              </div>\n              <div\n                className=\"muted align-right clickable\"\n                onClick={() => setValue(formatAmountFree(maxAmount, 18, 18))}\n              >\n                <Trans>Max</Trans>: {formatAmount(maxAmount, 18, 4, true)}\n              </div>\n            </div>\n            <div className=\"Exchange-swap-section-bottom\">\n              <div>\n                <input\n                  type=\"number\"\n                  placeholder=\"0.0\"\n                  className=\"Exchange-swap-input\"\n                  value={value}\n                  onChange={(e) => setValue(e.target.value)}\n                />\n              </div>\n              <div className=\"PositionEditor-token-symbol\">esGMX</div>\n            </div>\n          </div>\n          <div className=\"VesterDepositModal-info-rows\">\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">Wallet</div>\n              <div className=\"align-right\">{formatAmount(balance, 18, 2, true)} esGMX</div>\n            </div>\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Vault Capacity</Trans>\n              </div>\n              <div className=\"align-right\">\n                <Tooltip\n                  handle={`${formatAmount(nextDepositAmount, 18, 2, true)} / ${formatAmount(\n                    maxVestableAmount,\n                    18,\n                    2,\n                    true\n                  )}`}\n                  position=\"right-bottom\"\n                  renderContent={() => {\n                    return (\n                      <Trans>\n                        Vault Capacity for your Account\n                        <br />\n                        <br />\n                        Deposited: {formatAmount(vestedAmount, 18, 2, true)} esGMX\n                        <br />\n                        Max Capacity: {formatAmount(maxVestableAmount, 18, 2, true)} esGMX\n                        <br />\n                      </Trans>\n                    );\n                  }}\n                />\n              </div>\n            </div>\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Reserve Amount</Trans>\n              </div>\n              <div className=\"align-right\">\n                <Tooltip\n                  handle={`${formatAmount(\n                    reserveAmount && reserveAmount.gte(additionalReserveAmount)\n                      ? reserveAmount\n                      : additionalReserveAmount,\n                    18,\n                    2,\n                    true\n                  )} / ${formatAmount(maxReserveAmount, 18, 2, true)}`}\n                  position=\"right-bottom\"\n                  renderContent={() => {\n                    return (\n                      <Trans>\n                        Current Reserved: {formatAmount(reserveAmount, 18, 2, true)}\n                        <br />\n                        Additional reserve required: {formatAmount(additionalReserveAmount, 18, 2, true)}\n                        <br />\n                        {amount && nextReserveAmount.gt(maxReserveAmount) && (\n                          <div>\n                            <br />\n                            You need a total of at least {formatAmount(nextReserveAmount, 18, 2, true)}{\" \"}\n                            {stakeTokenLabel} to vest {formatAmount(amount, 18, 2, true)} esGMX.\n                          </div>\n                        )}\n                      </Trans>\n                    );\n                  }}\n                />\n              </div>\n            </div>\n          </div>\n          <div className=\"Exchange-swap-button-container\">\n            <button className=\"App-cta Exchange-swap-button\" onClick={onClickPrimary} disabled={!isPrimaryEnabled()}>\n              {getPrimaryText()}\n            </button>\n          </div>\n        </Modal>\n      </div>\n    </SEO>\n  );\n}\n\nfunction VesterWithdrawModal(props) {\n  const { isVisible, setIsVisible, chainId, title, library, vesterAddress, setPendingTxns } = props;\n  const [isWithdrawing, setIsWithdrawing] = useState(false);\n\n  const onClickPrimary = () => {\n    setIsWithdrawing(true);\n    const contract = new ethers.Contract(vesterAddress, Vester.abi, library.getSigner());\n\n    callContract(chainId, contract, \"withdraw\", [], {\n      sentMsg: t`Withdraw submitted.`,\n      failMsg: t`Withdraw failed.`,\n      successMsg: t`Withdrawn!`,\n      setPendingTxns,\n    })\n      .then(async (res) => {\n        setIsVisible(false);\n      })\n      .finally(() => {\n        setIsWithdrawing(false);\n      });\n  };\n\n  return (\n    <div className=\"StakeModal\">\n      <Modal isVisible={isVisible} setIsVisible={setIsVisible} label={title}>\n        <Trans>\n          <div>\n            This will withdraw and unreserve all tokens as well as pause vesting.\n            <br />\n            <br />\n            esGMX tokens that have been converted to GMX will remain as GMX tokens.\n            <br />\n            <br />\n            To claim GMX tokens without withdrawing, use the \"Claim\" button under the Total Rewards section.\n            <br />\n            <br />\n          </div>\n        </Trans>\n        <div className=\"Exchange-swap-button-container\">\n          <button className=\"App-cta Exchange-swap-button\" onClick={onClickPrimary} disabled={isWithdrawing}>\n            {!isWithdrawing && \"Confirm Withdraw\"}\n            {isWithdrawing && \"Confirming...\"}\n          </button>\n        </div>\n      </Modal>\n    </div>\n  );\n}\n\nfunction CompoundModal(props) {\n  const {\n    isVisible,\n    setIsVisible,\n    rewardRouterAddress,\n    active,\n    account,\n    library,\n    chainId,\n    setPendingTxns,\n    totalVesterRewards,\n    nativeTokenSymbol,\n    wrappedTokenSymbol,\n  } = props;\n  const [isCompounding, setIsCompounding] = useState(false);\n  const [shouldClaimGmx, setShouldClaimGmx] = useLocalStorageSerializeKey(\n    [chainId, \"StakeV2-compound-should-claim-gmx\"],\n    true\n  );\n  const [shouldStakeGmx, setShouldStakeGmx] = useLocalStorageSerializeKey(\n    [chainId, \"StakeV2-compound-should-stake-gmx\"],\n    true\n  );\n  const [shouldClaimEsGmx, setShouldClaimEsGmx] = useLocalStorageSerializeKey(\n    [chainId, \"StakeV2-compound-should-claim-es-gmx\"],\n    true\n  );\n  const [shouldStakeEsGmx, setShouldStakeEsGmx] = useLocalStorageSerializeKey(\n    [chainId, \"StakeV2-compound-should-stake-es-gmx\"],\n    true\n  );\n  const [shouldStakeMultiplierPoints, setShouldStakeMultiplierPoints] = useState(true);\n  const [shouldClaimWeth, setShouldClaimWeth] = useLocalStorageSerializeKey(\n    [chainId, \"StakeV2-compound-should-claim-weth\"],\n    true\n  );\n  const [shouldConvertWeth, setShouldConvertWeth] = useLocalStorageSerializeKey(\n    [chainId, \"StakeV2-compound-should-convert-weth\"],\n    true\n  );\n\n  const gmxAddress = getContract(chainId, \"Leverage\");\n  const stakedLeverageTrackerAddress = getContract(chainId, \"StakedLeverageTracker\");\n\n  const [isApproving, setIsApproving] = useState(false);\n\n  const { data: tokenAllowance } = useSWR(\n    active && [active, chainId, gmxAddress, \"allowance\", account, stakedLeverageTrackerAddress],\n    {\n      fetcher: fetcher(library, Token),\n    }\n  );\n\n  const needApproval = shouldStakeGmx && tokenAllowance && totalVesterRewards && totalVesterRewards.gt(tokenAllowance);\n\n  const isPrimaryEnabled = () => {\n    return !isCompounding && !isApproving && !isCompounding;\n  };\n\n  const getPrimaryText = () => {\n    if (isApproving) {\n      return t`Approving GMX...`;\n    }\n    if (needApproval) {\n      return t`Approve GMX`;\n    }\n    if (isCompounding) {\n      return t`Compounding...`;\n    }\n    return t`Compound`;\n  };\n\n  const onClickPrimary = () => {\n    if (needApproval) {\n      approveTokens({\n        setIsApproving,\n        library,\n        tokenAddress: gmxAddress,\n        spender: stakedLeverageTrackerAddress,\n        chainId,\n      });\n      return;\n    }\n\n    setIsCompounding(true);\n\n    const contract = new ethers.Contract(rewardRouterAddress, RewardRouter.abi, library.getSigner());\n    callContract(\n      chainId,\n      contract,\n      \"handleRewards\",\n      [\n        shouldClaimGmx || shouldStakeGmx,\n        shouldStakeGmx,\n        shouldClaimEsGmx || shouldStakeEsGmx,\n        shouldStakeEsGmx,\n        shouldStakeMultiplierPoints,\n        shouldClaimWeth || shouldConvertWeth,\n        shouldConvertWeth,\n      ],\n      {\n        sentMsg: t`Compound submitted!`,\n        failMsg: t`Compound failed.`,\n        successMsg: t`Compound completed!`,\n        setPendingTxns,\n      }\n    )\n      .then(async (res) => {\n        setIsVisible(false);\n      })\n      .finally(() => {\n        setIsCompounding(false);\n      });\n  };\n\n  const toggleShouldStakeGmx = (value) => {\n    if (value) {\n      setShouldClaimGmx(true);\n    }\n    setShouldStakeGmx(value);\n  };\n\n  const toggleShouldStakeEsGmx = (value) => {\n    if (value) {\n      setShouldClaimEsGmx(true);\n    }\n    setShouldStakeEsGmx(value);\n  };\n\n  const toggleConvertWeth = (value) => {\n    if (value) {\n      setShouldClaimWeth(true);\n    }\n    setShouldConvertWeth(value);\n  };\n\n  return (\n    <div className=\"StakeModal\">\n      <Modal isVisible={isVisible} setIsVisible={setIsVisible} label=\"Compound Rewards\">\n        <div className=\"CompoundModal-menu\">\n          <div>\n            <Checkbox\n              isChecked={shouldStakeMultiplierPoints}\n              setIsChecked={setShouldStakeMultiplierPoints}\n              disabled={true}\n            >\n              <Trans>Stake Multiplier Points</Trans>\n            </Checkbox>\n          </div>\n          <div>\n            <Checkbox isChecked={shouldClaimGmx} setIsChecked={setShouldClaimGmx} disabled={shouldStakeGmx}>\n              <Trans>Claim GMX Rewards</Trans>\n            </Checkbox>\n          </div>\n          <div>\n            <Checkbox isChecked={shouldStakeGmx} setIsChecked={toggleShouldStakeGmx}>\n              <Trans>Stake GMX Rewards</Trans>\n            </Checkbox>\n          </div>\n          <div>\n            <Checkbox isChecked={shouldClaimEsGmx} setIsChecked={setShouldClaimEsGmx} disabled={shouldStakeEsGmx}>\n              <Trans>Claim esGMX Rewards</Trans>\n            </Checkbox>\n          </div>\n          <div>\n            <Checkbox isChecked={shouldStakeEsGmx} setIsChecked={toggleShouldStakeEsGmx}>\n              <Trans>Stake esGMX Rewards</Trans>\n            </Checkbox>\n          </div>\n          <div>\n            <Checkbox isChecked={shouldClaimWeth} setIsChecked={setShouldClaimWeth} disabled={shouldConvertWeth}>\n              <Trans>Claim {wrappedTokenSymbol} Rewards</Trans>\n            </Checkbox>\n          </div>\n          <div>\n            <Checkbox isChecked={shouldConvertWeth} setIsChecked={toggleConvertWeth}>\n              Convert {wrappedTokenSymbol} to {nativeTokenSymbol}\n            </Checkbox>\n          </div>\n        </div>\n        <div className=\"Exchange-swap-button-container\">\n          <button className=\"App-cta Exchange-swap-button\" onClick={onClickPrimary} disabled={!isPrimaryEnabled()}>\n            {getPrimaryText()}\n          </button>\n        </div>\n      </Modal>\n    </div>\n  );\n}\n\nfunction ClaimModal(props) {\n  const {\n    isVisible,\n    setIsVisible,\n    rewardRouterAddress,\n    library,\n    chainId,\n    setPendingTxns,\n    nativeTokenSymbol,\n    wrappedTokenSymbol,\n  } = props;\n  const [isClaiming, setIsClaiming] = useState(false);\n  const [shouldClaimGmx, setShouldClaimGmx] = useLocalStorageSerializeKey(\n    [chainId, \"StakeV2-claim-should-claim-gmx\"],\n    true\n  );\n  const [shouldClaimEsGmx, setShouldClaimEsGmx] = useLocalStorageSerializeKey(\n    [chainId, \"StakeV2-claim-should-claim-es-gmx\"],\n    true\n  );\n  const [shouldClaimWeth, setShouldClaimWeth] = useLocalStorageSerializeKey(\n    [chainId, \"StakeV2-claim-should-claim-weth\"],\n    true\n  );\n  const [shouldConvertWeth, setShouldConvertWeth] = useLocalStorageSerializeKey(\n    [chainId, \"StakeV2-claim-should-convert-weth\"],\n    true\n  );\n\n  const isPrimaryEnabled = () => {\n    return !isClaiming;\n  };\n\n  const getPrimaryText = () => {\n    if (isClaiming) {\n      return t`Claiming...`;\n    }\n    return t`Claim`;\n  };\n\n  const onClickPrimary = () => {\n    setIsClaiming(true);\n\n    const contract = new ethers.Contract(rewardRouterAddress, RewardRouter.abi, library.getSigner());\n    callContract(\n      chainId,\n      contract,\n      \"handleRewards\",\n      [\n        shouldClaimGmx,\n        false, // shouldStakeGmx\n        shouldClaimEsGmx,\n        false, // shouldStakeEsGmx\n        false, // shouldStakeMultiplierPoints\n        shouldClaimWeth,\n        shouldConvertWeth,\n      ],\n      {\n        sentMsg: t`Claim submitted.`,\n        failMsg: t`Claim failed.`,\n        successMsg: t`Claim completed!`,\n        setPendingTxns,\n      }\n    )\n      .then(async (res) => {\n        setIsVisible(false);\n      })\n      .finally(() => {\n        setIsClaiming(false);\n      });\n  };\n\n  const toggleConvertWeth = (value) => {\n    if (value) {\n      setShouldClaimWeth(true);\n    }\n    setShouldConvertWeth(value);\n  };\n\n  return (\n    <div className=\"StakeModal\">\n      <Modal isVisible={isVisible} setIsVisible={setIsVisible} label=\"Claim Rewards\">\n        <div className=\"CompoundModal-menu\">\n          <div>\n            <Checkbox isChecked={shouldClaimGmx} setIsChecked={setShouldClaimGmx}>\n              <Trans>Claim GMX Rewards</Trans>\n            </Checkbox>\n          </div>\n          <div>\n            <Checkbox isChecked={shouldClaimEsGmx} setIsChecked={setShouldClaimEsGmx}>\n              <Trans>Claim esGMX Rewards</Trans>\n            </Checkbox>\n          </div>\n          <div>\n            <Checkbox isChecked={shouldClaimWeth} setIsChecked={setShouldClaimWeth} disabled={shouldConvertWeth}>\n              <Trans>Claim {wrappedTokenSymbol} Rewards</Trans>\n            </Checkbox>\n          </div>\n          <div>\n            <Checkbox isChecked={shouldConvertWeth} setIsChecked={toggleConvertWeth}>\n              <Trans>\n                Convert {wrappedTokenSymbol} to {nativeTokenSymbol}\n              </Trans>\n            </Checkbox>\n          </div>\n        </div>\n        <div className=\"Exchange-swap-button-container\">\n          <button className=\"App-cta Exchange-swap-button\" onClick={onClickPrimary} disabled={!isPrimaryEnabled()}>\n            {getPrimaryText()}\n          </button>\n        </div>\n      </Modal>\n    </div>\n  );\n}\n\nexport default function StakeV2({ setPendingTxns, connectWallet }) {\n  const { active, library, account } = useWeb3React();\n  const { chainId } = useChainId();\n\n  const chainName = getChainName(chainId);\n\n  const hasInsurance = true;\n\n  const [isStakeModalVisible, setIsStakeModalVisible] = useState(false);\n  const [stakeModalTitle, setStakeModalTitle] = useState(\"\");\n  const [stakeModalMaxAmount, setStakeModalMaxAmount] = useState(undefined);\n  const [stakeValue, setStakeValue] = useState(\"\");\n  const [stakingTokenSymbol, setStakingTokenSymbol] = useState(\"\");\n  const [stakingTokenAddress, setStakingTokenAddress] = useState(\"\");\n  const [stakingFarmAddress, setStakingFarmAddress] = useState(\"\");\n  const [stakeMethodName, setStakeMethodName] = useState(\"\");\n\n  const [isUnstakeModalVisible, setIsUnstakeModalVisible] = useState(false);\n  const [unstakeModalTitle, setUnstakeModalTitle] = useState(\"\");\n  const [unstakeModalMaxAmount, setUnstakeModalMaxAmount] = useState(undefined);\n  const [unstakeModalReservedAmount, setUnstakeModalReservedAmount] = useState(undefined);\n  const [unstakeValue, setUnstakeValue] = useState(\"\");\n  const [unstakingTokenSymbol, setUnstakingTokenSymbol] = useState(\"\");\n  const [unstakeMethodName, setUnstakeMethodName] = useState(\"\");\n\n  const [isVesterDepositModalVisible, setIsVesterDepositModalVisible] = useState(false);\n  const [vesterDepositTitle, setVesterDepositTitle] = useState(\"\");\n  const [vesterDepositStakeTokenLabel, setVesterDepositStakeTokenLabel] = useState(\"\");\n  const [vesterDepositMaxAmount, setVesterDepositMaxAmount] = useState(\"\");\n  const [vesterDepositBalance, setVesterDepositBalance] = useState(\"\");\n  const [vesterDepositEscrowedBalance, setVesterDepositEscrowedBalance] = useState(\"\");\n  const [vesterDepositVestedAmount, setVesterDepositVestedAmount] = useState(\"\");\n  const [vesterDepositAverageStakedAmount, setVesterDepositAverageStakedAmount] = useState(\"\");\n  const [vesterDepositMaxVestableAmount, setVesterDepositMaxVestableAmount] = useState(\"\");\n  const [vesterDepositValue, setVesterDepositValue] = useState(\"\");\n  const [vesterDepositReserveAmount, setVesterDepositReserveAmount] = useState(\"\");\n  const [vesterDepositMaxReserveAmount, setVesterDepositMaxReserveAmount] = useState(\"\");\n  const [vesterDepositAddress, setVesterDepositAddress] = useState(\"\");\n\n  const [isVesterWithdrawModalVisible, setIsVesterWithdrawModalVisible] = useState(false);\n  const [vesterWithdrawTitle, setVesterWithdrawTitle] = useState(false);\n  const [vesterWithdrawAddress, setVesterWithdrawAddress] = useState(\"\");\n\n  const [isCompoundModalVisible, setIsCompoundModalVisible] = useState(false);\n  const [isClaimModalVisible, setIsClaimModalVisible] = useState(false);\n\n  const rewardRouterAddress = getContract(chainId, \"RewardRouter\");\n  const rewardReaderAddress = getContract(chainId, \"RewardReader\");\n  const readerAddress = getContract(chainId, \"Reader\");\n\n  const vaultAddress = getContract(chainId, \"Vault\");\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n  const gmxAddress = getContract(chainId, \"Leverage\");\n  const esGmxAddress = getContract(chainId, \"ES_GMX\");\n  const bnGmxAddress = getContract(chainId, \"BN_GMX\");\n  const glpAddress = getContract(chainId, \"GLP\");\n\n  const stakedLeverageTrackerAddress = getContract(chainId, \"StakedLeverageTracker\");\n  const bonusGmxTrackerAddress = getContract(chainId, \"BonusGmxTracker\");\n  const feeGmxTrackerAddress = getContract(chainId, \"FeeGmxTracker\");\n\n  const stakedGlpTrackerAddress = getContract(chainId, \"StakedGlpTracker\");\n  const feeGlpTrackerAddress = getContract(chainId, \"FeeGlpTracker\");\n\n  const glpManagerAddress = getContract(chainId, \"GlpManager\");\n\n  const stakedGmxDistributorAddress = getContract(chainId, \"StakedGmxDistributor\");\n  const stakedGlpDistributorAddress = getContract(chainId, \"StakedGlpDistributor\");\n\n  const gmxVesterAddress = getContract(chainId, \"GmxVester\");\n  const glpVesterAddress = getContract(chainId, \"GlpVester\");\n\n  const vesterAddresses = [gmxVesterAddress, glpVesterAddress];\n\n  const excludedEsGmxAccounts = [stakedGmxDistributorAddress, stakedGlpDistributorAddress];\n\n  const nativeTokenSymbol = getConstant(chainId, \"nativeTokenSymbol\");\n  const wrappedTokenSymbol = getConstant(chainId, \"wrappedTokenSymbol\");\n\n  const walletTokens = [gmxAddress, esGmxAddress, glpAddress, stakedLeverageTrackerAddress];\n  const depositTokens = [\n    gmxAddress,\n    esGmxAddress,\n    stakedLeverageTrackerAddress,\n    bonusGmxTrackerAddress,\n    bnGmxAddress,\n    glpAddress,\n  ];\n  const rewardTrackersForDepositBalances = [\n    stakedLeverageTrackerAddress,\n    stakedLeverageTrackerAddress,\n    bonusGmxTrackerAddress,\n    feeGmxTrackerAddress,\n    feeGmxTrackerAddress,\n    feeGlpTrackerAddress,\n  ];\n  const rewardTrackersForStakingInfo = [\n    stakedLeverageTrackerAddress,\n    bonusGmxTrackerAddress,\n    feeGmxTrackerAddress,\n    stakedGlpTrackerAddress,\n    feeGlpTrackerAddress,\n  ];\n\n  const { data: walletBalances } = useSWR(\n    [\n      `StakeV2:walletBalances:${active}`,\n      chainId,\n      readerAddress,\n      \"getTokenBalancesWithSupplies\",\n      account || PLACEHOLDER_ACCOUNT,\n    ],\n    {\n      fetcher: fetcher(library, ReaderV2, [walletTokens]),\n    }\n  );\n\n  const { data: depositBalances } = useSWR(\n    [\n      `StakeV2:depositBalances:${active}`,\n      chainId,\n      rewardReaderAddress,\n      \"getDepositBalances\",\n      account || PLACEHOLDER_ACCOUNT,\n    ],\n    {\n      fetcher: fetcher(library, RewardReader, [depositTokens, rewardTrackersForDepositBalances]),\n    }\n  );\n\n  const { data: stakingInfo } = useSWR(\n    [`StakeV2:stakingInfo:${active}`, chainId, rewardReaderAddress, \"getStakingInfo\", account || PLACEHOLDER_ACCOUNT],\n    {\n      fetcher: fetcher(library, RewardReader, [rewardTrackersForStakingInfo]),\n    }\n  );\n\n  const { data: stakedGmxSupply } = useSWR(\n    [`StakeV2:stakedGmxSupply:${active}`, chainId, gmxAddress, \"balanceOf\", stakedLeverageTrackerAddress],\n    {\n      fetcher: fetcher(library, Token),\n    }\n  );\n\n  const { data: aums } = useSWR([`StakeV2:getAums:${active}`, chainId, glpManagerAddress, \"getAums\"], {\n    fetcher: fetcher(library, GlpManager),\n  });\n\n  const { data: nativeTokenPrice } = useSWR(\n    [`StakeV2:nativeTokenPrice:${active}`, chainId, vaultAddress, \"getMinPrice\", nativeTokenAddress],\n    {\n      fetcher: fetcher(library, Vault),\n    }\n  );\n\n  const { data: esGmxSupply } = useSWR(\n    [`StakeV2:esGmxSupply:${active}`, chainId, readerAddress, \"getTokenSupply\", esGmxAddress],\n    {\n      fetcher: fetcher(library, ReaderV2, [excludedEsGmxAccounts]),\n    }\n  );\n\n  const { data: vestingInfo } = useSWR(\n    [`StakeV2:vestingInfo:${active}`, chainId, readerAddress, \"getVestingInfo\", account || PLACEHOLDER_ACCOUNT],\n    {\n      fetcher: fetcher(library, ReaderV2, [vesterAddresses]),\n    }\n  );\n\n  const { leveragePrice } = useLeveragePrice(\n    chainId,\n    library,\n    active\n  );\n\n  let { bsc: bscGmxStaked, total: totalGmxStaked } = useTotalGmxStaked();\n\n  const isGmxTransferEnabled = true;\n\n  let esGmxSupplyUsd\n  if (esGmxSupply && leveragePrice) {\n    esGmxSupplyUsd = esGmxSupply.mul(leveragePrice).div(expandDecimals(1, 18));\n  }\n\n  let aum;\n  if (aums && aums.length > 0) {\n    aum = aums[0].add(aums[1]).div(2);\n  }\n\n  const { balanceData, supplyData } = getBalanceAndSupplyData(walletBalances);\n  const depositBalanceData = getDepositBalanceData(depositBalances);\n  const stakingData = getStakingData(stakingInfo);\n  const vestingData = getVestingData(vestingInfo);\n\n  const processedData = getProcessedData(\n    balanceData,\n    supplyData,\n    depositBalanceData,\n    stakingData,\n    vestingData,\n    aum,\n    nativeTokenPrice,\n    stakedGmxSupply,\n    leveragePrice\n  );\n\n  let hasMultiplierPoints = false;\n  let multiplierPointsAmount;\n  if (processedData && processedData.bonusGmxTrackerRewards && processedData.bnGmxInFeeGmx) {\n    multiplierPointsAmount = processedData.bonusGmxTrackerRewards.add(processedData.bnGmxInFeeGmx);\n    if (multiplierPointsAmount.gt(0)) {\n      hasMultiplierPoints = true;\n    }\n  }\n  let totalRewardTokens;\n  if (processedData && processedData.bnGmxInFeeGmx && processedData.bonusGmxInFeeGmx) {\n    totalRewardTokens = processedData.bnGmxInFeeGmx.add(processedData.bonusGmxInFeeGmx);\n  }\n\n  let totalRewardTokensAndGlp;\n  if (totalRewardTokens && processedData && processedData.glpBalance) {\n    totalRewardTokensAndGlp = totalRewardTokens.add(processedData.glpBalance);\n  }\n\n  const bonusGmxInFeeGmx = processedData ? processedData.bonusGmxInFeeGmx : undefined;\n\n  const totalGmxSupply = processedData ? processedData.gmxInStakedGmx : undefined;\n\n  let stakedGmxSupplyUsd;\n  if (!totalGmxStaked.isZero() && leveragePrice) {\n    stakedGmxSupplyUsd = totalGmxStaked.mul(leveragePrice).div(expandDecimals(1, 18));\n  }\n\n  let totalSupplyUsd;\n  if (totalGmxSupply && !totalGmxSupply.isZero() && leveragePrice) {\n    totalSupplyUsd = totalGmxSupply.mul(leveragePrice).div(expandDecimals(1, 18));\n  }\n\n  let maxUnstakeableGmx = bigNumberify(0);\n  if (\n    totalRewardTokens &&\n    vestingData &&\n    vestingData.gmxVesterPairAmount &&\n    multiplierPointsAmount &&\n    processedData.bonusGmxInFeeGmx\n  ) {\n    const availableTokens = totalRewardTokens.sub(vestingData.gmxVesterPairAmount);\n    const stakedTokens = processedData.bonusGmxInFeeGmx;\n    const divisor = multiplierPointsAmount.add(stakedTokens);\n    if (divisor.gt(0)) {\n      maxUnstakeableGmx = availableTokens.mul(stakedTokens).div(divisor);\n    }\n  }\n\n  const showStakeGmxModal = () => {\n    if (!isGmxTransferEnabled) {\n      helperToast.error(t`GMX transfers not yet enabled`);\n      return;\n    }\n\n    setIsStakeModalVisible(true);\n    setStakeModalTitle(\"Stake GMX\");\n    setStakeModalMaxAmount(processedData.gmxBalance);\n    setStakeValue(\"\");\n    setStakingTokenSymbol(\"GMX\");\n    setStakingTokenAddress(gmxAddress);\n    setStakingFarmAddress(stakedLeverageTrackerAddress);\n    setStakeMethodName(\"stakeGmx\");\n  };\n\n  const showStakeEsGmxModal = () => {\n    setIsStakeModalVisible(true);\n    setStakeModalTitle(\"Stake esGMX\");\n    setStakeModalMaxAmount(processedData.esGmxBalance);\n    setStakeValue(\"\");\n    setStakingTokenSymbol(\"esGMX\");\n    setStakingTokenAddress(esGmxAddress);\n    setStakingFarmAddress(AddressZero);\n    setStakeMethodName(\"stakeEsGmx\");\n  };\n\n  const showGmxVesterDepositModal = () => {\n    let remainingVestableAmount = vestingData.gmxVester.maxVestableAmount.sub(vestingData.gmxVester.vestedAmount);\n    if (processedData.esGmxBalance.lt(remainingVestableAmount)) {\n      remainingVestableAmount = processedData.esGmxBalance;\n    }\n\n    setIsVesterDepositModalVisible(true);\n    setVesterDepositTitle(\"GMX Vault\");\n    setVesterDepositStakeTokenLabel(\"staked GMX + esGMX + Multiplier Points\");\n    setVesterDepositMaxAmount(remainingVestableAmount);\n    setVesterDepositBalance(processedData.esGmxBalance);\n    setVesterDepositEscrowedBalance(vestingData.gmxVester.escrowedBalance);\n    setVesterDepositVestedAmount(vestingData.gmxVester.vestedAmount);\n    setVesterDepositMaxVestableAmount(vestingData.gmxVester.maxVestableAmount);\n    setVesterDepositAverageStakedAmount(vestingData.gmxVester.averageStakedAmount);\n    setVesterDepositReserveAmount(vestingData.gmxVester.pairAmount);\n    setVesterDepositMaxReserveAmount(totalRewardTokens);\n    setVesterDepositValue(\"\");\n    setVesterDepositAddress(gmxVesterAddress);\n  };\n\n  const showGlpVesterDepositModal = () => {\n    let remainingVestableAmount = vestingData.glpVester.maxVestableAmount.sub(vestingData.glpVester.vestedAmount);\n    if (processedData.esGmxBalance.lt(remainingVestableAmount)) {\n      remainingVestableAmount = processedData.esGmxBalance;\n    }\n\n    setIsVesterDepositModalVisible(true);\n    setVesterDepositTitle(\"GLP Vault\");\n    setVesterDepositStakeTokenLabel(\"staked GLP\");\n    setVesterDepositMaxAmount(remainingVestableAmount);\n    setVesterDepositBalance(processedData.esGmxBalance);\n    setVesterDepositEscrowedBalance(vestingData.glpVester.escrowedBalance);\n    setVesterDepositVestedAmount(vestingData.glpVester.vestedAmount);\n    setVesterDepositMaxVestableAmount(vestingData.glpVester.maxVestableAmount);\n    setVesterDepositAverageStakedAmount(vestingData.glpVester.averageStakedAmount);\n    setVesterDepositReserveAmount(vestingData.glpVester.pairAmount);\n    setVesterDepositMaxReserveAmount(processedData.glpBalance);\n    setVesterDepositValue(\"\");\n    setVesterDepositAddress(glpVesterAddress);\n  };\n\n  const showGmxVesterWithdrawModal = () => {\n    if (!vestingData || !vestingData.gmxVesterVestedAmount || vestingData.gmxVesterVestedAmount.eq(0)) {\n      helperToast.error(t`You have not deposited any tokens for vesting.`);\n      return;\n    }\n\n    setIsVesterWithdrawModalVisible(true);\n    setVesterWithdrawTitle(t`Withdraw from GMX Vault`);\n    setVesterWithdrawAddress(gmxVesterAddress);\n  };\n\n  const showGlpVesterWithdrawModal = () => {\n    if (!vestingData || !vestingData.glpVesterVestedAmount || vestingData.glpVesterVestedAmount.eq(0)) {\n      helperToast.error(t`You have not deposited any tokens for vesting.`);\n      return;\n    }\n\n    setIsVesterWithdrawModalVisible(true);\n    setVesterWithdrawTitle(t`Withdraw from GLP Vault`);\n    setVesterWithdrawAddress(glpVesterAddress);\n  };\n\n  const showUnstakeGmxModal = () => {\n    if (!isGmxTransferEnabled) {\n      helperToast.error(t`GMX transfers not yet enabled`);\n      return;\n    }\n    setIsUnstakeModalVisible(true);\n    setUnstakeModalTitle(t`Unstake GMX`);\n    let maxAmount = processedData.gmxInStakedGmx;\n    if (\n      processedData.gmxInStakedGmx &&\n      vestingData &&\n      vestingData.gmxVesterPairAmount.gt(0) &&\n      maxUnstakeableGmx &&\n      maxUnstakeableGmx.lt(processedData.gmxInStakedGmx)\n    ) {\n      maxAmount = maxUnstakeableGmx;\n    }\n    setUnstakeModalMaxAmount(maxAmount);\n    setUnstakeModalReservedAmount(vestingData.gmxVesterPairAmount);\n    setUnstakeValue(\"\");\n    setUnstakingTokenSymbol(\"GMX\");\n    setUnstakeMethodName(\"unstakeGmx\");\n  };\n\n  const showUnstakeEsGmxModal = () => {\n    setIsUnstakeModalVisible(true);\n    setUnstakeModalTitle(\"Unstake esGMX\");\n    let maxAmount = processedData.esGmxInStakedGmx;\n    if (\n      processedData.esGmxInStakedGmx &&\n      vestingData &&\n      vestingData.gmxVesterPairAmount.gt(0) &&\n      maxUnstakeableGmx &&\n      maxUnstakeableGmx.lt(processedData.esGmxInStakedGmx)\n    ) {\n      maxAmount = maxUnstakeableGmx;\n    }\n    setUnstakeModalMaxAmount(maxAmount);\n    setUnstakeModalReservedAmount(vestingData.gmxVesterPairAmount);\n    setUnstakeValue(\"\");\n    setUnstakingTokenSymbol(\"esGMX\");\n    setUnstakeMethodName(\"unstakeEsGmx\");\n  };\n\n  const renderMultiplierPointsLabel = useCallback(() => {\n    return t`Multiplier Points APR`;\n  }, []);\n\n  const renderMultiplierPointsValue = useCallback(() => {\n    return (\n      <Tooltip\n        handle={`100.00%`}\n        position=\"right-bottom\"\n        renderContent={() => {\n          return (\n            <Trans>\n              Boost your rewards with Multiplier Points.&nbsp;\n              <a href=\"https://gmxio.gitbook.io/gmx/rewards#multiplier-points\" rel=\"noreferrer\" target=\"_blank\">\n                More info\n              </a>\n              .\n            </Trans>\n          );\n        }}\n      />\n    );\n  }, []);\n\n  let earnMsg;\n  if (totalRewardTokensAndGlp && totalRewardTokensAndGlp.gt(0)) {\n    let gmxAmountStr;\n    if (processedData.gmxInStakedGmx && processedData.gmxInStakedGmx.gt(0)) {\n      gmxAmountStr = formatAmount(processedData.gmxInStakedGmx, 18, 2, true) + \" GMX\";\n    }\n    let esGmxAmountStr;\n    if (processedData.esGmxInStakedGmx && processedData.esGmxInStakedGmx.gt(0)) {\n      esGmxAmountStr = formatAmount(processedData.esGmxInStakedGmx, 18, 2, true) + \" esGMX\";\n    }\n    let mpAmountStr;\n    if (processedData.bonusGmxInFeeGmx && processedData.bnGmxInFeeGmx.gt(0)) {\n      mpAmountStr = formatAmount(processedData.bnGmxInFeeGmx, 18, 2, true) + \" MP\";\n    }\n    let glpStr;\n    if (processedData.glpBalance && processedData.glpBalance.gt(0)) {\n      glpStr = formatAmount(processedData.glpBalance, 18, 2, true) + \" GLP\";\n    }\n    const amountStr = [gmxAmountStr, esGmxAmountStr, mpAmountStr, glpStr].filter((s) => s).join(\", \");\n    earnMsg = (\n      <div>\n        <Trans>\n          You are earning {nativeTokenSymbol} rewards with {formatAmount(totalRewardTokensAndGlp, 18, 2, true)} tokens.\n          <br />\n          Tokens: {amountStr}.\n        </Trans>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"default-container page-layout\">\n      <StakeModal\n        isVisible={isStakeModalVisible}\n        setIsVisible={setIsStakeModalVisible}\n        chainId={chainId}\n        title={stakeModalTitle}\n        maxAmount={stakeModalMaxAmount}\n        value={stakeValue}\n        setValue={setStakeValue}\n        active={active}\n        account={account}\n        library={library}\n        stakingTokenSymbol={stakingTokenSymbol}\n        stakingTokenAddress={stakingTokenAddress}\n        farmAddress={stakingFarmAddress}\n        rewardRouterAddress={rewardRouterAddress}\n        stakeMethodName={stakeMethodName}\n        hasMultiplierPoints={hasMultiplierPoints}\n        setPendingTxns={setPendingTxns}\n        nativeTokenSymbol={nativeTokenSymbol}\n        wrappedTokenSymbol={wrappedTokenSymbol}\n      />\n      <UnstakeModal\n        setPendingTxns={setPendingTxns}\n        isVisible={isUnstakeModalVisible}\n        setIsVisible={setIsUnstakeModalVisible}\n        chainId={chainId}\n        title={unstakeModalTitle}\n        maxAmount={unstakeModalMaxAmount}\n        reservedAmount={unstakeModalReservedAmount}\n        value={unstakeValue}\n        setValue={setUnstakeValue}\n        library={library}\n        unstakingTokenSymbol={unstakingTokenSymbol}\n        rewardRouterAddress={rewardRouterAddress}\n        unstakeMethodName={unstakeMethodName}\n        multiplierPointsAmount={multiplierPointsAmount}\n        bonusGmxInFeeGmx={bonusGmxInFeeGmx}\n      />\n      <VesterDepositModal\n        isVisible={isVesterDepositModalVisible}\n        setIsVisible={setIsVesterDepositModalVisible}\n        chainId={chainId}\n        title={vesterDepositTitle}\n        stakeTokenLabel={vesterDepositStakeTokenLabel}\n        maxAmount={vesterDepositMaxAmount}\n        balance={vesterDepositBalance}\n        escrowedBalance={vesterDepositEscrowedBalance}\n        vestedAmount={vesterDepositVestedAmount}\n        averageStakedAmount={vesterDepositAverageStakedAmount}\n        maxVestableAmount={vesterDepositMaxVestableAmount}\n        reserveAmount={vesterDepositReserveAmount}\n        maxReserveAmount={vesterDepositMaxReserveAmount}\n        value={vesterDepositValue}\n        setValue={setVesterDepositValue}\n        library={library}\n        vesterAddress={vesterDepositAddress}\n        setPendingTxns={setPendingTxns}\n      />\n      <VesterWithdrawModal\n        isVisible={isVesterWithdrawModalVisible}\n        setIsVisible={setIsVesterWithdrawModalVisible}\n        vesterAddress={vesterWithdrawAddress}\n        chainId={chainId}\n        title={vesterWithdrawTitle}\n        library={library}\n        setPendingTxns={setPendingTxns}\n      />\n      <CompoundModal\n        active={active}\n        account={account}\n        setPendingTxns={setPendingTxns}\n        isVisible={isCompoundModalVisible}\n        setIsVisible={setIsCompoundModalVisible}\n        rewardRouterAddress={rewardRouterAddress}\n        totalVesterRewards={processedData.totalVesterRewards}\n        wrappedTokenSymbol={wrappedTokenSymbol}\n        nativeTokenSymbol={nativeTokenSymbol}\n        library={library}\n        chainId={chainId}\n      />\n      <ClaimModal\n        active={active}\n        account={account}\n        setPendingTxns={setPendingTxns}\n        isVisible={isClaimModalVisible}\n        setIsVisible={setIsClaimModalVisible}\n        rewardRouterAddress={rewardRouterAddress}\n        totalVesterRewards={processedData.totalVesterRewards}\n        wrappedTokenSymbol={wrappedTokenSymbol}\n        nativeTokenSymbol={nativeTokenSymbol}\n        library={library}\n        chainId={chainId}\n      />\n      <div className=\"section-title-block\">\n        <div className=\"section-title-icon\"></div>\n        <div className=\"section-title-content\">\n          <div className=\"Page-title\">\n            <Trans>Earn</Trans>\n          </div>\n          <div className=\"Page-description\">\n            <Trans>\n              Stake{\" \"}\n              <a href=\"about:blank\" target=\"_blank\" rel=\"noopener noreferrer\">\n                LeveragePro\n              </a>{\" \"}\n              and{\" \"}\n              <a href=\"about:blank\" target=\"_blank\" rel=\"noopener noreferrer\">\n                GLP\n              </a>{\" \"}\n              to earn rewards.\n            </Trans>\n          </div>\n          {earnMsg && <div className=\"Page-description\">{earnMsg}</div>}\n        </div>\n      </div>\n      <div className=\"StakeV2-content\">\n        <div className=\"StakeV2-cards\">\n          <div className=\"App-card StakeV2-gmx-card\">\n            <div className=\"App-card-title\">LeveragePro</div>\n            <div className=\"App-card-divider\"></div>\n            <div className=\"App-card-content\">\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Price</Trans>\n                </div>\n                <div>\n                  {!leveragePrice && \"0\"}\n                  {leveragePrice && (\n                    <Tooltip\n                      position=\"right-bottom\"\n                      className=\"nowrap\"\n                      handle={\"$\" + formatAmount(leveragePrice, USD_DECIMALS, 2, true)}\n                      renderContent={() => (\n                        <>\n                          Price on Binance: ${formatAmount(leveragePrice, USD_DECIMALS, 2, true)}\n                        </>\n                      )}\n                    />\n                  )}\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Wallet</Trans>\n                </div>\n                <div>\n                  {formatKeyAmount(processedData, \"gmxBalance\", 18, 2, true)} LeveragePro ($\n                  {formatKeyAmount(processedData, \"gmxBalanceUsd\", USD_DECIMALS, 2, true)})\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Staked</Trans>\n                </div>\n                <div>\n                  {formatKeyAmount(processedData, \"gmxInStakedGmx\", 18, 2, true)} LeveragePro ($\n                  {formatKeyAmount(processedData, \"gmxInStakedGmxUsd\", USD_DECIMALS, 2, true)})\n                </div>\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">APR</div>\n                <div>\n                  <Tooltip\n                    handle={`${formatKeyAmount(processedData, \"gmxAprTotalWithBoost\", 2, 2, true)}%`}\n                    position=\"right-bottom\"\n                    renderContent={() => {\n                      return (\n                        <>\n                          <div className=\"Tooltip-row\">\n                            <span className=\"label\">Escrowed LeveragePro APR</span>\n                            <span>{formatKeyAmount(processedData, \"gmxAprForEsGmx\", 2, 2, true)}%</span>\n                          </div>\n                          {(!processedData.gmxBoostAprForNativeToken ||\n                            processedData.gmxBoostAprForNativeToken.eq(0)) && (\n                            <div className=\"Tooltip-row\">\n                              <span className=\"label\">{nativeTokenSymbol} APR</span>\n                              <span>{formatKeyAmount(processedData, \"gmxAprForNativeToken\", 2, 2, true)}%</span>\n                            </div>\n                          )}\n                          {processedData.gmxBoostAprForNativeToken && processedData.gmxBoostAprForNativeToken.gt(0) && (\n                            <div>\n                              <br />\n                              <div className=\"Tooltip-row\">\n                                <span className=\"label\">{nativeTokenSymbol} Base APR</span>\n                                <span>{formatKeyAmount(processedData, \"gmxAprForNativeToken\", 2, 2, true)}%</span>\n                              </div>\n                              <div className=\"Tooltip-row\">\n                                <span className=\"label\">{nativeTokenSymbol} Boosted APR</span>\n                                <span>{formatKeyAmount(processedData, \"gmxBoostAprForNativeToken\", 2, 2, true)}%</span>\n                              </div>\n                              <div className=\"Tooltip-divider\" />\n                              <div className=\"Tooltip-row\">\n                                <span className=\"label\">{nativeTokenSymbol} Total APR</span>\n                                <span>\n                                  {formatKeyAmount(processedData, \"gmxAprForNativeTokenWithBoost\", 2, 2, true)}%\n                                </span>\n                              </div>\n                              <br />\n                              <div className=\"muted\">\n                                <Trans>The Boosted APR is from your staked Multiplier Points.</Trans>\n                              </div>\n                            </div>\n                          )}\n                          <div className=\"muted\">\n                            <br />\n                            <Trans>\n                              APRs are updated weekly on Wednesday and will depend on the fees collected for the week.\n                            </Trans>\n                          </div>\n                        </>\n                      );\n                    }}\n                  />\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Rewards</Trans>\n                </div>\n                <div>\n                  <Tooltip\n                    handle={`$${formatKeyAmount(processedData, \"totalGmxRewardsUsd\", USD_DECIMALS, 2, true)}`}\n                    position=\"right-bottom\"\n                    renderContent={() => {\n                      return (\n                        <>\n                          <div className=\"Tooltip-row\">\n                            <span className=\"label\">\n                              {nativeTokenSymbol} ({wrappedTokenSymbol})\n                            </span>\n                            <span>\n                              {formatKeyAmount(processedData, \"feeGmxTrackerRewards\", 18, 4)} ($\n                              {formatKeyAmount(processedData, \"feeGmxTrackerRewardsUsd\", USD_DECIMALS, 2, true)})\n                            </span>\n                          </div>\n                          <div className=\"Tooltip-row\">\n                            <span className=\"label\">Escrowed LeveragePro</span>\n                            <span>\n                              {formatKeyAmount(processedData, \"stakedLeverageTrackerRewards\", 18, 4)} ($\n                              {formatKeyAmount(processedData, \"stakedLeverageTrackerRewardsUsd\", USD_DECIMALS, 2, true)})\n                            </span>\n                          </div>\n                        </>\n                      );\n                    }}\n                  />\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">{renderMultiplierPointsLabel()}</div>\n                <div>{renderMultiplierPointsValue()}</div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Boost Percentage</Trans>\n                </div>\n                <div>\n                  <Tooltip\n                    handle={`${formatAmount(processedData.boostBasisPoints, 2, 2, false)}%`}\n                    position=\"right-bottom\"\n                    renderContent={() => {\n                      return (\n                        <>\n                          You are earning {formatAmount(processedData.boostBasisPoints, 2, 2, false)}% more{\" \"}\n                          {nativeTokenSymbol} rewards using {formatAmount(processedData.bnGmxInFeeGmx, 18, 4, 2, true)}{\" \"}\n                          Staked Multiplier Points.\n                          <br />\n                          <br />\n                          Use the \"Compound\" button to stake your Multiplier Points.\n                        </>\n                      );\n                    }}\n                  />\n                </div>\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Total Staked</Trans>\n                </div>\n                <div>\n                  {!totalGmxStaked && \"0\"}\n                  {totalGmxStaked && (\n                    <Tooltip\n                      position=\"right-bottom\"\n                      className=\"nowrap\"\n                      handle={\n                        formatAmount(totalGmxStaked, 18, 0, true) +\n                        \" LeveragePro\" +\n                        ` ($${formatAmount(stakedGmxSupplyUsd, USD_DECIMALS, 0, true)})`\n                      }\n                      renderContent={() => (\n                        <>\n                          Binance: {formatAmount(bscGmxStaked, 18, 0, true)} LeveragePro\n                        </>\n                      )}\n                    />\n                  )}\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Total Supply</Trans>\n                </div>\n                {!totalGmxSupply && \"0\"}\n                {totalGmxSupply && (\n                  <div>\n                    {formatAmount(totalGmxSupply, 18, 0, true)} LeveragePro ($\n                    {formatAmount(totalSupplyUsd, USD_DECIMALS, 0, true)})\n                  </div>\n                )}\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-options\">\n                <Link className=\"App-button-option App-card-option\" to=\"/buy_leveragepro\">\n                  Buy LeveragePro\n                </Link>\n                {active && (\n                  <button className=\"App-button-option App-card-option\" onClick={() => showStakeGmxModal()}>\n                    Stake\n                  </button>\n                )}\n                {active && (\n                  <button className=\"App-button-option App-card-option\" onClick={() => showUnstakeGmxModal()}>\n                    Unstake\n                  </button>\n                )}\n                {active && (\n                  <Link className=\"App-button-option App-card-option\" to=\"/begin_account_transfer\">\n                    Transfer Account\n                  </Link>\n                )}\n              </div>\n            </div>\n          </div>\n          <div className=\"App-card primary StakeV2-total-rewards-card\">\n            <div className=\"App-card-title\">\n              <Trans>Total Rewards</Trans>\n            </div>\n            <div className=\"App-card-divider\"></div>\n            <div className=\"App-card-content\">\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  {nativeTokenSymbol} ({wrappedTokenSymbol})\n                </div>\n                <div>\n                  {formatKeyAmount(processedData, \"totalNativeTokenRewards\", 18, 4, true)} ($\n                  {formatKeyAmount(processedData, \"totalNativeTokenRewardsUsd\", USD_DECIMALS, 2, true)})\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">LeveragePro</div>\n                <div>\n                  {formatKeyAmount(processedData, \"totalVesterRewards\", 18, 4, true)} ($\n                  {formatKeyAmount(processedData, \"totalVesterRewardsUsd\", USD_DECIMALS, 2, true)})\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">Escrowed LeveragePro</div>\n                <div>\n                  {formatKeyAmount(processedData, \"totalEsGmxRewards\", 18, 4, true)} ($\n                  {formatKeyAmount(processedData, \"totalEsGmxRewardsUsd\", USD_DECIMALS, 2, true)})\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">Multiplier Points</div>\n                <div>{formatKeyAmount(processedData, \"bonusGmxTrackerRewards\", 18, 4, true)}</div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">Staked Multiplier Points</div>\n                <div>{formatKeyAmount(processedData, \"bnGmxInFeeGmx\", 18, 4, true)}</div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Total</Trans>\n                </div>\n                <div>${formatKeyAmount(processedData, \"totalRewardsUsd\", USD_DECIMALS, 2, true)}</div>\n              </div>\n              <div className=\"App-card-bottom-placeholder\">\n                <div className=\"App-card-divider\"></div>\n                <div className=\"App-card-options\">\n                  {active && (\n                    <button className=\"App-button-option App-card-option\">\n                      <Trans>Compound</Trans>\n                    </button>\n                  )}\n                  {active && (\n                    <button className=\"App-button-option App-card-option\">\n                      <Trans>Claim</Trans>\n                    </button>\n                  )}\n                  {!active && (\n                    <button className=\"App-button-option App-card-option\" onClick={() => connectWallet()}>\n                      Connect Wallet\n                    </button>\n                  )}\n                </div>\n              </div>\n              <div className=\"App-card-bottom\">\n                <div className=\"App-card-divider\"></div>\n                <div className=\"App-card-options\">\n                  {active && (\n                    <button\n                      className=\"App-button-option App-card-option\"\n                      onClick={() => setIsCompoundModalVisible(true)}\n                    >\n                      <Trans>Compound</Trans>\n                    </button>\n                  )}\n                  {active && (\n                    <button className=\"App-button-option App-card-option\" onClick={() => setIsClaimModalVisible(true)}>\n                      <Trans>Claim</Trans>\n                    </button>\n                  )}\n                  {!active && (\n                    <button className=\"App-button-option App-card-option\" onClick={() => connectWallet()}>\n                      <Trans>Connect Wallet</Trans>\n                    </button>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className=\"App-card\">\n            <div className=\"App-card-title\">GLP ({chainName})</div>\n            <div className=\"App-card-divider\"></div>\n            <div className=\"App-card-content\">\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Price</Trans>\n                </div>\n                <div>${formatKeyAmount(processedData, \"glpPrice\", USD_DECIMALS, 3, true)}</div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Wallet</Trans>\n                </div>\n                <div>\n                  {formatKeyAmount(processedData, \"glpBalance\", GLP_DECIMALS, 2, true)} GLP ($\n                  {formatKeyAmount(processedData, \"glpBalanceUsd\", USD_DECIMALS, 2, true)})\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Staked</Trans>\n                </div>\n                <div>\n                  {formatKeyAmount(processedData, \"glpBalance\", GLP_DECIMALS, 2, true)} GLP ($\n                  {formatKeyAmount(processedData, \"glpBalanceUsd\", USD_DECIMALS, 2, true)})\n                </div>\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">APR</div>\n                <div>\n                  <Tooltip\n                    handle={`${formatKeyAmount(processedData, \"glpAprTotal\", 2, 2, true)}%`}\n                    position=\"right-bottom\"\n                    renderContent={() => {\n                      return (\n                        <>\n                          <div className=\"Tooltip-row\">\n                            <span className=\"label\">\n                              {nativeTokenSymbol} ({wrappedTokenSymbol}) APR\n                            </span>\n                            <span>{formatKeyAmount(processedData, \"glpAprForNativeToken\", 2, 2, true)}%</span>\n                          </div>\n                          <div className=\"Tooltip-row\">\n                            <span className=\"label\">Escrowed LeveragePro APR</span>\n                            <span>{formatKeyAmount(processedData, \"glpAprForEsGmx\", 2, 2, true)}%</span>\n                          </div>\n                          <br />\n                          <div className=\"muted\">\n                            <Trans>\n                              APRs are updated weekly on Wednesday and will depend on the fees collected for the week.\n                            </Trans>\n                          </div>\n                        </>\n                      );\n                    }}\n                  />\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Rewards</Trans>\n                </div>\n                <div>\n                  <Tooltip\n                    handle={`$${formatKeyAmount(processedData, \"totalGlpRewardsUsd\", USD_DECIMALS, 2, true)}`}\n                    position=\"right-bottom\"\n                    renderContent={() => {\n                      return (\n                        <>\n                          <div className=\"Tooltip-row\">\n                            <span className=\"label\">\n                              {nativeTokenSymbol} ({wrappedTokenSymbol})\n                            </span>\n                            <span>\n                              {formatKeyAmount(processedData, \"feeGlpTrackerRewards\", 18, 4)} ($\n                              {formatKeyAmount(processedData, \"feeGlpTrackerRewardsUsd\", USD_DECIMALS, 2, true)})\n                            </span>\n                          </div>\n                          <div className=\"Tooltip-row\">\n                            <span className=\"label\">Escrowed LeveragePro</span>\n                            <span>\n                              {formatKeyAmount(processedData, \"stakedGlpTrackerRewards\", 18, 4)} ($\n                              {formatKeyAmount(processedData, \"stakedGlpTrackerRewardsUsd\", USD_DECIMALS, 2, true)})\n                            </span>\n                          </div>\n                        </>\n                      );\n                    }}\n                  />\n                </div>\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Total Staked</Trans>\n                </div>\n                <div>\n                  {formatKeyAmount(processedData, \"glpSupply\", 18, 2, true)} GLP ($\n                  {formatKeyAmount(processedData, \"glpSupplyUsd\", USD_DECIMALS, 2, true)})\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Total Supply</Trans>\n                </div>\n                <div>\n                  {formatKeyAmount(processedData, \"glpSupply\", 18, 2, true)} GLP ($\n                  {formatKeyAmount(processedData, \"glpSupplyUsd\", USD_DECIMALS, 2, true)})\n                </div>\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-options\">\n                <Link className=\"App-button-option App-card-option\" to=\"/buy_glp\">\n                  <Trans>Buy GLP</Trans>\n                </Link>\n                <Link className=\"App-button-option App-card-option\" to=\"/buy_glp#redeem\">\n                  <Trans>Sell GLP</Trans>\n                </Link>\n                {hasInsurance && (\n                  <a\n                    className=\"App-button-option App-card-option\"\n                    href=\"https://app.insurace.io/Insurance/Cart?id=124&referrer=545066382753150189457177837072918687520318754040\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                  >\n                    <Trans>Purchase Insurance</Trans>\n                  </a>\n                )}\n              </div>\n            </div>\n          </div>\n          <div className=\"App-card\">\n            <div className=\"App-card-title\">Escrowed LeveragePro</div>\n            <div className=\"App-card-divider\"></div>\n            <div className=\"App-card-content\">\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Price</Trans>\n                </div>\n                <div>${formatAmount(leveragePrice, USD_DECIMALS, 2, true)}</div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Wallet</Trans>\n                </div>\n                <div>\n                  {formatKeyAmount(processedData, \"esGmxBalance\", 18, 2, true)} esLeveragePro ($\n                  {formatKeyAmount(processedData, \"esGmxBalanceUsd\", USD_DECIMALS, 2, true)})\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Staked</Trans>\n                </div>\n                <div>\n                  {formatKeyAmount(processedData, \"esGmxInStakedGmx\", 18, 2, true)} esLeveragePro ($\n                  {formatKeyAmount(processedData, \"esGmxInStakedGmxUsd\", USD_DECIMALS, 2, true)})\n                </div>\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">APR</div>\n                <div>\n                  <div>\n                    <Tooltip\n                      handle={`${formatKeyAmount(processedData, \"gmxAprTotalWithBoost\", 2, 2, true)}%`}\n                      position=\"right-bottom\"\n                      renderContent={() => {\n                        return (\n                          <>\n                            <div className=\"Tooltip-row\">\n                              <span className=\"label\">\n                                {nativeTokenSymbol} ({wrappedTokenSymbol}) Base APR\n                              </span>\n                              <span>{formatKeyAmount(processedData, \"gmxAprForNativeToken\", 2, 2, true)}%</span>\n                            </div>\n                            {processedData.bnGmxInFeeGmx && processedData.bnGmxInFeeGmx.gt(0) && (\n                              <div className=\"Tooltip-row\">\n                                <span className=\"label\">\n                                  {nativeTokenSymbol} ({wrappedTokenSymbol}) Boosted APR\n                                </span>\n                                <span>{formatKeyAmount(processedData, \"gmxBoostAprForNativeToken\", 2, 2, true)}%</span>\n                              </div>\n                            )}\n                            <div className=\"Tooltip-row\">\n                              <span className=\"label\">Escrowed LeveragePro APR</span>\n                              <span>{formatKeyAmount(processedData, \"gmxAprForEsGmx\", 2, 2, true)}%</span>\n                            </div>\n                          </>\n                        );\n                      }}\n                    />\n                  </div>\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">{renderMultiplierPointsLabel()}</div>\n                <div>{renderMultiplierPointsValue()}</div>\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Total Staked</Trans>\n                </div>\n                <div>\n                  {formatKeyAmount(processedData, \"stakedEsGmxSupply\", 18, 0, true)} esLeveragePro ($\n                  {formatKeyAmount(processedData, \"stakedEsGmxSupplyUsd\", USD_DECIMALS, 0, true)})\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Total Supply</Trans>\n                </div>\n                <div>\n                  {formatAmount(esGmxSupply, 18, 0, true)} esLeveragePro (${formatAmount(esGmxSupplyUsd, USD_DECIMALS, 0, true)}\n                  )\n                </div>\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-options\">\n                {active && (\n                  <button className=\"App-button-option App-card-option\" onClick={() => showStakeEsGmxModal()}>\n                    <Trans>Stake</Trans>\n                  </button>\n                )}\n                {active && (\n                  <button className=\"App-button-option App-card-option\" onClick={() => showUnstakeEsGmxModal()}>\n                    <Trans>Unstake</Trans>\n                  </button>\n                )}\n                {!active && (\n                  <button className=\"App-button-option App-card-option\" onClick={() => connectWallet()}>\n                    <Trans> Connect Wallet</Trans>\n                  </button>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div>\n        <div className=\"Tab-title-section\">\n          <div className=\"Page-title\">Vest</div>\n          <div className=\"Page-description\">\n            <Trans>\n              Convert esLeveragePro tokens to LeveragePro tokens.\n              <br />\n              Please read the{\" \"}\n              <a href=\"about:blank\" target=\"_blank\" rel=\"noopener noreferrer\">\n                vesting details\n              </a>{\" \"}\n              before using the vaults.\n            </Trans>\n          </div>\n        </div>\n        <div>\n          <div className=\"StakeV2-cards\">\n            <div className=\"App-card StakeV2-gmx-card\">\n              <div className=\"App-card-title\">LeveragePro Vault</div>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-content\">\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>Staked Tokens</Trans>\n                  </div>\n                  <div>\n                    <Tooltip\n                      handle={formatAmount(totalRewardTokens, 18, 2, true)}\n                      position=\"right-bottom\"\n                      renderContent={() => {\n                        return (\n                          <>\n                            {formatAmount(processedData.gmxInStakedGmx, 18, 2, true)} LeveragePro\n                            <br />\n                            {formatAmount(processedData.esGmxInStakedGmx, 18, 2, true)} esLeveragePro\n                            <br />\n                            {formatAmount(processedData.bnGmxInFeeGmx, 18, 2, true)} Multiplier Points\n                          </>\n                        );\n                      }}\n                    />\n                  </div>\n                </div>\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>Reserved for Vesting</Trans>\n                  </div>\n                  <div>\n                    {formatKeyAmount(vestingData, \"gmxVesterPairAmount\", 18, 2, true)} /{\" \"}\n                    {formatAmount(totalRewardTokens, 18, 2, true)}\n                  </div>\n                </div>\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>Vesting Status</Trans>\n                  </div>\n                  <div>\n                    <Tooltip\n                      handle={`${formatKeyAmount(vestingData, \"gmxVesterClaimSum\", 18, 4, true)} / ${formatKeyAmount(\n                        vestingData,\n                        \"gmxVesterVestedAmount\",\n                        18,\n                        4,\n                        true\n                      )}`}\n                      position=\"right-bottom\"\n                      renderContent={() => {\n                        return (\n                          <>\n                            {formatKeyAmount(vestingData, \"gmxVesterClaimSum\", 18, 4, true)} tokens have been converted\n                            to LeveragePro from the&nbsp;\n                            {formatKeyAmount(vestingData, \"gmxVesterVestedAmount\", 18, 4, true)} esLeveragePro deposited for\n                            vesting.\n                          </>\n                        );\n                      }}\n                    />\n                  </div>\n                </div>\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>Claimable</Trans>\n                  </div>\n                  <div>\n                    <Tooltip\n                      handle={`${formatKeyAmount(vestingData, \"gmxVesterClaimable\", 18, 4, true)} LeveragePro`}\n                      position=\"right-bottom\"\n                      renderContent={() =>\n                        `${formatKeyAmount(\n                          vestingData,\n                          \"gmxVesterClaimable\",\n                          18,\n                          4,\n                          true\n                        )} ${t`LeveragePro tokens can be claimed, use the options under the Total Rewards section to claim them.`}`\n                      }\n                    />\n                  </div>\n                </div>\n                <div className=\"App-card-divider\"></div>\n                <div className=\"App-card-options\">\n                  {!active && (\n                    <button className=\"App-button-option App-card-option\" onClick={() => connectWallet()}>\n                      <Trans>Connect Wallet</Trans>\n                    </button>\n                  )}\n                  {active && (\n                    <button className=\"App-button-option App-card-option\" onClick={() => showGmxVesterDepositModal()}>\n                      <Trans>Deposit</Trans>\n                    </button>\n                  )}\n                  {active && (\n                    <button className=\"App-button-option App-card-option\" onClick={() => showGmxVesterWithdrawModal()}>\n                      <Trans>Withdraw</Trans>\n                    </button>\n                  )}\n                </div>\n              </div>\n            </div>\n            <div className=\"App-card StakeV2-gmx-card\">\n              <div className=\"App-card-title\">GLP Vault</div>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-content\">\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>Staked Tokens</Trans>\n                  </div>\n                  <div>{formatAmount(processedData.glpBalance, 18, 2, true)} GLP</div>\n                </div>\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>Reserved for Vesting</Trans>\n                  </div>\n                  <div>\n                    {formatKeyAmount(vestingData, \"glpVesterPairAmount\", 18, 2, true)} /{\" \"}\n                    {formatAmount(processedData.glpBalance, 18, 2, true)}\n                  </div>\n                </div>\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>Vesting Status</Trans>\n                  </div>\n                  <div>\n                    <Tooltip\n                      handle={`${formatKeyAmount(vestingData, \"glpVesterClaimSum\", 18, 4, true)} / ${formatKeyAmount(\n                        vestingData,\n                        \"glpVesterVestedAmount\",\n                        18,\n                        4,\n                        true\n                      )}`}\n                      position=\"right-bottom\"\n                      renderContent={() => {\n                        return (\n                          <>\n                            {formatKeyAmount(vestingData, \"glpVesterClaimSum\", 18, 4, true)} tokens have been converted\n                            to LeveragePro from the&nbsp;\n                            {formatKeyAmount(vestingData, \"glpVesterVestedAmount\", 18, 4, true)} esLeveragePro deposited for\n                            vesting.\n                          </>\n                        );\n                      }}\n                    />\n                  </div>\n                </div>\n                <div className=\"App-card-row\">\n                  <div className=\"label\">Claimable</div>\n                  <div>\n                    <Tooltip\n                      handle={`${formatKeyAmount(vestingData, \"glpVesterClaimable\", 18, 4, true)} LeveragePro`}\n                      position=\"right-bottom\"\n                      renderContent={() =>\n                        `${formatKeyAmount(\n                          vestingData,\n                          \"glpVesterClaimable\",\n                          18,\n                          4,\n                          true\n                        )} ${t`LeveragePro tokens can be claimed, use the options under the Total Rewards section to claim them.`}`\n                      }\n                    ></Tooltip>\n                  </div>\n                </div>\n                <div className=\"App-card-divider\"></div>\n                <div className=\"App-card-options\">\n                  {!active && (\n                    <button className=\"App-button-option App-card-option\" onClick={() => connectWallet()}>\n                      <Trans>Connect Wallet</Trans>\n                    </button>\n                  )}\n                  {active && (\n                    <button className=\"App-button-option App-card-option\" onClick={() => showGlpVesterDepositModal()}>\n                      <Trans>Deposit</Trans>\n                    </button>\n                  )}\n                  {active && (\n                    <button className=\"App-button-option App-card-option\" onClick={() => showGlpVesterWithdrawModal()}>\n                      <Trans>Withdraw</Trans>\n                    </button>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <Footer />\n    </div>\n  );\n}\n","import React from \"react\";\n\nimport {getConstant} from \"../../config/chains\";\n\nimport StakeV1 from \"./StakeV1\";\nimport StakeV2 from \"./StakeV2\";\nimport {BSC_TESTNET} from \"../../lib/legacy\";\n\nexport default function Stake(props) {\n  const chainId = BSC_TESTNET;\n  const isV2 = getConstant(chainId, \"v2\");\n  return isV2 ? <StakeV2 {...props} /> : <StakeV1 {...props} />;\n}\n","import React from \"react\";\r\n\r\nimport cx from \"classnames\";\r\n\r\nimport \"./Tab.css\";\r\n\r\nexport default function Tab(props) {\r\n  const { options, option, setOption, onChange, type = \"block\", className, optionLabels, icons } = props;\r\n  const onClick = (opt) => {\r\n    if (setOption) {\r\n      setOption(opt);\r\n    }\r\n    if (onChange) {\r\n      onChange(opt);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={cx(\"Tab\", type, className)}>\r\n      {options.map((opt) => {\r\n        const label = optionLabels && optionLabels[opt] ? optionLabels[opt] : opt;\r\n        return (\r\n          <div className={cx(\"Tab-option\", \"muted\", { active: opt === option })} onClick={() => onClick(opt)} key={opt}>\r\n            {icons && icons[opt] && <img className=\"Tab-option-icon\" src={icons[opt]} alt={option} />}\r\n            {label}\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect, useMemo } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\n\r\nexport default function Portal({ children }) {\r\n  const root = document.body;\r\n\r\n  const el = useMemo(() => document.createElement(\"div\"), []);\r\n\r\n  useEffect(() => {\r\n    root.appendChild(el);\r\n    return () => root.removeChild(el);\r\n  }, [root, el]);\r\n\r\n  return createPortal(children, el);\r\n}\r\n","import { useCallback, useRef, useState } from \"react\";\r\nimport cx from \"classnames\";\r\n\r\nimport \"./Tooltip.css\";\r\nimport { IS_TOUCH } from \"../../config/ui\";\r\nimport Portal from \"../Common/Portal\";\r\n\r\nconst OPEN_DELAY = 0;\r\nconst CLOSE_DELAY = 100;\r\n\r\nexport default function TooltipWithPortal(props) {\r\n  const [visible, setVisible] = useState(false);\r\n  const [coords, setCoords] = useState({});\r\n  const [tooltipWidth, setTooltipWidth] = useState();\r\n  const intervalCloseRef = useRef(null);\r\n  const intervalOpenRef = useRef(null);\r\n\r\n  const position = props.position ?? \"left-bottom\";\r\n  const trigger = props.trigger ?? \"hover\";\r\n  const handlerRef = useRef();\r\n\r\n  const updateTooltipCoords = useCallback(() => {\r\n    const rect = handlerRef.current.getBoundingClientRect();\r\n\r\n    setCoords({\r\n      height: rect.height,\r\n      width: rect.width,\r\n      left: rect.x,\r\n      top: rect.y + window.scrollY,\r\n    });\r\n\r\n    if (props.fitHandleWidth) {\r\n      setTooltipWidth(`${rect.width}px`);\r\n    }\r\n  }, [handlerRef, props.fitHandleWidth]);\r\n\r\n  const onMouseEnter = useCallback(() => {\r\n    if (trigger !== \"hover\" || IS_TOUCH) return;\r\n\r\n    if (intervalCloseRef.current) {\r\n      clearInterval(intervalCloseRef.current);\r\n      intervalCloseRef.current = null;\r\n    }\r\n    if (!intervalOpenRef.current) {\r\n      intervalOpenRef.current = setTimeout(() => {\r\n        setVisible(true);\r\n        intervalOpenRef.current = null;\r\n      }, OPEN_DELAY);\r\n    }\r\n    updateTooltipCoords();\r\n  }, [setVisible, intervalCloseRef, intervalOpenRef, trigger, updateTooltipCoords]);\r\n\r\n  const onMouseClick = useCallback(() => {\r\n    if (trigger !== \"click\" && !IS_TOUCH) return;\r\n    if (intervalCloseRef.current) {\r\n      clearInterval(intervalCloseRef.current);\r\n      intervalCloseRef.current = null;\r\n    }\r\n    if (intervalOpenRef.current) {\r\n      clearInterval(intervalOpenRef.current);\r\n      intervalOpenRef.current = null;\r\n    }\r\n    updateTooltipCoords();\r\n\r\n    if (props.closeOnDoubleClick) {\r\n      setVisible((old) => !old);\r\n    } else {\r\n      setVisible(true);\r\n    }\r\n  }, [setVisible, intervalCloseRef, trigger, updateTooltipCoords, props.closeOnDoubleClick]);\r\n\r\n  const onMouseLeave = useCallback(() => {\r\n    intervalCloseRef.current = setTimeout(() => {\r\n      setVisible(false);\r\n      intervalCloseRef.current = null;\r\n    }, CLOSE_DELAY);\r\n    if (intervalOpenRef.current) {\r\n      clearInterval(intervalOpenRef.current);\r\n      intervalOpenRef.current = null;\r\n    }\r\n    updateTooltipCoords();\r\n  }, [setVisible, intervalCloseRef, updateTooltipCoords]);\r\n\r\n  const className = cx(\"Tooltip\", props.className);\r\n\r\n  return (\r\n    <span className={className} onMouseEnter={onMouseEnter} onMouseLeave={onMouseLeave} onClick={onMouseClick}>\r\n      <span\r\n        className={cx({ \"Tooltip-handle\": !props.disableHandleStyle }, [props.handleClassName], { active: visible })}\r\n        ref={handlerRef}\r\n      >\r\n        {props.handle}\r\n      </span>\r\n      {visible && coords.left && (\r\n        <Portal>\r\n          <div style={{ ...coords, position: \"absolute\" }}>\r\n            <div className={cx([\"Tooltip-popup\", position])} style={{ width: tooltipWidth }}>\r\n              {props.renderContent()}\r\n            </div>\r\n          </div>\r\n        </Portal>\r\n      )}\r\n    </span>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport cx from \"classnames\";\r\n\r\nimport { formatAmount, expandDecimals, bigNumberify } from \"../../lib/legacy\";\r\n\r\nimport { getToken } from \"../../config/Tokens\";\r\n\r\nimport { BiChevronDown } from \"react-icons/bi\";\r\n\r\nimport Modal from \"../Modal/Modal\";\r\n\r\nimport dropDownIcon from \"../../img/DROP_DOWN.svg\";\r\nimport \"./TokenSelector.css\";\r\nimport TooltipWithPortal from \"../Tooltip/TooltipWithPortal\";\r\n\r\nexport default function TokenSelector(props) {\r\n  const [isModalVisible, setIsModalVisible] = useState(false);\r\n  const [searchKeyword, setSearchKeyword] = useState(\"\");\r\n  const tokenInfo = getToken(props.chainId, props.tokenAddress);\r\n  const {\r\n    tokens,\r\n    mintingCap,\r\n    infoTokens,\r\n    showMintingCap,\r\n    disabled,\r\n    selectedTokenLabel,\r\n    showBalances = true,\r\n    showTokenImgInDropdown = false,\r\n    showSymbolImage = false,\r\n    showNewCaret = false,\r\n    getTokenState = () => ({ disabled: false, message: null }),\r\n    disableBodyScrollLock,\r\n  } = props;\r\n\r\n  const visibleTokens = tokens.filter((t) => !t.isTempHidden);\r\n\r\n  const onSelectToken = (token) => {\r\n    setIsModalVisible(false);\r\n    props.onSelectToken(token);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isModalVisible) {\r\n      setSearchKeyword(\"\");\r\n    }\r\n  }, [isModalVisible]);\r\n\r\n  if (!tokenInfo) {\r\n    return null;\r\n  }\r\n\r\n  var tokenImage = null;\r\n\r\n  try {\r\n    tokenImage = require(\"../../img/ic_\" + tokenInfo.symbol.toLowerCase() + \"_24.svg\");\r\n  } catch (error) {\r\n    console.error(error);\r\n  }\r\n\r\n  const onSearchKeywordChange = (e) => {\r\n    setSearchKeyword(e.target.value);\r\n  };\r\n\r\n  const filteredTokens = visibleTokens.filter((item) => {\r\n    return (\r\n      item.name.toLowerCase().indexOf(searchKeyword.toLowerCase()) > -1 ||\r\n      item.symbol.toLowerCase().indexOf(searchKeyword.toLowerCase()) > -1\r\n    );\r\n  });\r\n\r\n  const _handleKeyDown = (e) => {\r\n    if (e.key === \"Enter\" && filteredTokens.length > 0) {\r\n      onSelectToken(filteredTokens[0]);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={cx(\"TokenSelector\", { disabled }, props.className)}>\r\n      <Modal\r\n        disableBodyScrollLock={disableBodyScrollLock}\r\n        isVisible={isModalVisible}\r\n        setIsVisible={setIsModalVisible}\r\n        label={props.label}\r\n      >\r\n        <div className=\"TokenSelector-tokens\">\r\n          <div className=\"TokenSelector-token-row TokenSelector-token-input-row\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Search Token\"\r\n              value={searchKeyword}\r\n              onChange={(e) => onSearchKeywordChange(e)}\r\n              onKeyDown={_handleKeyDown}\r\n              autoFocus\r\n            />\r\n          </div>\r\n          {filteredTokens.map((token, tokenIndex) => {\r\n            let tokenPopupImage;\r\n            try {\r\n              tokenPopupImage = require(\"../../img/ic_\" + token.symbol.toLowerCase() + \"_40.svg\");\r\n            } catch (error) {\r\n              tokenPopupImage = require(\"../../img/ic_eth_40.svg\");\r\n            }\r\n            let info = infoTokens ? infoTokens[token.address] : {};\r\n            let mintAmount;\r\n            let balance = info.balance;\r\n            if (showMintingCap && mintingCap && info.usdgAmount) {\r\n              mintAmount = mintingCap.sub(info.usdgAmount);\r\n            }\r\n            if (mintAmount && mintAmount.lt(0)) {\r\n              mintAmount = bigNumberify(0);\r\n            }\r\n            let balanceUsd;\r\n            if (balance && info.maxPrice) {\r\n              balanceUsd = balance.mul(info.maxPrice).div(expandDecimals(1, token.decimals));\r\n            }\r\n\r\n            const tokenState = getTokenState(info) || {};\r\n\r\n            return (\r\n              <div\r\n                key={token.address}\r\n                className={cx(\"TokenSelector-token-row\", { disabled: tokenState.disabled })}\r\n                onClick={() => !tokenState.disabled && onSelectToken(token)}\r\n              >\r\n                {tokenState.disabled && tokenState.message && (\r\n                  <TooltipWithPortal\r\n                    className=\"TokenSelector-tooltip\"\r\n                    portalClassName=\"TokenSelector-tooltip-portal\"\r\n                    handle={<div className=\"TokenSelector-tooltip-backing\" />}\r\n                    position={tokenIndex < filteredTokens.length / 2 ? \"center-bottom\" : \"center-top\"}\r\n                    disableHandleStyle\r\n                    closeOnDoubleClick\r\n                    fitHandleWidth\r\n                    renderContent={() => tokenState.message}\r\n                  />\r\n                )}\r\n                <div className=\"Token-info\">\r\n                  {showTokenImgInDropdown && (\r\n                    <img src={tokenPopupImage?.default} alt={token.name} className=\"token-logo\" />\r\n                  )}\r\n                  <div className=\"Token-symbol\">\r\n                    <div className=\"Token-text\">{token.symbol}</div>\r\n                    <span className=\"text-accent\">{token.name}</span>\r\n                  </div>\r\n                </div>\r\n                <div className=\"Token-balance\">\r\n                  {showBalances && balance && (\r\n                    <div className=\"Token-text\">\r\n                      {balance.gt(0) && formatAmount(balance, token.decimals, 4, true)}\r\n                      {balance.eq(0) && \"-\"}\r\n                    </div>\r\n                  )}\r\n                  <span className=\"text-accent\">\r\n                    {mintAmount && <div>Mintable: {formatAmount(mintAmount, token.decimals, 2, true)} USDG</div>}\r\n                    {showMintingCap && !mintAmount && <div>-</div>}\r\n                    {!showMintingCap && showBalances && balanceUsd && balanceUsd.gt(0) && (\r\n                      <div>${formatAmount(balanceUsd, 30, 2, true)}</div>\r\n                    )}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </Modal>\r\n      {selectedTokenLabel ? (\r\n        <div className=\"TokenSelector-box\" onClick={() => setIsModalVisible(true)}>\r\n          {selectedTokenLabel}\r\n          {!showNewCaret && <BiChevronDown className=\"TokenSelector-caret\" />}\r\n        </div>\r\n      ) : (\r\n        <div className=\"TokenSelector-box\" onClick={() => setIsModalVisible(true)}>\r\n          {tokenInfo.symbol}\r\n          {showSymbolImage && (\r\n            <img src={tokenImage && tokenImage.default} alt={tokenInfo.symbol} className=\"TokenSelector-box-symbol\" />\r\n          )}\r\n          {showNewCaret && <img src={dropDownIcon} alt=\"dropDownIcon\" className=\"TokenSelector-box-caret\" />}\r\n          {!showNewCaret && <BiChevronDown className=\"TokenSelector-caret\" />}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import cx from \"classnames\";\r\n\r\nexport default function ExchangeInfoRow(props) {\r\n  const { label, children, value, isTop, isWarning } = props;\r\n\r\n  return (\r\n    <div className={cx(\"Exchange-info-row\", { \"top-line\": isTop })}>\r\n      <div className=\"Exchange-info-label\">{label}</div>\r\n      <div className={`align-right ${isWarning ? \"Exchange-info-value-warning\" : \"\"}`}>{children || value}</div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useCallback, useState, useMemo } from \"react\";\r\nimport \"./ConfirmationBox.css\";\r\nimport {\r\n  USD_DECIMALS,\r\n  PRECISION,\r\n  BASIS_POINTS_DIVISOR,\r\n  LIMIT,\r\n  MIN_PROFIT_TIME,\r\n  INCREASE,\r\n  expandDecimals,\r\n  getExchangeRate,\r\n  getProfitPrice,\r\n  getTimeRemaining,\r\n  formatAmount,\r\n  formatAmountFree,\r\n  useLocalStorageSerializeKey,\r\n  getExchangeRateDisplay,\r\n  DEFAULT_SLIPPAGE_AMOUNT,\r\n  DEFAULT_HIGHER_SLIPPAGE_AMOUNT,\r\n  SLIPPAGE_BPS_KEY,\r\n  formatDateTime,\r\n  calculatePositionDelta,\r\n  DECREASE,\r\n  TRIGGER_PREFIX_ABOVE,\r\n  TRIGGER_PREFIX_BELOW,\r\n} from \"../../lib/legacy\";\r\nimport { getConstant } from \"../../config/chains\";\r\nimport { getContract } from \"../../config/Addresses\";\r\n\r\nimport { BsArrowRight } from \"react-icons/bs\";\r\nimport Modal from \"../Modal/Modal\";\r\nimport Tooltip from \"../Tooltip/Tooltip\";\r\nimport Checkbox from \"../Checkbox/Checkbox\";\r\nimport ExchangeInfoRow from \"./ExchangeInfoRow\";\r\nimport { cancelDecreaseOrder, handleCancelOrder } from \"../../domain/legacy\";\r\nimport { getNativeToken, getToken, getWrappedToken } from \"../../config/Tokens\";\r\n\r\nconst HIGH_SPREAD_THRESHOLD = expandDecimals(1, USD_DECIMALS).div(100); // 1%;\r\n\r\nfunction getSpread(fromTokenInfo, toTokenInfo, isLong, nativeTokenAddress) {\r\n  if (fromTokenInfo && fromTokenInfo.maxPrice && toTokenInfo && toTokenInfo.minPrice) {\r\n    const fromDiff = fromTokenInfo.maxPrice.sub(fromTokenInfo.minPrice).div(2);\r\n    const fromSpread = fromDiff.mul(PRECISION).div(fromTokenInfo.maxPrice.add(fromTokenInfo.minPrice).div(2));\r\n    const toDiff = toTokenInfo.maxPrice.sub(toTokenInfo.minPrice).div(2);\r\n    const toSpread = toDiff.mul(PRECISION).div(toTokenInfo.maxPrice.add(toTokenInfo.minPrice).div(2));\r\n\r\n    let value = fromSpread.add(toSpread);\r\n\r\n    const fromTokenAddress = fromTokenInfo.isNative ? nativeTokenAddress : fromTokenInfo.address;\r\n    const toTokenAddress = toTokenInfo.isNative ? nativeTokenAddress : toTokenInfo.address;\r\n\r\n    if (isLong && fromTokenAddress === toTokenAddress) {\r\n      value = fromSpread;\r\n    }\r\n\r\n    return {\r\n      value,\r\n      isHigh: value.gt(HIGH_SPREAD_THRESHOLD),\r\n    };\r\n  }\r\n}\r\n\r\nexport default function ConfirmationBox(props) {\r\n  const {\r\n    fromToken,\r\n    fromTokenInfo,\r\n    toToken,\r\n    toTokenInfo,\r\n    isSwap,\r\n    isLong,\r\n    isMarketOrder,\r\n    orderOption,\r\n    isShort,\r\n    toAmount,\r\n    fromAmount,\r\n    isHigherSlippageAllowed,\r\n    setIsHigherSlippageAllowed,\r\n    onConfirmationClick,\r\n    setIsConfirming,\r\n    shortCollateralAddress,\r\n    hasExistingPosition,\r\n    leverage,\r\n    existingPosition,\r\n    existingLiquidationPrice,\r\n    displayLiquidationPrice,\r\n    shortCollateralToken,\r\n    isPendingConfirmation,\r\n    triggerPriceUsd,\r\n    triggerRatio,\r\n    fees,\r\n    feesUsd,\r\n    isSubmitting,\r\n    fromUsdMin,\r\n    toUsdMax,\r\n    nextAveragePrice,\r\n    collateralTokenAddress,\r\n    feeBps,\r\n    chainId,\r\n    orders,\r\n    library,\r\n    setPendingTxns,\r\n    pendingTxns,\r\n    minExecutionFee,\r\n    minExecutionFeeUSD,\r\n    minExecutionFeeErrorMessage,\r\n  } = props;\r\n\r\n  const nativeTokenSymbol = getConstant(chainId, \"nativeTokenSymbol\");\r\n\r\n  const [savedSlippageAmount] = useLocalStorageSerializeKey([chainId, SLIPPAGE_BPS_KEY], DEFAULT_SLIPPAGE_AMOUNT);\r\n  const [isProfitWarningAccepted, setIsProfitWarningAccepted] = useState(false);\r\n  const [isTriggerWarningAccepted, setIsTriggerWarningAccepted] = useState(false);\r\n  const [isLimitOrdersVisible, setIsLimitOrdersVisible] = useState(false);\r\n\r\n  const onCancelOrderClick = useCallback(\r\n    (order) => {\r\n      handleCancelOrder(chainId, library, order, { pendingTxns, setPendingTxns });\r\n    },\r\n    [library, pendingTxns, setPendingTxns, chainId]\r\n  );\r\n\r\n  let minOut;\r\n  let fromTokenUsd;\r\n  let toTokenUsd;\r\n\r\n  let collateralAfterFees = fromUsdMin;\r\n  if (feesUsd) {\r\n    collateralAfterFees = fromUsdMin.sub(feesUsd);\r\n  }\r\n\r\n  if (isSwap) {\r\n    minOut = toAmount.mul(BASIS_POINTS_DIVISOR - savedSlippageAmount).div(BASIS_POINTS_DIVISOR);\r\n\r\n    fromTokenUsd = fromTokenInfo ? formatAmount(fromTokenInfo.minPrice, USD_DECIMALS, 2, true) : 0;\r\n    toTokenUsd = toTokenInfo ? formatAmount(toTokenInfo.maxPrice, USD_DECIMALS, 2, true) : 0;\r\n  }\r\n\r\n  const getTitle = () => {\r\n    if (!isMarketOrder) {\r\n      return \"Confirm Limit Order\";\r\n    }\r\n    if (isSwap) {\r\n      return \"Confirm Swap\";\r\n    }\r\n    return isLong ? \"Confirm Long\" : \"Confirm Short\";\r\n  };\r\n  const title = getTitle();\r\n\r\n  const existingOrder = useMemo(() => {\r\n    const wrappedToken = getWrappedToken(chainId);\r\n    for (const order of orders) {\r\n      if (order.type !== INCREASE) continue;\r\n      const sameToken =\r\n        order.indexToken === wrappedToken.address ? toToken.isNative : order.indexToken === toToken.address;\r\n      if (order.isLong === isLong && sameToken) {\r\n        return order;\r\n      }\r\n    }\r\n  }, [orders, chainId, isLong, toToken.address, toToken.isNative]);\r\n\r\n  const existingOrders = useMemo(() => {\r\n    const wrappedToken = getWrappedToken(chainId);\r\n    return orders.filter((order) => {\r\n      if (order.type !== INCREASE) return false;\r\n      const sameToken =\r\n        order.indexToken === wrappedToken.address ? toToken.isNative : order.indexToken === toToken.address;\r\n      return order.isLong === isLong && sameToken;\r\n    });\r\n  }, [orders, chainId, isLong, toToken.address, toToken.isNative]);\r\n\r\n  const existingTriggerOrders = useMemo(() => {\r\n    const wrappedToken = getWrappedToken(chainId);\r\n    return orders.filter((order) => {\r\n      if (order.type !== DECREASE) return false;\r\n      const sameToken =\r\n        order.indexToken === wrappedToken.address ? toToken.isNative : order.indexToken === toToken.address;\r\n      return order.isLong === isLong && sameToken;\r\n    });\r\n  }, [orders, chainId, isLong, toToken.address, toToken.isNative]);\r\n\r\n  const decreaseOrdersThatWillBeExecuted = useMemo(() => {\r\n    if (isSwap) return [];\r\n    return existingTriggerOrders.filter((order) => {\r\n      if (order.triggerAboveThreshold) {\r\n        return existingPosition?.markPrice.gte(order.triggerPrice);\r\n      } else {\r\n        return existingPosition?.markPrice.lte(order.triggerPrice);\r\n      }\r\n    });\r\n  }, [existingPosition, existingTriggerOrders, isSwap]);\r\n\r\n  const getError = () => {\r\n    if (!isSwap && hasExistingPosition && !isMarketOrder) {\r\n      const { delta, hasProfit } = calculatePositionDelta(triggerPriceUsd, existingPosition);\r\n      if (hasProfit && delta.eq(0)) {\r\n        return \"Invalid price, see warning\";\r\n      }\r\n    }\r\n    if (isMarketOrder && hasPendingProfit && !isProfitWarningAccepted) {\r\n      return \"Forfeit profit not checked\";\r\n    }\r\n    return false;\r\n  };\r\n\r\n  const getPrimaryText = () => {\r\n    if (decreaseOrdersThatWillBeExecuted.length > 0 && !isTriggerWarningAccepted) {\r\n      return `Accept confirmation of trigger orders`;\r\n    }\r\n\r\n    if (!isPendingConfirmation) {\r\n      const error = getError();\r\n      if (error) {\r\n        return error;\r\n      }\r\n\r\n      if (isSwap) {\r\n        return title;\r\n      }\r\n      const action = isMarketOrder ? (isLong ? \"Long\" : \"Short\") : \"Create Order\";\r\n\r\n      if (\r\n        isMarketOrder &&\r\n        MIN_PROFIT_TIME > 0 &&\r\n        hasExistingPosition &&\r\n        existingPosition.delta.eq(0) &&\r\n        existingPosition.pendingDelta.gt(0)\r\n      ) {\r\n        return isLong ? `Forfeit profit and ${action}` : `Forfeit profit and Short`;\r\n      }\r\n\r\n      return isMarketOrder && MIN_PROFIT_TIME > 0 ? `Accept minimum and ${action}` : action;\r\n    }\r\n\r\n    if (!isMarketOrder) {\r\n      return \"Creating Order...\";\r\n    }\r\n    if (isSwap) {\r\n      return \"Swapping...\";\r\n    }\r\n    if (isLong) {\r\n      return \"Longing...\";\r\n    }\r\n    return \"Shorting...\";\r\n  };\r\n\r\n  const isPrimaryEnabled = () => {\r\n    if (getError()) {\r\n      return false;\r\n    }\r\n    if (decreaseOrdersThatWillBeExecuted.length > 0 && !isTriggerWarningAccepted) {\r\n      return false;\r\n    }\r\n    return !isPendingConfirmation && !isSubmitting;\r\n  };\r\n\r\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\r\n  const spread = getSpread(fromTokenInfo, toTokenInfo, isLong, nativeTokenAddress);\r\n  // it's meaningless for limit/stop orders to show spread based on current prices\r\n  const showSpread = isMarketOrder && !!spread;\r\n\r\n  let allowedSlippage = savedSlippageAmount;\r\n  if (isHigherSlippageAllowed) {\r\n    allowedSlippage = DEFAULT_HIGHER_SLIPPAGE_AMOUNT;\r\n  }\r\n\r\n  const renderSpreadWarning = useCallback(() => {\r\n    if (!isMarketOrder) {\r\n      return null;\r\n    }\r\n\r\n    if (spread && spread.isHigh) {\r\n      return (\r\n        <div className=\"Confirmation-box-warning\">\r\n          The spread is {`>`} 1%, please ensure the trade details are acceptable before comfirming\r\n        </div>\r\n      );\r\n    }\r\n  }, [isMarketOrder, spread]);\r\n\r\n  const renderFeeWarning = useCallback(() => {\r\n    if (orderOption === LIMIT || !feeBps || feeBps <= 60) {\r\n      return null;\r\n    }\r\n\r\n    if (isSwap) {\r\n      return (\r\n        <div className=\"Confirmation-box-warning\">\r\n          Fees are high to swap from {fromToken.symbol} to {toToken.symbol}.\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (!collateralTokenAddress) {\r\n      return null;\r\n    }\r\n\r\n    const collateralToken = getToken(chainId, collateralTokenAddress);\r\n    return (\r\n      <div className=\"Confirmation-box-warning\">\r\n        Fees are high to swap from {fromToken.symbol} to {collateralToken.symbol}. <br />\r\n        {collateralToken.symbol} is needed for collateral.\r\n      </div>\r\n    );\r\n  }, [feeBps, isSwap, collateralTokenAddress, chainId, fromToken.symbol, toToken.symbol, orderOption]);\r\n\r\n  const hasPendingProfit =\r\n    MIN_PROFIT_TIME > 0 && existingPosition && existingPosition.delta.eq(0) && existingPosition.pendingDelta.gt(0);\r\n\r\n  const renderMinProfitWarning = useCallback(() => {\r\n    if (MIN_PROFIT_TIME === 0) {\r\n      return null;\r\n    }\r\n    if (!isSwap) {\r\n      if (hasExistingPosition) {\r\n        const minProfitExpiration = existingPosition.lastIncreasedTime + MIN_PROFIT_TIME;\r\n        if (isMarketOrder && existingPosition.delta.eq(0) && existingPosition.pendingDelta.gt(0)) {\r\n          const profitPrice = getProfitPrice(existingPosition.markPrice, existingPosition);\r\n          return (\r\n            <div className=\"Confirmation-box-warning\">\r\n              Increasing this position at the current price will forfeit a&nbsp;\r\n              <a\r\n                href=\"https://gmxio.gitbook.io/gmx/trading#minimum-price-change\"\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n              >\r\n                pending profit\r\n              </a>{\" \"}\r\n              of {existingPosition.deltaStr}.<br />\r\n              <br />\r\n              Profit price: {existingPosition.isLong ? \">\" : \"<\"} ${formatAmount(profitPrice, USD_DECIMALS, 2, true)}.\r\n              This rule only applies for the next {getTimeRemaining(minProfitExpiration)}, until{\" \"}\r\n              {formatDateTime(minProfitExpiration)}.\r\n            </div>\r\n          );\r\n        }\r\n        if (!isMarketOrder) {\r\n          const { delta, hasProfit } = calculatePositionDelta(triggerPriceUsd, existingPosition);\r\n          if (hasProfit && delta.eq(0)) {\r\n            const profitPrice = getProfitPrice(existingPosition.markPrice, existingPosition);\r\n            return (\r\n              <div className=\"Confirmation-box-warning\">\r\n                This order will forfeit a&nbsp;\r\n                <a\r\n                  href=\"https://gmxio.gitbook.io/gmx/trading#minimum-price-change\"\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                >\r\n                  profit\r\n                </a>{\" \"}\r\n                of {existingPosition.deltaStr}.<br />\r\n                Profit price: {existingPosition.isLong ? \">\" : \"<\"} ${formatAmount(profitPrice, USD_DECIMALS, 2, true)}.\r\n                This rule only applies for the next {getTimeRemaining(minProfitExpiration)}, until{\" \"}\r\n                {formatDateTime(minProfitExpiration)}.\r\n              </div>\r\n            );\r\n          }\r\n        }\r\n      }\r\n\r\n      return (\r\n        <div className=\"Confirmation-box-warning\">\r\n          A minimum price change of&nbsp;\r\n          <a href=\"https://gmxio.gitbook.io/gmx/trading#minimum-price-change\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n            1.5%\r\n          </a>{\" \"}\r\n          is required for a position to be in profit. This only applies for the first {MIN_PROFIT_TIME / 60 / 60} hours\r\n          after increasing a position.\r\n        </div>\r\n      );\r\n    }\r\n  }, [isSwap, hasExistingPosition, existingPosition, isMarketOrder, triggerPriceUsd]);\r\n\r\n  const renderExistingOrderWarning = useCallback(() => {\r\n    if (isSwap || !existingOrder) {\r\n      return;\r\n    }\r\n    const indexToken = getToken(chainId, existingOrder.indexToken);\r\n    const sizeInToken = formatAmount(\r\n      existingOrder.sizeDelta.mul(PRECISION).div(existingOrder.triggerPrice),\r\n      USD_DECIMALS,\r\n      4,\r\n      true\r\n    );\r\n    if (existingOrders?.length > 1) {\r\n      return (\r\n        <div>\r\n          <div className=\"Confirmation-box-info\">\r\n            <span>\r\n              You have multiple existing Increase {existingOrder.isLong ? \"Long\" : \"Short\"} {indexToken.symbol} limit\r\n              orders{\" \"}\r\n            </span>\r\n            <span onClick={() => setIsLimitOrdersVisible((p) => !p)} className=\"view-orders\">\r\n              ({isLimitOrdersVisible ? \"hide\" : \"view\"})\r\n            </span>\r\n          </div>\r\n          {isLimitOrdersVisible && (\r\n            <ul className=\"order-list\">\r\n              {existingOrders.map((order) => {\r\n                const { account, index, type, triggerAboveThreshold, triggerPrice } = order;\r\n                const id = `${account}-${index}`;\r\n                const triggerPricePrefix = triggerAboveThreshold ? TRIGGER_PREFIX_ABOVE : TRIGGER_PREFIX_BELOW;\r\n                const indexToken = getToken(chainId, order.indexToken);\r\n\r\n                return (\r\n                  <li key={id} className=\"font-sm\">\r\n                    <p>\r\n                      {type === INCREASE ? \"Increase\" : \"Decrease\"} {indexToken.symbol} {isLong ? \"Long\" : \"Short\"}{\" \"}\r\n                      &nbsp;{triggerPricePrefix} ${formatAmount(triggerPrice, USD_DECIMALS, 2, true)}\r\n                    </p>\r\n                    <button onClick={() => onCancelOrderClick(order)}>Cancel</button>\r\n                  </li>\r\n                );\r\n              })}\r\n            </ul>\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <div className=\"Confirmation-box-info\">\r\n        You have an active Limit Order to Increase {existingOrder.isLong ? \"Long\" : \"Short\"} {sizeInToken}{\" \"}\r\n        {indexToken.symbol} (${formatAmount(existingOrder.sizeDelta, USD_DECIMALS, 2, true)}) at price $\r\n        {formatAmount(existingOrder.triggerPrice, USD_DECIMALS, 2, true)}\r\n      </div>\r\n    );\r\n  }, [existingOrder, isSwap, chainId, existingOrders, isLong, isLimitOrdersVisible, onCancelOrderClick]);\r\n\r\n  const renderExistingTriggerErrors = useCallback(() => {\r\n    if (isSwap || decreaseOrdersThatWillBeExecuted?.length < 1) {\r\n      return;\r\n    }\r\n    const existingTriggerOrderLength = decreaseOrdersThatWillBeExecuted.length;\r\n    const orderText = existingTriggerOrderLength > 1 ? \"orders\" : \"order\";\r\n    return (\r\n      <>\r\n        <div className=\"Confirmation-box-warning\">\r\n          You have {existingTriggerOrderLength > 1 ? `${existingTriggerOrderLength}` : \"an\"} active trigger {orderText}{\" \"}\r\n          that might execute immediately after you open this position. Please cancel the {orderText} or accept the\r\n          confirmation to continue.\r\n        </div>\r\n        <ul className=\"order-list\">\r\n          {decreaseOrdersThatWillBeExecuted.map((order) => {\r\n            const { account, index, type, triggerAboveThreshold, triggerPrice } = order;\r\n            const id = `${account}-${index}`;\r\n            const triggerPricePrefix = triggerAboveThreshold ? TRIGGER_PREFIX_ABOVE : TRIGGER_PREFIX_BELOW;\r\n            const indexToken = getToken(chainId, order.indexToken);\r\n            return (\r\n              <li key={id}>\r\n                <p>\r\n                  {type === INCREASE ? \"Increase\" : \"Decrease\"} {indexToken.symbol} {isLong ? \"Long\" : \"Short\"}\r\n                  &nbsp;{triggerPricePrefix} ${formatAmount(triggerPrice, USD_DECIMALS, 2, true)}\r\n                </p>\r\n                <button\r\n                  onClick={() =>\r\n                    cancelDecreaseOrder(chainId, library, index, {\r\n                      successMsg: \"Order cancelled\",\r\n                      failMsg: \"Cancel failed\",\r\n                      sentMsg: \"Cancel submitted\",\r\n                      pendingTxns,\r\n                      setPendingTxns,\r\n                    })\r\n                  }\r\n                >\r\n                  Cancel\r\n                </button>\r\n              </li>\r\n            );\r\n          })}\r\n        </ul>\r\n      </>\r\n    );\r\n  }, [decreaseOrdersThatWillBeExecuted, isSwap, chainId, library, pendingTxns, setPendingTxns, isLong]);\r\n\r\n  const renderExistingTriggerWarning = useCallback(() => {\r\n    if (\r\n      isSwap ||\r\n      existingTriggerOrders.length < 1 ||\r\n      decreaseOrdersThatWillBeExecuted.length > 0 ||\r\n      renderExistingOrderWarning()\r\n    ) {\r\n      return;\r\n    }\r\n    const existingTriggerOrderLength = existingTriggerOrders.length;\r\n    return (\r\n      <div className=\"Confirmation-box-info\">\r\n        You have {existingTriggerOrderLength > 1 ? `${existingTriggerOrderLength}` : \"an\"} active trigger{\" \"}\r\n        {existingTriggerOrderLength > 1 ? \"orders\" : \"order\"} that could impact this position.\r\n      </div>\r\n    );\r\n  }, [existingTriggerOrders, isSwap, decreaseOrdersThatWillBeExecuted, renderExistingOrderWarning]);\r\n\r\n  // TODO handle unaprproved order plugin (very unlikely case)\r\n  const renderMain = useCallback(() => {\r\n    if (isSwap) {\r\n      return (\r\n        <div className=\"Confirmation-box-main\">\r\n          <div>\r\n            Pay&nbsp;{formatAmount(fromAmount, fromToken.decimals, 4, true)} {fromToken.symbol} ($\r\n            {formatAmount(fromUsdMin, USD_DECIMALS, 2, true)})\r\n          </div>\r\n          <div className=\"Confirmation-box-main-icon\"></div>\r\n          <div>\r\n            Receive&nbsp;{formatAmount(toAmount, toToken.decimals, 4, true)} {toToken.symbol} ($\r\n            {formatAmount(toUsdMax, USD_DECIMALS, 2, true)})\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"Confirmation-box-main\">\r\n        <span>\r\n          Pay&nbsp;{formatAmount(fromAmount, fromToken.decimals, 4, true)} {fromToken.symbol} ($\r\n          {formatAmount(fromUsdMin, USD_DECIMALS, 2, true)})\r\n        </span>\r\n        <div className=\"Confirmation-box-main-icon\"></div>\r\n        <div>\r\n          {isLong ? \"Long\" : \"Short\"}&nbsp;\r\n          {formatAmount(toAmount, toToken.decimals, 4, true)} {toToken.symbol} ($\r\n          {formatAmount(toUsdMax, USD_DECIMALS, 2, true)})\r\n        </div>\r\n      </div>\r\n    );\r\n  }, [isSwap, fromAmount, fromToken, toToken, fromUsdMin, toUsdMax, isLong, toAmount]);\r\n\r\n  const SWAP_ORDER_EXECUTION_GAS_FEE = getConstant(chainId, \"SWAP_ORDER_EXECUTION_GAS_FEE\");\r\n  const INCREASE_ORDER_EXECUTION_GAS_FEE = getConstant(chainId, \"INCREASE_ORDER_EXECUTION_GAS_FEE\");\r\n  const executionFee = isSwap ? SWAP_ORDER_EXECUTION_GAS_FEE : INCREASE_ORDER_EXECUTION_GAS_FEE;\r\n  const renderExecutionFee = useCallback(() => {\r\n    if (isMarketOrder) {\r\n      return null;\r\n    }\r\n    return (\r\n      <ExchangeInfoRow label=\"Execution Fee\">\r\n        {formatAmount(executionFee, 18, 4)} {getNativeToken(chainId).symbol}\r\n      </ExchangeInfoRow>\r\n    );\r\n  }, [isMarketOrder, executionFee, chainId]);\r\n\r\n  const renderAvailableLiquidity = useCallback(() => {\r\n    let availableLiquidity;\r\n    const riskThresholdBps = 5000;\r\n    let isLiquidityRisk;\r\n    const token = isSwap || isLong ? toTokenInfo : shortCollateralToken;\r\n\r\n    if (!token || !token.poolAmount || !token.availableAmount) {\r\n      return null;\r\n    }\r\n\r\n    if (isSwap) {\r\n      const poolWithoutBuffer = token.poolAmount.sub(token.bufferAmount);\r\n      availableLiquidity = token.availableAmount.gt(poolWithoutBuffer) ? poolWithoutBuffer : token.availableAmount;\r\n      isLiquidityRisk = availableLiquidity.mul(riskThresholdBps).div(BASIS_POINTS_DIVISOR).lt(toAmount);\r\n    } else {\r\n      if (isShort) {\r\n        availableLiquidity = token.availableAmount;\r\n\r\n        let adjustedMaxGlobalShortSize;\r\n\r\n        if (toTokenInfo.maxAvailableShort && toTokenInfo.maxAvailableShort.gt(0)) {\r\n          adjustedMaxGlobalShortSize = toTokenInfo.maxAvailableShort\r\n            .mul(expandDecimals(1, token.decimals))\r\n            .div(expandDecimals(1, USD_DECIMALS));\r\n        }\r\n\r\n        if (adjustedMaxGlobalShortSize && adjustedMaxGlobalShortSize.lt(token.availableAmount)) {\r\n          availableLiquidity = adjustedMaxGlobalShortSize;\r\n        }\r\n\r\n        const sizeTokens = toUsdMax.mul(expandDecimals(1, token.decimals)).div(token.minPrice);\r\n        isLiquidityRisk = availableLiquidity.mul(riskThresholdBps).div(BASIS_POINTS_DIVISOR).lt(sizeTokens);\r\n      } else {\r\n        availableLiquidity = token.availableAmount;\r\n        isLiquidityRisk = availableLiquidity.mul(riskThresholdBps).div(BASIS_POINTS_DIVISOR).lt(toAmount);\r\n      }\r\n    }\r\n\r\n    if (!availableLiquidity) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <ExchangeInfoRow label=\"Available Liquidity\">\r\n        <Tooltip\r\n          position=\"right-bottom\"\r\n          handleClassName={isLiquidityRisk ? \"negative\" : null}\r\n          handle={\r\n            <>\r\n              {formatAmount(availableLiquidity, token.decimals, token.isStable ? 0 : 2, true)} {token.symbol}\r\n            </>\r\n          }\r\n          renderContent={() =>\r\n            isLiquidityRisk\r\n              ? \"There may not be sufficient liquidity to execute your order when the price conditions are met\"\r\n              : \"The order will only execute if the price conditions are met and there is sufficient liquidity\"\r\n          }\r\n        />\r\n      </ExchangeInfoRow>\r\n    );\r\n  }, [toTokenInfo, shortCollateralToken, isShort, isLong, isSwap, toAmount, toUsdMax]);\r\n\r\n  const renderMarginSection = useCallback(() => {\r\n    return (\r\n      <>\r\n        <div>\r\n          {renderMain()}\r\n          {renderFeeWarning()}\r\n          {renderMinProfitWarning()}\r\n          {renderExistingOrderWarning()}\r\n          {renderExistingTriggerErrors()}\r\n          {renderExistingTriggerWarning()}\r\n          {minExecutionFeeErrorMessage && <div className=\"Confirmation-box-warning\">{minExecutionFeeErrorMessage}</div>}\r\n          {hasPendingProfit && isMarketOrder && (\r\n            <div className=\"PositionEditor-accept-profit-warning\">\r\n              <Checkbox isChecked={isProfitWarningAccepted} setIsChecked={setIsProfitWarningAccepted}>\r\n                <span className=\"muted\">Forfeit profit</span>\r\n              </Checkbox>\r\n            </div>\r\n          )}\r\n          {orderOption === LIMIT && renderAvailableLiquidity()}\r\n          {isShort && (\r\n            <ExchangeInfoRow label=\"Collateral In\">{getToken(chainId, shortCollateralAddress).symbol}</ExchangeInfoRow>\r\n          )}\r\n          {isLong && <ExchangeInfoRow label=\"Collateral In\" value={toTokenInfo.symbol} />}\r\n          <ExchangeInfoRow label=\"Leverage\">\r\n            {hasExistingPosition && toAmount && toAmount.gt(0) && (\r\n              <div className=\"inline-block muted\">\r\n                {formatAmount(existingPosition.leverage, 4, 2)}x\r\n                <BsArrowRight className=\"transition-arrow\" />\r\n              </div>\r\n            )}\r\n            {toAmount && leverage && leverage.gt(0) && `${formatAmount(leverage, 4, 2)}x`}\r\n            {!toAmount && leverage && leverage.gt(0) && `-`}\r\n            {leverage && leverage.eq(0) && `-`}\r\n          </ExchangeInfoRow>\r\n          <ExchangeInfoRow label=\"Liq. Price\">\r\n            {hasExistingPosition && toAmount && toAmount.gt(0) && (\r\n              <div className=\"inline-block muted\">\r\n                ${formatAmount(existingLiquidationPrice, USD_DECIMALS, 2, true)}\r\n                <BsArrowRight className=\"transition-arrow\" />\r\n              </div>\r\n            )}\r\n            {toAmount && displayLiquidationPrice && `$${formatAmount(displayLiquidationPrice, USD_DECIMALS, 2, true)}`}\r\n            {!toAmount && displayLiquidationPrice && `-`}\r\n            {!displayLiquidationPrice && `-`}\r\n          </ExchangeInfoRow>\r\n          <ExchangeInfoRow label=\"Fees\">${formatAmount(feesUsd, USD_DECIMALS, 2, true)}</ExchangeInfoRow>\r\n          <ExchangeInfoRow label=\"Collateral\">\r\n            <Tooltip\r\n              handle={`$${formatAmount(collateralAfterFees, USD_DECIMALS, 2, true)}`}\r\n              position=\"right-bottom\"\r\n              renderContent={() => {\r\n                return (\r\n                  <>\r\n                    Your position's collateral after deducting fees.\r\n                    <br />\r\n                    <br />\r\n                    Pay amount: ${formatAmount(fromUsdMin, USD_DECIMALS, 2, true)}\r\n                    <br />\r\n                    Fees: ${formatAmount(feesUsd, USD_DECIMALS, 2, true)}\r\n                    <br />\r\n                  </>\r\n                );\r\n              }}\r\n            />\r\n          </ExchangeInfoRow>\r\n          {showSpread && (\r\n            <ExchangeInfoRow label=\"Spread\" isWarning={spread.isHigh} isTop={true}>\r\n              {formatAmount(spread.value.mul(100), USD_DECIMALS, 2, true)}%\r\n            </ExchangeInfoRow>\r\n          )}\r\n          {isMarketOrder && (\r\n            <ExchangeInfoRow label=\"Entry Price\">\r\n              {hasExistingPosition && toAmount && toAmount.gt(0) && (\r\n                <div className=\"inline-block muted\">\r\n                  ${formatAmount(existingPosition.averagePrice, USD_DECIMALS, 2, true)}\r\n                  <BsArrowRight className=\"transition-arrow\" />\r\n                </div>\r\n              )}\r\n              {nextAveragePrice && `$${formatAmount(nextAveragePrice, USD_DECIMALS, 2, true)}`}\r\n              {!nextAveragePrice && `-`}\r\n            </ExchangeInfoRow>\r\n          )}\r\n          {!isMarketOrder && (\r\n            <ExchangeInfoRow label=\"Limit Price\" isTop={true}>\r\n              ${formatAmount(triggerPriceUsd, USD_DECIMALS, 2, true)}\r\n            </ExchangeInfoRow>\r\n          )}\r\n          <ExchangeInfoRow label=\"Borrow Fee\">\r\n            {isLong && toTokenInfo && formatAmount(toTokenInfo.fundingRate, 4, 4)}\r\n            {isShort && shortCollateralToken && formatAmount(shortCollateralToken.fundingRate, 4, 4)}\r\n            {((isLong && toTokenInfo && toTokenInfo.fundingRate) ||\r\n              (isShort && shortCollateralToken && shortCollateralToken.fundingRate)) &&\r\n              \"% / 1h\"}\r\n          </ExchangeInfoRow>\r\n          {isMarketOrder && (\r\n            <div className=\"PositionEditor-allow-higher-slippage\">\r\n              <ExchangeInfoRow label=\"Execution Fee\">\r\n                <Tooltip\r\n                  handle={`${formatAmountFree(minExecutionFee, 18, 5)} ${nativeTokenSymbol}`}\r\n                  position=\"right-top\"\r\n                  renderContent={() => {\r\n                    return (\r\n                      <>\r\n                        Network fee: {formatAmountFree(minExecutionFee, 18, 5)} {nativeTokenSymbol} ($\r\n                        {formatAmount(minExecutionFeeUSD, USD_DECIMALS, 2)})<br />\r\n                        <br />\r\n                        This is the network cost required to execute the postion.{\" \"}\r\n                        <a\r\n                          href=\"https://gmxio.gitbook.io/gmx/trading#execution-fee\"\r\n                          target=\"_blank\"\r\n                          rel=\"noopener noreferrer\"\r\n                        >\r\n                          More Info\r\n                        </a>\r\n                      </>\r\n                    );\r\n                  }}\r\n                />\r\n              </ExchangeInfoRow>\r\n            </div>\r\n          )}\r\n          <ExchangeInfoRow label=\"Allowed Slippage\">\r\n            <Tooltip\r\n              handle={`${formatAmount(allowedSlippage, 2, 2)}%`}\r\n              position=\"right-top\"\r\n              renderContent={() => {\r\n                return (\r\n                  <>\r\n                    You can change this in the settings menu on the top right of the page.\r\n                    <br />\r\n                    <br />\r\n                    Note that a low allowed slippage, e.g. less than 0.5%, may result in failed orders if prices are\r\n                    volatile.\r\n                  </>\r\n                );\r\n              }}\r\n            />\r\n          </ExchangeInfoRow>\r\n          {isMarketOrder && (\r\n            <div className=\"PositionEditor-allow-higher-slippage\">\r\n              <Checkbox isChecked={isHigherSlippageAllowed} setIsChecked={setIsHigherSlippageAllowed}>\r\n                <span className=\"muted font-sm\">Allow up to 1% slippage</span>\r\n              </Checkbox>\r\n            </div>\r\n          )}\r\n          {decreaseOrdersThatWillBeExecuted.length > 0 && (\r\n            <div className=\"PositionEditor-allow-higher-slippage\">\r\n              <Checkbox isChecked={isTriggerWarningAccepted} setIsChecked={setIsTriggerWarningAccepted}>\r\n                <span className=\"muted font-sm\">I am aware of the trigger orders</span>\r\n              </Checkbox>\r\n            </div>\r\n          )}\r\n          {renderExecutionFee()}\r\n        </div>\r\n      </>\r\n    );\r\n  }, [\r\n    renderMain,\r\n    renderMinProfitWarning,\r\n    shortCollateralAddress,\r\n    isShort,\r\n    isLong,\r\n    toTokenInfo,\r\n    nextAveragePrice,\r\n    toAmount,\r\n    hasExistingPosition,\r\n    existingPosition,\r\n    isMarketOrder,\r\n    triggerPriceUsd,\r\n    showSpread,\r\n    spread,\r\n    displayLiquidationPrice,\r\n    existingLiquidationPrice,\r\n    feesUsd,\r\n    leverage,\r\n    renderExecutionFee,\r\n    shortCollateralToken,\r\n    chainId,\r\n    renderFeeWarning,\r\n    hasPendingProfit,\r\n    isProfitWarningAccepted,\r\n    renderAvailableLiquidity,\r\n    orderOption,\r\n    fromUsdMin,\r\n    collateralAfterFees,\r\n    renderExistingOrderWarning,\r\n    renderExistingTriggerWarning,\r\n    renderExistingTriggerErrors,\r\n    isHigherSlippageAllowed,\r\n    setIsHigherSlippageAllowed,\r\n    allowedSlippage,\r\n    isTriggerWarningAccepted,\r\n    decreaseOrdersThatWillBeExecuted,\r\n    minExecutionFee,\r\n    nativeTokenSymbol,\r\n    minExecutionFeeUSD,\r\n    minExecutionFeeErrorMessage,\r\n  ]);\r\n\r\n  const renderSwapSection = useCallback(() => {\r\n    return (\r\n      <>\r\n        <div>\r\n          {renderMain()}\r\n          {renderFeeWarning()}\r\n          {renderSpreadWarning()}\r\n          {orderOption === LIMIT && renderAvailableLiquidity()}\r\n          <ExchangeInfoRow label=\"Min. Receive\">\r\n            {formatAmount(minOut, toTokenInfo.decimals, 4, true)} {toTokenInfo.symbol}\r\n          </ExchangeInfoRow>\r\n          <ExchangeInfoRow label=\"Price\">\r\n            {getExchangeRateDisplay(getExchangeRate(fromTokenInfo, toTokenInfo), fromTokenInfo, toTokenInfo)}\r\n          </ExchangeInfoRow>\r\n          {!isMarketOrder && (\r\n            <div className=\"Exchange-info-row\">\r\n              <div className=\"Exchange-info-label\">Limit Price</div>\r\n              <div className=\"align-right\">{getExchangeRateDisplay(triggerRatio, fromTokenInfo, toTokenInfo)}</div>\r\n            </div>\r\n          )}\r\n          {showSpread && (\r\n            <ExchangeInfoRow label=\"Spread\" isWarning={spread.isHigh}>\r\n              {formatAmount(spread.value.mul(100), USD_DECIMALS, 2, true)}%\r\n            </ExchangeInfoRow>\r\n          )}\r\n          <div className=\"Exchange-info-row\">\r\n            <div className=\"Exchange-info-label\">Fees</div>\r\n            <div className=\"align-right\">\r\n              {formatAmount(feeBps, 2, 2, true)}% ({formatAmount(fees, fromTokenInfo.decimals, 4, true)}{\" \"}\r\n              {fromTokenInfo.symbol}: ${formatAmount(feesUsd, USD_DECIMALS, 2, true)})\r\n            </div>\r\n          </div>\r\n          {renderExecutionFee()}\r\n          {fromTokenUsd && (\r\n            <div className=\"Exchange-info-row\">\r\n              <div className=\"Exchange-info-label\">{fromTokenInfo.symbol} Price</div>\r\n              <div className=\"align-right\">{fromTokenUsd} USD</div>\r\n            </div>\r\n          )}\r\n          {toTokenUsd && (\r\n            <div className=\"Exchange-info-row\">\r\n              <div className=\"Exchange-info-label\">{toTokenInfo.symbol} Price</div>\r\n              <div className=\"align-right\">{toTokenUsd} USD</div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </>\r\n    );\r\n  }, [\r\n    renderMain,\r\n    renderSpreadWarning,\r\n    fromTokenInfo,\r\n    toTokenInfo,\r\n    orderOption,\r\n    showSpread,\r\n    spread,\r\n    feesUsd,\r\n    feeBps,\r\n    renderExecutionFee,\r\n    fromTokenUsd,\r\n    toTokenUsd,\r\n    triggerRatio,\r\n    fees,\r\n    isMarketOrder,\r\n    minOut,\r\n    renderFeeWarning,\r\n    renderAvailableLiquidity,\r\n  ]);\r\n\r\n  return (\r\n    <div className=\"Confirmation-box\">\r\n      <Modal isVisible={true} setIsVisible={() => setIsConfirming(false)} label={title}>\r\n        {isSwap && renderSwapSection()}\r\n        {!isSwap && renderMarginSection()}\r\n        <div className=\"Confirmation-box-row\">\r\n          <button\r\n            onClick={onConfirmationClick}\r\n            className=\"App-cta Confirmation-box-button\"\r\n            disabled={!isPrimaryEnabled()}\r\n          >\r\n            {getPrimaryText()}\r\n          </button>\r\n        </div>\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { Trans, t } from \"@lingui/macro\";\r\nimport Modal from \"../Modal/Modal\";\r\nimport Checkbox from \"../Checkbox/Checkbox\";\r\n\r\nimport \"./OrdersToa.css\";\r\n\r\nexport default function OrdersToa(props) {\r\n  const { setIsVisible, isPluginApproving, approveOrderBook } = props;\r\n\r\n  const [isChecked, setIsChecked] = useState(false);\r\n\r\n  const onConfirmationClick = () => {\r\n    approveOrderBook().then(() => {\r\n      setIsVisible(false);\r\n    });\r\n  };\r\n\r\n  const getPrimaryText = () => {\r\n    if (isPluginApproving) {\r\n      return t`Enabling Orders...`;\r\n    }\r\n    if (!isChecked) {\r\n      return t`Accept terms to enable orders`;\r\n    }\r\n    return t`Enable Orders`;\r\n  };\r\n\r\n  const isPrimaryEnabled = () => {\r\n    if (isPluginApproving) {\r\n      return false;\r\n    }\r\n    return isChecked;\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      setIsVisible={setIsVisible}\r\n      isVisible={true}\r\n      label={t`Enable Orders`}\r\n      className=\"Orders-toa Modal-scrollable\"\r\n      zIndex=\"1000\"\r\n    >\r\n      <Trans>\r\n        Note that orders are not guaranteed to be executed.\r\n        <br />\r\n        <br />\r\n        This can occur in a few situations including but not exclusive to:\r\n      </Trans>\r\n      <br />\r\n      <ul>\r\n        <Trans>\r\n          <li>Insufficient liquidity to execute the order</li>\r\n          <li>The mark price which is an aggregate of exchange prices did not reach the specified price</li>\r\n          <li>The specified price was reached but not long enough for it to be executed</li>\r\n          <li>No keeper picked up the order for execution</li>\r\n        </Trans>\r\n      </ul>\r\n      <div>\r\n        <Trans>\r\n          Additionally, trigger orders are market orders and are not guaranteed to settle at the trigger price.\r\n        </Trans>\r\n      </div>\r\n      <br />\r\n      <div className=\"Orders-toa-accept-rules\">\r\n        <Checkbox isChecked={isChecked} setIsChecked={setIsChecked}>\r\n          <span className=\"muted\">\r\n            <Trans>\r\n              Accept that orders are not guaranteed to execute and trigger orders may not settle at the trigger price\r\n            </Trans>\r\n          </span>\r\n        </Checkbox>\r\n      </div>\r\n      <button disabled={!isPrimaryEnabled()} className=\"App-cta Confirmation-box-button\" onClick={onConfirmationClick}>\r\n        {getPrimaryText()}\r\n      </button>\r\n    </Modal>\r\n  );\r\n}\r\n","import {\r\n  formatAmount,\r\n  bigNumberify,\r\n  isAddressZero,\r\n  USD_DECIMALS,\r\n  MAX_REFERRAL_CODE_LENGTH,\r\n  ARBITRUM,\r\n  AVALANCHE,\r\n} from \"../../lib/legacy\";\r\nimport { encodeReferralCode, getReferralCodeOwner } from \"../../domain/referrals\";\r\n\r\nexport const REFERRAL_CODE_REGEX = /^\\w+$/; // only number, string and underscore is allowed\r\nexport const REGEX_VERIFY_BYTES32 = /^0x[0-9a-f]{64}$/;\r\n\r\nexport function isRecentReferralCodeNotExpired(referralCodeInfo) {\r\n  const REFERRAL_DATA_MAX_TIME = 60000 * 5; // 5 minutes\r\n  if (referralCodeInfo.time) {\r\n    return referralCodeInfo.time + REFERRAL_DATA_MAX_TIME > Date.now();\r\n  }\r\n}\r\n\r\nexport async function getReferralCodeTakenStatus(account, referralCode, chainId) {\r\n  const referralCodeBytes32 = encodeReferralCode(referralCode);\r\n  const [ownerArbitrum, ownerAvax] = await Promise.all([\r\n    getReferralCodeOwner(ARBITRUM, referralCodeBytes32),\r\n    getReferralCodeOwner(AVALANCHE, referralCodeBytes32),\r\n  ]);\r\n\r\n  const takenOnArb =\r\n    !isAddressZero(ownerArbitrum) && (ownerArbitrum !== account || (ownerArbitrum === account && chainId === ARBITRUM));\r\n  const takenOnAvax =\r\n    !isAddressZero(ownerAvax) && (ownerAvax !== account || (ownerAvax === account && chainId === AVALANCHE));\r\n\r\n  const referralCodeTakenInfo = {\r\n    [ARBITRUM]: takenOnArb,\r\n    [AVALANCHE]: takenOnAvax,\r\n    both: takenOnArb && takenOnAvax,\r\n    ownerArbitrum,\r\n    ownerAvax,\r\n  };\r\n\r\n  if (referralCodeTakenInfo.both) {\r\n    return { status: \"all\", info: referralCodeTakenInfo };\r\n  }\r\n  if (referralCodeTakenInfo[chainId]) {\r\n    return { status: \"current\", info: referralCodeTakenInfo };\r\n  }\r\n  if (chainId === AVALANCHE ? referralCodeTakenInfo[ARBITRUM] : referralCodeTakenInfo[AVALANCHE]) {\r\n    return { status: \"other\", info: referralCodeTakenInfo };\r\n  }\r\n  return { status: \"none\", info: referralCodeTakenInfo };\r\n}\r\n\r\nexport function getTierIdDisplay(tierId) {\r\n  return Number(tierId) + 1;\r\n}\r\n\r\nexport const tierRebateInfo = {\r\n  0: 5,\r\n  1: 10,\r\n  2: 15,\r\n};\r\n\r\nexport const tierDiscountInfo = {\r\n  0: 5,\r\n  1: 10,\r\n  2: 10,\r\n};\r\n\r\nfunction areObjectsWithSameKeys(obj1, obj2) {\r\n  return Object.keys(obj1).every((key) => key in obj2);\r\n}\r\n\r\nexport function deserializeSampleStats(input) {\r\n  const parsedData = JSON.parse(input);\r\n  if (!Array.isArray(parsedData)) return [];\r\n  return parsedData\r\n    .map((data) => {\r\n      if (!areObjectsWithSameKeys(getSampleReferrarStat(), data)) return null;\r\n      return Object.keys(data).reduce((acc, cv) => {\r\n        const currentValue = data[cv];\r\n        if (currentValue?.type === \"BigNumber\") {\r\n          acc[cv] = bigNumberify(currentValue.hex || 0);\r\n        } else {\r\n          acc[cv] = currentValue;\r\n        }\r\n        return acc;\r\n      }, {});\r\n    })\r\n    .filter(Boolean);\r\n}\r\n\r\nexport const getSampleReferrarStat = (code = \"\", ownerOnOtherNetwork = \"\", account = \"\") => {\r\n  return {\r\n    discountUsd: bigNumberify(0),\r\n    referralCode: code,\r\n    totalRebateUsd: bigNumberify(0),\r\n    tradedReferralsCount: 0,\r\n    registeredReferralsCount: 0,\r\n    trades: 0,\r\n    volume: bigNumberify(0),\r\n    time: Date.now(),\r\n    ownerOnOtherChain: {\r\n      code: encodeReferralCode(code),\r\n      codeString: code,\r\n      owner: undefined,\r\n      isTaken: !isAddressZero(ownerOnOtherNetwork),\r\n      isTakenByCurrentUser:\r\n        !isAddressZero(ownerOnOtherNetwork) && ownerOnOtherNetwork.toLowerCase() === account.toLowerCase(),\r\n    },\r\n  };\r\n};\r\n\r\nexport function getUSDValue(value, decimals = 2) {\r\n  return `$${formatAmount(value, USD_DECIMALS, decimals, true, \"0.00\")}`;\r\n}\r\n\r\nexport function getCodeError(value) {\r\n  const trimmedValue = value.trim();\r\n  if (!trimmedValue) return \"\";\r\n\r\n  if (trimmedValue.length > MAX_REFERRAL_CODE_LENGTH) {\r\n    return `The referral code can't be more than ${MAX_REFERRAL_CODE_LENGTH} characters.`;\r\n  }\r\n\r\n  if (!REFERRAL_CODE_REGEX.test(trimmedValue)) {\r\n    return \"Only letters, numbers and underscores are allowed.\";\r\n  }\r\n  return \"\";\r\n}\r\n\r\nexport function getTwitterShareUrl(referralCode) {\r\n  const message = \"Trying out trading on @GMX_IO, up to 30x leverage on $BTC, $ETH %0a%0aFor fee discounts use:\";\r\n\r\n  return `http://twitter.com/intent/tweet?text=${message}&url=https://gmx.io?ref=${referralCode}`;\r\n}\r\n","import { ethers } from \"ethers\";\nimport { gql } from \"@apollo/client\";\nimport { useState, useEffect, useMemo } from \"react\";\nimport useSWR from \"swr\";\n\nimport ReferralStorage from \"../abis/ReferralStorage.json\";\nimport {\n  ARBITRUM,\n  AVALANCHE,\n  MAX_REFERRAL_CODE_LENGTH,\n  bigNumberify,\n  isAddressZero,\n  helperToast,\n  getProvider,\n  fetcher,\n  isHashZero,\n  REFERRAL_CODE_KEY,\n  BSC_TESTNET, VELAS_TESTNET,\n} from \"../lib/legacy\";\nimport { testnetReferralsGraphClient } from \"./common\";\nimport { getContract } from \"../config/Addresses\";\nimport { callContract } from \"./legacy\";\nimport { REGEX_VERIFY_BYTES32 } from \"../components/Referrals/referralsHelper\";\n\nconst ACTIVE_CHAINS = [BSC_TESTNET, VELAS_TESTNET];\nconst DISTRIBUTION_TYPE_REBATES = \"1\";\nconst DISTRIBUTION_TYPE_DISCOUNT = \"2\";\n\nfunction getGraphClient(chainId) {\n  if (chainId === BSC_TESTNET) {\n    return testnetReferralsGraphClient;\n  } else if (chainId === VELAS_TESTNET) {\n    return testnetReferralsGraphClient;\n  }\n  throw new Error(`Unsupported chain ${chainId}`);\n}\n\nexport function decodeReferralCode(hexCode) {\n  try {\n    return ethers.utils.parseBytes32String(hexCode);\n  } catch (ex) {\n    let code = \"\";\n    hexCode = hexCode.substring(2);\n    for (let i = 0; i < 32; i++) {\n      code += String.fromCharCode(parseInt(hexCode.substring(i * 2, i * 2 + 2), 16));\n    }\n    return code.trim();\n  }\n}\n\nexport function encodeReferralCode(code) {\n  let final = code.replace(/[^\\w_]/g, \"\"); // replace everything other than numbers, string  and underscor to ''\n  if (final.length > MAX_REFERRAL_CODE_LENGTH) {\n    return ethers.constants.HashZero;\n  }\n  return ethers.utils.formatBytes32String(final);\n}\n\nasync function getCodeOwnersData(network, account, codes = []) {\n  if (codes.length === 0 || !account || !network) {\n    return undefined;\n  }\n  const query = gql`\n    query allCodes($codes: [String!]!) {\n      referralCodes(where: { code_in: $codes }) {\n        owner\n        id\n      }\n    }\n  `;\n  return getGraphClient(network)\n    .query({ query, variables: { codes } })\n    .then(({ data }) => {\n      const { referralCodes } = data;\n      const codeOwners = referralCodes.reduce((acc, cv) => {\n        acc[cv.id] = cv.owner;\n        return acc;\n      }, {});\n      return codes.map((code) => {\n        const owner = codeOwners[code];\n        return {\n          code,\n          codeString: decodeReferralCode(code),\n          owner,\n          isTaken: Boolean(owner),\n          isTakenByCurrentUser: owner && owner.toLowerCase() === account.toLowerCase(),\n        };\n      });\n    });\n}\n\nexport function useUserCodesOnAllChain(account) {\n  const [data, setData] = useState(null);\n  const query = gql`\n    query referralCodesOnAllChain($account: String!) {\n      referralCodes(first: 1000, where: { owner: $account }) {\n        code\n      }\n    }\n  `;\n  useEffect(() => {\n    async function main() {\n      const [arbitrumCodes, avalancheCodes] = await Promise.all(\n        ACTIVE_CHAINS.map((chainId) => {\n          return getGraphClient(chainId)\n            .query({ query, variables: { account: (account || \"\").toLowerCase() } })\n            .then(({ data }) => {\n              return data.referralCodes.map((c) => c.code);\n            });\n        })\n      );\n      const [codeOwnersOnAvax = [], codeOwnersOnArbitrum = []] = await Promise.all([\n        getCodeOwnersData(AVALANCHE, account, arbitrumCodes),\n        getCodeOwnersData(ARBITRUM, account, avalancheCodes),\n      ]);\n\n      setData({\n        [ARBITRUM]: codeOwnersOnAvax.reduce((acc, cv) => {\n          acc[cv.code] = cv;\n          return acc;\n        }, {}),\n        [AVALANCHE]: codeOwnersOnArbitrum.reduce((acc, cv) => {\n          acc[cv.code] = cv;\n          return acc;\n        }, {}),\n      });\n    }\n\n    main();\n  }, [account, query]);\n  return data;\n}\n\nexport function useReferralsData(chainId, account) {\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const ownerOnOtherChain = useUserCodesOnAllChain(account);\n  useEffect(() => {\n    if (!chainId || !account) {\n      setLoading(false);\n      return;\n    }\n    const startOfDayTimestamp = Math.floor(parseInt(Date.now() / 1000) / 86400) * 86400;\n    const query = gql`\n      query referralData($typeIds: [String!]!, $account: String!, $timestamp: Int!, $referralTotalStatsId: String!) {\n        distributions(\n          first: 1000\n          orderBy: timestamp\n          orderDirection: desc\n          where: { receiver: $account, typeId_in: $typeIds }\n        ) {\n          receiver\n          amount\n          typeId\n          token\n          transactionHash\n          timestamp\n        }\n        referrerTotalStats: referrerStats(\n          first: 1000\n          orderBy: volume\n          orderDirection: desc\n          where: { period: total, referrer: $account }\n        ) {\n          referralCode\n          volume\n          trades\n          tradedReferralsCount\n          registeredReferralsCount\n          totalRebateUsd\n          discountUsd\n        }\n        referrerLastDayStats: referrerStats(\n          first: 1000\n          where: { period: daily, referrer: $account, timestamp: $timestamp }\n        ) {\n          referralCode\n          volume\n          trades\n          tradedReferralsCount\n          registeredReferralsCount\n          totalRebateUsd\n          discountUsd\n        }\n        referralCodes(first: 1000, where: { owner: $account }) {\n          code\n        }\n        referralTotalStats: referralStat(id: $referralTotalStatsId) {\n          volume\n          discountUsd\n        }\n        referrerTierInfo: referrer(id: $account) {\n          tierId\n          id\n          discountShare\n        }\n      }\n    `;\n    setLoading(true);\n\n    getGraphClient(chainId)\n      .query({\n        query,\n        variables: {\n          typeIds: [DISTRIBUTION_TYPE_REBATES, DISTRIBUTION_TYPE_DISCOUNT],\n          account: (account || \"\").toLowerCase(),\n          timestamp: startOfDayTimestamp,\n          referralTotalStatsId: account && `total:0:${account.toLowerCase()}`,\n        },\n      })\n      .then((res) => {\n        const rebateDistributions = [];\n        const discountDistributions = [];\n        res.data.distributions.forEach((d) => {\n          const item = {\n            timestamp: parseInt(d.timestamp),\n            transactionHash: d.transactionHash,\n            receiver: ethers.utils.getAddress(d.receiver),\n            amount: bigNumberify(d.amount),\n            typeId: d.typeId,\n            token: ethers.utils.getAddress(d.token),\n          };\n          if (d.typeId === DISTRIBUTION_TYPE_REBATES) {\n            rebateDistributions.push(item);\n          } else {\n            discountDistributions.push(item);\n          }\n        });\n\n        function prepareStatsItem(e) {\n          return {\n            volume: bigNumberify(e.volume),\n            trades: parseInt(e.trades),\n            tradedReferralsCount: parseInt(e.tradedReferralsCount),\n            registeredReferralsCount: parseInt(e.registeredReferralsCount),\n            totalRebateUsd: bigNumberify(e.totalRebateUsd),\n            discountUsd: bigNumberify(e.discountUsd),\n            referralCode: decodeReferralCode(e.referralCode),\n            ownerOnOtherChain: ownerOnOtherChain?.[chainId][e.referralCode],\n          };\n        }\n\n        function getCumulativeStats(data = []) {\n          return data.reduce(\n            (acc, cv) => {\n              acc.totalRebateUsd = acc.totalRebateUsd.add(cv.totalRebateUsd);\n              acc.volume = acc.volume.add(cv.volume);\n              acc.discountUsd = acc.discountUsd.add(cv.discountUsd);\n              acc.trades = acc.trades + cv.trades;\n              acc.tradedReferralsCount = acc.tradedReferralsCount + cv.tradedReferralsCount;\n              acc.registeredReferralsCount = acc.registeredReferralsCount + cv.registeredReferralsCount;\n              return acc;\n            },\n            {\n              totalRebateUsd: bigNumberify(0),\n              volume: bigNumberify(0),\n              discountUsd: bigNumberify(0),\n              trades: 0,\n              tradedReferralsCount: 0,\n              registeredReferralsCount: 0,\n            }\n          );\n        }\n\n        let referrerTotalStats = res.data.referrerTotalStats.map(prepareStatsItem);\n        setData({\n          rebateDistributions,\n          discountDistributions,\n          referrerTotalStats,\n          referrerTierInfo: res.data.referrerTierInfo,\n          referrerLastDayStats: res.data.referrerLastDayStats.map(prepareStatsItem),\n          cumulativeStats: getCumulativeStats(referrerTotalStats),\n          codes: res.data.referralCodes.map((e) => decodeReferralCode(e.code)),\n          referralTotalStats: res.data.referralTotalStats\n            ? {\n                volume: bigNumberify(res.data.referralTotalStats.volume),\n                discountUsd: bigNumberify(res.data.referralTotalStats.discountUsd),\n              }\n            : {\n                volume: bigNumberify(0),\n                discountUsd: bigNumberify(0),\n              },\n        });\n      })\n      .catch(console.warn)\n      .finally(() => {\n        setLoading(false);\n      });\n  }, [setData, chainId, account, ownerOnOtherChain]);\n\n  return {\n    data: data || null,\n    loading,\n  };\n}\n\nexport async function registerReferralCode(chainId, referralCode, library, opts) {\n  const referralStorageAddress = getContract(chainId, \"ReferralStorage\");\n  const referralCodeHex = encodeReferralCode(referralCode);\n  const contract = new ethers.Contract(referralStorageAddress, ReferralStorage.abi, library.getSigner());\n  return callContract(chainId, contract, \"registerCode\", [referralCodeHex], opts);\n}\n\nexport async function setTraderReferralCodeByUser(chainId, referralCode, library, opts) {\n  const referralCodeHex = encodeReferralCode(referralCode);\n  const referralStorageAddress = getContract(chainId, \"ReferralStorage\");\n  const contract = new ethers.Contract(referralStorageAddress, ReferralStorage.abi, library.getSigner());\n  const codeOwner = await contract.codeOwners(referralCodeHex);\n  if (isAddressZero(codeOwner)) {\n    const errorMsg = \"Referral code does not exist\";\n    helperToast.error(errorMsg);\n    return Promise.reject(errorMsg);\n  }\n  return callContract(chainId, contract, \"setTraderReferralCodeByUser\", [referralCodeHex], opts);\n}\n\nexport async function getReferralCodeOwner(chainId, referralCode) {\n  const referralStorageAddress = getContract(chainId, \"ReferralStorage\");\n  const provider = getProvider(null, chainId);\n  const contract = new ethers.Contract(referralStorageAddress, ReferralStorage.abi, provider);\n  const codeOwner = await contract.codeOwners(referralCode);\n  return codeOwner;\n}\n\nexport function useUserReferralCode(library, chainId, account) {\n  const localStorageCode = window.localStorage.getItem(REFERRAL_CODE_KEY);\n  const referralStorageAddress = getContract(chainId, \"ReferralStorage\");\n  const { data: onChainCode } = useSWR(\n    account && [\"ReferralStorage\", chainId, referralStorageAddress, \"traderReferralCodes\", account],\n    { fetcher: fetcher(library, ReferralStorage) }\n  );\n  const { data: localStorageCodeOwner } = useSWR(\n    localStorageCode &&\n      REGEX_VERIFY_BYTES32.test(localStorageCode) && [\n        \"ReferralStorage\",\n        chainId,\n        referralStorageAddress,\n        \"codeOwners\",\n        localStorageCode,\n      ],\n    { fetcher: fetcher(library, ReferralStorage) }\n  );\n  const [attachedOnChain, userReferralCode, userReferralCodeString] = useMemo(() => {\n    if (onChainCode && !isHashZero(onChainCode)) {\n      return [true, onChainCode, decodeReferralCode(onChainCode)];\n    } else if (localStorageCodeOwner && !isAddressZero(localStorageCodeOwner)) {\n      return [false, localStorageCode, decodeReferralCode(localStorageCode)];\n    }\n    return [false];\n  }, [localStorageCode, localStorageCodeOwner, onChainCode]);\n\n  return {\n    userReferralCode,\n    userReferralCodeString,\n    attachedOnChain,\n  };\n}\n\nexport function useReferrerTier(library, chainId, account) {\n  const referralStorageAddress = getContract(chainId, \"ReferralStorage\");\n  const { data: referrerTier, mutate: mutateReferrerTier } = useSWR(\n    account && [`ReferralStorage:referrerTiers`, chainId, referralStorageAddress, \"referrerTiers\", account],\n    {\n      fetcher: fetcher(library, ReferralStorage),\n    }\n  );\n  return {\n    referrerTier,\n    mutateReferrerTier,\n  };\n}\n\nexport function useCodeOwner(library, chainId, account, code) {\n  const referralStorageAddress = getContract(chainId, \"ReferralStorage\");\n  const { data: codeOwner, mutate: mutateCodeOwner } = useSWR(\n    account && code && [`ReferralStorage:codeOwners`, chainId, referralStorageAddress, \"codeOwners\", code],\n    {\n      fetcher: fetcher(library, ReferralStorage),\n    }\n  );\n  return {\n    codeOwner,\n    mutateCodeOwner,\n  };\n}\n\nexport async function validateReferralCodeExists(referralCode, chainId) {\n  const referralCodeBytes32 = encodeReferralCode(referralCode);\n  const referralCodeOwner = await getReferralCodeOwner(chainId, referralCodeBytes32);\n  return !isAddressZero(referralCodeOwner);\n}\n\nexport function useAffiliateCodes(chainId, account) {\n  const [affiliateCodes, setAffiliateCodes] = useState({ code: null, success: false });\n  const query = gql`\n    query userReferralCodes($account: String!) {\n      referrerTotalStats: referrerStats(\n        first: 1000\n        orderBy: volume\n        orderDirection: desc\n        where: { period: total, referrer: $account }\n      ) {\n        referralCode\n      }\n    }\n  `;\n  useEffect(() => {\n    if (!chainId) return;\n    getGraphClient(chainId)\n      .query({ query, variables: { account: account?.toLowerCase() } })\n      .then((res) => {\n        const parsedAffiliateCodes = res?.data?.referrerTotalStats.map((c) => decodeReferralCode(c?.referralCode));\n        setAffiliateCodes({ code: parsedAffiliateCodes[0], success: true });\n      });\n    return () => {\n      setAffiliateCodes({ code: null, success: false });\n    };\n  }, [chainId, query, account]);\n  return affiliateCodes;\n}\n","import React, { useState, useEffect, useMemo } from \"react\";\nimport Tooltip from \"../Tooltip/Tooltip\";\nimport { Trans, t } from \"@lingui/macro\";\nimport Modal from \"../Modal/Modal\";\nimport Slider, { SliderTooltip } from \"rc-slider\";\nimport \"rc-slider/assets/index.css\";\nimport \"./SwapBox.css\";\n\nimport cx from \"classnames\";\nimport useSWR from \"swr\";\nimport { ethers } from \"ethers\";\n\nimport { IoMdSwap } from \"react-icons/io\";\nimport { BsArrowRight } from \"react-icons/bs\";\n\nimport {\n  helperToast,\n  formatAmount,\n  bigNumberify,\n  ARBITRUM,\n  AVALANCHE,\n  USD_DECIMALS,\n  USDG_DECIMALS,\n  LONG,\n  SHORT,\n  SWAP,\n  MARKET,\n  SWAP_ORDER_OPTIONS,\n  LEVERAGE_ORDER_OPTIONS,\n  DEFAULT_HIGHER_SLIPPAGE_AMOUNT,\n  getPositionKey,\n  getUsd,\n  BASIS_POINTS_DIVISOR,\n  MARGIN_FEE_BASIS_POINTS,\n  PRECISION,\n  USDG_ADDRESS,\n  STOP,\n  LIMIT,\n  SWAP_OPTIONS,\n  DUST_BNB,\n  isTriggerRatioInverted,\n  usePrevious,\n  formatAmountFree,\n  fetcher,\n  parseValue,\n  expandDecimals,\n  shouldRaiseGasError,\n  getTokenInfo,\n  getLiquidationPrice,\n  approveTokens,\n  getLeverage,\n  isSupportedChain,\n  getExchangeRate,\n  getExchangeRateDisplay,\n  getNextToAmount,\n  getNextFromAmount,\n  getMostAbundantStableToken,\n  useLocalStorageSerializeKey,\n  useLocalStorageByChainId,\n  calculatePositionDelta,\n  replaceNativeTokenAddress,\n  adjustForDecimals,\n  IS_NETWORK_DISABLED,\n  getChainName,\n} from \"../../lib/legacy\";\nimport { getConstant } from \"../../config/chains\";\nimport * as Api from \"../../domain/legacy\";\nimport { getContract } from \"../../config/Addresses\";\n\nimport Checkbox from \"../Checkbox/Checkbox\";\nimport Tab from \"../Tab/Tab\";\nimport TokenSelector from \"./TokenSelector\";\nimport ExchangeInfoRow from \"./ExchangeInfoRow\";\nimport ConfirmationBox from \"./ConfirmationBox\";\nimport OrdersToa from \"./OrdersToa\";\n\nimport { getTokens, getWhitelistedTokens, getToken, getTokenBySymbol } from \"../../config/Tokens\";\nimport PositionRouter from \"../../abis/PositionRouter.json\";\nimport Router from \"../../abis/Router.json\";\nimport Token from \"../../abis/Token.json\";\nimport WETH from \"../../abis/WETH.json\";\n\nimport longImg from \"../../img/long.svg\";\nimport shortImg from \"../../img/short.svg\";\nimport swapImg from \"../../img/swap.svg\";\nimport { useUserReferralCode } from \"../../domain/referrals\";\n\nconst SWAP_ICONS = {\n  [LONG]: longImg,\n  [SHORT]: shortImg,\n  [SWAP]: swapImg,\n};\nconst { AddressZero } = ethers.constants;\n\nconst leverageSliderHandle = (props) => {\n  const { value, dragging, index, ...restProps } = props;\n  return (\n    <SliderTooltip\n      prefixCls=\"rc-slider-tooltip\"\n      overlay={`${parseFloat(value).toFixed(2)}x`}\n      visible={dragging}\n      placement=\"top\"\n      key={index}\n    >\n      <Slider.Handle value={value} {...restProps} />\n    </SliderTooltip>\n  );\n};\n\nfunction getNextAveragePrice({ size, sizeDelta, hasProfit, delta, nextPrice, isLong }) {\n  if (!size || !sizeDelta || !delta || !nextPrice) {\n    return;\n  }\n  const nextSize = size.add(sizeDelta);\n  let divisor;\n  if (isLong) {\n    divisor = hasProfit ? nextSize.add(delta) : nextSize.sub(delta);\n  } else {\n    divisor = hasProfit ? nextSize.sub(delta) : nextSize.add(delta);\n  }\n  if (!divisor || divisor.eq(0)) {\n    return;\n  }\n  const nextAveragePrice = nextPrice.mul(nextSize).div(divisor);\n  return nextAveragePrice;\n}\n\nexport default function SwapBox(props) {\n  const {\n    pendingPositions,\n    setPendingPositions,\n    infoTokens,\n    active,\n    library,\n    account,\n    fromTokenAddress,\n    setFromTokenAddress,\n    toTokenAddress,\n    setToTokenAddress,\n    swapOption,\n    setSwapOption,\n    positionsMap,\n    pendingTxns,\n    setPendingTxns,\n    tokenSelection,\n    setTokenSelection,\n    setIsConfirming,\n    isConfirming,\n    isPendingConfirmation,\n    setIsPendingConfirmation,\n    flagOrdersEnabled,\n    chainId,\n    nativeTokenAddress,\n    savedSlippageAmount,\n    totalTokenWeights,\n    usdgSupply,\n    orders,\n    savedIsPnlInLeverage,\n    orderBookApproved,\n    positionRouterApproved,\n    isWaitingForPluginApproval,\n    approveOrderBook,\n    approvePositionRouter,\n    setIsWaitingForPluginApproval,\n    isWaitingForPositionRouterApproval,\n    setIsWaitingForPositionRouterApproval,\n    isPluginApproving,\n    isPositionRouterApproving,\n    savedShouldDisableOrderValidation,\n    minExecutionFee,\n    minExecutionFeeUSD,\n    minExecutionFeeErrorMessage,\n  } = props;\n\n  const [fromValue, setFromValue] = useState(\"\");\n  const [toValue, setToValue] = useState(\"\");\n  const [anchorOnFromAmount, setAnchorOnFromAmount] = useState(true);\n  const [isApproving, setIsApproving] = useState(false);\n  const [isWaitingForApproval, setIsWaitingForApproval] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [modalError, setModalError] = useState(false);\n  const [isHigherSlippageAllowed, setIsHigherSlippageAllowed] = useState(false);\n  const { attachedOnChain, userReferralCode } = useUserReferralCode(library, chainId, account);\n\n  let allowedSlippage = savedSlippageAmount;\n  if (isHigherSlippageAllowed) {\n    allowedSlippage = DEFAULT_HIGHER_SLIPPAGE_AMOUNT;\n  }\n\n  const defaultCollateralSymbol = getConstant(chainId, \"defaultCollateralSymbol\");\n  // TODO hack with useLocalStorageSerializeKey\n  const [shortCollateralAddress, setShortCollateralAddress] = useLocalStorageByChainId(\n    chainId,\n    \"Short-Collateral-Address\",\n    getTokenBySymbol(chainId, defaultCollateralSymbol).address\n  );\n  const isLong = swapOption === LONG;\n  const isShort = swapOption === SHORT;\n  const isSwap = swapOption === SWAP;\n\n  const getLeaderboardLink = () => {\n    if (chainId === ARBITRUM) {\n      return \"https://www.gmx.house/arbitrum/leaderboard\";\n    }\n    if (chainId === AVALANCHE) {\n      return \"https://www.gmx.house/avalanche/leaderboard\";\n    }\n    return \"https://www.gmx.house\";\n  };\n\n  function getTokenLabel() {\n    switch (true) {\n      case isLong:\n        return t`Long`;\n      case isShort:\n        return t`Short`;\n      case isSwap:\n        return t`Receive`;\n      default:\n        return \"\";\n    }\n  }\n  const [leverageOption, setLeverageOption] = useLocalStorageSerializeKey(\n    [chainId, \"Exchange-swap-leverage-option\"],\n    \"2\"\n  );\n  const [isLeverageSliderEnabled, setIsLeverageSliderEnabled] = useLocalStorageSerializeKey(\n    [chainId, \"Exchange-swap-leverage-slider-enabled\"],\n    true\n  );\n\n  const hasLeverageOption = isLeverageSliderEnabled && !isNaN(parseFloat(leverageOption));\n\n  const [ordersToaOpen, setOrdersToaOpen] = useState(false);\n\n  let [orderOption, setOrderOption] = useLocalStorageSerializeKey([chainId, \"Order-option\"], MARKET);\n  if (!flagOrdersEnabled) {\n    orderOption = MARKET;\n  }\n\n  const onOrderOptionChange = (option) => {\n    setOrderOption(option);\n  };\n\n  const isMarketOrder = orderOption === MARKET;\n  const orderOptions = isSwap ? SWAP_ORDER_OPTIONS : LEVERAGE_ORDER_OPTIONS;\n  const orderOptionLabels = { [STOP]: \"Trigger\" };\n\n  const [triggerPriceValue, setTriggerPriceValue] = useState(\"\");\n  const triggerPriceUsd = isMarketOrder ? 0 : parseValue(triggerPriceValue, USD_DECIMALS);\n\n  const onTriggerPriceChange = (evt) => {\n    setTriggerPriceValue(evt.target.value || \"\");\n  };\n\n  const onTriggerRatioChange = (evt) => {\n    setTriggerRatioValue(evt.target.value || \"\");\n  };\n\n  let positionKey;\n  if (isLong) {\n    positionKey = getPositionKey(account, toTokenAddress, toTokenAddress, true, nativeTokenAddress);\n  }\n  if (isShort) {\n    positionKey = getPositionKey(account, shortCollateralAddress, toTokenAddress, false, nativeTokenAddress);\n  }\n\n  const existingPosition = positionKey ? positionsMap[positionKey] : undefined;\n  const hasExistingPosition = existingPosition && existingPosition.size && existingPosition.size.gt(0);\n\n  const whitelistedTokens = getWhitelistedTokens(chainId);\n  const tokens = getTokens(chainId);\n  const fromTokens = tokens;\n  const stableTokens = tokens.filter((token) => token.isStable);\n  const indexTokens = whitelistedTokens.filter((token) => !token.isStable && !token.isWrapped);\n  const shortableTokens = indexTokens.filter((token) => token.isShortable);\n\n  let toTokens = tokens;\n  if (isLong) {\n    toTokens = indexTokens;\n  }\n  if (isShort) {\n    toTokens = shortableTokens;\n  }\n\n  const needOrderBookApproval = !isMarketOrder && !orderBookApproved;\n  const prevNeedOrderBookApproval = usePrevious(needOrderBookApproval);\n\n  const needPositionRouterApproval = (isLong || isShort) && isMarketOrder && !positionRouterApproved;\n  const prevNeedPositionRouterApproval = usePrevious(needPositionRouterApproval);\n\n  useEffect(() => {\n    if (!needOrderBookApproval && prevNeedOrderBookApproval && isWaitingForPluginApproval) {\n      setIsWaitingForPluginApproval(false);\n      helperToast.success(<div>Orders enabled!</div>);\n    }\n  }, [needOrderBookApproval, prevNeedOrderBookApproval, setIsWaitingForPluginApproval, isWaitingForPluginApproval]);\n\n  useEffect(() => {\n    if (!needPositionRouterApproval && prevNeedPositionRouterApproval && isWaitingForPositionRouterApproval) {\n      setIsWaitingForPositionRouterApproval(false);\n      helperToast.success(<div>Leverage enabled!</div>);\n    }\n  }, [\n    needPositionRouterApproval,\n    prevNeedPositionRouterApproval,\n    setIsWaitingForPositionRouterApproval,\n    isWaitingForPositionRouterApproval,\n  ]);\n\n  useEffect(() => {\n    if (!needOrderBookApproval && prevNeedOrderBookApproval && isWaitingForPluginApproval) {\n      setIsWaitingForPluginApproval(false);\n      helperToast.success(<div>Orders enabled!</div>);\n    }\n  }, [needOrderBookApproval, prevNeedOrderBookApproval, setIsWaitingForPluginApproval, isWaitingForPluginApproval]);\n\n  const routerAddress = getContract(chainId, \"Router\");\n  const tokenAllowanceAddress = fromTokenAddress === AddressZero ? nativeTokenAddress : fromTokenAddress;\n  const { data: tokenAllowance } = useSWR(\n    active && [active, chainId, tokenAllowanceAddress, \"allowance\", account, routerAddress],\n    {\n      fetcher: fetcher(library, Token),\n    }\n  );\n\n  const { data: hasOutdatedUi } = Api.useHasOutdatedUi();\n\n  const fromToken = getToken(chainId, fromTokenAddress);\n  const toToken = getToken(chainId, toTokenAddress);\n  const shortCollateralToken = getTokenInfo(infoTokens, shortCollateralAddress);\n\n  const fromTokenInfo = getTokenInfo(infoTokens, fromTokenAddress);\n  const toTokenInfo = getTokenInfo(infoTokens, toTokenAddress);\n\n  const renderAvailableLongLiquidity = () => {\n    if (!isLong) {\n      return null;\n    }\n\n    return (\n      <div className=\"Exchange-info-row\">\n        <div className=\"Exchange-info-label\">\n          <Trans>Available Liquidity</Trans>\n        </div>\n        <div className=\"align-right\">\n          <Tooltip\n            handle={`${formatAmount(toTokenInfo.maxAvailableLong, USD_DECIMALS, 2, true)}`}\n            position=\"right-bottom\"\n            renderContent={() => {\n              return (\n                <>\n                  Max {toTokenInfo.symbol} long capacity: $\n                  {formatAmount(toTokenInfo.maxLongCapacity, USD_DECIMALS, 2, true)}\n                  <br />\n                  <br />\n                  Current {toTokenInfo.symbol} longs: ${formatAmount(toTokenInfo.guaranteedUsd, USD_DECIMALS, 2, true)}\n                  <br />\n                </>\n              );\n            }}\n          ></Tooltip>\n        </div>\n      </div>\n    );\n  };\n\n  const fromBalance = fromTokenInfo ? fromTokenInfo.balance : bigNumberify(0);\n  const toBalance = toTokenInfo ? toTokenInfo.balance : bigNumberify(0);\n\n  const fromAmount = parseValue(fromValue, fromToken && fromToken.decimals);\n  const toAmount = parseValue(toValue, toToken && toToken.decimals);\n\n  const isPotentialWrap = (fromToken.isNative && toToken.isWrapped) || (fromToken.isWrapped && toToken.isNative);\n  const isWrapOrUnwrap = isSwap && isPotentialWrap;\n  const needApproval =\n    fromTokenAddress !== AddressZero &&\n    tokenAllowance &&\n    fromAmount &&\n    fromAmount.gt(tokenAllowance) &&\n    !isWrapOrUnwrap;\n  const prevFromTokenAddress = usePrevious(fromTokenAddress);\n  const prevNeedApproval = usePrevious(needApproval);\n  const prevToTokenAddress = usePrevious(toTokenAddress);\n\n  const fromUsdMin = getUsd(fromAmount, fromTokenAddress, false, infoTokens);\n  const toUsdMax = getUsd(toAmount, toTokenAddress, true, infoTokens, orderOption, triggerPriceUsd);\n\n  const indexTokenAddress = toTokenAddress === AddressZero ? nativeTokenAddress : toTokenAddress;\n  const collateralTokenAddress = isLong ? indexTokenAddress : shortCollateralAddress;\n  const collateralToken = getToken(chainId, collateralTokenAddress);\n\n  const [triggerRatioValue, setTriggerRatioValue] = useState(\"\");\n\n  const triggerRatioInverted = useMemo(() => {\n    return isTriggerRatioInverted(fromTokenInfo, toTokenInfo);\n  }, [toTokenInfo, fromTokenInfo]);\n\n  const maxToTokenOut = useMemo(() => {\n    const value = toTokenInfo.availableAmount?.gt(toTokenInfo.poolAmount?.sub(toTokenInfo.bufferAmount))\n      ? toTokenInfo.poolAmount?.sub(toTokenInfo.bufferAmount)\n      : toTokenInfo.availableAmount;\n\n    if (!value) {\n      return bigNumberify(0);\n    }\n\n    return value.gt(0) ? value : bigNumberify(0);\n  }, [toTokenInfo]);\n\n  const maxToTokenOutUSD = useMemo(() => {\n    return getUsd(maxToTokenOut, toTokenAddress, false, infoTokens);\n  }, [maxToTokenOut, toTokenAddress, infoTokens]);\n\n  const maxFromTokenInUSD = useMemo(() => {\n    const value = fromTokenInfo.maxUsdgAmount\n      ?.sub(fromTokenInfo.usdgAmount)\n      .mul(expandDecimals(1, USD_DECIMALS))\n      .div(expandDecimals(1, USDG_DECIMALS));\n\n    if (!value) {\n      return bigNumberify(0);\n    }\n\n    return value.gt(0) ? value : bigNumberify(0);\n  }, [fromTokenInfo]);\n\n  const maxFromTokenIn = useMemo(() => {\n    if (!fromTokenInfo.maxPrice) {\n      return bigNumberify(0);\n    }\n    return maxFromTokenInUSD?.mul(expandDecimals(1, fromTokenInfo.decimals)).div(fromTokenInfo.maxPrice).toString();\n  }, [maxFromTokenInUSD, fromTokenInfo]);\n\n  let maxSwapAmountUsd = bigNumberify(0);\n\n  if (maxToTokenOutUSD && maxFromTokenInUSD) {\n    maxSwapAmountUsd = maxToTokenOutUSD.lt(maxFromTokenInUSD) ? maxToTokenOutUSD : maxFromTokenInUSD;\n  }\n\n  const triggerRatio = useMemo(() => {\n    if (!triggerRatioValue) {\n      return bigNumberify(0);\n    }\n    let ratio = parseValue(triggerRatioValue, USD_DECIMALS);\n    if (ratio.eq(0)) {\n      return bigNumberify(0);\n    }\n    if (triggerRatioInverted) {\n      ratio = PRECISION.mul(PRECISION).div(ratio);\n    }\n    return ratio;\n  }, [triggerRatioValue, triggerRatioInverted]);\n\n  useEffect(() => {\n    if (\n      fromToken &&\n      fromTokenAddress === prevFromTokenAddress &&\n      !needApproval &&\n      prevNeedApproval &&\n      isWaitingForApproval\n    ) {\n      setIsWaitingForApproval(false);\n      helperToast.success(<div>{fromToken.symbol} approved!</div>);\n    }\n  }, [\n    fromTokenAddress,\n    prevFromTokenAddress,\n    needApproval,\n    prevNeedApproval,\n    setIsWaitingForApproval,\n    fromToken.symbol,\n    isWaitingForApproval,\n    fromToken,\n  ]);\n\n  useEffect(() => {\n    if (!toTokens.find((token) => token.address === toTokenAddress)) {\n      setToTokenAddress(swapOption, toTokens[0].address);\n    }\n  }, [swapOption, toTokens, toTokenAddress, setToTokenAddress]);\n\n  useEffect(() => {\n    if (swapOption !== SHORT) {\n      return;\n    }\n    if (toTokenAddress === prevToTokenAddress) {\n      return;\n    }\n    for (let i = 0; i < stableTokens.length; i++) {\n      const stableToken = stableTokens[i];\n      const key = getPositionKey(account, stableToken.address, toTokenAddress, false, nativeTokenAddress);\n      const position = positionsMap[key];\n      if (position && position.size && position.size.gt(0)) {\n        setShortCollateralAddress(position.collateralToken.address);\n        return;\n      }\n    }\n  }, [\n    account,\n    toTokenAddress,\n    prevToTokenAddress,\n    swapOption,\n    positionsMap,\n    stableTokens,\n    nativeTokenAddress,\n    shortCollateralAddress,\n    setShortCollateralAddress,\n  ]);\n\n  useEffect(() => {\n    const updateSwapAmounts = () => {\n      if (anchorOnFromAmount) {\n        if (!fromAmount) {\n          setToValue(\"\");\n          return;\n        }\n        if (toToken) {\n          const { amount: nextToAmount } = getNextToAmount(\n            chainId,\n            fromAmount,\n            fromTokenAddress,\n            toTokenAddress,\n            infoTokens,\n            undefined,\n            !isMarketOrder && triggerRatio,\n            usdgSupply,\n            totalTokenWeights,\n            isSwap\n          );\n\n          const nextToValue = formatAmountFree(nextToAmount, toToken.decimals, toToken.decimals);\n          setToValue(nextToValue);\n        }\n        return;\n      }\n\n      if (!toAmount) {\n        setFromValue(\"\");\n        return;\n      }\n      if (fromToken) {\n        const { amount: nextFromAmount } = getNextFromAmount(\n          chainId,\n          toAmount,\n          fromTokenAddress,\n          toTokenAddress,\n          infoTokens,\n          undefined,\n          !isMarketOrder && triggerRatio,\n          usdgSupply,\n          totalTokenWeights,\n          isSwap\n        );\n        const nextFromValue = formatAmountFree(nextFromAmount, fromToken.decimals, fromToken.decimals);\n        setFromValue(nextFromValue);\n      }\n    };\n\n    const updateLeverageAmounts = () => {\n      if (!hasLeverageOption) {\n        return;\n      }\n      if (anchorOnFromAmount) {\n        if (!fromAmount) {\n          setToValue(\"\");\n          return;\n        }\n\n        const toTokenInfo = getTokenInfo(infoTokens, toTokenAddress);\n        if (toTokenInfo && toTokenInfo.maxPrice && fromUsdMin && fromUsdMin.gt(0)) {\n          const leverageMultiplier = parseInt(leverageOption * BASIS_POINTS_DIVISOR);\n          const toTokenPriceUsd =\n            !isMarketOrder && triggerPriceUsd && triggerPriceUsd.gt(0) ? triggerPriceUsd : toTokenInfo.maxPrice;\n\n          const { feeBasisPoints } = getNextToAmount(\n            chainId,\n            fromAmount,\n            fromTokenAddress,\n            collateralTokenAddress,\n            infoTokens,\n            undefined,\n            undefined,\n            usdgSupply,\n            totalTokenWeights,\n            isSwap\n          );\n\n          let fromUsdMinAfterFee = fromUsdMin;\n          if (feeBasisPoints) {\n            fromUsdMinAfterFee = fromUsdMin.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR);\n          }\n\n          const toNumerator = fromUsdMinAfterFee.mul(leverageMultiplier).mul(BASIS_POINTS_DIVISOR);\n          const toDenominator = bigNumberify(MARGIN_FEE_BASIS_POINTS)\n            .mul(leverageMultiplier)\n            .add(bigNumberify(BASIS_POINTS_DIVISOR).mul(BASIS_POINTS_DIVISOR));\n\n          const nextToUsd = toNumerator.div(toDenominator);\n\n          const nextToAmount = nextToUsd.mul(expandDecimals(1, toToken.decimals)).div(toTokenPriceUsd);\n\n          const nextToValue = formatAmountFree(nextToAmount, toToken.decimals, toToken.decimals);\n\n          setToValue(nextToValue);\n        }\n        return;\n      }\n\n      if (!toAmount) {\n        setFromValue(\"\");\n        return;\n      }\n\n      const fromTokenInfo = getTokenInfo(infoTokens, fromTokenAddress);\n      if (fromTokenInfo && fromTokenInfo.minPrice && toUsdMax && toUsdMax.gt(0)) {\n        const leverageMultiplier = parseInt(leverageOption * BASIS_POINTS_DIVISOR);\n\n        const baseFromAmountUsd = toUsdMax.mul(BASIS_POINTS_DIVISOR).div(leverageMultiplier);\n\n        let fees = toUsdMax.mul(MARGIN_FEE_BASIS_POINTS).div(BASIS_POINTS_DIVISOR);\n\n        const { feeBasisPoints } = getNextToAmount(\n          chainId,\n          fromAmount,\n          fromTokenAddress,\n          collateralTokenAddress,\n          infoTokens,\n          undefined,\n          undefined,\n          usdgSupply,\n          totalTokenWeights,\n          isSwap\n        );\n\n        if (feeBasisPoints) {\n          const swapFees = baseFromAmountUsd.mul(feeBasisPoints).div(BASIS_POINTS_DIVISOR);\n          fees = fees.add(swapFees);\n        }\n\n        const nextFromUsd = baseFromAmountUsd.add(fees);\n\n        const nextFromAmount = nextFromUsd.mul(expandDecimals(1, fromToken.decimals)).div(fromTokenInfo.minPrice);\n\n        const nextFromValue = formatAmountFree(nextFromAmount, fromToken.decimals, fromToken.decimals);\n\n        setFromValue(nextFromValue);\n      }\n    };\n\n    if (isSwap) {\n      updateSwapAmounts();\n    }\n\n    if (isLong || isShort) {\n      updateLeverageAmounts();\n    }\n  }, [\n    anchorOnFromAmount,\n    fromAmount,\n    toAmount,\n    fromToken,\n    toToken,\n    fromTokenAddress,\n    toTokenAddress,\n    infoTokens,\n    isSwap,\n    isLong,\n    isShort,\n    leverageOption,\n    fromUsdMin,\n    toUsdMax,\n    isMarketOrder,\n    triggerPriceUsd,\n    triggerRatio,\n    hasLeverageOption,\n    usdgSupply,\n    totalTokenWeights,\n    chainId,\n    collateralTokenAddress,\n    indexTokenAddress,\n  ]);\n\n  let entryMarkPrice;\n  let exitMarkPrice;\n  if (toTokenInfo) {\n    entryMarkPrice = swapOption === LONG ? toTokenInfo.maxPrice : toTokenInfo.minPrice;\n    exitMarkPrice = swapOption === LONG ? toTokenInfo.minPrice : toTokenInfo.maxPrice;\n  }\n\n  let leverage = bigNumberify(0);\n  if (fromUsdMin && toUsdMax && fromUsdMin.gt(0)) {\n    const fees = toUsdMax.mul(MARGIN_FEE_BASIS_POINTS).div(BASIS_POINTS_DIVISOR);\n    if (fromUsdMin.sub(fees).gt(0)) {\n      leverage = toUsdMax.mul(BASIS_POINTS_DIVISOR).div(fromUsdMin.sub(fees));\n    }\n  }\n\n  let nextAveragePrice = isMarketOrder ? entryMarkPrice : triggerPriceUsd;\n  if (hasExistingPosition) {\n    let nextDelta, nextHasProfit;\n\n    if (isMarketOrder) {\n      nextDelta = existingPosition.delta;\n      nextHasProfit = existingPosition.hasProfit;\n    } else {\n      const data = calculatePositionDelta(triggerPriceUsd || bigNumberify(0), existingPosition);\n      nextDelta = data.delta;\n      nextHasProfit = data.hasProfit;\n    }\n\n    nextAveragePrice = getNextAveragePrice({\n      size: existingPosition.size,\n      sizeDelta: toUsdMax,\n      hasProfit: nextHasProfit,\n      delta: nextDelta,\n      nextPrice: isMarketOrder ? entryMarkPrice : triggerPriceUsd,\n      isLong,\n    });\n  }\n\n  const liquidationPrice = getLiquidationPrice({\n    isLong,\n    size: hasExistingPosition ? existingPosition.size : bigNumberify(0),\n    collateral: hasExistingPosition ? existingPosition.collateral : bigNumberify(0),\n    averagePrice: nextAveragePrice,\n    entryFundingRate: hasExistingPosition ? existingPosition.entryFundingRate : bigNumberify(0),\n    cumulativeFundingRate: hasExistingPosition ? existingPosition.cumulativeFundingRate : bigNumberify(0),\n    sizeDelta: toUsdMax,\n    collateralDelta: fromUsdMin,\n    increaseCollateral: true,\n    increaseSize: true,\n  });\n\n  const existingLiquidationPrice = existingPosition ? getLiquidationPrice(existingPosition) : undefined;\n  let displayLiquidationPrice = liquidationPrice ? liquidationPrice : existingLiquidationPrice;\n\n  if (hasExistingPosition) {\n    const collateralDelta = fromUsdMin ? fromUsdMin : bigNumberify(0);\n    const sizeDelta = toUsdMax ? toUsdMax : bigNumberify(0);\n    leverage = getLeverage({\n      size: existingPosition.size,\n      sizeDelta,\n      collateral: existingPosition.collateral,\n      collateralDelta,\n      increaseCollateral: true,\n      entryFundingRate: existingPosition.entryFundingRate,\n      cumulativeFundingRate: existingPosition.cumulativeFundingRate,\n      increaseSize: true,\n      hasProfit: existingPosition.hasProfit,\n      delta: existingPosition.delta,\n      includeDelta: savedIsPnlInLeverage,\n    });\n  } else if (hasLeverageOption) {\n    leverage = bigNumberify(parseInt(leverageOption * BASIS_POINTS_DIVISOR));\n  }\n\n  const getSwapError = () => {\n    if (IS_NETWORK_DISABLED[chainId]) {\n      return [t`Swaps disabled, pending ${getChainName(chainId)} upgrade`];\n    }\n\n    if (fromTokenAddress === toTokenAddress) {\n      return [t`Select different tokens`];\n    }\n\n    if (!isMarketOrder) {\n      if ((toToken.isStable || toToken.isUsdg) && (fromToken.isStable || fromToken.isUsdg)) {\n        return [t`Select different tokens`];\n      }\n\n      if (fromToken.isNative && toToken.isWrapped) {\n        return [t`Select different tokens`];\n      }\n\n      if (toToken.isNative && fromToken.isWrapped) {\n        return [t`Select different tokens`];\n      }\n    }\n\n    if (!fromAmount || fromAmount.eq(0)) {\n      return [t`Enter an amount`];\n    }\n    if (!toAmount || toAmount.eq(0)) {\n      return [t`Enter an amount`];\n    }\n\n    const fromTokenInfo = getTokenInfo(infoTokens, fromTokenAddress);\n    if (!fromTokenInfo || !fromTokenInfo.minPrice) {\n      return [t`Incorrect network`];\n    }\n    if (fromTokenInfo && fromTokenInfo.balance && fromAmount && fromAmount.gt(fromTokenInfo.balance)) {\n      return [t`Insufficient ${fromTokenInfo.symbol} balance`];\n    }\n\n    const toTokenInfo = getTokenInfo(infoTokens, toTokenAddress);\n    console.log(toTokenAddress, toTokenInfo);\n\n    if (!isMarketOrder) {\n      if (!triggerRatioValue || triggerRatio.eq(0)) {\n        return [t`Enter a price`];\n      }\n\n      const currentRate = getExchangeRate(fromTokenInfo, toTokenInfo);\n      if (currentRate && currentRate.lt(triggerRatio)) {\n        return [t`Price ${triggerRatioInverted ? \"below\" : \"above\"} Mark Price`];\n      }\n    }\n\n    if (\n      !isWrapOrUnwrap &&\n      toToken &&\n      toTokenAddress !== USDG_ADDRESS &&\n      toTokenInfo &&\n      toTokenInfo.availableAmount &&\n      toAmount.gt(toTokenInfo.availableAmount)\n    ) {\n      return [t`Insufficient liquidity`];\n    }\n    if (\n      !isWrapOrUnwrap &&\n      toAmount &&\n      toTokenInfo.bufferAmount &&\n      toTokenInfo.poolAmount &&\n      toTokenInfo.bufferAmount.gt(toTokenInfo.poolAmount.sub(toAmount))\n    ) {\n      return [t`Insufficient liquidity`];\n    }\n\n    if (\n      fromUsdMin &&\n      fromTokenInfo.maxUsdgAmount &&\n      fromTokenInfo.maxUsdgAmount.gt(0) &&\n      fromTokenInfo.usdgAmount &&\n      fromTokenInfo.maxPrice\n    ) {\n      const usdgFromAmount = adjustForDecimals(fromUsdMin, USD_DECIMALS, USDG_DECIMALS);\n      const nextUsdgAmount = fromTokenInfo.usdgAmount.add(usdgFromAmount);\n\n      if (nextUsdgAmount.gt(fromTokenInfo.maxUsdgAmount)) {\n        return [`${fromTokenInfo.symbol} pool exceeded`];\n      }\n    }\n\n    return [false];\n  };\n\n  const getLeverageError = () => {\n    if (IS_NETWORK_DISABLED[chainId]) {\n      return [t`Leverage disabled, pending ${getChainName(chainId)} upgrade`];\n    }\n    if (hasOutdatedUi) {\n      return [t`Page outdated, please refresh`];\n    }\n\n    if (!toAmount || toAmount.eq(0)) {\n      return [t`Enter an amount`];\n    }\n\n    let toTokenInfo = getTokenInfo(infoTokens, toTokenAddress);\n    if (toTokenInfo && toTokenInfo.isStable) {\n      return [t`${swapOption === LONG ? \"Longing\" : \"Shorting\"} ${toTokenInfo.symbol} not supported`];\n    }\n\n    const fromTokenInfo = getTokenInfo(infoTokens, fromTokenAddress);\n    if (fromTokenInfo && fromTokenInfo.balance && fromAmount && fromAmount.gt(fromTokenInfo.balance)) {\n      return [t`Insufficient ${fromTokenInfo.symbol} balance`];\n    }\n\n    if (leverage && leverage.eq(0)) {\n      return [t`Enter an amount`];\n    }\n    if (!isMarketOrder && (!triggerPriceValue || triggerPriceUsd.eq(0))) {\n      return [t`Enter a price`];\n    }\n\n    if (!hasExistingPosition && fromUsdMin && fromUsdMin.lt(expandDecimals(10, USD_DECIMALS))) {\n      return [t`Min order: 10 USD`];\n    }\n\n    if (leverage && leverage.lt(1.1 * BASIS_POINTS_DIVISOR)) {\n      return [t`Min leverage: 1.1x`];\n    }\n\n    if (leverage && leverage.gt(30.5 * BASIS_POINTS_DIVISOR)) {\n      return [t`Max leverage: 30.5x`];\n    }\n\n    if (!isMarketOrder && entryMarkPrice && triggerPriceUsd && !savedShouldDisableOrderValidation) {\n      if (isLong && entryMarkPrice.lt(triggerPriceUsd)) {\n        return [t`Price above Mark Price`];\n      }\n      if (!isLong && entryMarkPrice.gt(triggerPriceUsd)) {\n        return [t`Price below Mark Price`];\n      }\n    }\n\n    if (isLong) {\n      let requiredAmount = toAmount;\n      if (fromTokenAddress !== toTokenAddress) {\n        const { amount: swapAmount } = getNextToAmount(\n          chainId,\n          fromAmount,\n          fromTokenAddress,\n          toTokenAddress,\n          infoTokens,\n          undefined,\n          undefined,\n          usdgSupply,\n          totalTokenWeights,\n          isSwap\n        );\n        requiredAmount = requiredAmount.add(swapAmount);\n\n        if (toToken && toTokenAddress !== USDG_ADDRESS) {\n          if (!toTokenInfo.availableAmount) {\n            return [t`Liquidity data not loaded`];\n          }\n          if (toTokenInfo.availableAmount && requiredAmount.gt(toTokenInfo.availableAmount)) {\n            return [t`Insufficient liquidity`];\n          }\n        }\n\n        if (\n          toTokenInfo.poolAmount &&\n          toTokenInfo.bufferAmount &&\n          toTokenInfo.bufferAmount.gt(toTokenInfo.poolAmount.sub(swapAmount))\n        ) {\n          return [t`Insufficient liquidity`, true, \"BUFFER\"];\n        }\n\n        if (\n          fromUsdMin &&\n          fromTokenInfo.maxUsdgAmount &&\n          fromTokenInfo.maxUsdgAmount.gt(0) &&\n          fromTokenInfo.minPrice &&\n          fromTokenInfo.usdgAmount\n        ) {\n          const usdgFromAmount = adjustForDecimals(fromUsdMin, USD_DECIMALS, USDG_DECIMALS);\n          const nextUsdgAmount = fromTokenInfo.usdgAmount.add(usdgFromAmount);\n          if (nextUsdgAmount.gt(fromTokenInfo.maxUsdgAmount)) {\n            return [t`${fromTokenInfo.symbol} pool exceeded, try different token`, true, \"MAX_USDG\"];\n          }\n        }\n      }\n\n      if (toTokenInfo && toTokenInfo.maxPrice) {\n        const sizeUsd = toAmount.mul(toTokenInfo.maxPrice).div(expandDecimals(1, toTokenInfo.decimals));\n        if (\n          toTokenInfo.maxGlobalLongSize &&\n          toTokenInfo.maxGlobalLongSize.gt(0) &&\n          toTokenInfo.maxAvailableLong &&\n          sizeUsd.gt(toTokenInfo.maxAvailableLong)\n        ) {\n          return [t`Max ${toTokenInfo.symbol} long exceeded`];\n        }\n      }\n    }\n\n    if (isShort) {\n      let stableTokenAmount = bigNumberify(0);\n      if (fromTokenAddress !== shortCollateralAddress && fromAmount && fromAmount.gt(0)) {\n        const { amount: nextToAmount } = getNextToAmount(\n          chainId,\n          fromAmount,\n          fromTokenAddress,\n          shortCollateralAddress,\n          infoTokens,\n          undefined,\n          undefined,\n          usdgSupply,\n          totalTokenWeights,\n          isSwap\n        );\n        stableTokenAmount = nextToAmount;\n        if (stableTokenAmount.gt(shortCollateralToken.availableAmount)) {\n          return [t`Insufficient liquidity, change \"Profits In\"`];\n        }\n\n        if (\n          shortCollateralToken.bufferAmount &&\n          shortCollateralToken.poolAmount &&\n          shortCollateralToken.bufferAmount.gt(shortCollateralToken.poolAmount.sub(stableTokenAmount))\n        ) {\n          // suggest swapping to collateralToken\n          return [t`Insufficient liquidity, change \"Profits In\"`, true, \"BUFFER\"];\n        }\n\n        if (\n          fromTokenInfo.maxUsdgAmount &&\n          fromTokenInfo.maxUsdgAmount.gt(0) &&\n          fromTokenInfo.minPrice &&\n          fromTokenInfo.usdgAmount\n        ) {\n          const usdgFromAmount = adjustForDecimals(fromUsdMin, USD_DECIMALS, USDG_DECIMALS);\n          const nextUsdgAmount = fromTokenInfo.usdgAmount.add(usdgFromAmount);\n          if (nextUsdgAmount.gt(fromTokenInfo.maxUsdgAmount)) {\n            return [t`${fromTokenInfo.symbol} pool exceeded, try different token`, true, \"MAX_USDG\"];\n          }\n        }\n      }\n      if (\n        !shortCollateralToken ||\n        !fromTokenInfo ||\n        !toTokenInfo ||\n        !toTokenInfo.maxPrice ||\n        !shortCollateralToken.availableAmount\n      ) {\n        return [t`Fetching token info...`];\n      }\n\n      const sizeUsd = toAmount.mul(toTokenInfo.maxPrice).div(expandDecimals(1, toTokenInfo.decimals));\n      const sizeTokens = sizeUsd\n        .mul(expandDecimals(1, shortCollateralToken.decimals))\n        .div(shortCollateralToken.minPrice);\n\n      if (!toTokenInfo.maxAvailableShort) {\n        return [t`Liquidity data not loaded`];\n      }\n\n      if (\n        toTokenInfo.maxGlobalShortSize &&\n        toTokenInfo.maxGlobalShortSize.gt(0) &&\n        toTokenInfo.maxAvailableShort &&\n        sizeUsd.gt(toTokenInfo.maxAvailableShort)\n      ) {\n        return [t`Max ${toTokenInfo.symbol} short exceeded`];\n      }\n\n      stableTokenAmount = stableTokenAmount.add(sizeTokens);\n      if (stableTokenAmount.gt(shortCollateralToken.availableAmount)) {\n        return [t`Insufficient liquidity, change \"Profits In\"`];\n      }\n    }\n\n    return [false];\n  };\n\n  const getToLabel = () => {\n    if (isSwap) {\n      return t`Receive`;\n    }\n    if (isLong) {\n      return t`Long`;\n    }\n    return t`Short`;\n  };\n\n  const getError = () => {\n    if (isSwap) {\n      return getSwapError();\n    }\n    return getLeverageError();\n  };\n\n  const renderOrdersToa = () => {\n    if (!ordersToaOpen) {\n      return null;\n    }\n\n    return (\n      <OrdersToa\n        setIsVisible={setOrdersToaOpen}\n        approveOrderBook={approveOrderBook}\n        isPluginApproving={isPluginApproving}\n      />\n    );\n  };\n\n  const renderErrorModal = () => {\n    const inputCurrency = fromToken.address === AddressZero ? \"ETH\" : fromToken.address;\n    let outputCurrency;\n    if (isLong) {\n      outputCurrency = toToken.address === AddressZero ? \"ETH\" : toToken.address;\n    } else {\n      outputCurrency = shortCollateralToken.address;\n    }\n    let externalSwapUrl = \"\";\n    if (chainId === AVALANCHE) {\n      externalSwapUrl = `https://traderjoexyz.com/trade?outputCurrency=${outputCurrency}#/`;\n    } else {\n      externalSwapUrl = `https://app.uniswap.org/#/swap?inputCurrency=${inputCurrency}&outputCurrency=${outputCurrency}`;\n    }\n    let externalSwapName = chainId === AVALANCHE ? \"Trader Joe\" : \"Uniswap\";\n    const label =\n      modalError === \"BUFFER\" ? `${shortCollateralToken.symbol} Required` : `${fromToken.symbol} Capacity Reached`;\n    const swapTokenSymbol = isLong ? toToken.symbol : shortCollateralToken.symbol;\n    return (\n      <Modal isVisible={!!modalError} setIsVisible={setModalError} label={label} className=\"Error-modal font-base\">\n        <div>You need to select {swapTokenSymbol} as the \"Pay\" token to initiate this trade.</div>\n        <br />\n        {isShort && (\n          <div>\n            Alternatively you can select a different \"Profits In\" token.\n            <br />\n            <br />\n          </div>\n        )}\n        <a href={externalSwapUrl} target=\"_blank\" rel=\"noreferrer\">\n          Buy {swapTokenSymbol} on {externalSwapName}\n        </a>\n      </Modal>\n    );\n  };\n\n  const isPrimaryEnabled = () => {\n    if (IS_NETWORK_DISABLED[chainId]) {\n      return false;\n    }\n    if (isStopOrder) {\n      return true;\n    }\n    if (!active) {\n      return true;\n    }\n    const [error, modal] = getError();\n    if (error && !modal) {\n      return false;\n    }\n    if (needOrderBookApproval && isWaitingForPluginApproval) {\n      return false;\n    }\n    if ((needApproval && isWaitingForApproval) || isApproving) {\n      return false;\n    }\n    if (needPositionRouterApproval && isWaitingForPositionRouterApproval) {\n      return false;\n    }\n    if (isPositionRouterApproving) {\n      return false;\n    }\n    if (isApproving) {\n      return false;\n    }\n    if (isSubmitting) {\n      return false;\n    }\n\n    return true;\n  };\n\n  const getPrimaryText = () => {\n    if (isStopOrder) {\n      return t`Open a position`;\n    }\n    if (!active) {\n      return t`Connect Wallet`;\n    }\n    if (!isSupportedChain(chainId)) {\n      return t`Incorrect Network`;\n    }\n    const [error, modal] = getError();\n    if (error && !modal) {\n      return error;\n    }\n\n    if (needPositionRouterApproval && isWaitingForPositionRouterApproval) {\n      return t`Enabling Leverage...`;\n    }\n    if (isPositionRouterApproving) {\n      return t`Enabling Leverage...`;\n    }\n    if (needPositionRouterApproval) {\n      return t`Enable Leverage`;\n    }\n\n    if (needApproval && isWaitingForApproval) {\n      return t`Waiting for Approval`;\n    }\n    if (isApproving) {\n      return t`Approving ${fromToken.symbol}...`;\n    }\n    if (needApproval) {\n      return t`Approve ${fromToken.symbol}`;\n    }\n\n    if (needOrderBookApproval && isWaitingForPluginApproval) {\n      return t`Enabling Orders...`;\n    }\n    if (isPluginApproving) {\n      return t`Enabling Orders...`;\n    }\n    if (needOrderBookApproval) {\n      return t`Enable Orders`;\n    }\n\n    if (!isMarketOrder) return `Create ${orderOption.charAt(0) + orderOption.substring(1).toLowerCase()} Order`;\n\n    if (isSwap) {\n      if (toUsdMax && toUsdMax.lt(fromUsdMin.mul(95).div(100))) {\n        return t`High Slippage, Swap Anyway`;\n      }\n      return \"Swap\";\n    }\n\n    if (isLong) {\n      const indexTokenInfo = getTokenInfo(infoTokens, toTokenAddress);\n      if (indexTokenInfo && indexTokenInfo.minPrice) {\n        const { amount: nextToAmount } = getNextToAmount(\n          chainId,\n          fromAmount,\n          fromTokenAddress,\n          indexTokenAddress,\n          infoTokens,\n          undefined,\n          undefined,\n          usdgSupply,\n          totalTokenWeights,\n          isSwap\n        );\n        const nextToAmountUsd = nextToAmount\n          .mul(indexTokenInfo.minPrice)\n          .div(expandDecimals(1, indexTokenInfo.decimals));\n        if (fromTokenAddress === USDG_ADDRESS && nextToAmountUsd.lt(fromUsdMin.mul(98).div(100))) {\n          return t`High USDG Slippage, Long Anyway`;\n        }\n      }\n      return t`Long ${toToken.symbol}`;\n    }\n\n    return t`Short ${toToken.symbol}`;\n  };\n\n  const onSelectFromToken = (token) => {\n    setFromTokenAddress(swapOption, token.address);\n    setIsWaitingForApproval(false);\n\n    if (isShort && token.isStable) {\n      setShortCollateralAddress(token.address);\n    }\n  };\n\n  const onSelectShortCollateralAddress = (token) => {\n    setShortCollateralAddress(token.address);\n  };\n\n  const onSelectToToken = (token) => {\n    setToTokenAddress(swapOption, token.address);\n  };\n\n  const onFromValueChange = (e) => {\n    setAnchorOnFromAmount(true);\n    setFromValue(e.target.value);\n  };\n\n  const onToValueChange = (e) => {\n    setAnchorOnFromAmount(false);\n    setToValue(e.target.value);\n  };\n\n  const switchTokens = () => {\n    if (fromAmount && toAmount) {\n      if (anchorOnFromAmount) {\n        setToValue(formatAmountFree(fromAmount, fromToken.decimals, 8));\n      } else {\n        setFromValue(formatAmountFree(toAmount, toToken.decimals, 8));\n      }\n      setAnchorOnFromAmount(!anchorOnFromAmount);\n    }\n    setIsWaitingForApproval(false);\n\n    const updatedTokenSelection = JSON.parse(JSON.stringify(tokenSelection));\n    updatedTokenSelection[swapOption] = {\n      from: toTokenAddress,\n      to: fromTokenAddress,\n    };\n    setTokenSelection(updatedTokenSelection);\n  };\n\n  const wrap = async () => {\n    setIsSubmitting(true);\n\n    const contract = new ethers.Contract(nativeTokenAddress, WETH.abi, library.getSigner());\n    Api.callContract(chainId, contract, \"deposit\", {\n      value: fromAmount,\n      sentMsg: \"Swap submitted.\",\n      successMsg: `Swapped ${formatAmount(fromAmount, fromToken.decimals, 4, true)} ${\n        fromToken.symbol\n      } for ${formatAmount(toAmount, toToken.decimals, 4, true)} ${toToken.symbol}!`,\n      failMsg: \"Swap failed.\",\n      setPendingTxns,\n    })\n      .then(async (res) => {})\n      .finally(() => {\n        setIsSubmitting(false);\n      });\n  };\n\n  const unwrap = async () => {\n    setIsSubmitting(true);\n\n    const contract = new ethers.Contract(nativeTokenAddress, WETH.abi, library.getSigner());\n    Api.callContract(chainId, contract, \"withdraw\", [fromAmount], {\n      sentMsg: t`Swap submitted!`,\n      failMsg: t`Swap failed.`,\n      successMsg: `Swapped ${formatAmount(fromAmount, fromToken.decimals, 4, true)} ${\n        fromToken.symbol\n      } for ${formatAmount(toAmount, toToken.decimals, 4, true)} ${toToken.symbol}!`,\n      setPendingTxns,\n    })\n      .then(async (res) => {})\n      .finally(() => {\n        setIsSubmitting(false);\n      });\n  };\n\n  const swap = async () => {\n    if (fromToken.isNative && toToken.isWrapped) {\n      wrap();\n      return;\n    }\n\n    if (fromTokenAddress.isWrapped && toToken.isNative) {\n      unwrap();\n      return;\n    }\n\n    setIsSubmitting(true);\n    let path = [fromTokenAddress, toTokenAddress];\n    if (anchorOnFromAmount) {\n      const { path: multiPath } = getNextToAmount(\n        chainId,\n        fromAmount,\n        fromTokenAddress,\n        toTokenAddress,\n        infoTokens,\n        undefined,\n        undefined,\n        usdgSupply,\n        totalTokenWeights,\n        isSwap\n      );\n      if (multiPath) {\n        path = multiPath;\n      }\n    } else {\n      const { path: multiPath } = getNextFromAmount(\n        chainId,\n        toAmount,\n        fromTokenAddress,\n        toTokenAddress,\n        infoTokens,\n        undefined,\n        undefined,\n        usdgSupply,\n        totalTokenWeights,\n        isSwap\n      );\n      if (multiPath) {\n        path = multiPath;\n      }\n    }\n\n    let method;\n    let contract;\n    let value;\n    let params;\n    let minOut;\n    if (shouldRaiseGasError(getTokenInfo(infoTokens, fromTokenAddress), fromAmount)) {\n      setIsSubmitting(false);\n      setIsPendingConfirmation(true);\n      helperToast.error(\n        `Leave at least ${formatAmount(DUST_BNB, 18, 3)} ${getConstant(chainId, \"nativeTokenSymbol\")} for gas`\n      );\n      return;\n    }\n\n    if (!isMarketOrder) {\n      minOut = toAmount;\n      Api.createSwapOrder(chainId, library, path, fromAmount, minOut, triggerRatio, nativeTokenAddress, {\n        sentMsg: t`Swap Order submitted!`,\n        successMsg: t`Swap Order created!`,\n        failMsg: t`Swap Order creation failed.`,\n        pendingTxns,\n        setPendingTxns,\n      })\n        .then(() => {\n          setIsConfirming(false);\n        })\n        .finally(() => {\n          setIsSubmitting(false);\n          setIsPendingConfirmation(false);\n        });\n      return;\n    }\n\n    path = replaceNativeTokenAddress(path, nativeTokenAddress);\n    method = \"swap\";\n    value = bigNumberify(0);\n    if (toTokenAddress === AddressZero) {\n      method = \"swapTokensToETH\";\n    }\n\n    minOut = toAmount.mul(BASIS_POINTS_DIVISOR - allowedSlippage).div(BASIS_POINTS_DIVISOR);\n    params = [path, fromAmount, minOut, account];\n    if (fromTokenAddress === AddressZero) {\n      method = \"swapETHToTokens\";\n      value = fromAmount;\n      params = [path, minOut, account];\n    }\n    contract = new ethers.Contract(routerAddress, Router.abi, library.getSigner());\n\n    Api.callContract(chainId, contract, method, params, {\n      value,\n      sentMsg: `Swap ${!isMarketOrder ? \" order \" : \"\"} submitted!`,\n      successMsg: `Swapped ${formatAmount(fromAmount, fromToken.decimals, 4, true)} ${\n        fromToken.symbol\n      } for ${formatAmount(toAmount, toToken.decimals, 4, true)} ${toToken.symbol}!`,\n      failMsg: t`Swap failed.`,\n      setPendingTxns,\n    })\n      .then(async () => {\n        setIsConfirming(false);\n      })\n      .finally(() => {\n        setIsSubmitting(false);\n        setIsPendingConfirmation(false);\n      });\n  };\n\n  const createIncreaseOrder = () => {\n    let path = [fromTokenAddress];\n\n    if (path[0] === USDG_ADDRESS) {\n      if (isLong) {\n        const stableToken = getMostAbundantStableToken(chainId, infoTokens);\n        path.push(stableToken.address);\n      } else {\n        path.push(shortCollateralAddress);\n      }\n    }\n\n    const minOut = 0;\n    const indexToken = getToken(chainId, indexTokenAddress);\n    const successMsg = t`\n      Created limit order for ${indexToken.symbol} ${isLong ? \"Long\" : \"Short\"}: ${formatAmount(\n      toUsdMax,\n      USD_DECIMALS,\n      2\n    )} USD!\n    `;\n    return Api.createIncreaseOrder(\n      chainId,\n      library,\n      nativeTokenAddress,\n      path,\n      fromAmount,\n      indexTokenAddress,\n      minOut,\n      toUsdMax,\n      collateralTokenAddress,\n      isLong,\n      triggerPriceUsd,\n      {\n        pendingTxns,\n        setPendingTxns,\n        sentMsg: t`Limit order submitted!`,\n        successMsg,\n        failMsg: t`Limit order creation failed.`,\n      }\n    )\n      .then(() => {\n        setIsConfirming(false);\n      })\n      .finally(() => {\n        setIsSubmitting(false);\n        setIsPendingConfirmation(false);\n      });\n  };\n\n  let referralCode = ethers.constants.HashZero;\n  if (!attachedOnChain && userReferralCode) {\n    referralCode = userReferralCode;\n  }\n\n  const increasePosition = async () => {\n    setIsSubmitting(true);\n    const tokenAddress0 = fromTokenAddress === AddressZero ? nativeTokenAddress : fromTokenAddress;\n    const indexTokenAddress = toTokenAddress === AddressZero ? nativeTokenAddress : toTokenAddress;\n    let path = [indexTokenAddress]; // assume long\n    if (toTokenAddress !== fromTokenAddress) {\n      path = [tokenAddress0, indexTokenAddress];\n    }\n\n    if (fromTokenAddress === AddressZero && toTokenAddress === nativeTokenAddress) {\n      path = [nativeTokenAddress];\n    }\n\n    if (fromTokenAddress === nativeTokenAddress && toTokenAddress === AddressZero) {\n      path = [nativeTokenAddress];\n    }\n\n    if (isShort) {\n      path = [shortCollateralAddress];\n      if (tokenAddress0 !== shortCollateralAddress) {\n        path = [tokenAddress0, shortCollateralAddress];\n      }\n    }\n\n    const refPrice = isLong ? toTokenInfo.maxPrice : toTokenInfo.minPrice;\n    const priceBasisPoints = isLong ? BASIS_POINTS_DIVISOR + allowedSlippage : BASIS_POINTS_DIVISOR - allowedSlippage;\n    const priceLimit = refPrice.mul(priceBasisPoints).div(BASIS_POINTS_DIVISOR);\n\n    const boundedFromAmount = fromAmount ? fromAmount : bigNumberify(0);\n\n    if (fromAmount && fromAmount.gt(0) && fromTokenAddress === USDG_ADDRESS && isLong) {\n      const { amount: nextToAmount, path: multiPath } = getNextToAmount(\n        chainId,\n        fromAmount,\n        fromTokenAddress,\n        indexTokenAddress,\n        infoTokens,\n        undefined,\n        undefined,\n        usdgSupply,\n        totalTokenWeights,\n        isSwap\n      );\n      if (nextToAmount.eq(0)) {\n        helperToast.error(t`Insufficient liquidity`);\n        return;\n      }\n      if (multiPath) {\n        path = replaceNativeTokenAddress(multiPath);\n      }\n    }\n\n    let params = [\n      path, // _path\n      indexTokenAddress, // _indexToken\n      boundedFromAmount, // _amountIn\n      0, // _minOut\n      toUsdMax, // _sizeDelta\n      isLong, // _isLong\n      priceLimit, // _acceptablePrice\n      minExecutionFee, // _executionFee\n      referralCode, // _referralCode\n    ];\n\n    let method = \"createIncreasePosition\";\n    let value = minExecutionFee;\n    if (fromTokenAddress === AddressZero) {\n      method = \"createIncreasePositionETH\";\n      value = boundedFromAmount.add(minExecutionFee);\n      console.log(\"path\", path);\n      console.log(\"indexTokenAddress\", indexTokenAddress);\n      params = [\n        path, // _path\n        indexTokenAddress, // _indexToken\n        0, // _minOut\n        toUsdMax, // _sizeDelta\n        isLong, // _isLong\n        priceLimit, // _acceptablePrice\n        minExecutionFee, // _executionFee\n        referralCode, // _referralCode\n      ];\n    }\n\n    if (shouldRaiseGasError(getTokenInfo(infoTokens, fromTokenAddress), fromAmount)) {\n      setIsSubmitting(false);\n      setIsPendingConfirmation(false);\n      helperToast.error(\n        t`Leave at least ${formatAmount(DUST_BNB, 18, 3)} ${getConstant(chainId, \"nativeTokenSymbol\")} for gas`\n      );\n      return;\n    }\n\n    const contractAddress = getContract(chainId, \"PositionRouter\");\n    const contract = new ethers.Contract(contractAddress, PositionRouter.abi, library.getSigner());\n    const indexToken = getTokenInfo(infoTokens, indexTokenAddress);\n    const tokenSymbol = indexToken.isWrapped ? getConstant(chainId, \"nativeTokenSymbol\") : indexToken.symbol;\n    const successMsg = t`Requested increase of ${tokenSymbol} ${isLong ? \"Long\" : \"Short\"} by ${formatAmount(\n      toUsdMax,\n      USD_DECIMALS,\n      2\n    )} USD.`;\n\n    Api.callContract(chainId, contract, method, params, {\n      value,\n      setPendingTxns,\n      sentMsg: `${isLong ? \"Long\" : \"Short\"} submitted.`,\n      failMsg: `${isLong ? \"Long\" : \"Short\"} failed.`,\n      successMsg,\n      // for Arbitrum, sometimes the successMsg shows after the position has already been executed\n      // hide the success message for Arbitrum as a workaround\n      hideSuccessMsg: chainId === ARBITRUM,\n    })\n      .then(async () => {\n        setIsConfirming(false);\n\n        const key = getPositionKey(account, path[path.length - 1], indexTokenAddress, isLong);\n        let nextSize = toUsdMax;\n        if (hasExistingPosition) {\n          nextSize = existingPosition.size.add(toUsdMax);\n        }\n\n        pendingPositions[key] = {\n          updatedAt: Date.now(),\n          pendingChanges: {\n            size: nextSize,\n          },\n        };\n\n        setPendingPositions({ ...pendingPositions });\n      })\n      .finally(() => {\n        setIsSubmitting(false);\n        setIsPendingConfirmation(false);\n      });\n  };\n\n  const onSwapOptionChange = (opt) => {\n    setSwapOption(opt);\n    if (orderOption === STOP) {\n      setOrderOption(MARKET);\n    }\n    setAnchorOnFromAmount(true);\n    setFromValue(\"\");\n    setToValue(\"\");\n    setTriggerPriceValue(\"\");\n    setTriggerRatioValue(\"\");\n\n    if (opt === SHORT && infoTokens) {\n      const fromToken = getToken(chainId, tokenSelection[opt].from);\n      if (fromToken && fromToken.isStable) {\n        setShortCollateralAddress(fromToken.address);\n      } else {\n        const stableToken = getMostAbundantStableToken(chainId, infoTokens);\n        setShortCollateralAddress(stableToken.address);\n      }\n    }\n  };\n\n  const onConfirmationClick = () => {\n    if (!active) {\n      props.connectWallet();\n      return;\n    }\n\n    if (needOrderBookApproval) {\n      approveOrderBook();\n      return;\n    }\n\n    setIsPendingConfirmation(true);\n\n    if (isSwap) {\n      swap();\n      return;\n    }\n\n    if (orderOption === LIMIT) {\n      createIncreaseOrder();\n      return;\n    }\n\n    increasePosition();\n  };\n\n  function approveFromToken() {\n    approveTokens({\n      setIsApproving,\n      library,\n      tokenAddress: fromToken.address,\n      spender: routerAddress,\n      chainId: chainId,\n      onApproveSubmitted: () => {\n        setIsWaitingForApproval(true);\n      },\n      infoTokens,\n      getTokenInfo,\n      pendingTxns,\n      setPendingTxns,\n    });\n  }\n\n  const onClickPrimary = () => {\n    if (isStopOrder) {\n      setOrderOption(MARKET);\n      return;\n    }\n\n    if (!active) {\n      props.connectWallet();\n      return;\n    }\n\n    if (needPositionRouterApproval) {\n      approvePositionRouter({\n        sentMsg: t`Enable leverage sent.`,\n        failMsg: t`Enable leverage failed.`,\n      });\n      return;\n    }\n\n    if (needApproval) {\n      approveFromToken();\n      return;\n    }\n\n    if (needOrderBookApproval) {\n      setOrdersToaOpen(true);\n      return;\n    }\n\n    const [, modal, errorCode] = getError();\n\n    if (modal) {\n      setModalError(errorCode);\n      return;\n    }\n\n    if (isSwap) {\n      if (fromTokenAddress === AddressZero && toTokenAddress === nativeTokenAddress) {\n        wrap();\n        return;\n      }\n\n      if (fromTokenAddress === nativeTokenAddress && toTokenAddress === AddressZero) {\n        unwrap();\n        return;\n      }\n    }\n\n    setIsConfirming(true);\n    setIsHigherSlippageAllowed(false);\n  };\n\n  const isStopOrder = orderOption === STOP;\n  const showFromAndToSection = !isStopOrder;\n  const showTriggerPriceSection = !isSwap && !isMarketOrder && !isStopOrder;\n  const showTriggerRatioSection = isSwap && !isMarketOrder && !isStopOrder;\n\n  let fees;\n  let feesUsd;\n  let feeBps;\n  let swapFees;\n  let positionFee;\n  if (isSwap) {\n    if (fromAmount) {\n      const { feeBasisPoints } = getNextToAmount(\n        chainId,\n        fromAmount,\n        fromTokenAddress,\n        toTokenAddress,\n        infoTokens,\n        undefined,\n        undefined,\n        usdgSupply,\n        totalTokenWeights,\n        isSwap\n      );\n      if (feeBasisPoints !== undefined) {\n        fees = fromAmount.mul(feeBasisPoints).div(BASIS_POINTS_DIVISOR);\n        const feeTokenPrice =\n          fromTokenInfo.address === USDG_ADDRESS ? expandDecimals(1, USD_DECIMALS) : fromTokenInfo.maxPrice;\n        feesUsd = fees.mul(feeTokenPrice).div(expandDecimals(1, fromTokenInfo.decimals));\n      }\n      feeBps = feeBasisPoints;\n    }\n  } else if (toUsdMax) {\n    positionFee = toUsdMax.mul(MARGIN_FEE_BASIS_POINTS).div(BASIS_POINTS_DIVISOR);\n    feesUsd = positionFee;\n\n    const { feeBasisPoints } = getNextToAmount(\n      chainId,\n      fromAmount,\n      fromTokenAddress,\n      collateralTokenAddress,\n      infoTokens,\n      undefined,\n      undefined,\n      usdgSupply,\n      totalTokenWeights,\n      isSwap\n    );\n    if (feeBasisPoints) {\n      swapFees = fromUsdMin.mul(feeBasisPoints).div(BASIS_POINTS_DIVISOR);\n      feesUsd = feesUsd.add(swapFees);\n    }\n    feeBps = feeBasisPoints;\n  }\n\n  const leverageMarks = {\n    2: \"2x\",\n    5: \"5x\",\n    10: \"10x\",\n    15: \"15x\",\n    20: \"20x\",\n    25: \"25x\",\n    30: \"30x\",\n  };\n\n  if (!fromToken || !toToken) {\n    return null;\n  }\n\n  let hasZeroBorrowFee = false;\n  let borrowFeeText;\n  if (isLong && toTokenInfo && toTokenInfo.fundingRate) {\n    borrowFeeText = formatAmount(toTokenInfo.fundingRate, 4, 4) + \"% / 1h\";\n    if (toTokenInfo.fundingRate.eq(0)) {\n      // hasZeroBorrowFee = true\n    }\n  }\n  if (isShort && shortCollateralToken && shortCollateralToken.fundingRate) {\n    borrowFeeText = formatAmount(shortCollateralToken.fundingRate, 4, 4) + \"% / 1h\";\n    if (shortCollateralToken.fundingRate.eq(0)) {\n      // hasZeroBorrowFee = true\n    }\n  }\n\n  function setFromValueToMaximumAvailable() {\n    if (!fromToken || !fromBalance) {\n      return;\n    }\n\n    const maxAvailableAmount = fromToken.isNative ? fromBalance.sub(bigNumberify(DUST_BNB).mul(2)) : fromBalance;\n    setFromValue(formatAmountFree(maxAvailableAmount, fromToken.decimals, fromToken.decimals));\n    setAnchorOnFromAmount(true);\n  }\n\n  function shouldShowMaxButton() {\n    if (!fromToken || !fromBalance) {\n      return false;\n    }\n    const maxAvailableAmount = fromToken.isNative ? fromBalance.sub(bigNumberify(DUST_BNB).mul(2)) : fromBalance;\n    return fromValue !== formatAmountFree(maxAvailableAmount, fromToken.decimals, fromToken.decimals);\n  }\n\n  return (\n    <div className=\"Exchange-swap-box\">\n      {/* <div className=\"Exchange-swap-wallet-box App-box\">\n        {active && <div className=\"Exchange-swap-account\" >\n        </div>}\n      </div> */}\n      <div className=\"Exchange-swap-box-inner App-box-highlight\">\n        <div>\n          <Tab\n            icons={SWAP_ICONS}\n            options={SWAP_OPTIONS}\n            option={swapOption}\n            onChange={onSwapOptionChange}\n            className=\"Exchange-swap-option-tabs\"\n          />\n          {flagOrdersEnabled && (\n            <Tab\n              options={orderOptions}\n              optionLabels={orderOptionLabels}\n              className=\"Exchange-swap-order-type-tabs\"\n              type=\"inline\"\n              option={orderOption}\n              onChange={onOrderOptionChange}\n            />\n          )}\n        </div>\n        {showFromAndToSection && (\n          <React.Fragment>\n            <div className=\"Exchange-swap-section\">\n              <div className=\"Exchange-swap-section-top\">\n                <div className=\"muted\">\n                  {fromUsdMin && (\n                    <div className=\"Exchange-swap-usd\">Pay: {formatAmount(fromUsdMin, USD_DECIMALS, 2, true)} USD</div>\n                  )}\n                  {!fromUsdMin && \"Pay\"}\n                </div>\n                {fromBalance && (\n                  <div className=\"muted align-right clickable\" onClick={setFromValueToMaximumAvailable}>\n                    Balance: {formatAmount(fromBalance, fromToken.decimals, 4, true)}\n                  </div>\n                )}\n              </div>\n              <div className=\"Exchange-swap-section-bottom\">\n                <div className=\"Exchange-swap-input-container\">\n                  <input\n                    type=\"number\"\n                    min=\"0\"\n                    placeholder=\"0.0\"\n                    className=\"Exchange-swap-input\"\n                    value={fromValue}\n                    onChange={onFromValueChange}\n                  />\n                  {shouldShowMaxButton() && (\n                    <div className=\"Exchange-swap-max\" onClick={setFromValueToMaximumAvailable}>\n                      MAX\n                    </div>\n                  )}\n                </div>\n                <div>\n                  <TokenSelector\n                    label=\"Pay\"\n                    chainId={chainId}\n                    tokenAddress={fromTokenAddress}\n                    onSelectToken={onSelectFromToken}\n                    tokens={fromTokens}\n                    infoTokens={infoTokens}\n                    showMintingCap={false}\n                    showTokenImgInDropdown={true}\n                  />\n                </div>\n              </div>\n            </div>\n            <div className=\"Exchange-swap-ball-container\">\n              <div className=\"Exchange-swap-ball\" onClick={switchTokens}>\n                <IoMdSwap className=\"Exchange-swap-ball-icon\" />\n              </div>\n            </div>\n            <div className=\"Exchange-swap-section\">\n              <div className=\"Exchange-swap-section-top\">\n                <div className=\"muted\">\n                  {toUsdMax && (\n                    <div className=\"Exchange-swap-usd\">\n                      {getToLabel()}: {formatAmount(toUsdMax, USD_DECIMALS, 2, true)} USD\n                    </div>\n                  )}\n                  {!toUsdMax && getToLabel()}\n                </div>\n                {toBalance && isSwap && (\n                  <div className=\"muted align-right\">\n                    <Trans>Balance</Trans>: {formatAmount(toBalance, toToken.decimals, 4, true)}\n                  </div>\n                )}\n                {(isLong || isShort) && hasLeverageOption && (\n                  <div className=\"muted align-right\">\n                    <Trans>Leverage</Trans>: {parseFloat(leverageOption).toFixed(2)}x\n                  </div>\n                )}\n              </div>\n              <div className=\"Exchange-swap-section-bottom\">\n                <div>\n                  {/* to value */}\n                  <input\n                    type=\"number\"\n                    min=\"0\"\n                    placeholder=\"0.0\"\n                    className=\"Exchange-swap-input\"\n                    value={toValue}\n                    onChange={onToValueChange}\n                  />\n                </div>\n                <div>\n                  <TokenSelector\n                    label={getTokenLabel()}\n                    chainId={chainId}\n                    tokenAddress={toTokenAddress}\n                    onSelectToken={onSelectToToken}\n                    tokens={toTokens}\n                    infoTokens={infoTokens}\n                    showTokenImgInDropdown={true}\n                  />\n                </div>\n              </div>\n            </div>\n          </React.Fragment>\n        )}\n        {showTriggerRatioSection && (\n          <div className=\"Exchange-swap-section\">\n            <div className=\"Exchange-swap-section-top\">\n              <div className=\"muted\">\n                <Trans>Price</Trans>\n              </div>\n              {fromTokenInfo && toTokenInfo && (\n                <div\n                  className=\"muted align-right clickable\"\n                  onClick={() => {\n                    setTriggerRatioValue(\n                      formatAmountFree(\n                        getExchangeRate(fromTokenInfo, toTokenInfo, triggerRatioInverted),\n                        USD_DECIMALS,\n                        10\n                      )\n                    );\n                  }}\n                >\n                  {formatAmount(getExchangeRate(fromTokenInfo, toTokenInfo, triggerRatioInverted), USD_DECIMALS, 4)}\n                </div>\n              )}\n            </div>\n            <div className=\"Exchange-swap-section-bottom\">\n              <div className=\"Exchange-swap-input-container\">\n                <input\n                  type=\"number\"\n                  min=\"0\"\n                  placeholder=\"0.0\"\n                  className=\"Exchange-swap-input small\"\n                  value={triggerRatioValue}\n                  onChange={onTriggerRatioChange}\n                />\n              </div>\n              {(() => {\n                if (!toTokenInfo) return;\n                if (!fromTokenInfo) return;\n                const [tokenA, tokenB] = triggerRatioInverted\n                  ? [toTokenInfo, fromTokenInfo]\n                  : [fromTokenInfo, toTokenInfo];\n                return (\n                  <div className=\"PositionEditor-token-symbol\">\n                    {tokenA.symbol}&nbsp;per&nbsp;{tokenB.symbol}\n                  </div>\n                );\n              })()}\n            </div>\n          </div>\n        )}\n        {showTriggerPriceSection && (\n          <div className=\"Exchange-swap-section\">\n            <div className=\"Exchange-swap-section-top\">\n              <div className=\"muted\">\n                <Trans>Price</Trans>\n              </div>\n              <div\n                className=\"muted align-right clickable\"\n                onClick={() => {\n                  setTriggerPriceValue(formatAmountFree(entryMarkPrice, USD_DECIMALS, 2));\n                }}\n              >\n                Mark: {formatAmount(entryMarkPrice, USD_DECIMALS, 2, true)}\n              </div>\n            </div>\n            <div className=\"Exchange-swap-section-bottom\">\n              <div className=\"Exchange-swap-input-container\">\n                <input\n                  type=\"number\"\n                  min=\"0\"\n                  placeholder=\"0.0\"\n                  className=\"Exchange-swap-input\"\n                  value={triggerPriceValue}\n                  onChange={onTriggerPriceChange}\n                />\n              </div>\n              <div className=\"PositionEditor-token-symbol\">USD</div>\n            </div>\n          </div>\n        )}\n        {isSwap && (\n          <div className=\"Exchange-swap-box-info\">\n            <ExchangeInfoRow label=\"Fees\">\n              <div>\n                {!fees && \"-\"}\n                {fees && (\n                  <div>\n                    {formatAmount(feeBps, 2, 2, false)}%&nbsp; ({formatAmount(fees, fromToken.decimals, 4, true)}{\" \"}\n                    {fromToken.symbol}: ${formatAmount(feesUsd, USD_DECIMALS, 2, true)})\n                  </div>\n                )}\n              </div>\n            </ExchangeInfoRow>\n          </div>\n        )}\n        {(isLong || isShort) && !isStopOrder && (\n          <div className=\"Exchange-leverage-box\">\n            <div className=\"Exchange-leverage-slider-settings\">\n              <Checkbox isChecked={isLeverageSliderEnabled} setIsChecked={setIsLeverageSliderEnabled}>\n                <span className=\"muted\">Leverage slider</span>\n              </Checkbox>\n            </div>\n            {isLeverageSliderEnabled && (\n              <div\n                className={cx(\"Exchange-leverage-slider\", \"App-slider\", {\n                  positive: isLong,\n                  negative: isShort,\n                })}\n              >\n                <Slider\n                  min={1.1}\n                  max={30.5}\n                  step={0.1}\n                  marks={leverageMarks}\n                  handle={leverageSliderHandle}\n                  onChange={(value) => setLeverageOption(value)}\n                  value={leverageOption}\n                  defaultValue={leverageOption}\n                />\n              </div>\n            )}\n            {isShort && (\n              <div className=\"Exchange-info-row\">\n                <div className=\"Exchange-info-label\">\n                  <Trans>Collateral In</Trans>\n                </div>\n\n                <div className=\"align-right\">\n                  <TokenSelector\n                    label=\"Collateral In\"\n                    chainId={chainId}\n                    tokenAddress={shortCollateralAddress}\n                    onSelectToken={onSelectShortCollateralAddress}\n                    tokens={stableTokens}\n                    showTokenImgInDropdown={true}\n                  />\n                </div>\n              </div>\n            )}\n            {isLong && (\n              <div className=\"Exchange-info-row\">\n                <div className=\"Exchange-info-label\">\n                  <Trans>Collateral In</Trans>\n                </div>\n                <div className=\"align-right\">\n                  <Tooltip\n                    position=\"right-bottom\"\n                    handle=\"USD\"\n                    renderContent={() => (\n                      <span className=\"SwapBox-collateral-tooltip-text\">\n                        <Trans>\n                          A snapshot of the USD value of your collateral is taken when the position is opened.\n                        </Trans>\n                        <br />\n                        <br />\n                        <Trans>When closing the position, you can select which token you would like to receive.</Trans>\n                      </span>\n                    )}\n                  />\n                </div>\n              </div>\n            )}\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Leverage</Trans>\n              </div>\n              <div className=\"align-right\">\n                {hasExistingPosition && toAmount && toAmount.gt(0) && (\n                  <div className=\"inline-block muted\">\n                    {formatAmount(existingPosition.leverage, 4, 2)}x\n                    <BsArrowRight className=\"transition-arrow\" />\n                  </div>\n                )}\n                {toAmount && leverage && leverage.gt(0) && `${formatAmount(leverage, 4, 2)}x`}\n                {!toAmount && leverage && leverage.gt(0) && `-`}\n                {leverage && leverage.eq(0) && `-`}\n              </div>\n            </div>\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Entry Price</Trans>\n              </div>\n              <div className=\"align-right\">\n                {hasExistingPosition && toAmount && toAmount.gt(0) && (\n                  <div className=\"inline-block muted\">\n                    ${formatAmount(existingPosition.averagePrice, USD_DECIMALS, 2, true)}\n                    <BsArrowRight className=\"transition-arrow\" />\n                  </div>\n                )}\n                {nextAveragePrice && `$${formatAmount(nextAveragePrice, USD_DECIMALS, 2, true)}`}\n                {!nextAveragePrice && `-`}\n              </div>\n            </div>\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Liq. Price</Trans>\n              </div>\n              <div className=\"align-right\">\n                {hasExistingPosition && toAmount && toAmount.gt(0) && (\n                  <div className=\"inline-block muted\">\n                    ${formatAmount(existingLiquidationPrice, USD_DECIMALS, 2, true)}\n                    <BsArrowRight className=\"transition-arrow\" />\n                  </div>\n                )}\n                {toAmount &&\n                  displayLiquidationPrice &&\n                  `$${formatAmount(displayLiquidationPrice, USD_DECIMALS, 2, true)}`}\n                {!toAmount && displayLiquidationPrice && `-`}\n                {!displayLiquidationPrice && `-`}\n              </div>\n            </div>\n            <ExchangeInfoRow label=\"Fees\">\n              <div>\n                {!feesUsd && \"-\"}\n                {feesUsd && (\n                  <Tooltip\n                    handle={`$${formatAmount(feesUsd, USD_DECIMALS, 2, true)}`}\n                    position=\"right-bottom\"\n                    renderContent={() => {\n                      return (\n                        <>\n                          {swapFees && (\n                            <div>\n                              {collateralToken.symbol} is required for collateral. <br />\n                              <br />\n                              Swap {fromToken.symbol} to {collateralToken.symbol} Fee: $\n                              {formatAmount(swapFees, USD_DECIMALS, 2, true)}\n                              <br />\n                              <br />\n                            </div>\n                          )}\n                          <div>\n                            Position Fee (0.1% of position size): ${formatAmount(positionFee, USD_DECIMALS, 2, true)}\n                          </div>\n                        </>\n                      );\n                    }}\n                  />\n                )}\n              </div>\n            </ExchangeInfoRow>\n          </div>\n        )}\n        {isStopOrder && (\n          <div className=\"Exchange-swap-section Exchange-trigger-order-info\">\n            Take-profit and stop-loss orders can be set after opening a position. <br />\n            <br />\n            There will be a \"Close\" button on each position row, clicking this will display the option to set trigger\n            orders. <br />\n            <br />\n            For screenshots and more information, please see the{\" \"}\n            <a\n              href=\"https://gmxio.gitbook.io/gmx/trading#stop-loss-take-profit-orders\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              docs\n            </a>\n            .\n          </div>\n        )}\n        <div className=\"Exchange-swap-button-container\">\n          <button className=\"App-cta Exchange-swap-button\" onClick={onClickPrimary} disabled={!isPrimaryEnabled()}>\n            {getPrimaryText()}\n          </button>\n        </div>\n      </div>\n      {isSwap && (\n        <div className=\"Exchange-swap-market-box App-box App-box-border\">\n          <div className=\"Exchange-swap-market-box-title\">\n            <Trans>Swap</Trans>\n          </div>\n          <div className=\"App-card-divider\"></div>\n          <div className=\"Exchange-info-row\">\n            <div className=\"Exchange-info-label\">{fromToken.symbol} Price</div>\n            <div className=\"align-right\">\n              {fromTokenInfo && formatAmount(fromTokenInfo.minPrice, USD_DECIMALS, 2, true)} USD\n            </div>\n          </div>\n          <div className=\"Exchange-info-row\">\n            <div className=\"Exchange-info-label\">{toToken.symbol} Price</div>\n            <div className=\"align-right\">\n              {toTokenInfo && formatAmount(toTokenInfo.maxPrice, USD_DECIMALS, 2, true)} USD\n            </div>\n          </div>\n          <div className=\"Exchange-info-row\">\n            <div className=\"Exchange-info-label\">\n              <Trans>Available Liquidity</Trans>:\n            </div>\n            <div className=\"align-right al-swap\">\n              <Tooltip\n                handle={`${formatAmount(maxSwapAmountUsd, USD_DECIMALS, 2, true)} USD`}\n                position=\"right-bottom\"\n                renderContent={() => {\n                  return (\n                    <div>\n                      <div>\n                        Max {fromTokenInfo.symbol} in: {formatAmount(maxFromTokenIn, fromTokenInfo.decimals, 2, true)}{\" \"}\n                        {fromTokenInfo.symbol} <br />({\"$ \"}\n                        {formatAmount(maxFromTokenInUSD, USD_DECIMALS, 2, true)})\n                      </div>\n                      <br />\n                      <div>\n                        Max {toTokenInfo.symbol} out: {formatAmount(maxToTokenOut, toTokenInfo.decimals, 2, true)}{\" \"}\n                        {toTokenInfo.symbol} <br />({\"$ \"}\n                        {formatAmount(maxToTokenOutUSD, USD_DECIMALS, 2, true)})\n                      </div>\n                    </div>\n                  );\n                }}\n              />\n            </div>\n          </div>\n          {!isMarketOrder && (\n            <ExchangeInfoRow label=\"Price\">\n              {getExchangeRateDisplay(getExchangeRate(fromTokenInfo, toTokenInfo), fromToken, toToken)}\n            </ExchangeInfoRow>\n          )}\n        </div>\n      )}\n      {(isLong || isShort) && (\n        <div className=\"Exchange-swap-market-box App-box App-box-border\">\n          <div className=\"Exchange-swap-market-box-title\">\n            {isLong ? \"Long\" : \"Short\"}&nbsp;{toToken.symbol}\n          </div>\n          <div className=\"App-card-divider\"></div>\n          <div className=\"Exchange-info-row\">\n            <div className=\"Exchange-info-label\">\n              <Trans>Entry Price</Trans>\n            </div>\n            <div className=\"align-right\">\n              <Tooltip\n                handle={`${formatAmount(entryMarkPrice, USD_DECIMALS, 2, true)} USD`}\n                position=\"right-bottom\"\n                renderContent={() => {\n                  return (\n                    <>\n                      The position will be opened at {formatAmount(entryMarkPrice, USD_DECIMALS, 2, true)} USD with a\n                      max slippage of {parseFloat(savedSlippageAmount / 100.0).toFixed(2)}%.\n                      <br />\n                      <br />\n                      The slippage amount can be configured under Settings, found by clicking on your address at the top\n                      right of the page after connecting your wallet.\n                      <br />\n                      <br />\n                      <a\n                        href=\"https://gmxio.gitbook.io/gmx/trading#opening-a-position\"\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                      >\n                        More Info\n                      </a>\n                    </>\n                  );\n                }}\n              />\n            </div>\n          </div>\n          <div className=\"Exchange-info-row\">\n            <div className=\"Exchange-info-label\">\n              <Trans>Exit Price</Trans>\n            </div>\n            <div className=\"align-right\">\n              <Tooltip\n                handle={`${formatAmount(exitMarkPrice, USD_DECIMALS, 2, true)} USD`}\n                position=\"right-bottom\"\n                renderContent={() => {\n                  return (\n                    <>\n                      If you have an existing position, the position will be closed at{\" \"}\n                      {formatAmount(entryMarkPrice, USD_DECIMALS, 2, true)} USD.\n                      <br />\n                      <br />\n                      This exit price will change with the price of the asset.\n                      <br />\n                      <br />\n                      <a\n                        href=\"https://gmxio.gitbook.io/gmx/trading#opening-a-position\"\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                      >\n                        More Info\n                      </a>\n                    </>\n                  );\n                }}\n              />\n            </div>\n          </div>\n          <div className=\"Exchange-info-row\">\n            <div className=\"Exchange-info-label\">\n              <Trans>Borrow Fee</Trans>\n            </div>\n            <div className=\"align-right\">\n              <Tooltip\n                handle={borrowFeeText}\n                position=\"right-bottom\"\n                renderContent={() => {\n                  return (\n                    <>\n                      {hasZeroBorrowFee && (\n                        <div>\n                          {isLong && \"There are more shorts than longs, borrow fees for longing is currently zero\"}\n                          {isShort && \"There are more longs than shorts, borrow fees for shorting is currently zero\"}\n                        </div>\n                      )}\n                      {!hasZeroBorrowFee && (\n                        <div>\n                          The borrow fee is calculated as (assets borrowed) / (total assets in pool) * 0.01% per hour.\n                          <br />\n                          <br />\n                          {isShort && `You can change the \"Profits In\" token above to find lower fees`}\n                        </div>\n                      )}\n                      <br />\n                      <a\n                        href=\"https://gmxio.gitbook.io/gmx/trading#opening-a-position\"\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                      >\n                        More Info\n                      </a>\n                    </>\n                  );\n                }}\n              >\n                {!hasZeroBorrowFee && null}\n              </Tooltip>\n            </div>\n          </div>\n          {renderAvailableLongLiquidity()}\n          {isShort && toTokenInfo.hasMaxAvailableShort && (\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Available Liquidity</Trans>\n              </div>\n              <div className=\"align-right\">\n                <Tooltip\n                  handle={`${formatAmount(toTokenInfo.maxAvailableShort, USD_DECIMALS, 2, true)}`}\n                  position=\"right-bottom\"\n                  renderContent={() => {\n                    return (\n                      <>\n                        Max {toTokenInfo.symbol} short capacity: $\n                        {formatAmount(toTokenInfo.maxGlobalShortSize, USD_DECIMALS, 2, true)}\n                        <br />\n                        <br />\n                        Current {toTokenInfo.symbol} shorts: $\n                        {formatAmount(toTokenInfo.globalShortSize, USD_DECIMALS, 2, true)}\n                        <br />\n                      </>\n                    );\n                  }}\n                ></Tooltip>\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n      <div className=\"Exchange-swap-market-box App-box App-box-border\">\n        <div className=\"Exchange-swap-market-box-title\">\n          <Trans>Useful Links</Trans>\n        </div>\n        <div className=\"App-card-divider\"></div>\n        <div className=\"Exchange-info-row\">\n          <div className=\"Exchange-info-label-button\">\n            <a href=\"https://gmxio.gitbook.io/gmx/trading\" target=\"_blank\" rel=\"noopener noreferrer\">\n              <Trans>Trading guide</Trans>\n            </a>\n          </div>\n        </div>\n        <div className=\"Exchange-info-row\">\n          <div className=\"Exchange-info-label-button\">\n            <a href={getLeaderboardLink()} target=\"_blank\" rel=\"noopener noreferrer\">\n              <Trans>Leaderboard</Trans>\n            </a>\n          </div>\n        </div>\n        <div className=\"Exchange-info-row\">\n          <div className=\"Exchange-info-label-button\">\n            <a href=\"https://gmxio.gitbook.io/gmx/trading#backup-rpc-urls\" target=\"_blank\" rel=\"noopener noreferrer\">\n              <Trans>Speed up page loading</Trans>\n            </a>\n          </div>\n        </div>\n      </div>\n      {renderErrorModal()}\n      {renderOrdersToa()}\n      {isConfirming && (\n        <ConfirmationBox\n          library={library}\n          isHigherSlippageAllowed={isHigherSlippageAllowed}\n          setIsHigherSlippageAllowed={setIsHigherSlippageAllowed}\n          orders={orders}\n          isSwap={isSwap}\n          isLong={isLong}\n          isMarketOrder={isMarketOrder}\n          orderOption={orderOption}\n          isShort={isShort}\n          fromToken={fromToken}\n          fromTokenInfo={fromTokenInfo}\n          toToken={toToken}\n          toTokenInfo={toTokenInfo}\n          toAmount={toAmount}\n          fromAmount={fromAmount}\n          feeBps={feeBps}\n          onConfirmationClick={onConfirmationClick}\n          setIsConfirming={setIsConfirming}\n          hasExistingPosition={hasExistingPosition}\n          shortCollateralAddress={shortCollateralAddress}\n          shortCollateralToken={shortCollateralToken}\n          leverage={leverage}\n          existingPosition={existingPosition}\n          existingLiquidationPrice={existingLiquidationPrice}\n          displayLiquidationPrice={displayLiquidationPrice}\n          nextAveragePrice={nextAveragePrice}\n          triggerPriceUsd={triggerPriceUsd}\n          triggerRatio={triggerRatio}\n          fees={fees}\n          feesUsd={feesUsd}\n          isSubmitting={isSubmitting}\n          isPendingConfirmation={isPendingConfirmation}\n          fromUsdMin={fromUsdMin}\n          toUsdMax={toUsdMax}\n          collateralTokenAddress={collateralTokenAddress}\n          infoTokens={infoTokens}\n          chainId={chainId}\n          setPendingTxns={setPendingTxns}\n          pendingTxns={pendingTxns}\n          minExecutionFee={minExecutionFee}\n          minExecutionFeeUSD={minExecutionFeeUSD}\n          minExecutionFeeErrorMessage={minExecutionFeeErrorMessage}\n        />\n      )}\n    </div>\n  );\n}\n","import React from \"react\";\r\nimport { Menu } from \"@headlessui/react\";\r\nimport { FaChevronDown } from \"react-icons/fa\";\r\nimport cx from \"classnames\";\r\nimport \"./ChartTokenSelector.css\";\r\nimport { getTokens, getWhitelistedTokens } from \"../../config/Tokens\";\r\nimport { LONG, SHORT, SWAP } from \"../../lib/legacy\";\r\n\r\nexport default function ChartTokenSelector(props) {\r\n  const { chainId, selectedToken, onSelectToken, swapOption } = props;\r\n\r\n  const isLong = swapOption === LONG;\r\n  const isShort = swapOption === SHORT;\r\n  const isSwap = swapOption === SWAP;\r\n\r\n  let options = getTokens(chainId);\r\n  const whitelistedTokens = getWhitelistedTokens(chainId);\r\n  const indexTokens = whitelistedTokens.filter((token) => !token.isStable && !token.isWrapped);\r\n  const shortableTokens = indexTokens.filter((token) => token.isShortable);\r\n\r\n  if (isLong) {\r\n    options = indexTokens;\r\n  }\r\n  if (isShort) {\r\n    options = shortableTokens;\r\n  }\r\n\r\n  const onSelect = async (token) => {\r\n    onSelectToken(token);\r\n  };\r\n\r\n  var value = selectedToken;\r\n\r\n  return (\r\n    <Menu>\r\n      <Menu.Button as=\"div\" disabled={isSwap}>\r\n        <button className={cx(\"App-cta small transparent chart-token-selector\", { \"default-cursor\": isSwap })}>\r\n          <span className=\"chart-token-selector--current\">{value.symbol} / USD</span>\r\n          {!isSwap && <FaChevronDown />}\r\n        </button>\r\n      </Menu.Button>\r\n      <div className=\"chart-token-menu\">\r\n        <Menu.Items as=\"div\" className=\"menu-items chart-token-menu-items\">\r\n          {options.map((option, index) => (\r\n            <Menu.Item key={index}>\r\n              <div\r\n                className=\"menu-item\"\r\n                onClick={() => {\r\n                  onSelect(option);\r\n                }}\r\n              >\r\n                <span style={{ marginLeft: 5 }} className=\"token-label\">\r\n                  {option.symbol} / USD\r\n                </span>\r\n              </div>\r\n            </Menu.Item>\r\n          ))}\r\n        </Menu.Items>\r\n      </div>\r\n    </Menu>\r\n  );\r\n}\r\n","import React, { useEffect, useState, useRef, useCallback, useMemo } from \"react\";\nimport cx from \"classnames\";\n\nimport { createChart } from \"krasulya-lightweight-charts\";\n\nimport {\n  USD_DECIMALS,\n  SWAP,\n  INCREASE,\n  CHART_PERIODS,\n  getTokenInfo,\n  formatAmount,\n  formatDateTime,\n  usePrevious,\n  getLiquidationPrice,\n  useLocalStorageSerializeKey,\n  numberWithCommas,\n} from \"../../lib/legacy\";\nimport { useChartPrices } from \"../../domain/legacy\";\nimport Tab from \"../Tab/Tab\";\n\nimport { getTokens, getToken } from \"../../config/Tokens\";\nimport ChartTokenSelector from \"./ChartTokenSelector\";\n\nconst PRICE_LINE_TEXT_WIDTH = 15;\n\nconst timezoneOffset = -new Date().getTimezoneOffset() * 60;\n\nexport function getChartToken(swapOption, fromToken, toToken, chainId) {\n  if (!fromToken || !toToken) {\n    return;\n  }\n\n  if (swapOption !== SWAP) {\n    return toToken;\n  }\n\n  if (fromToken.isUsdg && toToken.isUsdg) {\n    return getTokens(chainId).find((t) => t.isStable);\n  }\n  if (fromToken.isUsdg) {\n    return toToken;\n  }\n  if (toToken.isUsdg) {\n    return fromToken;\n  }\n\n  if (fromToken.isStable && toToken.isStable) {\n    return toToken;\n  }\n  if (fromToken.isStable) {\n    return toToken;\n  }\n  if (toToken.isStable) {\n    return fromToken;\n  }\n\n  return toToken;\n}\n\nconst DEFAULT_PERIOD = \"4h\";\n\nconst getSeriesOptions = () => ({\n  // https://github.com/tradingview/lightweight-charts/blob/master/docs/area-series.md\n  lineColor: \"#5472cc\",\n  topColor: \"rgba(49, 69, 131, 0.4)\",\n  bottomColor: \"rgba(42, 64, 103, 0.0)\",\n  lineWidth: 2,\n  priceLineColor: \"#3a3e5e\",\n  downColor: \"#fa3c58\",\n  wickDownColor: \"#fa3c58\",\n  upColor: \"#0ecc83\",\n  wickUpColor: \"#0ecc83\",\n  borderVisible: false,\n});\n\nconst getChartOptions = (width, height) => ({\n  width,\n  height,\n  layout: {\n    backgroundColor: \"rgba(255, 255, 255, 0)\",\n    textColor: \"#ccc\",\n    fontFamily: \"Relative\",\n  },\n  localization: {\n    // https://github.com/tradingview/lightweight-charts/blob/master/docs/customization.md#time-format\n    timeFormatter: (businessDayOrTimestamp) => {\n      return formatDateTime(businessDayOrTimestamp - timezoneOffset);\n    },\n  },\n  grid: {\n    vertLines: {\n      visible: true,\n      color: \"rgba(35, 38, 59, 1)\",\n      style: 2,\n    },\n    horzLines: {\n      visible: true,\n      color: \"rgba(35, 38, 59, 1)\",\n      style: 2,\n    },\n  },\n  // https://github.com/tradingview/lightweight-charts/blob/master/docs/time-scale.md#time-scale\n  timeScale: {\n    rightOffset: 5,\n    borderVisible: false,\n    barSpacing: 5,\n    timeVisible: true,\n    fixLeftEdge: true,\n  },\n  // https://github.com/tradingview/lightweight-charts/blob/master/docs/customization.md#price-axis\n  priceScale: {\n    borderVisible: false,\n  },\n  crosshair: {\n    horzLine: {\n      color: \"#aaa\",\n    },\n    vertLine: {\n      color: \"#aaa\",\n    },\n    mode: 0,\n  },\n});\n\nexport default function ExchangeTVChart(props) {\n  const {\n    swapOption,\n    fromTokenAddress,\n    toTokenAddress,\n    infoTokens,\n    chainId,\n    positions,\n    savedShouldShowPositionLines,\n    orders,\n    setToTokenAddress,\n  } = props;\n  const [currentChart, setCurrentChart] = useState();\n  const [currentSeries, setCurrentSeries] = useState();\n\n  let [period, setPeriod] = useLocalStorageSerializeKey([chainId, \"Chart-period\"], DEFAULT_PERIOD);\n  if (!(period in CHART_PERIODS)) {\n    period = DEFAULT_PERIOD;\n  }\n\n  const [hoveredCandlestick, setHoveredCandlestick] = useState();\n\n  const fromToken = getTokenInfo(infoTokens, fromTokenAddress);\n  const toToken = getTokenInfo(infoTokens, toTokenAddress);\n\n  const [chartToken, setChartToken] = useState({\n    maxPrice: null,\n    minPrice: null,\n  });\n  useEffect(() => {\n    const tmp = getChartToken(swapOption, fromToken, toToken, chainId);\n    setChartToken(tmp);\n  }, [swapOption, fromToken, toToken, chainId]);\n\n  const symbol = chartToken ? (chartToken.isWrapped ? chartToken.baseSymbol : chartToken.symbol) : undefined;\n  const marketName = chartToken ? symbol + \"_USD\" : undefined;\n  const previousMarketName = usePrevious(marketName);\n\n  const currentOrders = useMemo(() => {\n    if (swapOption === SWAP || !chartToken) {\n      return [];\n    }\n\n    return orders.filter((order) => {\n      if (order.type === SWAP) {\n        // we can't show non-stable to non-stable swap orders with existing charts\n        // so to avoid users confusion we'll show only long/short orders\n        return false;\n      }\n\n      const indexToken = getToken(chainId, order.indexToken);\n      return order.indexToken === chartToken.address || (chartToken.isNative && indexToken.isWrapped);\n    });\n  }, [orders, chartToken, swapOption, chainId]);\n\n  const ref = useRef(null);\n  const chartRef = useRef(null);\n\n  const currentAveragePrice =\n    chartToken.maxPrice && chartToken.minPrice ? chartToken.maxPrice.add(chartToken.minPrice).div(2) : null;\n  const [priceData, updatePriceData] = useChartPrices(\n    chainId,\n    chartToken.symbol,\n    chartToken.isStable,\n    chartToken.priceFeed,\n    period,\n    currentAveragePrice\n  );\n\n  const [chartInited, setChartInited] = useState(false);\n  useEffect(() => {\n    if (marketName !== previousMarketName) {\n      setChartInited(false);\n    }\n  }, [marketName, previousMarketName]);\n\n  const scaleChart = useCallback(() => {\n    const from = Date.now() / 1000 - (7 * 24 * CHART_PERIODS[period]) / 2 + timezoneOffset;\n    const to = Date.now() / 1000 + timezoneOffset;\n    currentChart.timeScale().setVisibleRange({ from, to });\n  }, [currentChart, period]);\n\n  const onCrosshairMove = useCallback(\n    (evt) => {\n      if (!evt.time) {\n        setHoveredCandlestick(null);\n        return;\n      }\n\n      for (const point of evt.seriesPrices.values()) {\n        setHoveredCandlestick((hoveredCandlestick) => {\n          if (hoveredCandlestick && hoveredCandlestick.time === evt.time) {\n            // rerender optimisations\n            return hoveredCandlestick;\n          }\n          return {\n            time: evt.time,\n            ...point,\n          };\n        });\n        break;\n      }\n    },\n    [setHoveredCandlestick]\n  );\n\n  useEffect(() => {\n    if (!ref.current || !priceData || !priceData.length || currentChart) {\n      return;\n    }\n\n    const chart = createChart(\n      chartRef.current,\n      getChartOptions(chartRef.current.offsetWidth, chartRef.current.offsetHeight)\n    );\n\n    chart.subscribeCrosshairMove(onCrosshairMove);\n\n    const series = chart.addCandlestickSeries(getSeriesOptions());\n\n    setCurrentChart(chart);\n    setCurrentSeries(series);\n  }, [ref, priceData, currentChart, onCrosshairMove]);\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      updatePriceData(undefined, true);\n    }, 60 * 1000);\n    return () => clearInterval(interval);\n  }, [updatePriceData]);\n\n  useEffect(() => {\n    if (!currentChart) {\n      return;\n    }\n    const resizeChart = () => {\n      currentChart.resize(chartRef.current.offsetWidth, chartRef.current.offsetHeight);\n    };\n    window.addEventListener(\"resize\", resizeChart);\n    return () => window.removeEventListener(\"resize\", resizeChart);\n  }, [currentChart]);\n\n  useEffect(() => {\n    if (currentSeries && priceData && priceData.length) {\n      currentSeries.setData(priceData);\n\n      if (!chartInited) {\n        scaleChart();\n        setChartInited(true);\n      }\n    }\n  }, [priceData, currentSeries, chartInited, scaleChart]);\n\n  useEffect(() => {\n    const lines = [];\n    if (currentSeries && savedShouldShowPositionLines) {\n      if (currentOrders && currentOrders.length > 0) {\n        currentOrders.forEach((order) => {\n          const indexToken = getToken(chainId, order.indexToken);\n          let tokenSymbol;\n          if (indexToken && indexToken.symbol) {\n            tokenSymbol = indexToken.isWrapped ? indexToken.baseSymbol : indexToken.symbol;\n          }\n          const title = `${order.type === INCREASE ? \"Inc.\" : \"Dec.\"} ${tokenSymbol} ${\n            order.isLong ? \"Long\" : \"Short\"\n          }`;\n          const color = \"#3a3e5e\";\n          lines.push(\n            currentSeries.createPriceLine({\n              price: parseFloat(formatAmount(order.triggerPrice, USD_DECIMALS, 2)),\n              color,\n              title: title.padEnd(PRICE_LINE_TEXT_WIDTH, \" \"),\n            })\n          );\n        });\n      }\n      if (positions && positions.length > 0) {\n        const color = \"#3a3e5e\";\n\n        positions.forEach((position) => {\n          lines.push(\n            currentSeries.createPriceLine({\n              price: parseFloat(formatAmount(position.averagePrice, USD_DECIMALS, 2)),\n              color,\n              title: `Open ${position.indexToken.symbol} ${position.isLong ? \"Long\" : \"Short\"}`.padEnd(\n                PRICE_LINE_TEXT_WIDTH,\n                \" \"\n              ),\n            })\n          );\n\n          const liquidationPrice = getLiquidationPrice(position);\n          lines.push(\n            currentSeries.createPriceLine({\n              price: parseFloat(formatAmount(liquidationPrice, USD_DECIMALS, 2)),\n              color,\n              title: `Liq. ${position.indexToken.symbol} ${position.isLong ? \"Long\" : \"Short\"}`.padEnd(\n                PRICE_LINE_TEXT_WIDTH,\n                \" \"\n              ),\n            })\n          );\n        });\n      }\n    }\n    return () => {\n      lines.forEach((line) => currentSeries.removePriceLine(line));\n    };\n  }, [currentOrders, positions, currentSeries, chainId, savedShouldShowPositionLines]);\n\n  const candleStatsHtml = useMemo(() => {\n    if (!priceData) {\n      return null;\n    }\n    const candlestick = hoveredCandlestick || priceData[priceData.length - 1];\n    if (!candlestick) {\n      return null;\n    }\n\n    const className = cx({\n      \"ExchangeChart-bottom-stats\": true,\n      positive: candlestick.open <= candlestick.close,\n      negative: candlestick.open > candlestick.close,\n      [`length-${String(parseInt(candlestick.close)).length}`]: true,\n    });\n\n    const toFixedNumbers = 2;\n\n    return (\n      <div className={className}>\n        <span className=\"ExchangeChart-bottom-stats-label\">O</span>\n        <span className=\"ExchangeChart-bottom-stats-value\">{candlestick.open.toFixed(toFixedNumbers)}</span>\n        <span className=\"ExchangeChart-bottom-stats-label\">H</span>\n        <span className=\"ExchangeChart-bottom-stats-value\">{candlestick.high.toFixed(toFixedNumbers)}</span>\n        <span className=\"ExchangeChart-bottom-stats-label\">L</span>\n        <span className=\"ExchangeChart-bottom-stats-value\">{candlestick.low.toFixed(toFixedNumbers)}</span>\n        <span className=\"ExchangeChart-bottom-stats-label\">C</span>\n        <span className=\"ExchangeChart-bottom-stats-value\">{candlestick.close.toFixed(toFixedNumbers)}</span>\n      </div>\n    );\n  }, [hoveredCandlestick, priceData]);\n\n  let high;\n  let low;\n  let deltaPrice;\n  let delta;\n  let deltaPercentage;\n  let deltaPercentageStr;\n\n  const now = parseInt(Date.now() / 1000);\n  const timeThreshold = now - 24 * 60 * 60;\n\n  if (priceData) {\n    for (let i = priceData.length - 1; i > 0; i--) {\n      const price = priceData[i];\n      if (price.time < timeThreshold) {\n        break;\n      }\n      if (!low) {\n        low = price.low;\n      }\n      if (!high) {\n        high = price.high;\n      }\n\n      if (price.high > high) {\n        high = price.high;\n      }\n      if (price.low < low) {\n        low = price.low;\n      }\n\n      deltaPrice = price.open;\n    }\n  }\n\n  if (deltaPrice && currentAveragePrice) {\n    const average = parseFloat(formatAmount(currentAveragePrice, USD_DECIMALS, 2));\n    delta = average - deltaPrice;\n    deltaPercentage = (delta * 100) / average;\n    if (deltaPercentage > 0) {\n      deltaPercentageStr = `+${deltaPercentage.toFixed(2)}%`;\n    } else {\n      deltaPercentageStr = `${deltaPercentage.toFixed(2)}%`;\n    }\n    if (deltaPercentage === 0) {\n      deltaPercentageStr = \"0.00\";\n    }\n  }\n\n  if (!chartToken) {\n    return null;\n  }\n\n  const onSelectToken = (token) => {\n    const tmp = getTokenInfo(infoTokens, token.address);\n    setChartToken(tmp);\n    setToTokenAddress(swapOption, token.address);\n  };\n\n  return (\n    <div className=\"ExchangeChart tv\" ref={ref}>\n      <div className=\"ExchangeChart-top App-box App-box-border\">\n        <div className=\"ExchangeChart-top-inner\">\n          <div>\n            <div className=\"ExchangeChart-title\">\n              <ChartTokenSelector\n                chainId={chainId}\n                selectedToken={chartToken}\n                swapOption={swapOption}\n                infoTokens={infoTokens}\n                onSelectToken={onSelectToken}\n                className=\"chart-token-selector\"\n              />\n            </div>\n          </div>\n          <div>\n            <div className=\"ExchangeChart-main-price\">\n              {chartToken.maxPrice && formatAmount(chartToken.maxPrice, USD_DECIMALS, 2, true)}\n            </div>\n            <div className=\"ExchangeChart-info-label\">\n              ${chartToken.minPrice && formatAmount(chartToken.minPrice, USD_DECIMALS, 2, true)}\n            </div>\n          </div>\n          <div>\n            <div className=\"ExchangeChart-info-label\">24h Change</div>\n            <div className={cx({ positive: deltaPercentage > 0, negative: deltaPercentage < 0 })}>\n              {!deltaPercentageStr && \"-\"}\n              {deltaPercentageStr && deltaPercentageStr}\n            </div>\n          </div>\n          <div className=\"ExchangeChart-additional-info\">\n            <div className=\"ExchangeChart-info-label\">24h High</div>\n            <div>\n              {!high && \"-\"}\n              {high && numberWithCommas(high.toFixed(2))}\n            </div>\n          </div>\n          <div className=\"ExchangeChart-additional-info\">\n            <div className=\"ExchangeChart-info-label\">24h Low</div>\n            <div>\n              {!low && \"-\"}\n              {low && numberWithCommas(low.toFixed(2))}\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className=\"ExchangeChart-bottom App-box App-box-border\">\n        <div className=\"ExchangeChart-bottom-header\">\n          <div className=\"ExchangeChart-bottom-controls\">\n            <Tab options={Object.keys(CHART_PERIODS)} option={period} setOption={setPeriod} />\n          </div>\n          {candleStatsHtml}\n        </div>\n        <div className=\"ExchangeChart-bottom-content\" ref={chartRef}></div>\n      </div>\n    </div>\n  );\n}\n","import React, { useState, useCallback, useEffect, useMemo } from \"react\";\r\nimport { ethers } from \"ethers\";\r\nimport cx from \"classnames\";\r\nimport { Trans, t } from \"@lingui/macro\";\r\nimport { BsArrowRight } from \"react-icons/bs\";\r\n\r\nimport {\r\n  formatAmount,\r\n  bigNumberify,\r\n  ARBITRUM,\r\n  DEFAULT_SLIPPAGE_AMOUNT,\r\n  DEFAULT_HIGHER_SLIPPAGE_AMOUNT,\r\n  USD_DECIMALS,\r\n  DUST_USD,\r\n  BASIS_POINTS_DIVISOR,\r\n  USDG_ADDRESS,\r\n  SLIPPAGE_BPS_KEY,\r\n  TRIGGER_PREFIX_BELOW,\r\n  TRIGGER_PREFIX_ABOVE,\r\n  MIN_PROFIT_TIME,\r\n  usePrevious,\r\n  formatAmountFree,\r\n  parseValue,\r\n  expandDecimals,\r\n  getTokenInfo,\r\n  getLiquidationPrice,\r\n  getLeverage,\r\n  getMarginFee,\r\n  PRECISION,\r\n  MARKET,\r\n  STOP,\r\n  DECREASE,\r\n  useLocalStorageSerializeKey,\r\n  calculatePositionDelta,\r\n  getDeltaStr,\r\n  getProfitPrice,\r\n  formatDateTime,\r\n  getTimeRemaining,\r\n  getNextToAmount,\r\n  getUsd,\r\n  USDG_DECIMALS,\r\n  CLOSE_POSITION_RECEIVE_TOKEN_KEY,\r\n  useLocalStorageByChainId,\r\n  adjustForDecimals,\r\n  IS_NETWORK_DISABLED,\r\n  getChainName,\r\n} from \"../../lib/legacy\";\r\nimport { getConstant } from \"../../config/chains\";\r\nimport { createDecreaseOrder, callContract, useHasOutdatedUi } from \"../../domain/legacy\";\r\nimport { getContract } from \"../../config/Addresses\";\r\nimport PositionRouter from \"../../abis/PositionRouter.json\";\r\nimport Checkbox from \"../Checkbox/Checkbox\";\r\nimport Tab from \"../Tab/Tab\";\r\nimport Modal from \"../Modal/Modal\";\r\nimport ExchangeInfoRow from \"./ExchangeInfoRow\";\r\nimport Tooltip from \"../Tooltip/Tooltip\";\r\nimport TokenSelector from \"./TokenSelector\";\r\nimport { getTokens } from \"../../config/Tokens\";\r\nimport \"./PositionSeller.css\";\r\n\r\nconst { AddressZero } = ethers.constants;\r\nconst ORDER_SIZE_DUST_USD = expandDecimals(1, USD_DECIMALS - 1); // $0.10\r\n\r\nconst orderOptionLabels = {\r\n  [MARKET]: \"Market\",\r\n  [STOP]: \"Trigger\",\r\n};\r\n\r\nfunction getTokenAmount(usdAmount, tokenAddress, max, infoTokens) {\r\n  if (!usdAmount) {\r\n    return;\r\n  }\r\n  if (tokenAddress === USDG_ADDRESS) {\r\n    return usdAmount.mul(expandDecimals(1, 18)).div(PRECISION);\r\n  }\r\n  const info = getTokenInfo(infoTokens, tokenAddress);\r\n  if (!info) {\r\n    return;\r\n  }\r\n  if (max && !info.maxPrice) {\r\n    return;\r\n  }\r\n  if (!max && !info.minPrice) {\r\n    return;\r\n  }\r\n\r\n  return usdAmount.mul(expandDecimals(1, info.decimals)).div(max ? info.minPrice : info.maxPrice);\r\n}\r\n\r\nfunction shouldSwap(collateralToken, receiveToken) {\r\n  // If position collateral is WETH in contract, then position.collateralToken is { symbol: ETH, isNative: true,  }\r\n  // @see https://github.com/gmx-io/gmx-interface/blob/master/src/pages/Exchange/Exchange.js#L162\r\n  // meaning if collateralToken.isNative === true in reality position has WETH as a collateral\r\n  // and if collateralToken.isNative === true and receiveToken.isNative === true then positions WETH will be unwrapped and user will receive native ETH\r\n  const isCollateralWrapped = collateralToken.isNative;\r\n\r\n  const isSameToken =\r\n    collateralToken.address === receiveToken.address || (isCollateralWrapped && receiveToken.isWrapped);\r\n\r\n  const isUnwrap = isCollateralWrapped && receiveToken.isNative;\r\n\r\n  return !isSameToken && !isUnwrap;\r\n}\r\n\r\nfunction getSwapLimits(infoTokens, fromTokenAddress, toTokenAddress) {\r\n  const fromInfo = getTokenInfo(infoTokens, fromTokenAddress);\r\n  const toInfo = getTokenInfo(infoTokens, toTokenAddress);\r\n\r\n  let maxInUsd;\r\n  let maxIn;\r\n  let maxOut;\r\n  let maxOutUsd;\r\n\r\n  if (!fromInfo?.maxUsdgAmount) {\r\n    maxInUsd = bigNumberify(0);\r\n    maxIn = bigNumberify(0);\r\n  } else {\r\n    maxInUsd = fromInfo.maxUsdgAmount\r\n      .sub(fromInfo.usdgAmount)\r\n      .mul(expandDecimals(1, USD_DECIMALS))\r\n      .div(expandDecimals(1, USDG_DECIMALS));\r\n\r\n    maxIn = maxInUsd.mul(expandDecimals(1, fromInfo.decimals)).div(fromInfo.maxPrice).toString();\r\n  }\r\n\r\n  if (!toInfo?.poolAmount || !toInfo?.bufferAmount) {\r\n    maxOut = bigNumberify(0);\r\n    maxOutUsd = bigNumberify(0);\r\n  } else {\r\n    maxOut = toInfo.availableAmount.gt(toInfo.poolAmount.sub(toInfo.bufferAmount))\r\n      ? toInfo.poolAmount.sub(toInfo.bufferAmount)\r\n      : toInfo.availableAmount;\r\n\r\n    maxOutUsd = getUsd(maxOut, toInfo.address, false, infoTokens);\r\n  }\r\n\r\n  return {\r\n    maxIn,\r\n    maxInUsd,\r\n    maxOut,\r\n    maxOutUsd,\r\n  };\r\n}\r\n\r\nexport default function PositionSeller(props) {\r\n  const {\r\n    pendingPositions,\r\n    setPendingPositions,\r\n    positionsMap,\r\n    positionKey,\r\n    isVisible,\r\n    setIsVisible,\r\n    account,\r\n    library,\r\n    infoTokens,\r\n    setPendingTxns,\r\n    flagOrdersEnabled,\r\n    savedIsPnlInLeverage,\r\n    chainId,\r\n    nativeTokenAddress,\r\n    orders,\r\n    isWaitingForPluginApproval,\r\n    isPluginApproving,\r\n    orderBookApproved,\r\n    setOrdersToaOpen,\r\n    positionRouterApproved,\r\n    isWaitingForPositionRouterApproval,\r\n    isPositionRouterApproving,\r\n    approvePositionRouter,\r\n    isHigherSlippageAllowed,\r\n    setIsHigherSlippageAllowed,\r\n    minExecutionFee,\r\n    minExecutionFeeErrorMessage,\r\n    usdgSupply,\r\n    totalTokenWeights,\r\n  } = props;\r\n  const [savedSlippageAmount] = useLocalStorageSerializeKey([chainId, SLIPPAGE_BPS_KEY], DEFAULT_SLIPPAGE_AMOUNT);\r\n  const [keepLeverage, setKeepLeverage] = useLocalStorageSerializeKey([chainId, \"Exchange-keep-leverage\"], true);\r\n  const position = positionsMap && positionKey ? positionsMap[positionKey] : undefined;\r\n  const [fromValue, setFromValue] = useState(\"\");\r\n  const [isProfitWarningAccepted, setIsProfitWarningAccepted] = useState(false);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const prevIsVisible = usePrevious(isVisible);\r\n  const positionRouterAddress = getContract(chainId, \"PositionRouter\");\r\n  const nativeTokenSymbol = getConstant(chainId, \"nativeTokenSymbol\");\r\n  const toTokens = getTokens(chainId);\r\n\r\n  const [savedRecieveTokenAddress, setSavedRecieveTokenAddress] = useLocalStorageByChainId(\r\n    chainId,\r\n    `${CLOSE_POSITION_RECEIVE_TOKEN_KEY}-${position?.indexToken?.symbol}-${position.isLong ? \"long\" : \"short\"}`\r\n  );\r\n\r\n  const [swapToToken, setSwapToToken] = useState(() =>\r\n    savedRecieveTokenAddress ? toTokens.find((token) => token.address === savedRecieveTokenAddress) : undefined\r\n  );\r\n\r\n  let allowedSlippage = savedSlippageAmount;\r\n  if (isHigherSlippageAllowed) {\r\n    allowedSlippage = DEFAULT_HIGHER_SLIPPAGE_AMOUNT;\r\n  }\r\n\r\n  const orderOptions = [MARKET, STOP];\r\n  let [orderOption, setOrderOption] = useState(MARKET);\r\n\r\n  if (!flagOrdersEnabled) {\r\n    orderOption = MARKET;\r\n  }\r\n\r\n  const needPositionRouterApproval = !positionRouterApproved && orderOption === MARKET;\r\n\r\n  const onOrderOptionChange = (option) => {\r\n    setOrderOption(option);\r\n  };\r\n\r\n  const onTriggerPriceChange = (evt) => {\r\n    setTriggerPriceValue(evt.target.value || \"\");\r\n  };\r\n\r\n  const [triggerPriceValue, setTriggerPriceValue] = useState(\"\");\r\n  const triggerPriceUsd = orderOption === MARKET ? 0 : parseValue(triggerPriceValue, USD_DECIMALS);\r\n\r\n  const [nextDelta, nextHasProfit = bigNumberify(0)] = useMemo(() => {\r\n    if (!position) {\r\n      return [bigNumberify(0), false];\r\n    }\r\n\r\n    if (orderOption !== STOP) {\r\n      return [position.delta, position.hasProfit, position.deltaPercentage];\r\n    }\r\n\r\n    if (!triggerPriceUsd) {\r\n      return [bigNumberify(0), false];\r\n    }\r\n\r\n    const { delta, hasProfit, deltaPercentage } = calculatePositionDelta(triggerPriceUsd, position);\r\n    return [delta, hasProfit, deltaPercentage];\r\n  }, [position, orderOption, triggerPriceUsd]);\r\n\r\n  const existingOrders = useMemo(() => {\r\n    if (orderOption === STOP && (!triggerPriceUsd || triggerPriceUsd.eq(0))) {\r\n      return [];\r\n    }\r\n    if (!orders || !position) {\r\n      return [];\r\n    }\r\n\r\n    const ret = [];\r\n    for (const order of orders) {\r\n      // only Stop orders can't be executed without corresponding opened position\r\n      if (order.type !== DECREASE) continue;\r\n\r\n      // if user creates Stop-Loss we need only Stop-Loss orders and vice versa\r\n      if (orderOption === STOP) {\r\n        const triggerAboveThreshold = triggerPriceUsd.gt(position.markPrice);\r\n        if (triggerAboveThreshold !== order.triggerAboveThreshold) continue;\r\n      }\r\n\r\n      const sameToken =\r\n        order.indexToken === nativeTokenAddress\r\n          ? position.indexToken.isNative\r\n          : order.indexToken === position.indexToken.address;\r\n      if (order.isLong === position.isLong && sameToken) {\r\n        ret.push(order);\r\n      }\r\n    }\r\n    return ret;\r\n  }, [position, orders, triggerPriceUsd, orderOption, nativeTokenAddress]);\r\n\r\n  const existingOrder = existingOrders[0];\r\n\r\n  const needOrderBookApproval = orderOption === STOP && !orderBookApproved;\r\n\r\n  const isSwapAllowed = orderOption === MARKET;\r\n\r\n  const { data: hasOutdatedUi } = useHasOutdatedUi();\r\n\r\n  let collateralToken;\r\n  let receiveToken;\r\n  let maxAmount;\r\n  let maxAmountFormatted;\r\n  let maxAmountFormattedFree;\r\n  let fromAmount;\r\n\r\n  let convertedAmount;\r\n  let convertedAmountFormatted;\r\n\r\n  let nextLeverage;\r\n  let liquidationPrice;\r\n  let nextLiquidationPrice;\r\n  let isClosing;\r\n  let sizeDelta;\r\n\r\n  let nextCollateral;\r\n  let collateralDelta = bigNumberify(0);\r\n  let receiveAmount = bigNumberify(0);\r\n  let convertedReceiveAmount = bigNumberify(0);\r\n  let adjustedDelta = bigNumberify(0);\r\n\r\n  let isNotEnoughReceiveTokenLiquidity;\r\n  let isCollateralPoolCapacityExceeded;\r\n\r\n  let title;\r\n  let fundingFee;\r\n  let positionFee;\r\n  let swapFeeToken;\r\n  let swapFee;\r\n  let totalFees = bigNumberify(0);\r\n\r\n  let executionFee = orderOption === STOP ? getConstant(chainId, \"DECREASE_ORDER_EXECUTION_GAS_FEE\") : minExecutionFee;\r\n\r\n  let executionFeeUsd = getUsd(executionFee, nativeTokenAddress, false, infoTokens) || bigNumberify(0);\r\n\r\n  if (position) {\r\n    fundingFee = position.fundingFee;\r\n    fromAmount = parseValue(fromValue, USD_DECIMALS);\r\n    sizeDelta = fromAmount;\r\n\r\n    title = `Close ${position.isLong ? \"Long\" : \"Short\"} ${position.indexToken.symbol}`;\r\n    collateralToken = position.collateralToken;\r\n    liquidationPrice = getLiquidationPrice(position);\r\n\r\n    if (fromAmount) {\r\n      isClosing = position.size.sub(fromAmount).lt(DUST_USD);\r\n      positionFee = getMarginFee(fromAmount);\r\n    }\r\n\r\n    if (isClosing) {\r\n      sizeDelta = position.size;\r\n      receiveAmount = position.collateral;\r\n    } else if (orderOption === STOP && sizeDelta && existingOrders.length > 0) {\r\n      let residualSize = position.size;\r\n      for (const order of existingOrders) {\r\n        residualSize = residualSize.sub(order.sizeDelta);\r\n      }\r\n      if (residualSize.sub(sizeDelta).abs().lt(ORDER_SIZE_DUST_USD)) {\r\n        sizeDelta = residualSize;\r\n      }\r\n    }\r\n\r\n    if (sizeDelta) {\r\n      adjustedDelta = nextDelta.mul(sizeDelta).div(position.size);\r\n    }\r\n\r\n    if (nextHasProfit) {\r\n      receiveAmount = receiveAmount.add(adjustedDelta);\r\n    } else {\r\n      if (receiveAmount.gt(adjustedDelta)) {\r\n        receiveAmount = receiveAmount.sub(adjustedDelta);\r\n      } else {\r\n        receiveAmount = bigNumberify(0);\r\n      }\r\n    }\r\n\r\n    if (keepLeverage && sizeDelta && !isClosing) {\r\n      collateralDelta = sizeDelta.mul(position.collateral).div(position.size);\r\n      // if the position will be realising a loss then reduce collateralDelta by the realised loss\r\n      if (!nextHasProfit) {\r\n        const deductions = adjustedDelta.add(positionFee).add(fundingFee);\r\n        if (collateralDelta.gt(deductions)) {\r\n          collateralDelta = collateralDelta = collateralDelta.sub(deductions);\r\n        } else {\r\n          collateralDelta = bigNumberify(0);\r\n        }\r\n      }\r\n    }\r\n\r\n    maxAmount = position.size;\r\n    maxAmountFormatted = formatAmount(maxAmount, USD_DECIMALS, 2, true);\r\n    maxAmountFormattedFree = formatAmountFree(maxAmount, USD_DECIMALS, 2);\r\n\r\n    if (fromAmount && collateralToken.maxPrice) {\r\n      convertedAmount = fromAmount.mul(expandDecimals(1, collateralToken.decimals)).div(collateralToken.maxPrice);\r\n      convertedAmountFormatted = formatAmount(convertedAmount, collateralToken.decimals, 4, true);\r\n    }\r\n\r\n    totalFees = totalFees.add(positionFee || bigNumberify(0)).add(fundingFee || bigNumberify(0));\r\n\r\n    receiveAmount = receiveAmount.add(collateralDelta);\r\n\r\n    if (sizeDelta) {\r\n      if (receiveAmount.gt(totalFees)) {\r\n        receiveAmount = receiveAmount.sub(totalFees);\r\n      } else {\r\n        receiveAmount = bigNumberify(0);\r\n      }\r\n    }\r\n\r\n    receiveToken = isSwapAllowed && swapToToken ? swapToToken : collateralToken;\r\n\r\n    // Calculate swap fees\r\n    if (isSwapAllowed && swapToToken) {\r\n      const { feeBasisPoints } = getNextToAmount(\r\n        chainId,\r\n        convertedAmount,\r\n        collateralToken.address,\r\n        receiveToken.address,\r\n        infoTokens,\r\n        undefined,\r\n        undefined,\r\n        usdgSupply,\r\n        totalTokenWeights,\r\n        true\r\n      );\r\n\r\n      if (feeBasisPoints) {\r\n        swapFee = receiveAmount.mul(feeBasisPoints).div(BASIS_POINTS_DIVISOR);\r\n        swapFeeToken = getTokenAmount(swapFee, collateralToken.address, false, infoTokens);\r\n        totalFees = totalFees.add(swapFee || bigNumberify(0));\r\n        receiveAmount = receiveAmount.sub(swapFee);\r\n      }\r\n    }\r\n\r\n    convertedReceiveAmount = getTokenAmount(receiveAmount, receiveToken.address, false, infoTokens);\r\n\r\n    // Check swap limits (max in / max out)\r\n    if (isSwapAllowed && shouldSwap(collateralToken, receiveToken)) {\r\n      const collateralInfo = getTokenInfo(infoTokens, collateralToken.address);\r\n      const receiveTokenInfo = getTokenInfo(infoTokens, receiveToken.address);\r\n\r\n      isNotEnoughReceiveTokenLiquidity =\r\n        receiveTokenInfo.availableAmount.lt(convertedReceiveAmount) ||\r\n        receiveTokenInfo.bufferAmount.gt(receiveTokenInfo.poolAmount.sub(convertedReceiveAmount));\r\n\r\n      if (\r\n        collateralInfo.maxUsdgAmount &&\r\n        collateralInfo.maxUsdgAmount.gt(0) &&\r\n        collateralInfo.usdgAmount &&\r\n        collateralInfo.maxPrice\r\n      ) {\r\n        const usdgFromAmount = adjustForDecimals(receiveAmount, USD_DECIMALS, USDG_DECIMALS);\r\n        const nextUsdgAmount = collateralInfo.usdgAmount.add(usdgFromAmount);\r\n\r\n        if (nextUsdgAmount.gt(collateralInfo.maxUsdgAmount)) {\r\n          isCollateralPoolCapacityExceeded = true;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (isClosing) {\r\n      nextCollateral = bigNumberify(0);\r\n    } else {\r\n      if (position.collateral) {\r\n        nextCollateral = position.collateral;\r\n        if (collateralDelta && collateralDelta.gt(0)) {\r\n          nextCollateral = position.collateral.sub(collateralDelta);\r\n        } else if (position.delta && position.delta.gt(0) && sizeDelta) {\r\n          if (!position.hasProfit) {\r\n            nextCollateral = nextCollateral.sub(adjustedDelta);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    if (fromAmount) {\r\n      if (!isClosing && !keepLeverage) {\r\n        nextLeverage = getLeverage({\r\n          size: position.size,\r\n          sizeDelta,\r\n          collateral: position.collateral,\r\n          entryFundingRate: position.entryFundingRate,\r\n          cumulativeFundingRate: position.cumulativeFundingRate,\r\n          hasProfit: nextHasProfit,\r\n          delta: nextDelta,\r\n          includeDelta: savedIsPnlInLeverage,\r\n        });\r\n        nextLiquidationPrice = getLiquidationPrice({\r\n          isLong: position.isLong,\r\n          size: position.size,\r\n          sizeDelta,\r\n          collateral: position.collateral,\r\n          averagePrice: position.averagePrice,\r\n          entryFundingRate: position.entryFundingRate,\r\n          cumulativeFundingRate: position.cumulativeFundingRate,\r\n          delta: nextDelta,\r\n          hasProfit: nextHasProfit,\r\n          includeDelta: true,\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  const [deltaStr, deltaPercentageStr] = useMemo(() => {\r\n    if (!position || !position.markPrice) {\r\n      return [\"-\", \"-\"];\r\n    }\r\n    if (orderOption !== STOP) {\r\n      const { pendingDelta, pendingDeltaPercentage, hasProfit } = calculatePositionDelta(\r\n        position.markPrice,\r\n        position,\r\n        fromAmount\r\n      );\r\n      const { deltaStr, deltaPercentageStr } = getDeltaStr({\r\n        delta: pendingDelta,\r\n        deltaPercentage: pendingDeltaPercentage,\r\n        hasProfit,\r\n      });\r\n      return [deltaStr, deltaPercentageStr];\r\n    }\r\n    if (!triggerPriceUsd || triggerPriceUsd.eq(0)) {\r\n      return [\"-\", \"-\"];\r\n    }\r\n\r\n    const { pendingDelta, pendingDeltaPercentage, hasProfit } = calculatePositionDelta(\r\n      triggerPriceUsd,\r\n      position,\r\n      fromAmount\r\n    );\r\n\r\n    const { deltaStr, deltaPercentageStr } = getDeltaStr({\r\n      delta: pendingDelta,\r\n      deltaPercentage: pendingDeltaPercentage,\r\n      hasProfit,\r\n    });\r\n    return [deltaStr, deltaPercentageStr];\r\n  }, [position, triggerPriceUsd, orderOption, fromAmount]);\r\n\r\n  const getError = () => {\r\n    if (IS_NETWORK_DISABLED[chainId]) {\r\n      if (orderOption === STOP) return [t`Trigger order disabled, pending ${getChainName(chainId)} upgrade`];\r\n      return [t`Position close disabled, pending ${getChainName(chainId)} upgrade`];\r\n    }\r\n    if (hasOutdatedUi) {\r\n      return t`Page outdated, please refresh`;\r\n    }\r\n    if (!fromAmount) {\r\n      return t`Enter an amount`;\r\n    }\r\n    if (nextLeverage && nextLeverage.eq(0)) {\r\n      return t`Enter an amount`;\r\n    }\r\n    if (orderOption === STOP) {\r\n      if (!triggerPriceUsd || triggerPriceUsd.eq(0)) {\r\n        return t`Enter Price`;\r\n      }\r\n      if (position.isLong && triggerPriceUsd.lte(liquidationPrice)) {\r\n        return t`Price below Liq. Price`;\r\n      }\r\n      if (!position.isLong && triggerPriceUsd.gte(liquidationPrice)) {\r\n        return t`Price above Liq. Price`;\r\n      }\r\n\r\n      if (profitPrice && nextDelta.eq(0) && nextHasProfit) {\r\n        return t`Invalid price, see warning`;\r\n      }\r\n    }\r\n\r\n    if (isNotEnoughReceiveTokenLiquidity) {\r\n      return \"Insufficient receive token liquidity\";\r\n    }\r\n\r\n    if (isCollateralPoolCapacityExceeded) {\r\n      return `${collateralToken.symbol} pool exceeded, can only Receive ${collateralToken.symbol}`;\r\n    }\r\n\r\n    if (!isClosing && position && position.size && fromAmount) {\r\n      if (position.size.sub(fromAmount).lt(expandDecimals(10, USD_DECIMALS))) {\r\n        return t`Leftover position below 10 USD`;\r\n      }\r\n      if (nextCollateral && nextCollateral.lt(expandDecimals(5, USD_DECIMALS))) {\r\n        return t`Leftover collateral below 5 USD`;\r\n      }\r\n    }\r\n\r\n    if (position && position.size && position.size.lt(fromAmount)) {\r\n      return t`Max close amount exceeded`;\r\n    }\r\n\r\n    if (nextLeverage && nextLeverage.lt(1.1 * BASIS_POINTS_DIVISOR)) {\r\n      return t`Min leverage: 1.1x`;\r\n    }\r\n\r\n    if (nextLeverage && nextLeverage.gt(30.5 * BASIS_POINTS_DIVISOR)) {\r\n      return t`Max leverage: 30.5xt`;\r\n    }\r\n\r\n    if (hasPendingProfit && orderOption !== STOP && !isProfitWarningAccepted) {\r\n      return t`Forfeit profit not checked`;\r\n    }\r\n  };\r\n\r\n  const isPrimaryEnabled = () => {\r\n    const error = getError();\r\n    if (error) {\r\n      return false;\r\n    }\r\n    if (isSubmitting) {\r\n      return false;\r\n    }\r\n    if (needOrderBookApproval && isWaitingForPluginApproval) {\r\n      return false;\r\n    }\r\n    if (isPluginApproving) {\r\n      return false;\r\n    }\r\n    if (needPositionRouterApproval && isWaitingForPositionRouterApproval) {\r\n      return false;\r\n    }\r\n    if (isPositionRouterApproving) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  const hasPendingProfit = MIN_PROFIT_TIME > 0 && position.delta.eq(0) && position.pendingDelta.gt(0);\r\n\r\n  const getPrimaryText = () => {\r\n    const error = getError();\r\n    if (error) {\r\n      return error;\r\n    }\r\n\r\n    if (orderOption === STOP) {\r\n      if (isSubmitting) return t`Creating Order...`;\r\n\r\n      if (needOrderBookApproval && isWaitingForPluginApproval) {\r\n        return t`Enabling Orders...`;\r\n      }\r\n      if (isPluginApproving) {\r\n        return t`Enabling Orders...`;\r\n      }\r\n      if (needOrderBookApproval) {\r\n        return t`Enable Orders`;\r\n      }\r\n\r\n      return t`Create Order`;\r\n    }\r\n\r\n    if (needPositionRouterApproval && isWaitingForPositionRouterApproval) {\r\n      return t`Enabling Leverage...`;\r\n    }\r\n\r\n    if (isPositionRouterApproving) {\r\n      return t`Enabling Leverage...`;\r\n    }\r\n\r\n    if (needPositionRouterApproval) {\r\n      return t`Enable Leverage`;\r\n    }\r\n\r\n    if (hasPendingProfit) {\r\n      return t`Close without profit`;\r\n    }\r\n    return isSubmitting ? t`Closing...` : t`Close`;\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setFromValue(\"\");\r\n    setIsProfitWarningAccepted(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (prevIsVisible !== isVisible) {\r\n      resetForm();\r\n    }\r\n  }, [prevIsVisible, isVisible]);\r\n\r\n  const onClickPrimary = async () => {\r\n    if (needOrderBookApproval) {\r\n      setOrdersToaOpen(true);\r\n      return;\r\n    }\r\n\r\n    if (needPositionRouterApproval) {\r\n      approvePositionRouter({\r\n        sentMsg: t`Enable leverage sent.`,\r\n        failMsg: t`Enable leverage failed.`,\r\n      });\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n\r\n    const collateralTokenAddress = position.collateralToken.isNative\r\n      ? nativeTokenAddress\r\n      : position.collateralToken.address;\r\n    const indexTokenAddress = position.indexToken.isNative ? nativeTokenAddress : position.indexToken.address;\r\n\r\n    if (orderOption === STOP) {\r\n      const triggerAboveThreshold = triggerPriceUsd.gt(position.markPrice);\r\n\r\n      createDecreaseOrder(\r\n        chainId,\r\n        library,\r\n        indexTokenAddress,\r\n        sizeDelta,\r\n        collateralTokenAddress,\r\n        collateralDelta,\r\n        position.isLong,\r\n        triggerPriceUsd,\r\n        triggerAboveThreshold,\r\n        {\r\n          sentMsg: t`Order submitted!`,\r\n          successMsg: t`Order created!`,\r\n          failMsg: t`Order creation failed.`,\r\n          setPendingTxns,\r\n        }\r\n      )\r\n        .then(() => {\r\n          setFromValue(\"\");\r\n          setIsVisible(false);\r\n        })\r\n        .finally(() => {\r\n          setIsSubmitting(false);\r\n        });\r\n      return;\r\n    }\r\n\r\n    const priceBasisPoints = position.isLong\r\n      ? BASIS_POINTS_DIVISOR - allowedSlippage\r\n      : BASIS_POINTS_DIVISOR + allowedSlippage;\r\n    const refPrice = position.isLong ? position.indexToken.minPrice : position.indexToken.maxPrice;\r\n    let priceLimit = refPrice.mul(priceBasisPoints).div(BASIS_POINTS_DIVISOR);\r\n    const minProfitExpiration = position.lastIncreasedTime + MIN_PROFIT_TIME;\r\n    const minProfitTimeExpired = parseInt(Date.now() / 1000) > minProfitExpiration;\r\n\r\n    if (nextHasProfit && !minProfitTimeExpired && !isProfitWarningAccepted) {\r\n      if ((position.isLong && priceLimit.lt(profitPrice)) || (!position.isLong && priceLimit.gt(profitPrice))) {\r\n        priceLimit = profitPrice;\r\n      }\r\n    }\r\n\r\n    const tokenAddress0 = collateralTokenAddress === AddressZero ? nativeTokenAddress : collateralTokenAddress;\r\n\r\n    const path = [tokenAddress0];\r\n\r\n    const isUnwrap = receiveToken.address === AddressZero;\r\n    const isSwap = receiveToken.address !== tokenAddress0;\r\n\r\n    if (isSwap) {\r\n      if (isUnwrap && tokenAddress0 !== nativeTokenAddress) {\r\n        path.push(nativeTokenAddress);\r\n      } else if (!isUnwrap) {\r\n        path.push(receiveToken.address);\r\n      }\r\n    }\r\n\r\n    const withdrawETH = isUnwrap;\r\n\r\n    const params = [\r\n      path, // _path\r\n      indexTokenAddress, // _indexToken\r\n      collateralDelta, // _collateralDelta\r\n      sizeDelta, // _sizeDelta\r\n      position.isLong, // _isLong\r\n      account, // _receiver\r\n      priceLimit, // _acceptablePrice\r\n      0, // _minOut\r\n      minExecutionFee, // _executionFee\r\n      withdrawETH, // _withdrawETH\r\n    ];\r\n\r\n    const successMsg = t`Requested decrease of ${position.indexToken.symbol} ${\r\n      position.isLong ? \"Long\" : \"Short\"\r\n    } by ${formatAmount(sizeDelta, USD_DECIMALS, 2)} USD.`;\r\n\r\n    const contract = new ethers.Contract(positionRouterAddress, PositionRouter.abi, library.getSigner());\r\n\r\n    callContract(chainId, contract, \"createDecreasePosition\", params, {\r\n      value: minExecutionFee,\r\n      sentMsg: t`Close submitted!`,\r\n      successMsg,\r\n      failMsg: t`Close failed.`,\r\n      setPendingTxns,\r\n      // for Arbitrum, sometimes the successMsg shows after the position has already been executed\r\n      // hide the success message for Arbitrum as a workaround\r\n      hideSuccessMsg: chainId === ARBITRUM,\r\n    })\r\n      .then(async (res) => {\r\n        setFromValue(\"\");\r\n        setIsVisible(false);\r\n\r\n        let nextSize = position.size.sub(sizeDelta);\r\n\r\n        pendingPositions[position.key] = {\r\n          updatedAt: Date.now(),\r\n          pendingChanges: {\r\n            size: nextSize,\r\n          },\r\n        };\r\n\r\n        setPendingPositions({ ...pendingPositions });\r\n      })\r\n      .finally(() => {\r\n        setIsSubmitting(false);\r\n      });\r\n  };\r\n\r\n  const renderExistingOrderWarning = useCallback(() => {\r\n    if (!existingOrder) {\r\n      return;\r\n    }\r\n    const indexToken = getTokenInfo(infoTokens, existingOrder.indexToken);\r\n    const sizeInToken = formatAmount(\r\n      existingOrder.sizeDelta.mul(PRECISION).div(existingOrder.triggerPrice),\r\n      USD_DECIMALS,\r\n      4,\r\n      true\r\n    );\r\n    const prefix = existingOrder.triggerAboveThreshold ? TRIGGER_PREFIX_ABOVE : TRIGGER_PREFIX_BELOW;\r\n    return (\r\n      <div className=\"Confirmation-box-warning\">\r\n        You have an active order to decrease {existingOrder.isLong ? \"Long\" : \"Short\"} {sizeInToken} {indexToken.symbol}{\" \"}\r\n        ($\r\n        {formatAmount(existingOrder.sizeDelta, USD_DECIMALS, 2, true)}) at {prefix}{\" \"}\r\n        {formatAmount(existingOrder.triggerPrice, USD_DECIMALS, 2, true)}\r\n      </div>\r\n    );\r\n  }, [existingOrder, infoTokens]);\r\n\r\n  function renderMinProfitWarning() {\r\n    if (MIN_PROFIT_TIME === 0) {\r\n      return null;\r\n    }\r\n\r\n    if (profitPrice && nextDelta.eq(0) && nextHasProfit) {\r\n      const minProfitExpiration = position.lastIncreasedTime + MIN_PROFIT_TIME;\r\n\r\n      if (orderOption === MARKET) {\r\n        return (\r\n          <div className=\"Confirmation-box-warning\">\r\n            Reducing the position at the current price will forfeit a&nbsp;\r\n            <a\r\n              href=\"https://gmxio.gitbook.io/gmx/trading#minimum-price-change\"\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n            >\r\n              pending profit\r\n            </a>{\" \"}\r\n            of {deltaStr}. <br />\r\n            <br />\r\n            Profit price: {position.isLong ? \">\" : \"<\"} ${formatAmount(profitPrice, USD_DECIMALS, 2, true)}. This rule\r\n            applies for the next {getTimeRemaining(minProfitExpiration)}, until {formatDateTime(minProfitExpiration)}.\r\n          </div>\r\n        );\r\n      }\r\n      return (\r\n        <div className=\"Confirmation-box-warning\">\r\n          This order will forfeit a&nbsp;\r\n          <a href=\"https://gmxio.gitbook.io/gmx/trading#minimum-price-change\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n            profit\r\n          </a>{\" \"}\r\n          of {deltaStr}. <br />\r\n          Profit price: {position.isLong ? \">\" : \"<\"} ${formatAmount(profitPrice, USD_DECIMALS, 2, true)}. This rule\r\n          applies for the next {getTimeRemaining(minProfitExpiration)}, until {formatDateTime(minProfitExpiration)}.\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  const profitPrice = getProfitPrice(orderOption === MARKET ? position.markPrice : triggerPriceUsd, position);\r\n\r\n  let triggerPricePrefix;\r\n  if (triggerPriceUsd) {\r\n    triggerPricePrefix = triggerPriceUsd.gt(position.markPrice) ? TRIGGER_PREFIX_ABOVE : TRIGGER_PREFIX_BELOW;\r\n  }\r\n\r\n  const shouldShowExistingOrderWarning = false;\r\n\r\n  return (\r\n    <div className=\"PositionEditor\">\r\n      {position && (\r\n        <Modal className=\"PositionSeller-modal\" isVisible={isVisible} setIsVisible={setIsVisible} label={title}>\r\n          {flagOrdersEnabled && (\r\n            <Tab\r\n              options={orderOptions}\r\n              option={orderOption}\r\n              optionLabels={orderOptionLabels}\r\n              onChange={onOrderOptionChange}\r\n            />\r\n          )}\r\n          <div className=\"Exchange-swap-section\">\r\n            <div className=\"Exchange-swap-section-top\">\r\n              <div className=\"muted\">\r\n                {convertedAmountFormatted && (\r\n                  <div className=\"Exchange-swap-usd\">\r\n                    Close: {convertedAmountFormatted} {position.collateralToken.symbol}\r\n                  </div>\r\n                )}\r\n                {!convertedAmountFormatted && \"Close\"}\r\n              </div>\r\n              {maxAmount && (\r\n                <div className=\"muted align-right clickable\" onClick={() => setFromValue(maxAmountFormattedFree)}>\r\n                  Max: {maxAmountFormatted}\r\n                </div>\r\n              )}\r\n            </div>\r\n            <div className=\"Exchange-swap-section-bottom\">\r\n              <div className=\"Exchange-swap-input-container\">\r\n                <input\r\n                  type=\"number\"\r\n                  min=\"0\"\r\n                  placeholder=\"0.0\"\r\n                  className=\"Exchange-swap-input\"\r\n                  value={fromValue}\r\n                  onChange={(e) => setFromValue(e.target.value)}\r\n                />\r\n                {fromValue !== maxAmountFormattedFree && (\r\n                  <div\r\n                    className=\"Exchange-swap-max\"\r\n                    onClick={() => {\r\n                      setFromValue(maxAmountFormattedFree);\r\n                    }}\r\n                  >\r\n                    MAX\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div className=\"PositionEditor-token-symbol\">USD</div>\r\n            </div>\r\n          </div>\r\n          {orderOption === STOP && (\r\n            <div className=\"Exchange-swap-section\">\r\n              <div className=\"Exchange-swap-section-top\">\r\n                <div className=\"muted\">\r\n                  <Trans>Price</Trans>\r\n                </div>\r\n                <div\r\n                  className=\"muted align-right clickable\"\r\n                  onClick={() => {\r\n                    setTriggerPriceValue(formatAmountFree(position.markPrice, USD_DECIMALS, 2));\r\n                  }}\r\n                >\r\n                  Mark: {formatAmount(position.markPrice, USD_DECIMALS, 2, true)}\r\n                </div>\r\n              </div>\r\n              <div className=\"Exchange-swap-section-bottom\">\r\n                <div className=\"Exchange-swap-input-container\">\r\n                  <input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    placeholder=\"0.0\"\r\n                    className=\"Exchange-swap-input\"\r\n                    value={triggerPriceValue}\r\n                    onChange={onTriggerPriceChange}\r\n                  />\r\n                </div>\r\n                <div className=\"PositionEditor-token-symbol\">USD</div>\r\n              </div>\r\n            </div>\r\n          )}\r\n          {renderMinProfitWarning()}\r\n          {shouldShowExistingOrderWarning && renderExistingOrderWarning()}\r\n          <div className=\"PositionEditor-info-box\">\r\n            {minExecutionFeeErrorMessage && (\r\n              <div className=\"Confirmation-box-warning\">{minExecutionFeeErrorMessage}</div>\r\n            )}\r\n            {hasPendingProfit && orderOption !== STOP && (\r\n              <div className=\"PositionEditor-accept-profit-warning\">\r\n                <Checkbox isChecked={isProfitWarningAccepted} setIsChecked={setIsProfitWarningAccepted}>\r\n                  <span className=\"muted\">Forfeit profit</span>\r\n                </Checkbox>\r\n              </div>\r\n            )}\r\n            <div className=\"PositionEditor-keep-leverage-settings\">\r\n              <Checkbox isChecked={keepLeverage} setIsChecked={setKeepLeverage}>\r\n                <span className=\"muted font-sm\">Keep leverage at {formatAmount(position.leverage, 4, 2)}x</span>\r\n              </Checkbox>\r\n            </div>\r\n            {orderOption === MARKET && (\r\n              <div className=\"PositionEditor-allow-higher-slippage\">\r\n                <Checkbox isChecked={isHigherSlippageAllowed} setIsChecked={setIsHigherSlippageAllowed}>\r\n                  <span className=\"muted font-sm\">Allow up to 1% slippage</span>\r\n                </Checkbox>\r\n              </div>\r\n            )}\r\n            {orderOption === MARKET && (\r\n              <div>\r\n                <ExchangeInfoRow label=\"Allowed Slippage\">\r\n                  <Tooltip\r\n                    handle={`${formatAmount(allowedSlippage, 2, 2)}%`}\r\n                    position=\"right-bottom\"\r\n                    renderContent={() => {\r\n                      return (\r\n                        <>\r\n                          You can change this in the settings menu on the top right of the page.\r\n                          <br />\r\n                          <br />\r\n                          Note that a low allowed slippage, e.g. less than 0.5%, may result in failed orders if prices\r\n                          are volatile.\r\n                        </>\r\n                      );\r\n                    }}\r\n                  />\r\n                </ExchangeInfoRow>\r\n              </div>\r\n            )}\r\n            {orderOption === STOP && (\r\n              <div className=\"Exchange-info-row\">\r\n                <div className=\"Exchange-info-label\">\r\n                  <Trans>Trigger Price</Trans>\r\n                </div>\r\n                <div className=\"align-right\">\r\n                  {!triggerPriceUsd && \"-\"}\r\n                  {triggerPriceUsd && `${triggerPricePrefix} ${formatAmount(triggerPriceUsd, USD_DECIMALS, 2, true)}`}\r\n                </div>\r\n              </div>\r\n            )}\r\n            <div className=\"Exchange-info-row top-line\">\r\n              <div className=\"Exchange-info-label\">\r\n                <Trans>Mark Price</Trans>\r\n              </div>\r\n              <div className=\"align-right\">${formatAmount(position.markPrice, USD_DECIMALS, 2, true)}</div>\r\n            </div>\r\n            <div className=\"Exchange-info-row\">\r\n              <div className=\"Exchange-info-label\">\r\n                <Trans>Entry Price</Trans>\r\n              </div>\r\n              <div className=\"align-right\">${formatAmount(position.averagePrice, USD_DECIMALS, 2, true)}</div>\r\n            </div>\r\n            <div className=\"Exchange-info-row\">\r\n              <div className=\"Exchange-info-label\">\r\n                <Trans>Liq. Price</Trans>\r\n              </div>\r\n              <div className=\"align-right\">\r\n                {isClosing && orderOption !== STOP && \"-\"}\r\n                {(!isClosing || orderOption === STOP) && (\r\n                  <div>\r\n                    {(!nextLiquidationPrice || nextLiquidationPrice.eq(liquidationPrice)) && (\r\n                      <div>{`$${formatAmount(liquidationPrice, USD_DECIMALS, 2, true)}`}</div>\r\n                    )}\r\n                    {nextLiquidationPrice && !nextLiquidationPrice.eq(liquidationPrice) && (\r\n                      <div>\r\n                        <div className=\"inline-block muted\">\r\n                          ${formatAmount(liquidationPrice, USD_DECIMALS, 2, true)}\r\n                          <BsArrowRight className=\"transition-arrow\" />\r\n                        </div>\r\n                        ${formatAmount(nextLiquidationPrice, USD_DECIMALS, 2, true)}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n            <div className=\"Exchange-info-row top-line\">\r\n              <div className=\"Exchange-info-label\">\r\n                <Trans>Size</Trans>\r\n              </div>\r\n              <div className=\"align-right\">\r\n                {position && position.size && fromAmount && (\r\n                  <div>\r\n                    <div className=\"inline-block muted\">\r\n                      ${formatAmount(position.size, USD_DECIMALS, 2, true)}\r\n                      <BsArrowRight className=\"transition-arrow\" />\r\n                    </div>\r\n                    ${formatAmount(position.size.sub(fromAmount), USD_DECIMALS, 2, true)}\r\n                  </div>\r\n                )}\r\n                {position && position.size && !fromAmount && (\r\n                  <div>${formatAmount(position.size, USD_DECIMALS, 2, true)}</div>\r\n                )}\r\n              </div>\r\n            </div>\r\n            <div className=\"Exchange-info-row\">\r\n              <div className=\"Exchange-info-label\">\r\n                <Trans>Collateral ({collateralToken.symbol})</Trans>\r\n              </div>\r\n              <div className=\"align-right\">\r\n                {nextCollateral && !nextCollateral.eq(position.collateral) ? (\r\n                  <div>\r\n                    <div className=\"inline-block muted\">\r\n                      ${formatAmount(position.collateral, USD_DECIMALS, 2, true)}\r\n                      <BsArrowRight className=\"transition-arrow\" />\r\n                    </div>\r\n                    ${formatAmount(nextCollateral, USD_DECIMALS, 2, true)}\r\n                  </div>\r\n                ) : (\r\n                  `$${formatAmount(position.collateral, USD_DECIMALS, 4, true)}`\r\n                )}\r\n              </div>\r\n            </div>\r\n            {!keepLeverage && (\r\n              <div className=\"Exchange-info-row\">\r\n                <div className=\"Exchange-info-label\">\r\n                  <Trans>Leverage</Trans>\r\n                </div>\r\n                <div className=\"align-right\">\r\n                  {isClosing && \"-\"}\r\n                  {!isClosing && (\r\n                    <div>\r\n                      {!nextLeverage && <div>{formatAmount(position.leverage, 4, 2)}x</div>}\r\n                      {nextLeverage && (\r\n                        <div>\r\n                          <div className=\"inline-block muted\">\r\n                            {formatAmount(position.leverage, 4, 2)}x\r\n                            <BsArrowRight className=\"transition-arrow\" />\r\n                          </div>\r\n                          {formatAmount(nextLeverage, 4, 2)}x\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            )}\r\n            <div className=\"Exchange-info-row\">\r\n              <div className=\"Exchange-info-label\">\r\n                <Trans>PnL</Trans>\r\n              </div>\r\n              <div className=\"align-right\">\r\n                {deltaStr} ({deltaPercentageStr})\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"Exchange-info-row\">\r\n              <div className=\"Exchange-info-label\">\r\n                <Trans>Fees</Trans>\r\n              </div>\r\n              <div className=\"align-right\">\r\n                <Tooltip\r\n                  position=\"right-top\"\r\n                  className=\"PositionSeller-fees-tooltip\"\r\n                  handle={\r\n                    <div>\r\n                      {totalFees ? `$${formatAmount(totalFees.add(executionFeeUsd), USD_DECIMALS, 2, true)}` : \"-\"}\r\n                    </div>\r\n                  }\r\n                  renderContent={() => (\r\n                    <div>\r\n                      {fundingFee && (\r\n                        <div className=\"PositionSeller-fee-item\">\r\n                          Borrow fee: ${formatAmount(fundingFee, USD_DECIMALS, 2, true)}\r\n                        </div>\r\n                      )}\r\n\r\n                      {positionFee && (\r\n                        <div className=\"PositionSeller-fee-item\">\r\n                          Closing fee: ${formatAmount(positionFee, USD_DECIMALS, 2, true)}\r\n                        </div>\r\n                      )}\r\n\r\n                      {swapFee && (\r\n                        <div className=\"PositionSeller-fee-item\">\r\n                          Swap fee: {formatAmount(swapFeeToken, collateralToken.decimals, 5)} {collateralToken.symbol}\r\n                          (${formatAmount(swapFee, USD_DECIMALS, 2, true)})\r\n                        </div>\r\n                      )}\r\n\r\n                      <div className=\"PositionSeller-fee-item\">\r\n                        Execution fee: {formatAmount(executionFee, 18, 5, true)} {nativeTokenSymbol} ($\r\n                        {formatAmount(executionFeeUsd, USD_DECIMALS, 2)})\r\n                      </div>\r\n\r\n                      <br />\r\n\r\n                      <div className=\"PositionSeller-fee-item\">\r\n                        <a href=\"https://gmxio.gitbook.io/gmx/trading#fees\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n                          More Info\r\n                        </a>{\" \"}\r\n                        about fees.\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"Exchange-info-row PositionSeller-receive-row top-line\">\r\n              <div className=\"Exchange-info-label\">\r\n                <Trans>Receive</Trans>\r\n              </div>\r\n\r\n              {!isSwapAllowed && receiveToken && (\r\n                <div className=\"align-right PositionSelector-selected-receive-token\">\r\n                  {formatAmount(convertedReceiveAmount, receiveToken.decimals, 4, true)}&nbsp;{receiveToken.symbol} ($\r\n                  {formatAmount(receiveAmount, USD_DECIMALS, 2, true)})\r\n                </div>\r\n              )}\r\n\r\n              {isSwapAllowed && receiveToken && (\r\n                <div className=\"align-right\">\r\n                  <TokenSelector\r\n                    // Scroll lock lead to side effects\r\n                    // if it applied on modal inside another modal\r\n                    disableBodyScrollLock={true}\r\n                    className={cx(\"PositionSeller-token-selector\", {\r\n                      warning: isNotEnoughReceiveTokenLiquidity || isCollateralPoolCapacityExceeded,\r\n                    })}\r\n                    label={\"Receive\"}\r\n                    showBalances={false}\r\n                    chainId={chainId}\r\n                    tokenAddress={receiveToken.address}\r\n                    onSelectToken={(token) => {\r\n                      setSwapToToken(token);\r\n                      setSavedRecieveTokenAddress(token.address);\r\n                    }}\r\n                    tokens={toTokens}\r\n                    getTokenState={(tokenOptionInfo) => {\r\n                      if (!shouldSwap(collateralToken, tokenOptionInfo)) {\r\n                        return;\r\n                      }\r\n\r\n                      const convertedTokenAmount = getTokenAmount(\r\n                        receiveAmount,\r\n                        tokenOptionInfo.address,\r\n                        false,\r\n                        infoTokens\r\n                      );\r\n\r\n                      const isNotEnoughLiquidity =\r\n                        tokenOptionInfo.availableAmount.lt(convertedTokenAmount) ||\r\n                        tokenOptionInfo.bufferAmount.gt(tokenOptionInfo.poolAmount.sub(convertedTokenAmount));\r\n\r\n                      if (isNotEnoughLiquidity) {\r\n                        const { maxIn, maxOut, maxInUsd, maxOutUsd } = getSwapLimits(\r\n                          infoTokens,\r\n                          collateralToken.address,\r\n                          tokenOptionInfo.address\r\n                        );\r\n\r\n                        const collateralInfo = getTokenInfo(infoTokens, collateralToken.address);\r\n\r\n                        return {\r\n                          disabled: true,\r\n                          message: (\r\n                            <div>\r\n                              Insufficient Available Liquidity to swap to {tokenOptionInfo.symbol}\r\n                              <br />\r\n                              <br />\r\n                              Max {collateralInfo.symbol} in: {formatAmount(maxIn, collateralInfo.decimals, 2, true)}{\" \"}\r\n                              {collateralInfo.symbol}\r\n                              <br />\r\n                              (${formatAmount(maxInUsd, USD_DECIMALS, 2, true)})\r\n                              <br />\r\n                              <br />\r\n                              Max {tokenOptionInfo.symbol} out:{\" \"}\r\n                              {formatAmount(maxOut, tokenOptionInfo.decimals, 2, true)} {tokenOptionInfo.symbol}\r\n                              <br />\r\n                              (${formatAmount(maxOutUsd, USD_DECIMALS, 2, true)})\r\n                            </div>\r\n                          ),\r\n                        };\r\n                      }\r\n                    }}\r\n                    infoTokens={infoTokens}\r\n                    showTokenImgInDropdown={true}\r\n                    selectedTokenLabel={\r\n                      <span className=\"PositionSelector-selected-receive-token\">\r\n                        {formatAmount(convertedReceiveAmount, receiveToken.decimals, 4, true)}&nbsp;\r\n                        {receiveToken.symbol} (${formatAmount(receiveAmount, USD_DECIMALS, 2, true)})\r\n                      </span>\r\n                    }\r\n                  />\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n          <div className=\"Exchange-swap-button-container\">\r\n            <button className=\"App-cta Exchange-swap-button\" onClick={onClickPrimary} disabled={!isPrimaryEnabled()}>\r\n              {getPrimaryText()}\r\n            </button>\r\n          </div>\r\n        </Modal>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport useSWR from \"swr\";\r\nimport { Trans, t } from \"@lingui/macro\";\r\nimport { ethers } from \"ethers\";\r\nimport { BsArrowRight } from \"react-icons/bs\";\r\n\r\nimport {\r\n  USD_DECIMALS,\r\n  BASIS_POINTS_DIVISOR,\r\n  DEPOSIT_FEE,\r\n  DUST_BNB,\r\n  helperToast,\r\n  formatAmount,\r\n  bigNumberify,\r\n  usePrevious,\r\n  formatAmountFree,\r\n  fetcher,\r\n  parseValue,\r\n  expandDecimals,\r\n  shouldRaiseGasError,\r\n  getTokenInfo,\r\n  getLiquidationPrice,\r\n  approveTokens,\r\n  IS_NETWORK_DISABLED,\r\n  getChainName,\r\n} from \"../../lib/legacy\";\r\nimport { getContract } from \"../../config/Addresses\";\r\nimport Tab from \"../Tab/Tab\";\r\nimport Modal from \"../Modal/Modal\";\r\nimport { callContract } from \"../../domain/legacy\";\r\n\r\nimport PositionRouter from \"../../abis/PositionRouter.json\";\r\nimport Token from \"../../abis/Token.json\";\r\nimport Tooltip from \"../Tooltip/Tooltip\";\r\nimport { getConstant } from \"../../config/chains\";\r\n\r\nconst DEPOSIT = t`Deposit`;\r\nconst WITHDRAW = t`Withdraw`;\r\nconst EDIT_OPTIONS = [DEPOSIT, WITHDRAW];\r\nconst { AddressZero } = ethers.constants;\r\n\r\nexport default function PositionEditor(props) {\r\n  const {\r\n    pendingPositions,\r\n    setPendingPositions,\r\n    positionsMap,\r\n    positionKey,\r\n    isVisible,\r\n    setIsVisible,\r\n    infoTokens,\r\n    active,\r\n    account,\r\n    library,\r\n    collateralTokenAddress,\r\n    pendingTxns,\r\n    setPendingTxns,\r\n    getUsd,\r\n    getLeverage,\r\n    savedIsPnlInLeverage,\r\n    positionRouterApproved,\r\n    isWaitingForPositionRouterApproval,\r\n    isPositionRouterApproving,\r\n    approvePositionRouter,\r\n    chainId,\r\n    minExecutionFee,\r\n    minExecutionFeeUSD,\r\n    minExecutionFeeErrorMessage,\r\n  } = props;\r\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\r\n  const position = positionsMap && positionKey ? positionsMap[positionKey] : undefined;\r\n  const [option, setOption] = useState(DEPOSIT);\r\n  const [fromValue, setFromValue] = useState(\"\");\r\n  const [isApproving, setIsApproving] = useState(false);\r\n  const [isSwapping, setIsSwapping] = useState(false);\r\n  const prevIsVisible = usePrevious(isVisible);\r\n\r\n  const routerAddress = getContract(chainId, \"Router\");\r\n  const positionRouterAddress = getContract(chainId, \"PositionRouter\");\r\n\r\n  const { data: tokenAllowance } = useSWR(\r\n    [active, chainId, collateralTokenAddress, \"allowance\", account, routerAddress],\r\n    {\r\n      fetcher: fetcher(library, Token),\r\n    }\r\n  );\r\n\r\n  // const { data: minExecutionFee } = useSWR([active, chainId, positionRouterAddress, \"minExecutionFee\"], {\r\n  //   fetcher: fetcher(library, PositionRouter),\r\n  // });\r\n\r\n  const isDeposit = option === DEPOSIT;\r\n  const isWithdrawal = option === WITHDRAW;\r\n\r\n  const needPositionRouterApproval = !positionRouterApproved;\r\n\r\n  let collateralToken;\r\n  let maxAmount;\r\n  let maxAmountFormatted;\r\n  let maxAmountFormattedFree;\r\n  let fromAmount;\r\n  let needApproval;\r\n\r\n  let convertedAmount;\r\n  let convertedAmountFormatted;\r\n\r\n  let nextLeverage;\r\n  let nextLeverageExcludingPnl;\r\n  let liquidationPrice;\r\n  let nextLiquidationPrice;\r\n  let nextCollateral;\r\n\r\n  let title;\r\n  let collateralDelta;\r\n  if (position) {\r\n    title = `Edit ${position.isLong ? \"Long\" : \"Short\"} ${position.indexToken.symbol}`;\r\n    collateralToken = position.collateralToken;\r\n    liquidationPrice = getLiquidationPrice(position);\r\n\r\n    if (isDeposit) {\r\n      fromAmount = parseValue(fromValue, collateralToken.decimals);\r\n      maxAmount = collateralToken ? collateralToken.balance : bigNumberify(0);\r\n      maxAmountFormatted = formatAmount(maxAmount, collateralToken.decimals, 4, true);\r\n      maxAmountFormattedFree = formatAmountFree(maxAmount, collateralToken.decimals, 8);\r\n      if (fromAmount) {\r\n        convertedAmount = getUsd(fromAmount, position.collateralToken.address, false, infoTokens);\r\n        convertedAmountFormatted = formatAmount(convertedAmount, USD_DECIMALS, 2);\r\n      }\r\n    } else {\r\n      fromAmount = parseValue(fromValue, USD_DECIMALS);\r\n      maxAmount = position.collateral;\r\n      maxAmountFormatted = formatAmount(maxAmount, USD_DECIMALS, 2, true);\r\n      maxAmountFormattedFree = formatAmountFree(maxAmount, USD_DECIMALS, 2);\r\n      if (fromAmount) {\r\n        convertedAmount = fromAmount.mul(expandDecimals(1, collateralToken.decimals)).div(collateralToken.maxPrice);\r\n        convertedAmountFormatted = formatAmount(convertedAmount, collateralToken.decimals, 4, true);\r\n      }\r\n    }\r\n    needApproval = isDeposit && tokenAllowance && fromAmount && fromAmount.gt(tokenAllowance);\r\n\r\n    if (fromAmount) {\r\n      collateralDelta = isDeposit ? convertedAmount : fromAmount;\r\n      if (position.isLong) {\r\n        collateralDelta = collateralDelta.mul(BASIS_POINTS_DIVISOR - DEPOSIT_FEE).div(BASIS_POINTS_DIVISOR);\r\n      }\r\n      nextLeverage = getLeverage({\r\n        size: position.size,\r\n        collateral: position.collateral,\r\n        collateralDelta,\r\n        increaseCollateral: isDeposit,\r\n        entryFundingRate: position.entryFundingRate,\r\n        cumulativeFundingRate: position.cumulativeFundingRate,\r\n        hasProfit: position.hasProfit,\r\n        delta: position.delta,\r\n        includeDelta: savedIsPnlInLeverage,\r\n      });\r\n      nextLeverageExcludingPnl = getLeverage({\r\n        size: position.size,\r\n        collateral: position.collateral,\r\n        collateralDelta,\r\n        increaseCollateral: isDeposit,\r\n        entryFundingRate: position.entryFundingRate,\r\n        cumulativeFundingRate: position.cumulativeFundingRate,\r\n        hasProfit: position.hasProfit,\r\n        delta: position.delta,\r\n        includeDelta: false,\r\n      });\r\n\r\n      nextLiquidationPrice = getLiquidationPrice({\r\n        isLong: position.isLong,\r\n        size: position.size,\r\n        collateral: position.collateral,\r\n        averagePrice: position.averagePrice,\r\n        entryFundingRate: position.entryFundingRate,\r\n        cumulativeFundingRate: position.cumulativeFundingRate,\r\n        collateralDelta,\r\n        increaseCollateral: isDeposit,\r\n      });\r\n\r\n      nextCollateral = isDeposit ? position.collateral.add(collateralDelta) : position.collateral.sub(collateralDelta);\r\n    }\r\n  }\r\n\r\n  const getError = () => {\r\n    if (IS_NETWORK_DISABLED[chainId]) {\r\n      if (isDeposit) return [t`Deposit disabled, pending ${getChainName(chainId)} upgrade`];\r\n      return [t`Withdraw disabled, pending ${getChainName(chainId)} upgrade`];\r\n    }\r\n    if (!fromAmount) {\r\n      return t`Enter an amount`;\r\n    }\r\n    if (nextLeverage && nextLeverage.eq(0)) {\r\n      return t`Enter an amount`;\r\n    }\r\n\r\n    if (!isDeposit && fromAmount) {\r\n      if (fromAmount.gte(position.collateral)) {\r\n        return t`Min order: 10 USD`;\r\n      }\r\n      if (position.collateral.sub(fromAmount).lt(expandDecimals(10, USD_DECIMALS))) {\r\n        return t`Min order: 10 USD`;\r\n      }\r\n    }\r\n\r\n    if (!isDeposit && fromAmount && nextLiquidationPrice) {\r\n      if (position.isLong && position.markPrice.lt(nextLiquidationPrice)) {\r\n        return t`Invalid liq. price`;\r\n      }\r\n      if (!position.isLong && position.markPrice.gt(nextLiquidationPrice)) {\r\n        return t`Invalid liq. price`;\r\n      }\r\n    }\r\n\r\n    if (nextLeverageExcludingPnl && nextLeverageExcludingPnl.lt(1.1 * BASIS_POINTS_DIVISOR)) {\r\n      return t`Min leverage: 1.1x`;\r\n    }\r\n\r\n    if (nextLeverageExcludingPnl && nextLeverageExcludingPnl.gt(30.5 * BASIS_POINTS_DIVISOR)) {\r\n      return t`Max leverage: 30x`;\r\n    }\r\n  };\r\n\r\n  const isPrimaryEnabled = () => {\r\n    const error = getError();\r\n    if (error) {\r\n      return false;\r\n    }\r\n    if (isSwapping) {\r\n      return false;\r\n    }\r\n    if (needPositionRouterApproval && isWaitingForPositionRouterApproval) {\r\n      return false;\r\n    }\r\n    if (isPositionRouterApproving) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  const getPrimaryText = () => {\r\n    const error = getError();\r\n    if (error) {\r\n      return error;\r\n    }\r\n    if (isSwapping) {\r\n      if (isDeposit) {\r\n        return t`Depositing...`;\r\n      }\r\n      return t`Withdrawing...`;\r\n    }\r\n\r\n    if (isApproving) {\r\n      return t`Approving ${position.collateralToken.symbol}...`;\r\n    }\r\n    if (needApproval) {\r\n      return t`Approve ${position.collateralToken.symbol}`;\r\n    }\r\n\r\n    if (needPositionRouterApproval && isWaitingForPositionRouterApproval) {\r\n      return t`Enabling Leverage`;\r\n    }\r\n\r\n    if (isPositionRouterApproving) {\r\n      return t`Enabling Leverage...`;\r\n    }\r\n\r\n    if (needPositionRouterApproval) {\r\n      return t`Enable Leverage`;\r\n    }\r\n\r\n    if (isDeposit) {\r\n      return t`Deposit`;\r\n    }\r\n\r\n    return t`Withdraw`;\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setFromValue(\"\");\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (prevIsVisible !== isVisible) {\r\n      resetForm();\r\n    }\r\n  }, [prevIsVisible, isVisible]);\r\n\r\n  const depositCollateral = async () => {\r\n    setIsSwapping(true);\r\n    const tokenAddress0 = collateralTokenAddress === AddressZero ? nativeTokenAddress : collateralTokenAddress;\r\n    const path = [tokenAddress0];\r\n    const indexTokenAddress =\r\n      position.indexToken.address === AddressZero ? nativeTokenAddress : position.indexToken.address;\r\n\r\n    const priceBasisPoints = position.isLong ? 11000 : 9000;\r\n    const priceLimit = position.indexToken.maxPrice.mul(priceBasisPoints).div(10000);\r\n\r\n    const referralCode = ethers.constants.HashZero;\r\n    let params = [\r\n      path, // _path\r\n      indexTokenAddress, // _indexToken\r\n      fromAmount, // _amountIn\r\n      0, // _minOut\r\n      0, // _sizeDelta\r\n      position.isLong, // _isLong\r\n      priceLimit, // _acceptablePrice\r\n      minExecutionFee, // _executionFee\r\n      referralCode, // _referralCode\r\n    ];\r\n\r\n    let method = \"createIncreasePosition\";\r\n    let value = minExecutionFee;\r\n    if (collateralTokenAddress === AddressZero) {\r\n      method = \"createIncreasePositionETH\";\r\n      value = fromAmount.add(minExecutionFee);\r\n      params = [\r\n        path, // _path\r\n        indexTokenAddress, // _indexToken\r\n        0, // _minOut\r\n        0, // _sizeDelta\r\n        position.isLong, // _isLong\r\n        priceLimit, // _acceptablePrice\r\n        minExecutionFee, // _executionFee\r\n        referralCode, // _referralCode\r\n      ];\r\n    }\r\n\r\n    if (shouldRaiseGasError(getTokenInfo(infoTokens, collateralTokenAddress), fromAmount)) {\r\n      setIsSwapping(false);\r\n      helperToast.error(`Leave at least ${formatAmount(DUST_BNB, 18, 3)} ETH for gas`);\r\n      return;\r\n    }\r\n\r\n    const contract = new ethers.Contract(positionRouterAddress, PositionRouter.abi, library.getSigner());\r\n    callContract(chainId, contract, method, params, {\r\n      value,\r\n      sentMsg: t`Deposit submitted.`,\r\n      successMsg: t`Requested deposit of ${formatAmount(fromAmount, position.collateralToken.decimals, 4)} ${\r\n        position.collateralToken.symbol\r\n      } into ${position.indexToken.symbol} ${position.isLong ? \"Long\" : \"Short\"}.`,\r\n      failMsg: t`Deposit failed.`,\r\n      setPendingTxns,\r\n    })\r\n      .then(async (res) => {\r\n        setFromValue(\"\");\r\n        setIsVisible(false);\r\n\r\n        pendingPositions[position.key] = {\r\n          updatedAt: Date.now(),\r\n          pendingChanges: {\r\n            collateralSnapshot: position.collateral,\r\n            expectingCollateralChange: true,\r\n          },\r\n        };\r\n\r\n        setPendingPositions({ ...pendingPositions });\r\n      })\r\n      .finally(() => {\r\n        setIsSwapping(false);\r\n      });\r\n  };\r\n\r\n  const withdrawCollateral = async () => {\r\n    setIsSwapping(true);\r\n    const tokenAddress0 = collateralTokenAddress === AddressZero ? nativeTokenAddress : collateralTokenAddress;\r\n    const indexTokenAddress =\r\n      position.indexToken.address === AddressZero ? nativeTokenAddress : position.indexToken.address;\r\n    const priceBasisPoints = position.isLong ? 9000 : 11000;\r\n    const priceLimit = position.indexToken.maxPrice.mul(priceBasisPoints).div(10000);\r\n\r\n    const withdrawETH = collateralTokenAddress === AddressZero || collateralTokenAddress === nativeTokenAddress;\r\n    const params = [\r\n      [tokenAddress0], // _path\r\n      indexTokenAddress, // _indexToken\r\n      fromAmount, // _collateralDelta\r\n      0, // _sizeDelta\r\n      position.isLong, // _isLong\r\n      account, // _receiver\r\n      priceLimit, // _acceptablePrice\r\n      0, // _minOut\r\n      minExecutionFee, // _executionFee\r\n      withdrawETH, // _withdrawETH\r\n    ];\r\n\r\n    const method = \"createDecreasePosition\";\r\n\r\n    const contract = new ethers.Contract(positionRouterAddress, PositionRouter.abi, library.getSigner());\r\n    callContract(chainId, contract, method, params, {\r\n      value: minExecutionFee,\r\n      sentMsg: t`Withdrawal submitted.`,\r\n      successMsg: t`Requested withdrawal of ${formatAmount(fromAmount, USD_DECIMALS, 2)} USD from ${\r\n        position.indexToken.symbol\r\n      } ${position.isLong ? \"Long\" : \"Short\"}.`,\r\n      failMsg: t`Withdrawal failed.`,\r\n      setPendingTxns,\r\n    })\r\n      .then(async (res) => {\r\n        setFromValue(\"\");\r\n        setIsVisible(false);\r\n\r\n        pendingPositions[position.key] = {\r\n          updatedAt: Date.now(),\r\n          pendingChanges: {\r\n            collateralSnapshot: position.collateral,\r\n            expectingCollateralChange: true,\r\n          },\r\n        };\r\n      })\r\n      .finally(() => {\r\n        setIsSwapping(false);\r\n      });\r\n  };\r\n\r\n  const onClickPrimary = () => {\r\n    if (needApproval) {\r\n      approveTokens({\r\n        setIsApproving,\r\n        library,\r\n        tokenAddress: collateralTokenAddress,\r\n        spender: routerAddress,\r\n        chainId: chainId,\r\n        infoTokens,\r\n        getTokenInfo,\r\n        pendingTxns,\r\n        setPendingTxns,\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (needPositionRouterApproval) {\r\n      approvePositionRouter({\r\n        sentMsg: isDeposit ? t`Enable deposit sent.` : t`Enable withdraw sent.`,\r\n        failMsg: isDeposit ? t`Enable deposit failed.` : t`Enable withdraw failed.`,\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (isDeposit) {\r\n      depositCollateral();\r\n      return;\r\n    }\r\n\r\n    withdrawCollateral();\r\n  };\r\n  const nativeTokenSymbol = getConstant(chainId, \"nativeTokenSymbol\");\r\n\r\n  return (\r\n    <div className=\"PositionEditor\">\r\n      {position && (\r\n        <Modal isVisible={isVisible} setIsVisible={setIsVisible} label={title}>\r\n          <div>\r\n            <Tab options={EDIT_OPTIONS} option={option} setOption={setOption} onChange={resetForm} />\r\n            {(isDeposit || isWithdrawal) && (\r\n              <div>\r\n                <div className=\"Exchange-swap-section\">\r\n                  <div className=\"Exchange-swap-section-top\">\r\n                    <div className=\"muted\">\r\n                      {convertedAmountFormatted && (\r\n                        <div className=\"Exchange-swap-usd\">\r\n                          {isDeposit ? t`Deposit` : t`Withdraw`}: {convertedAmountFormatted}{\" \"}\r\n                          {isDeposit ? \"USD\" : position.collateralToken.symbol}\r\n                        </div>\r\n                      )}\r\n                      {!convertedAmountFormatted && `${isDeposit ? t`Deposit` : t`Withdraw`}`}\r\n                    </div>\r\n                    {maxAmount && (\r\n                      <div className=\"muted align-right clickable\" onClick={() => setFromValue(maxAmountFormattedFree)}>\r\n                        Max: {maxAmountFormatted}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"Exchange-swap-section-bottom\">\r\n                    <div className=\"Exchange-swap-input-container\">\r\n                      <input\r\n                        type=\"number\"\r\n                        min=\"0\"\r\n                        placeholder=\"0.0\"\r\n                        className=\"Exchange-swap-input\"\r\n                        value={fromValue}\r\n                        onChange={(e) => setFromValue(e.target.value)}\r\n                      />\r\n                      {fromValue !== maxAmountFormattedFree && (\r\n                        <div\r\n                          className=\"Exchange-swap-max\"\r\n                          onClick={() => {\r\n                            setFromValue(maxAmountFormattedFree);\r\n                          }}\r\n                        >\r\n                          MAX\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                    <div className=\"PositionEditor-token-symbol\">\r\n                      {isDeposit ? position.collateralToken.symbol : \"USD\"}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"PositionEditor-info-box\">\r\n                  {minExecutionFeeErrorMessage && (\r\n                    <div className=\"Confirmation-box-warning\">{minExecutionFeeErrorMessage}</div>\r\n                  )}\r\n                  <div className=\"Exchange-info-row\">\r\n                    <div className=\"Exchange-info-label\">\r\n                      <Trans>Size</Trans>\r\n                    </div>\r\n                    <div className=\"align-right\">{formatAmount(position.size, USD_DECIMALS, 2, true)} USD</div>\r\n                  </div>\r\n                  <div className=\"Exchange-info-row\">\r\n                    <div className=\"Exchange-info-label\">\r\n                      <Trans>Collateral</Trans>\r\n                    </div>\r\n                    <div className=\"align-right\">\r\n                      {!nextCollateral && <div>${formatAmount(position.collateral, USD_DECIMALS, 2, true)}</div>}\r\n                      {nextCollateral && (\r\n                        <div>\r\n                          <div className=\"inline-block muted\">\r\n                            ${formatAmount(position.collateral, USD_DECIMALS, 2, true)}\r\n                            <BsArrowRight className=\"transition-arrow\" />\r\n                          </div>\r\n                          ${formatAmount(nextCollateral, USD_DECIMALS, 2, true)}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"Exchange-info-row\">\r\n                    <div className=\"Exchange-info-label\">\r\n                      <Trans>Leverage</Trans>\r\n                    </div>\r\n                    <div className=\"align-right\">\r\n                      {!nextLeverage && <div>{formatAmount(position.leverage, 4, 2, true)}x</div>}\r\n                      {nextLeverage && (\r\n                        <div>\r\n                          <div className=\"inline-block muted\">\r\n                            {formatAmount(position.leverage, 4, 2, true)}x\r\n                            <BsArrowRight className=\"transition-arrow\" />\r\n                          </div>\r\n                          {formatAmount(nextLeverage, 4, 2, true)}x\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"Exchange-info-row\">\r\n                    <div className=\"Exchange-info-label\">\r\n                      <Trans>Mark Price</Trans>\r\n                    </div>\r\n                    <div className=\"align-right\">${formatAmount(position.markPrice, USD_DECIMALS, 2, true)}</div>\r\n                  </div>\r\n                  <div className=\"Exchange-info-row\">\r\n                    <div className=\"Exchange-info-label\">\r\n                      <Trans>Liq. Price</Trans>\r\n                    </div>\r\n                    <div className=\"align-right\">\r\n                      {!nextLiquidationPrice && (\r\n                        <div>\r\n                          {!fromAmount && `$${formatAmount(liquidationPrice, USD_DECIMALS, 2, true)}`}\r\n                          {fromAmount && \"-\"}\r\n                        </div>\r\n                      )}\r\n                      {nextLiquidationPrice && (\r\n                        <div>\r\n                          <div className=\"inline-block muted\">\r\n                            ${formatAmount(liquidationPrice, USD_DECIMALS, 2, true)}\r\n                            <BsArrowRight className=\"transition-arrow\" />\r\n                          </div>\r\n                          ${formatAmount(nextLiquidationPrice, USD_DECIMALS, 2, true)}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"Exchange-info-row\">\r\n                    <div className=\"Exchange-info-label\">\r\n                      <Trans>Execution Fee</Trans>\r\n                    </div>\r\n                    <div className=\"align-right\">\r\n                      <Tooltip\r\n                        handle={`${formatAmountFree(minExecutionFee, 18, 5)} ${nativeTokenSymbol}`}\r\n                        position=\"right-top\"\r\n                        renderContent={() => {\r\n                          return (\r\n                            <>\r\n                              Network fee: {formatAmountFree(minExecutionFee, 18, 5)} {nativeTokenSymbol} ($\r\n                              {formatAmount(minExecutionFeeUSD, USD_DECIMALS, 2)})<br />\r\n                              <br />\r\n                              This is the network cost required to execute the {isDeposit\r\n                                ? \"deposit\"\r\n                                : \"withdrawal\"}.{\" \"}\r\n                              <a\r\n                                href=\"https://gmxio.gitbook.io/gmx/trading#execution-fee\"\r\n                                target=\"_blank\"\r\n                                rel=\"noopener noreferrer\"\r\n                              >\r\n                                More Info\r\n                              </a>\r\n                            </>\r\n                          );\r\n                        }}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"Exchange-swap-button-container\">\r\n                  <button\r\n                    className=\"App-cta Exchange-swap-button\"\r\n                    onClick={onClickPrimary}\r\n                    disabled={!isPrimaryEnabled()}\r\n                  >\r\n                    {getPrimaryText()}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </Modal>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import \"./SpinningLoader.css\";\r\n\r\nimport { ImSpinner2 } from \"react-icons/im\";\r\n\r\nfunction SpinningLoader({ size = \"1.25rem\" }) {\r\n  return <ImSpinner2 className=\"spin spinning-loader\" style={{ fontSize: size }} />;\r\n}\r\n\r\nexport default SpinningLoader;\r\n","import { useEffect, useRef, useState } from \"react\";\r\nimport { Trans } from \"@lingui/macro\";\r\nimport { toJpeg } from \"html-to-image\";\r\nimport cx from \"classnames\";\r\nimport { BiCopy } from \"react-icons/bi\";\r\nimport { RiFileDownloadLine } from \"react-icons/ri\";\r\nimport { FiTwitter } from \"react-icons/fi\";\r\nimport { useCopyToClipboard } from \"react-use\";\r\nimport Modal from \"../Modal/Modal\";\r\nimport gmxLogo from \"../../img/gmx-logo-with-name.svg\";\r\nimport \"./PositionShare.css\";\r\nimport { QRCodeSVG } from \"qrcode.react\";\r\nimport {\r\n  formatAmount,\r\n  getHomeUrl,\r\n  getRootShareApiUrl,\r\n  getTwitterIntentURL,\r\n  helperToast,\r\n  USD_DECIMALS,\r\n} from \"../../lib/legacy\";\r\nimport { useAffiliateCodes } from \"../../domain/referrals\";\r\nimport SpinningLoader from \"../Common/SpinningLoader\";\r\nimport useLoadImage from \"../../lib/useLoadImage\";\r\nimport shareBgImg from \"../../img/position-share-bg.png\";\r\n\r\nconst ROOT_SHARE_URL = getRootShareApiUrl();\r\nconst UPLOAD_URL = ROOT_SHARE_URL + \"/api/upload\";\r\nconst UPLOAD_SHARE = ROOT_SHARE_URL + \"/api/s\";\r\nconst config = { quality: 0.95, canvasWidth: 1036, canvasHeight: 584 };\r\n\r\nfunction getShareURL(imageInfo, ref) {\r\n  if (!imageInfo) return;\r\n  let url = `${UPLOAD_SHARE}?id=${imageInfo.id}`;\r\n  if (ref.success) {\r\n    url = url + `&ref=${ref.code}`;\r\n  }\r\n  return url;\r\n}\r\n\r\nfunction PositionShare({ setIsPositionShareModalOpen, isPositionShareModalOpen, positionToShare, account, chainId }) {\r\n  const userAffiliateCode = useAffiliateCodes(chainId, account);\r\n  const [uploadedImageInfo, setUploadedImageInfo] = useState();\r\n  const [uploadedImageError, setUploadedImageError] = useState();\r\n  const [, copyToClipboard] = useCopyToClipboard();\r\n  const sharePositionBgImg = useLoadImage(shareBgImg);\r\n  const positionRef = useRef();\r\n  const tweetLink = getTwitterIntentURL(\r\n    `Latest $${positionToShare?.indexToken?.symbol} trade on @GMX_IO`,\r\n    getShareURL(uploadedImageInfo, userAffiliateCode)\r\n  );\r\n\r\n  useEffect(() => {\r\n    (async function () {\r\n      const element = positionRef.current;\r\n      if (element && userAffiliateCode.success && sharePositionBgImg && positionToShare) {\r\n        const image = await toJpeg(element, config);\r\n        try {\r\n          const imageInfo = await fetch(UPLOAD_URL, { method: \"POST\", body: image }).then((res) => res.json());\r\n          setUploadedImageInfo(imageInfo);\r\n        } catch {\r\n          setUploadedImageInfo(null);\r\n          setUploadedImageError(\"Image generation error, please refresh and try again.\");\r\n        }\r\n      }\r\n    })();\r\n  }, [userAffiliateCode, sharePositionBgImg, positionToShare]);\r\n\r\n  async function handleDownload() {\r\n    const { indexToken, isLong } = positionToShare;\r\n    const element = positionRef.current;\r\n    if (!element) return;\r\n    const dataUrl = await toJpeg(element, config);\r\n    const link = document.createElement(\"a\");\r\n    link.download = `${indexToken.symbol}-${isLong ? \"long\" : \"short\"}.jpeg`;\r\n    link.href = dataUrl;\r\n    document.body.appendChild(link);\r\n    link.click();\r\n  }\r\n\r\n  function handleCopy() {\r\n    if (!uploadedImageInfo) return;\r\n    const url = getShareURL(uploadedImageInfo, userAffiliateCode);\r\n    copyToClipboard(url);\r\n    helperToast.success(\"Link copied to clipboard.\");\r\n  }\r\n  return (\r\n    <Modal\r\n      className=\"position-share-modal\"\r\n      isVisible={isPositionShareModalOpen}\r\n      setIsVisible={setIsPositionShareModalOpen}\r\n      label=\"Share Position\"\r\n    >\r\n      <PositionShareCard\r\n        userAffiliateCode={userAffiliateCode}\r\n        positionRef={positionRef}\r\n        position={positionToShare}\r\n        chainId={chainId}\r\n        account={account}\r\n        uploadedImageInfo={uploadedImageInfo}\r\n        uploadedImageError={uploadedImageError}\r\n        sharePositionBgImg={sharePositionBgImg}\r\n      />\r\n      {uploadedImageError && <span className=\"error\">{uploadedImageError}</span>}\r\n\r\n      <div className=\"actions\">\r\n        <button disabled={!uploadedImageInfo} className=\"mr-base App-button-option\" onClick={handleCopy}>\r\n          <BiCopy className=\"icon\" />\r\n          <Trans>Copy</Trans>\r\n        </button>\r\n        <button className=\"mr-base App-button-option\" onClick={handleDownload}>\r\n          <RiFileDownloadLine className=\"icon\" />\r\n          <Trans>Download</Trans>\r\n        </button>\r\n        <div className={cx(\"tweet-link-container\", { disabled: !uploadedImageInfo })}>\r\n          <a\r\n            target=\"_blank\"\r\n            className={cx(\"tweet-link App-button-option\", { disabled: !uploadedImageInfo })}\r\n            rel=\"noreferrer\"\r\n            href={tweetLink}\r\n          >\r\n            <FiTwitter className=\"icon\" />\r\n            <Trans>Tweet</Trans>\r\n          </a>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nfunction PositionShareCard({\r\n  positionRef,\r\n  position,\r\n  userAffiliateCode,\r\n  uploadedImageInfo,\r\n  uploadedImageError,\r\n  sharePositionBgImg,\r\n}) {\r\n  const { code, success } = userAffiliateCode;\r\n  const { deltaAfterFeesPercentageStr, isLong, leverage, indexToken, averagePrice, markPrice } = position;\r\n  const homeURL = getHomeUrl();\r\n  return (\r\n    <div className=\"relative\">\r\n      <div ref={positionRef} className=\"position-share\" style={{ backgroundImage: `url(${sharePositionBgImg})` }}>\r\n        <img className=\"logo\" src={gmxLogo} alt=\"GMX Logo\" />\r\n        <ul className=\"info\">\r\n          <li className=\"side\">{isLong ? \"LONG\" : \"SHORT\"}</li>\r\n          <li>{formatAmount(leverage, 4, 2, true)}x&nbsp;</li>\r\n          <li>{indexToken.symbol} USD</li>\r\n        </ul>\r\n        <h3 className=\"pnl\">{deltaAfterFeesPercentageStr}</h3>\r\n        <div className=\"prices\">\r\n          <div>\r\n            <p>Entry Price</p>\r\n            <p className=\"price\">${formatAmount(averagePrice, USD_DECIMALS, 2, true)}</p>\r\n          </div>\r\n          <div>\r\n            <p>Index Price</p>\r\n            <p className=\"price\">${formatAmount(markPrice, USD_DECIMALS, 2, true)}</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"referral-code\">\r\n          <div>\r\n            <QRCodeSVG size={32} value={success ? `${homeURL}/#/?ref=${code}` : `${homeURL}`} />\r\n          </div>\r\n          <div className=\"referral-code-info\">\r\n            {success ? (\r\n              <>\r\n                <p className=\"label\">Referral Code:</p>\r\n                <p className=\"code\">{code}</p>\r\n              </>\r\n            ) : (\r\n              <p className=\"code\">https://gmx.io</p>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {!uploadedImageInfo && !uploadedImageError && (\r\n        <div className=\"image-overlay-wrapper\">\r\n          <div className=\"image-overlay\">\r\n            <SpinningLoader />\r\n            <p className=\"loading-text\">Generating shareable image...</p>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PositionShare;\r\n","import { useEffect, useState } from \"react\";\r\n\r\nexport default function useLoadImage(src) {\r\n  const [sourceLoaded, setSourceLoaded] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const img = new Image();\r\n    img.src = src;\r\n    img.onload = () => setSourceLoaded(src);\r\n  }, [src]);\r\n\r\n  return sourceLoaded;\r\n}\r\n","import { Menu } from \"@headlessui/react\";\r\nimport { Trans } from \"@lingui/macro\";\r\nimport { HiDotsVertical } from \"react-icons/hi\";\r\nimport { AiOutlineEdit } from \"react-icons/ai\";\r\nimport { BiSelectMultiple } from \"react-icons/bi\";\r\nimport { RiShareBoxFill } from \"react-icons/ri\";\r\nimport \"./PositionDropdown.css\";\r\n\r\nfunction PositionDropdown({ handleEditCollateral, handleShare, handleMarketSelect }) {\r\n  return (\r\n    <Menu>\r\n      <Menu.Button as=\"div\">\r\n        <button className=\"PositionDropdown-dots-icon\">\r\n          <HiDotsVertical fontSize={20} fontWeight={700} />\r\n        </button>\r\n      </Menu.Button>\r\n      <div className=\"PositionDropdown-extra-options\">\r\n        <Menu.Items as=\"div\" className=\"menu-items\">\r\n          <Menu.Item>\r\n            <div className=\"menu-item\" onClick={handleEditCollateral}>\r\n              <AiOutlineEdit fontSize={16} />\r\n              <p>\r\n                <Trans>Edit Collateral</Trans>\r\n              </p>\r\n            </div>\r\n          </Menu.Item>\r\n          <Menu.Item>\r\n            <div className=\"menu-item\" onClick={handleMarketSelect}>\r\n              <BiSelectMultiple fontSize={16} />\r\n              <p>\r\n                <Trans>Select Market</Trans>\r\n              </p>\r\n            </div>\r\n          </Menu.Item>\r\n          <Menu.Item>\r\n            <div className=\"menu-item\" onClick={handleShare}>\r\n              <RiShareBoxFill fontSize={16} />\r\n              <p>\r\n                <Trans>Share Position</Trans>\r\n              </p>\r\n            </div>\r\n          </Menu.Item>\r\n        </Menu.Items>\r\n      </div>\r\n    </Menu>\r\n  );\r\n}\r\n\r\nexport default PositionDropdown;\r\n","import React, { useState } from \"react\";\r\nimport cx from \"classnames\";\r\nimport { Trans, t } from \"@lingui/macro\";\r\nimport Tooltip from \"../Tooltip/Tooltip\";\r\nimport PositionSeller from \"./PositionSeller\";\r\nimport PositionEditor from \"./PositionEditor\";\r\nimport OrdersToa from \"./OrdersToa\";\r\n\r\nimport { ImSpinner2 } from \"react-icons/im\";\r\n\r\nimport {\r\n  helperToast,\r\n  bigNumberify,\r\n  getLiquidationPrice,\r\n  getUsd,\r\n  getLeverage,\r\n  formatAmount,\r\n  getOrderError,\r\n  USD_DECIMALS,\r\n  FUNDING_RATE_PRECISION,\r\n  SWAP,\r\n  LONG,\r\n  SHORT,\r\n  INCREASE,\r\n  DECREASE,\r\n} from \"../../lib/legacy\";\r\nimport PositionShare from \"./PositionShare\";\r\nimport PositionDropdown from \"./PositionDropdown\";\r\n\r\nconst getOrdersForPosition = (account, position, orders, nativeTokenAddress) => {\r\n  if (!orders || orders.length === 0) {\r\n    return [];\r\n  }\r\n  /* eslint-disable array-callback-return */\r\n  return orders\r\n    .filter((order) => {\r\n      if (order.type === SWAP) {\r\n        return false;\r\n      }\r\n      const hasMatchingIndexToken =\r\n        order.indexToken === nativeTokenAddress\r\n          ? position.indexToken.isNative\r\n          : order.indexToken === position.indexToken.address;\r\n      const hasMatchingCollateralToken =\r\n        order.collateralToken === nativeTokenAddress\r\n          ? position.collateralToken.isNative\r\n          : order.collateralToken === position.collateralToken.address;\r\n      if (order.isLong === position.isLong && hasMatchingIndexToken && hasMatchingCollateralToken) {\r\n        return true;\r\n      }\r\n    })\r\n    .map((order) => {\r\n      order.error = getOrderError(account, order, undefined, position);\r\n      if (order.type === DECREASE && order.sizeDelta.gt(position.size)) {\r\n        order.error = \"Order size is bigger than position, will only be executable if position increases\";\r\n      }\r\n      return order;\r\n    });\r\n};\r\n\r\nexport default function PositionsList(props) {\r\n  const {\r\n    pendingPositions,\r\n    setPendingPositions,\r\n    positions,\r\n    positionsDataIsLoading,\r\n    positionsMap,\r\n    infoTokens,\r\n    active,\r\n    account,\r\n    library,\r\n    pendingTxns,\r\n    setPendingTxns,\r\n    setListSection,\r\n    flagOrdersEnabled,\r\n    savedIsPnlInLeverage,\r\n    chainId,\r\n    nativeTokenAddress,\r\n    orders,\r\n    setIsWaitingForPluginApproval,\r\n    approveOrderBook,\r\n    isPluginApproving,\r\n    isWaitingForPluginApproval,\r\n    orderBookApproved,\r\n    positionRouterApproved,\r\n    isWaitingForPositionRouterApproval,\r\n    isPositionRouterApproving,\r\n    approvePositionRouter,\r\n    showPnlAfterFees,\r\n    setMarket,\r\n    minExecutionFee,\r\n    minExecutionFeeUSD,\r\n    minExecutionFeeErrorMessage,\r\n    usdgSupply,\r\n    totalTokenWeights,\r\n  } = props;\r\n\r\n  const [positionToEditKey, setPositionToEditKey] = useState(undefined);\r\n  const [positionToSellKey, setPositionToSellKey] = useState(undefined);\r\n  const [positionToShare, setPositionToShare] = useState(null);\r\n  const [isPositionEditorVisible, setIsPositionEditorVisible] = useState(undefined);\r\n  const [isPositionSellerVisible, setIsPositionSellerVisible] = useState(undefined);\r\n  const [collateralTokenAddress, setCollateralTokenAddress] = useState(undefined);\r\n  const [isPositionShareModalOpen, setIsPositionShareModalOpen] = useState(false);\r\n  const [ordersToaOpen, setOrdersToaOpen] = useState(false);\r\n  const [isHigherSlippageAllowed, setIsHigherSlippageAllowed] = useState(false);\r\n\r\n  const editPosition = (position) => {\r\n    setCollateralTokenAddress(position.collateralToken.address);\r\n    setPositionToEditKey(position.key);\r\n    setIsPositionEditorVisible(true);\r\n  };\r\n\r\n  const sellPosition = (position) => {\r\n    setPositionToSellKey(position.key);\r\n    setIsPositionSellerVisible(true);\r\n    setIsHigherSlippageAllowed(false);\r\n  };\r\n\r\n  const onPositionClick = (position) => {\r\n    helperToast.success(`${position.isLong ? \"Long\" : \"Short\"} ${position.indexToken.symbol} market selected`);\r\n    setMarket(position.isLong ? LONG : SHORT, position.indexToken.address);\r\n  };\r\n\r\n  return (\r\n    <div className=\"PositionsList\">\r\n      <PositionEditor\r\n        pendingPositions={pendingPositions}\r\n        setPendingPositions={setPendingPositions}\r\n        positionsMap={positionsMap}\r\n        positionKey={positionToEditKey}\r\n        isVisible={isPositionEditorVisible}\r\n        setIsVisible={setIsPositionEditorVisible}\r\n        infoTokens={infoTokens}\r\n        active={active}\r\n        account={account}\r\n        library={library}\r\n        collateralTokenAddress={collateralTokenAddress}\r\n        pendingTxns={pendingTxns}\r\n        setPendingTxns={setPendingTxns}\r\n        getUsd={getUsd}\r\n        getLeverage={getLeverage}\r\n        savedIsPnlInLeverage={savedIsPnlInLeverage}\r\n        positionRouterApproved={positionRouterApproved}\r\n        isPositionRouterApproving={isPositionRouterApproving}\r\n        isWaitingForPositionRouterApproval={isWaitingForPositionRouterApproval}\r\n        approvePositionRouter={approvePositionRouter}\r\n        chainId={chainId}\r\n        minExecutionFee={minExecutionFee}\r\n        minExecutionFeeUSD={minExecutionFeeUSD}\r\n        minExecutionFeeErrorMessage={minExecutionFeeErrorMessage}\r\n      />\r\n      {ordersToaOpen && (\r\n        <OrdersToa\r\n          setIsVisible={setOrdersToaOpen}\r\n          approveOrderBook={approveOrderBook}\r\n          isPluginApproving={isPluginApproving}\r\n        />\r\n      )}\r\n      {isPositionShareModalOpen && (\r\n        <PositionShare\r\n          setIsPositionShareModalOpen={setIsPositionShareModalOpen}\r\n          isPositionShareModalOpen={isPositionShareModalOpen}\r\n          positionToShare={positionToShare}\r\n          chainId={chainId}\r\n          account={account}\r\n        />\r\n      )}\r\n      {ordersToaOpen && (\r\n        <OrdersToa\r\n          setIsVisible={setOrdersToaOpen}\r\n          approveOrderBook={approveOrderBook}\r\n          isPluginApproving={isPluginApproving}\r\n        />\r\n      )}\r\n      {isPositionSellerVisible && (\r\n        <PositionSeller\r\n          pendingPositions={pendingPositions}\r\n          setPendingPositions={setPendingPositions}\r\n          setIsWaitingForPluginApproval={setIsWaitingForPluginApproval}\r\n          approveOrderBook={approveOrderBook}\r\n          isPluginApproving={isPluginApproving}\r\n          isWaitingForPluginApproval={isWaitingForPluginApproval}\r\n          orderBookApproved={orderBookApproved}\r\n          positionsMap={positionsMap}\r\n          positionKey={positionToSellKey}\r\n          isVisible={isPositionSellerVisible}\r\n          setIsVisible={setIsPositionSellerVisible}\r\n          infoTokens={infoTokens}\r\n          active={active}\r\n          account={account}\r\n          orders={orders}\r\n          library={library}\r\n          pendingTxns={pendingTxns}\r\n          setPendingTxns={setPendingTxns}\r\n          flagOrdersEnabled={flagOrdersEnabled}\r\n          savedIsPnlInLeverage={savedIsPnlInLeverage}\r\n          chainId={chainId}\r\n          nativeTokenAddress={nativeTokenAddress}\r\n          setOrdersToaOpen={setOrdersToaOpen}\r\n          positionRouterApproved={positionRouterApproved}\r\n          isPositionRouterApproving={isPositionRouterApproving}\r\n          isWaitingForPositionRouterApproval={isWaitingForPositionRouterApproval}\r\n          approvePositionRouter={approvePositionRouter}\r\n          isHigherSlippageAllowed={isHigherSlippageAllowed}\r\n          setIsHigherSlippageAllowed={setIsHigherSlippageAllowed}\r\n          minExecutionFee={minExecutionFee}\r\n          minExecutionFeeUSD={minExecutionFeeUSD}\r\n          minExecutionFeeErrorMessage={minExecutionFeeErrorMessage}\r\n          usdgSupply={usdgSupply}\r\n          totalTokenWeights={totalTokenWeights}\r\n        />\r\n      )}\r\n      {positions && (\r\n        <div className=\"Exchange-list small\">\r\n          <div>\r\n            {positions.length === 0 && positionsDataIsLoading && (\r\n              <div className=\"Exchange-empty-positions-list-note App-card\">\r\n                <Trans>Loading...</Trans>\r\n              </div>\r\n            )}\r\n            {positions.length === 0 && !positionsDataIsLoading && (\r\n              <div className=\"Exchange-empty-positions-list-note App-card\">\r\n                <Trans>No open positions</Trans>\r\n              </div>\r\n            )}\r\n            {positions.map((position) => {\r\n              const positionOrders = getOrdersForPosition(account, position, orders, nativeTokenAddress);\r\n              const liquidationPrice = getLiquidationPrice(position);\r\n              const hasPositionProfit = position[showPnlAfterFees ? \"hasProfitAfterFees\" : \"hasProfit\"];\r\n              const positionDelta =\r\n                position[showPnlAfterFees ? \"pendingDeltaAfterFees\" : \"pendingDelta\"] || bigNumberify(0);\r\n              let borrowFeeText;\r\n              if (position.collateralToken && position.collateralToken.fundingRate) {\r\n                const borrowFeeRate = position.collateralToken.fundingRate\r\n                  .mul(position.size)\r\n                  .mul(24)\r\n                  .div(FUNDING_RATE_PRECISION);\r\n                borrowFeeText = `Borrow Fee / Day: $${formatAmount(borrowFeeRate, USD_DECIMALS, 2, true)}`;\r\n              }\r\n\r\n              return (\r\n                <div key={position.key} className=\"App-card\">\r\n                  <div className=\"App-card-title\">\r\n                    <span className=\"Exchange-list-title\">{position.indexToken.symbol}</span>\r\n                  </div>\r\n                  <div className=\"App-card-divider\"></div>\r\n                  <div className=\"App-card-content\">\r\n                    <div className=\"App-card-row\">\r\n                      <div className=\"label\">\r\n                        <Trans>Leverage</Trans>\r\n                      </div>\r\n                      <div>\r\n                        {formatAmount(position.leverage, 4, 2, true)}x&nbsp;\r\n                        <span\r\n                          className={cx(\"Exchange-list-side\", {\r\n                            positive: position.isLong,\r\n                            negative: !position.isLong,\r\n                          })}\r\n                        >\r\n                          {position.isLong ? t`Long` : t`Short`}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"App-card-row\">\r\n                      <div className=\"label\">\r\n                        <Trans>Size</Trans>\r\n                      </div>\r\n                      <div>${formatAmount(position.size, USD_DECIMALS, 2, true)}</div>\r\n                    </div>\r\n                    <div className=\"App-card-row\">\r\n                      <div className=\"label\">\r\n                        <Trans>Collateral</Trans>\r\n                      </div>\r\n                      <div>\r\n                        <Tooltip\r\n                          handle={`$${formatAmount(position.collateralAfterFee, USD_DECIMALS, 2, true)}`}\r\n                          position=\"right-bottom\"\r\n                          handleClassName={cx(\"plain\", { negative: position.hasLowCollateral })}\r\n                          renderContent={() => {\r\n                            return (\r\n                              <>\r\n                                {position.hasLowCollateral && (\r\n                                  <div>\r\n                                    WARNING: This position has a low amount of collateral after deducting borrowing\r\n                                    fees, deposit more collateral to reduce the position's liquidation risk.\r\n                                    <br />\r\n                                    <br />\r\n                                  </div>\r\n                                )}\r\n                                Initial Collateral: ${formatAmount(position.collateral, USD_DECIMALS, 2, true)}\r\n                                <br />\r\n                                Borrow Fee: ${formatAmount(position.fundingFee, USD_DECIMALS, 2, true)}\r\n                                {borrowFeeText && <div>{borrowFeeText}</div>}\r\n                                <br />\r\n                                Use the \"Edit\" button to deposit or withdraw collateral.\r\n                              </>\r\n                            );\r\n                          }}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"App-card-row\">\r\n                      <div className=\"label\">\r\n                        <Trans>PnL</Trans>\r\n                      </div>\r\n                      <div>\r\n                        <span\r\n                          className={cx(\"Exchange-list-info-label\", {\r\n                            positive: hasPositionProfit && positionDelta.gt(0),\r\n                            negative: !hasPositionProfit && positionDelta.gt(0),\r\n                            muted: positionDelta.eq(0),\r\n                          })}\r\n                        >\r\n                          {position.deltaStr} ({position.deltaPercentageStr})\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"App-card-row\">\r\n                      <div className=\"label\">\r\n                        <Trans>Net Value</Trans>\r\n                      </div>\r\n                      <div>\r\n                        <Tooltip\r\n                          handle={`$${formatAmount(position.netValue, USD_DECIMALS, 2, true)}`}\r\n                          position=\"right-bottom\"\r\n                          handleClassName=\"plain\"\r\n                          renderContent={() => {\r\n                            return (\r\n                              <>\r\n                                Net Value:{\" \"}\r\n                                {showPnlAfterFees\r\n                                  ? \"Initial Collateral - Fees + PnL\"\r\n                                  : \"Initial Collateral - Borrow Fee + PnL\"}\r\n                                <br />\r\n                                <br />\r\n                                Initial Collateral: ${formatAmount(position.collateral, USD_DECIMALS, 2, true)}\r\n                                <br />\r\n                                PnL: {position.deltaBeforeFeesStr}\r\n                                <br />\r\n                                Borrow Fee: ${formatAmount(position.fundingFee, USD_DECIMALS, 2, true)}\r\n                                <br />\r\n                                Open + Close fee: ${formatAmount(position.positionFee, USD_DECIMALS, 2, true)}\r\n                                <br />\r\n                                PnL After Fees: {position.deltaAfterFeesStr} ({position.deltaAfterFeesPercentageStr})\r\n                              </>\r\n                            );\r\n                          }}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"App-card-row\">\r\n                      <div className=\"label\">\r\n                        <Trans>Orders</Trans>\r\n                      </div>\r\n                      <div>\r\n                        {positionOrders.length === 0 && \"None\"}\r\n                        {positionOrders.map((order) => {\r\n                          const orderText = () => (\r\n                            <>\r\n                              {order.triggerAboveThreshold ? \">\" : \"<\"} {formatAmount(order.triggerPrice, 30, 2, true)}:\r\n                              {order.type === INCREASE ? \" +\" : \" -\"}${formatAmount(order.sizeDelta, 30, 2, true)}\r\n                            </>\r\n                          );\r\n                          if (order.error) {\r\n                            return (\r\n                              <div key={`${order.isLong}-${order.type}-${order.index}`} className=\"Position-list-order\">\r\n                                <Tooltip\r\n                                  className=\"order-error\"\r\n                                  handle={orderText()}\r\n                                  position=\"right-bottom\"\r\n                                  handleClassName=\"plain\"\r\n                                  renderContent={() => <span className=\"negative\">{order.error}</span>}\r\n                                />\r\n                              </div>\r\n                            );\r\n                          } else {\r\n                            return (\r\n                              <div key={`${order.isLong}-${order.type}-${order.index}`} className=\"Position-list-order\">\r\n                                {orderText()}\r\n                              </div>\r\n                            );\r\n                          }\r\n                        })}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"App-card-divider\"></div>\r\n                  <div className=\"App-card-content\">\r\n                    <div className=\"App-card-row\">\r\n                      <div className=\"label\">\r\n                        <Trans>Mark Price</Trans>\r\n                      </div>\r\n                      <div>${formatAmount(position.markPrice, USD_DECIMALS, 2, true)}</div>\r\n                    </div>\r\n                    <div className=\"App-card-row\">\r\n                      <div className=\"label\">\r\n                        <Trans>Entry Price</Trans>\r\n                      </div>\r\n                      <div>${formatAmount(position.averagePrice, USD_DECIMALS, 2, true)}</div>\r\n                    </div>\r\n                    <div className=\"App-card-row\">\r\n                      <div className=\"label\">\r\n                        <Trans>Liq. Price</Trans>\r\n                      </div>\r\n                      <div>${formatAmount(liquidationPrice, USD_DECIMALS, 2, true)}</div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"App-card-divider\"></div>\r\n                  <div className=\"App-card-options\">\r\n                    <button\r\n                      className=\"App-button-option App-card-option\"\r\n                      disabled={position.size.eq(0)}\r\n                      onClick={() => sellPosition(position)}\r\n                    >\r\n                      Close\r\n                    </button>\r\n                    <button\r\n                      className=\"App-button-option App-card-option\"\r\n                      disabled={position.size.eq(0)}\r\n                      onClick={() => editPosition(position)}\r\n                    >\r\n                      <Trans> Edit</Trans>\r\n                    </button>\r\n                    <button\r\n                      className=\"Exchange-list-action App-button-option App-card-option\"\r\n                      onClick={() => {\r\n                        setPositionToShare(position);\r\n                        setIsPositionShareModalOpen(true);\r\n                      }}\r\n                      disabled={position.size.eq(0)}\r\n                    >\r\n                      <Trans>Share</Trans>\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      )}\r\n      <table className=\"Exchange-list large App-box\">\r\n        <tbody>\r\n          <tr className=\"Exchange-list-header\">\r\n            <th>\r\n              <Trans>Position</Trans>\r\n            </th>\r\n            <th>\r\n              <Trans>Net Value</Trans>\r\n            </th>\r\n            <th>\r\n              <Trans>Size</Trans>\r\n            </th>\r\n            <th>\r\n              <Trans>Collateral</Trans>\r\n            </th>\r\n            <th>\r\n              <Trans>Mark Price</Trans>\r\n            </th>\r\n            <th>\r\n              <Trans>Entry Price</Trans>\r\n            </th>\r\n            <th>\r\n              <Trans>Liq. Price</Trans>\r\n            </th>\r\n            <th></th>\r\n            <th></th>\r\n          </tr>\r\n          {positions.length === 0 && positionsDataIsLoading && (\r\n            <tr>\r\n              <td colSpan=\"15\">\r\n                <div className=\"Exchange-empty-positions-list-note\">Loading...</div>\r\n              </td>\r\n            </tr>\r\n          )}\r\n          {positions.length === 0 && !positionsDataIsLoading && (\r\n            <tr>\r\n              <td colSpan=\"15\">\r\n                <div className=\"Exchange-empty-positions-list-note\">No open positions</div>\r\n              </td>\r\n            </tr>\r\n          )}\r\n          {positions.map((position) => {\r\n            const liquidationPrice = getLiquidationPrice(position) || bigNumberify(0);\r\n            const positionOrders = getOrdersForPosition(account, position, orders, nativeTokenAddress);\r\n            const hasOrderError = !!positionOrders.find((order) => order.error);\r\n            const hasPositionProfit = position[showPnlAfterFees ? \"hasProfitAfterFees\" : \"hasProfit\"];\r\n            const positionDelta =\r\n              position[showPnlAfterFees ? \"pendingDeltaAfterFees\" : \"pendingDelta\"] || bigNumberify(0);\r\n            let borrowFeeText;\r\n            if (position.collateralToken && position.collateralToken.fundingRate) {\r\n              const borrowFeeRate = position.collateralToken.fundingRate\r\n                .mul(position.size)\r\n                .mul(24)\r\n                .div(FUNDING_RATE_PRECISION);\r\n              borrowFeeText = t`Borrow Fee / Day: $${formatAmount(borrowFeeRate, USD_DECIMALS, 2, true)}`;\r\n            }\r\n\r\n            return (\r\n              <tr key={position.key}>\r\n                <td className=\"clickable\" onClick={() => onPositionClick(position)}>\r\n                  <div className=\"Exchange-list-title\">\r\n                    {position.indexToken.symbol}\r\n                    {position.hasPendingChanges && <ImSpinner2 className=\"spin position-loading-icon\" />}\r\n                  </div>\r\n                  <div className=\"Exchange-list-info-label\">\r\n                    {position.leverage && (\r\n                      <span className=\"muted\">{formatAmount(position.leverage, 4, 2, true)}x&nbsp;</span>\r\n                    )}\r\n                    <span className={cx({ positive: position.isLong, negative: !position.isLong })}>\r\n                      {position.isLong ? \"Long\" : \"Short\"}\r\n                    </span>\r\n                  </div>\r\n                </td>\r\n                <td>\r\n                  <div>\r\n                    {!position.netValue && \"Opening...\"}\r\n                    {position.netValue && (\r\n                      <Tooltip\r\n                        handle={`$${formatAmount(position.netValue, USD_DECIMALS, 2, true)}`}\r\n                        position=\"left-bottom\"\r\n                        handleClassName=\"plain\"\r\n                        renderContent={() => {\r\n                          return (\r\n                            <>\r\n                              Net Value:{\" \"}\r\n                              {showPnlAfterFees\r\n                                ? \"Initial Collateral - Fees + PnL\"\r\n                                : \"Initial Collateral - Borrow Fee + PnL\"}\r\n                              <br />\r\n                              <br />\r\n                              Initial Collateral: ${formatAmount(position.collateral, USD_DECIMALS, 2, true)}\r\n                              <br />\r\n                              PnL: {position.deltaBeforeFeesStr}\r\n                              <br />\r\n                              Borrow Fee: ${formatAmount(position.fundingFee, USD_DECIMALS, 2, true)}\r\n                              <br />\r\n                              Open + Close fee: ${formatAmount(position.positionFee, USD_DECIMALS, 2, true)}\r\n                              <br />\r\n                              <br />\r\n                              PnL After Fees: {position.deltaAfterFeesStr} ({position.deltaAfterFeesPercentageStr})\r\n                            </>\r\n                          );\r\n                        }}\r\n                      />\r\n                    )}\r\n                  </div>\r\n                  {position.deltaStr && (\r\n                    <div\r\n                      className={cx(\"Exchange-list-info-label\", {\r\n                        positive: hasPositionProfit && positionDelta.gt(0),\r\n                        negative: !hasPositionProfit && positionDelta.gt(0),\r\n                        muted: positionDelta.eq(0),\r\n                      })}\r\n                    >\r\n                      {position.deltaStr} ({position.deltaPercentageStr})\r\n                    </div>\r\n                  )}\r\n                </td>\r\n                <td>\r\n                  <div>${formatAmount(position.size, USD_DECIMALS, 2, true)}</div>\r\n                  {positionOrders.length > 0 && (\r\n                    <div onClick={() => setListSection && setListSection(\"Orders\")}>\r\n                      <Tooltip\r\n                        handle={`Orders (${positionOrders.length})`}\r\n                        position=\"left-bottom\"\r\n                        handleClassName={cx(\r\n                          [\"Exchange-list-info-label\", \"Exchange-position-list-orders\", \"plain\", \"clickable\"],\r\n                          { muted: !hasOrderError, negative: hasOrderError }\r\n                        )}\r\n                        renderContent={() => {\r\n                          return (\r\n                            <>\r\n                              <strong>Active Orders</strong>\r\n                              {positionOrders.map((order) => {\r\n                                return (\r\n                                  <div\r\n                                    key={`${order.isLong}-${order.type}-${order.index}`}\r\n                                    className=\"Position-list-order\"\r\n                                  >\r\n                                    {order.triggerAboveThreshold ? \">\" : \"<\"}{\" \"}\r\n                                    {formatAmount(order.triggerPrice, 30, 2, true)}:\r\n                                    {order.type === INCREASE ? \" +\" : \" -\"}${formatAmount(order.sizeDelta, 30, 2, true)}\r\n                                    {order.error && (\r\n                                      <>\r\n                                        , <span className=\"negative\">{order.error}</span>\r\n                                      </>\r\n                                    )}\r\n                                  </div>\r\n                                );\r\n                              })}\r\n                            </>\r\n                          );\r\n                        }}\r\n                      />\r\n                    </div>\r\n                  )}\r\n                </td>\r\n                <td>\r\n                  <Tooltip\r\n                    handle={`$${formatAmount(position.collateralAfterFee, USD_DECIMALS, 2, true)}`}\r\n                    position=\"left-bottom\"\r\n                    handleClassName={cx(\"plain\", { negative: position.hasLowCollateral })}\r\n                    renderContent={() => {\r\n                      return (\r\n                        <>\r\n                          {position.hasLowCollateral && (\r\n                            <div>\r\n                              <Trans>\r\n                                WARNING: This position has a low amount of collateral after deducting borrowing fees,\r\n                                deposit more collateral to reduce the position's liquidation risk.\r\n                              </Trans>\r\n                              <br />\r\n                              <br />\r\n                            </div>\r\n                          )}\r\n                          <Trans>Initial Collateral: ${formatAmount(position.collateral, USD_DECIMALS, 2, true)}</Trans>\r\n                          <br />\r\n                          <Trans>Borrow Fee: ${formatAmount(position.fundingFee, USD_DECIMALS, 2, true)}</Trans>\r\n                          {borrowFeeText && <div>{borrowFeeText}</div>}\r\n                          <br />\r\n                          <Trans>Use the \"Edit\" button to deposit or withdraw collateral.</Trans>\r\n                        </>\r\n                      );\r\n                    }}\r\n                  />\r\n                </td>\r\n                <td className=\"clickable\" onClick={() => onPositionClick(position)}>\r\n                  <Tooltip\r\n                    handle={`$${formatAmount(position.markPrice, USD_DECIMALS, 2, true)}`}\r\n                    position=\"left-bottom\"\r\n                    handleClassName=\"plain clickable\"\r\n                    renderContent={() => {\r\n                      return (\r\n                        <>\r\n                          Click on a row to select the position's market, then use the swap box to increase your\r\n                          position size if needed.\r\n                          <br />\r\n                          <br />\r\n                          Use the \"Close\" button to reduce your position size, or to set stop-loss / take-profit orders.\r\n                        </>\r\n                      );\r\n                    }}\r\n                  />\r\n                </td>\r\n                <td className=\"clickable\" onClick={() => onPositionClick(position)}>\r\n                  ${formatAmount(position.averagePrice, USD_DECIMALS, 2, true)}\r\n                </td>\r\n                <td className=\"clickable\" onClick={() => onPositionClick(position)}>\r\n                  ${formatAmount(liquidationPrice, USD_DECIMALS, 2, true)}\r\n                </td>\r\n\r\n                <td>\r\n                  <button\r\n                    className=\"Exchange-list-action\"\r\n                    onClick={() => sellPosition(position)}\r\n                    disabled={position.size.eq(0)}\r\n                  >\r\n                    Close\r\n                  </button>\r\n                </td>\r\n                <td>\r\n                  <PositionDropdown\r\n                    handleEditCollateral={() => {\r\n                      editPosition(position);\r\n                    }}\r\n                    handleShare={() => {\r\n                      setPositionToShare(position);\r\n                      setIsPositionShareModalOpen(true);\r\n                    }}\r\n                    handleMarketSelect={() => {\r\n                      onPositionClick(position);\r\n                    }}\r\n                  />\r\n                </td>\r\n              </tr>\r\n            );\r\n          })}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useMemo } from \"react\";\r\nimport { BsArrowRight } from \"react-icons/bs\";\r\n\r\nimport {\r\n  PRECISION,\r\n  USD_DECIMALS,\r\n  SWAP,\r\n  TRIGGER_PREFIX_ABOVE,\r\n  TRIGGER_PREFIX_BELOW,\r\n  MIN_PROFIT_TIME,\r\n  DECREASE,\r\n  INCREASE,\r\n  useChainId,\r\n  getTokenInfo,\r\n  isTriggerRatioInverted,\r\n  bigNumberify,\r\n  formatAmountFree,\r\n  parseValue,\r\n  getNextToAmount,\r\n  getExchangeRate,\r\n  formatAmount,\r\n  getExchangeRateDisplay,\r\n  calculatePositionDelta,\r\n  getLiquidationPrice,\r\n  formatDateTime,\r\n  getDeltaStr,\r\n  getProfitPrice,\r\n  getTimeRemaining,\r\n} from \"../../lib/legacy\";\r\nimport { updateSwapOrder, updateIncreaseOrder, updateDecreaseOrder } from \"../../domain/legacy\";\r\nimport Modal from \"../Modal/Modal\";\r\nimport ExchangeInfoRow from \"./ExchangeInfoRow\";\r\nimport { getContract } from \"../../config/Addresses\";\r\n\r\nexport default function OrderEditor(props) {\r\n  const {\r\n    account,\r\n    order,\r\n    setEditingOrder,\r\n    infoTokens,\r\n    pendingTxns,\r\n    setPendingTxns,\r\n    library,\r\n    totalTokenWeights,\r\n    usdgSupply,\r\n    getPositionForOrder,\r\n    positionsMap,\r\n    savedShouldDisableOrderValidation,\r\n  } = props;\r\n\r\n  const { chainId } = useChainId();\r\n\r\n  const position = order.type !== SWAP ? getPositionForOrder(account, order, positionsMap) : null;\r\n  const liquidationPrice = order.type === DECREASE && position ? getLiquidationPrice(position) : null;\r\n\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\r\n  const fromTokenInfo = order.type === SWAP ? getTokenInfo(infoTokens, order.path[0], true, nativeTokenAddress) : null;\r\n  const toTokenInfo =\r\n    order.type === SWAP\r\n      ? getTokenInfo(infoTokens, order.path[order.path.length - 1], order.shouldUnwrap, nativeTokenAddress)\r\n      : null;\r\n\r\n  const triggerRatioInverted = useMemo(() => {\r\n    if (order.type !== SWAP) {\r\n      return null;\r\n    }\r\n\r\n    return isTriggerRatioInverted(fromTokenInfo, toTokenInfo);\r\n  }, [toTokenInfo, fromTokenInfo, order.type]);\r\n\r\n  let initialRatio = 0;\r\n  if (order.triggerRatio) {\r\n    initialRatio = triggerRatioInverted ? PRECISION.mul(PRECISION).div(order.triggerRatio) : order.triggerRatio;\r\n  }\r\n  const [triggerRatioValue, setTriggerRatioValue] = useState(formatAmountFree(initialRatio, USD_DECIMALS, 6));\r\n\r\n  const [triggerPriceValue, setTriggerPriceValue] = useState(formatAmountFree(order.triggerPrice, USD_DECIMALS, 4));\r\n  const triggerPrice = useMemo(() => {\r\n    return triggerPriceValue ? parseValue(triggerPriceValue, USD_DECIMALS) : 0;\r\n  }, [triggerPriceValue]);\r\n\r\n  const triggerRatio = useMemo(() => {\r\n    if (!triggerRatioValue) {\r\n      return bigNumberify(0);\r\n    }\r\n    let ratio = parseValue(triggerRatioValue, USD_DECIMALS);\r\n    if (triggerRatioInverted) {\r\n      ratio = PRECISION.mul(PRECISION).div(ratio);\r\n    }\r\n    return ratio;\r\n  }, [triggerRatioValue, triggerRatioInverted]);\r\n\r\n  const indexTokenMarkPrice = useMemo(() => {\r\n    if (order.type === SWAP) {\r\n      return;\r\n    }\r\n    const toTokenInfo = getTokenInfo(infoTokens, order.indexToken);\r\n    return order.isLong ? toTokenInfo.maxPrice : toTokenInfo.minPrice;\r\n  }, [infoTokens, order]);\r\n\r\n  let toAmount;\r\n  if (order.type === SWAP) {\r\n    const { amount } = getNextToAmount(\r\n      chainId,\r\n      order.amountIn,\r\n      order.path[0],\r\n      order.path[order.path.length - 1],\r\n      infoTokens,\r\n      undefined,\r\n      triggerRatio,\r\n      usdgSupply,\r\n      totalTokenWeights\r\n    );\r\n    toAmount = amount;\r\n  }\r\n\r\n  const onClickPrimary = () => {\r\n    setIsSubmitting(true);\r\n\r\n    let func;\r\n    let params;\r\n\r\n    if (order.type === SWAP) {\r\n      func = updateSwapOrder;\r\n      params = [chainId, library, order.index, toAmount, triggerRatio, order.triggerAboveThreshold];\r\n    } else if (order.type === DECREASE) {\r\n      func = updateDecreaseOrder;\r\n      params = [\r\n        chainId,\r\n        library,\r\n        order.index,\r\n        order.collateralDelta,\r\n        order.sizeDelta,\r\n        triggerPrice,\r\n        order.triggerAboveThreshold,\r\n      ];\r\n    } else if (order.type === INCREASE) {\r\n      func = updateIncreaseOrder;\r\n      params = [chainId, library, order.index, order.sizeDelta, triggerPrice, order.triggerAboveThreshold];\r\n    }\r\n\r\n    params.push({\r\n      successMsg: \"Order updated!\",\r\n      failMsg: \"Order update failed.\",\r\n      sentMsg: \"Order update submitted!\",\r\n      pendingTxns,\r\n      setPendingTxns,\r\n    });\r\n\r\n    return func(...params)\r\n      .then(() => {\r\n        setEditingOrder(null);\r\n      })\r\n      .finally(() => {\r\n        setIsSubmitting(false);\r\n      });\r\n  };\r\n\r\n  const onTriggerRatioChange = (evt) => {\r\n    setTriggerRatioValue(evt.target.value || \"\");\r\n  };\r\n\r\n  const onTriggerPriceChange = (evt) => {\r\n    setTriggerPriceValue(evt.target.value || \"\");\r\n  };\r\n\r\n  const getError = () => {\r\n    if ((!triggerRatio || triggerRatio.eq(0)) && (!triggerPrice || triggerPrice.eq(0))) {\r\n      return \"Enter Price\";\r\n    }\r\n    if (order.type === SWAP && triggerRatio.eq(order.triggerRatio)) {\r\n      return \"Enter new Price\";\r\n    }\r\n    if (order.type !== SWAP && triggerPrice.eq(order.triggerPrice)) {\r\n      return \"Enter new Price\";\r\n    }\r\n    if (position) {\r\n      if (order.type === DECREASE) {\r\n        if (position.isLong && triggerPrice.lte(liquidationPrice)) {\r\n          return \"Price below Liq. Price\";\r\n        }\r\n        if (!position.isLong && triggerPrice.gte(liquidationPrice)) {\r\n          return \"Price above Liq. Price\";\r\n        }\r\n      }\r\n\r\n      const { delta, hasProfit } = calculatePositionDelta(triggerPrice, position);\r\n      if (hasProfit && delta.eq(0)) {\r\n        return \"Invalid price, see warning\";\r\n      }\r\n    }\r\n\r\n    if (order.type !== SWAP && indexTokenMarkPrice && !savedShouldDisableOrderValidation) {\r\n      if (order.triggerAboveThreshold && indexTokenMarkPrice.gt(triggerPrice)) {\r\n        return \"Price below Mark Price\";\r\n      }\r\n      if (!order.triggerAboveThreshold && indexTokenMarkPrice.lt(triggerPrice)) {\r\n        return \"Price above Mark Price\";\r\n      }\r\n    }\r\n\r\n    if (order.type === SWAP) {\r\n      const currentRate = getExchangeRate(fromTokenInfo, toTokenInfo);\r\n      if (currentRate && !currentRate.gte(triggerRatio)) {\r\n        return `Price is ${triggerRatioInverted ? \"below\" : \"above\"} Mark Price`;\r\n      }\r\n    }\r\n  };\r\n\r\n  const renderMinProfitWarning = () => {\r\n    if (MIN_PROFIT_TIME === 0 || order.type === SWAP || !position || !triggerPrice || triggerPrice.eq(0)) {\r\n      return null;\r\n    }\r\n\r\n    const { delta, pendingDelta, pendingDeltaPercentage, hasProfit } = calculatePositionDelta(triggerPrice, position);\r\n    if (hasProfit && delta.eq(0)) {\r\n      const { deltaStr } = getDeltaStr({\r\n        delta: pendingDelta,\r\n        deltaPercentage: pendingDeltaPercentage,\r\n        hasProfit,\r\n      });\r\n      const profitPrice = getProfitPrice(triggerPrice, position);\r\n      const minProfitExpiration = position.lastIncreasedTime + MIN_PROFIT_TIME;\r\n      return (\r\n        <div className=\"Confirmation-box-warning\">\r\n          This order will forfeit a&nbsp;\r\n          <a href=\"https://gmxio.gitbook.io/gmx/trading#minimum-price-change\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n            profit\r\n          </a>{\" \"}\r\n          of {deltaStr}. <br />\r\n          Profit price: {position.isLong ? \">\" : \"<\"} ${formatAmount(profitPrice, USD_DECIMALS, 2, true)}. This rule\r\n          only applies for the next {getTimeRemaining(minProfitExpiration)}, until {formatDateTime(minProfitExpiration)}\r\n          .\r\n        </div>\r\n      );\r\n    }\r\n  };\r\n\r\n  const isPrimaryEnabled = () => {\r\n    if (isSubmitting) {\r\n      return false;\r\n    }\r\n    const error = getError();\r\n    if (error) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  const getPrimaryText = () => {\r\n    const error = getError();\r\n    if (error) {\r\n      return error;\r\n    }\r\n\r\n    if (isSubmitting) {\r\n      return \"Updating Order...\";\r\n    }\r\n    return \"Update Order\";\r\n  };\r\n\r\n  if (order.type !== SWAP) {\r\n    const triggerPricePrefix = order.triggerAboveThreshold ? TRIGGER_PREFIX_ABOVE : TRIGGER_PREFIX_BELOW;\r\n    return (\r\n      <Modal\r\n        isVisible={true}\r\n        className=\"Exchange-list-modal\"\r\n        setIsVisible={() => setEditingOrder(null)}\r\n        label=\"Edit order\"\r\n      >\r\n        {renderMinProfitWarning()}\r\n        <div className=\"Exchange-swap-section\">\r\n          <div className=\"Exchange-swap-section-top\">\r\n            <div className=\"muted\">Price</div>\r\n            <div\r\n              className=\"muted align-right clickable\"\r\n              onClick={() => {\r\n                setTriggerPriceValue(formatAmountFree(indexTokenMarkPrice, USD_DECIMALS, 2));\r\n              }}\r\n            >\r\n              Mark: {formatAmount(indexTokenMarkPrice, USD_DECIMALS, 2)}\r\n            </div>\r\n          </div>\r\n          <div className=\"Exchange-swap-section-bottom\">\r\n            <div className=\"Exchange-swap-input-container\">\r\n              <input\r\n                type=\"number\"\r\n                min=\"0\"\r\n                placeholder=\"0.0\"\r\n                className=\"Exchange-swap-input\"\r\n                value={triggerPriceValue}\r\n                onChange={onTriggerPriceChange}\r\n              />\r\n            </div>\r\n            <div className=\"PositionEditor-token-symbol\">USD</div>\r\n          </div>\r\n        </div>\r\n        <ExchangeInfoRow label=\"Price\">\r\n          {triggerPrice && !triggerPrice.eq(order.triggerPrice) ? (\r\n            <>\r\n              <span className=\"muted\">\r\n                {triggerPricePrefix} {formatAmount(order.triggerPrice, USD_DECIMALS, 2, true)}\r\n              </span>\r\n              &nbsp;\r\n              <BsArrowRight />\r\n              &nbsp;\r\n              {triggerPricePrefix} {formatAmount(triggerPrice, USD_DECIMALS, 2, true)}\r\n            </>\r\n          ) : (\r\n            <span>\r\n              {triggerPricePrefix} {formatAmount(order.triggerPrice, USD_DECIMALS, 2, true)}\r\n            </span>\r\n          )}\r\n        </ExchangeInfoRow>\r\n        {liquidationPrice && (\r\n          <div className=\"Exchange-info-row\">\r\n            <div className=\"Exchange-info-label\">Liq. Price</div>\r\n            <div className=\"align-right\">{`$${formatAmount(liquidationPrice, USD_DECIMALS, 2, true)}`}</div>\r\n          </div>\r\n        )}\r\n        <div className=\"Exchange-swap-button-container\">\r\n          <button\r\n            className=\"App-cta Exchange-swap-button Exchange-list-modal-button\"\r\n            onClick={onClickPrimary}\r\n            disabled={!isPrimaryEnabled()}\r\n          >\r\n            {getPrimaryText()}\r\n          </button>\r\n        </div>\r\n      </Modal>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Modal\r\n      isVisible={true}\r\n      className=\"Exchange-list-modal\"\r\n      setIsVisible={() => setEditingOrder(null)}\r\n      label=\"Edit order\"\r\n    >\r\n      <div className=\"Exchange-swap-section\">\r\n        <div className=\"Exchange-swap-section-top\">\r\n          <div className=\"muted\">Price</div>\r\n          {fromTokenInfo && toTokenInfo && (\r\n            <div\r\n              className=\"muted align-right clickable\"\r\n              onClick={() => {\r\n                setTriggerRatioValue(\r\n                  formatAmountFree(getExchangeRate(fromTokenInfo, toTokenInfo, triggerRatioInverted), USD_DECIMALS, 10)\r\n                );\r\n              }}\r\n            >\r\n              Mark Price:{\" \"}\r\n              {formatAmount(getExchangeRate(fromTokenInfo, toTokenInfo, triggerRatioInverted), USD_DECIMALS, 2)}\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div className=\"Exchange-swap-section-bottom\">\r\n          <div className=\"Exchange-swap-input-container\">\r\n            <input\r\n              type=\"number\"\r\n              min=\"0\"\r\n              placeholder=\"0.0\"\r\n              className=\"Exchange-swap-input\"\r\n              value={triggerRatioValue}\r\n              onChange={onTriggerRatioChange}\r\n            />\r\n          </div>\r\n          {(() => {\r\n            if (!toTokenInfo) return;\r\n            if (!fromTokenInfo) return;\r\n            const [tokenA, tokenB] = triggerRatioInverted ? [toTokenInfo, fromTokenInfo] : [fromTokenInfo, toTokenInfo];\r\n            return (\r\n              <div className=\"PositionEditor-token-symbol\">\r\n                {tokenA.symbol}&nbsp;/&nbsp;{tokenB.symbol}\r\n              </div>\r\n            );\r\n          })()}\r\n        </div>\r\n      </div>\r\n      <ExchangeInfoRow label=\"Minimum received\">\r\n        {triggerRatio && !triggerRatio.eq(order.triggerRatio) ? (\r\n          <>\r\n            <span className=\"muted\">{formatAmount(order.minOut, toTokenInfo.decimals, 4, true)}</span>\r\n            &nbsp;\r\n            <BsArrowRight />\r\n            &nbsp;\r\n            {formatAmount(toAmount, toTokenInfo.decimals, 4, true)}\r\n          </>\r\n        ) : (\r\n          formatAmount(order.minOut, toTokenInfo.decimals, 4, true)\r\n        )}\r\n        &nbsp;{toTokenInfo.symbol}\r\n      </ExchangeInfoRow>\r\n      <ExchangeInfoRow label=\"Price\">\r\n        {triggerRatio && !triggerRatio.eq(0) && !triggerRatio.eq(order.triggerRatio) ? (\r\n          <>\r\n            <span className=\"muted\">\r\n              {getExchangeRateDisplay(order.triggerRatio, fromTokenInfo, toTokenInfo, {\r\n                omitSymbols: !triggerRatio || !triggerRatio.eq(order.triggerRatio),\r\n              })}\r\n            </span>\r\n            &nbsp;\r\n            <BsArrowRight />\r\n            &nbsp;\r\n            {getExchangeRateDisplay(triggerRatio, fromTokenInfo, toTokenInfo)}\r\n          </>\r\n        ) : (\r\n          getExchangeRateDisplay(order.triggerRatio, fromTokenInfo, toTokenInfo, {\r\n            omitSymbols: !triggerRatio || !triggerRatio.eq(order.triggerRatio),\r\n          })\r\n        )}\r\n      </ExchangeInfoRow>\r\n      {fromTokenInfo && (\r\n        <div className=\"Exchange-info-row\">\r\n          <div className=\"Exchange-info-label\">{fromTokenInfo.symbol} price</div>\r\n          <div className=\"align-right\">{formatAmount(fromTokenInfo.minPrice, USD_DECIMALS, 2, true)} USD</div>\r\n        </div>\r\n      )}\r\n      {toTokenInfo && (\r\n        <div className=\"Exchange-info-row\">\r\n          <div className=\"Exchange-info-label\">{toTokenInfo.symbol} price</div>\r\n          <div className=\"align-right\">{formatAmount(toTokenInfo.maxPrice, USD_DECIMALS, 2, true)} USD</div>\r\n        </div>\r\n      )}\r\n      <div className=\"Exchange-swap-button-container\">\r\n        <button\r\n          className=\"App-cta Exchange-swap-button Exchange-list-modal-button\"\r\n          onClick={onClickPrimary}\r\n          disabled={!isPrimaryEnabled()}\r\n        >\r\n          {getPrimaryText()}\r\n        </button>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n","import React, { useState, useCallback } from \"react\";\r\nimport { Trans } from \"@lingui/macro\";\r\n\r\nimport {\r\n  SWAP,\r\n  INCREASE,\r\n  DECREASE,\r\n  USD_DECIMALS,\r\n  formatAmount,\r\n  getOrderError,\r\n  TRIGGER_PREFIX_ABOVE,\r\n  TRIGGER_PREFIX_BELOW,\r\n  getExchangeRateDisplay,\r\n  getTokenInfo,\r\n  getExchangeRate,\r\n  getPositionForOrder,\r\n  getUsd,\r\n} from \"../../lib/legacy.js\";\r\nimport { handleCancelOrder } from \"../../domain/legacy\";\r\nimport { getContract } from \"../../config/Addresses\";\r\n\r\nimport Tooltip from \"../Tooltip/Tooltip\";\r\nimport OrderEditor from \"./OrderEditor\";\r\n\r\nimport \"./OrdersList.css\";\r\nimport Checkbox from \"../Checkbox/Checkbox.js\";\r\n\r\nexport default function OrdersList(props) {\r\n  const {\r\n    account,\r\n    library,\r\n    setPendingTxns,\r\n    pendingTxns,\r\n    infoTokens,\r\n    positionsMap,\r\n    totalTokenWeights,\r\n    usdgSupply,\r\n    orders,\r\n    hideActions,\r\n    chainId,\r\n    savedShouldDisableOrderValidation,\r\n    cancelOrderIdList,\r\n    setCancelOrderIdList,\r\n  } = props;\r\n\r\n  const [editingOrder, setEditingOrder] = useState(null);\r\n\r\n  const onCancelClick = useCallback(\r\n    (order) => {\r\n      handleCancelOrder(chainId, library, order, { pendingTxns, setPendingTxns });\r\n    },\r\n    [library, pendingTxns, setPendingTxns, chainId]\r\n  );\r\n\r\n  const onEditClick = useCallback(\r\n    (order) => {\r\n      setEditingOrder(order);\r\n    },\r\n    [setEditingOrder]\r\n  );\r\n\r\n  const renderHead = useCallback(() => {\r\n    const isAllOrdersSelected = cancelOrderIdList?.length > 0 && cancelOrderIdList?.length === orders.length;\r\n    return (\r\n      <tr className=\"Exchange-list-header\">\r\n        {orders.length > 0 && (\r\n          <th>\r\n            <div className=\"checkbox-inline \">\r\n              <Checkbox\r\n                isChecked={isAllOrdersSelected}\r\n                setIsChecked={() => {\r\n                  if (isAllOrdersSelected) {\r\n                    setCancelOrderIdList([]);\r\n                  } else {\r\n                    const allOrderIds = orders.map((o) => `${o.type}-${o.index}`);\r\n                    setCancelOrderIdList(allOrderIds);\r\n                  }\r\n                }}\r\n              />\r\n            </div>\r\n          </th>\r\n        )}\r\n\r\n        <th>\r\n          <div>\r\n            <Trans>Type</Trans>\r\n          </div>\r\n        </th>\r\n        <th>\r\n          <div>\r\n            <Trans>Order</Trans>\r\n          </div>\r\n        </th>\r\n        <th>\r\n          <div>\r\n            <Trans>Price</Trans>\r\n          </div>\r\n        </th>\r\n        <th>\r\n          <div>\r\n            <Trans>Mark Price</Trans>\r\n          </div>\r\n        </th>\r\n      </tr>\r\n    );\r\n  }, [cancelOrderIdList, orders, setCancelOrderIdList]);\r\n\r\n  const renderEmptyRow = useCallback(() => {\r\n    if (orders && orders.length) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <tr>\r\n        <td colSpan=\"5\">\r\n          <Trans>No open orders</Trans>\r\n        </td>\r\n      </tr>\r\n    );\r\n  }, [orders]);\r\n\r\n  const renderActions = useCallback(\r\n    (order) => {\r\n      return (\r\n        <>\r\n          <td>\r\n            <button className=\"Exchange-list-action\" onClick={() => onEditClick(order)}>\r\n              <Trans>Edit</Trans>\r\n            </button>\r\n          </td>\r\n          <td>\r\n            <button className=\"Exchange-list-action\" onClick={() => onCancelClick(order)}>\r\n              <Trans>Cancel</Trans>\r\n            </button>\r\n          </td>\r\n        </>\r\n      );\r\n    },\r\n    [onEditClick, onCancelClick]\r\n  );\r\n\r\n  const renderLargeList = useCallback(() => {\r\n    if (!orders || !orders.length) {\r\n      return null;\r\n    }\r\n    return orders.map((order) => {\r\n      if (order.type === SWAP) {\r\n        const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\r\n        const fromTokenInfo = getTokenInfo(infoTokens, order.path[0], true, nativeTokenAddress);\r\n        const toTokenInfo = getTokenInfo(\r\n          infoTokens,\r\n          order.path[order.path.length - 1],\r\n          order.shouldUnwrap,\r\n          nativeTokenAddress\r\n        );\r\n\r\n        const markExchangeRate = getExchangeRate(fromTokenInfo, toTokenInfo);\r\n        const orderId = `${order.type}-${order.index}`;\r\n\r\n        return (\r\n          <tr className=\"Exchange-list-item\" key={orderId}>\r\n            <td>\r\n              <div className=\"checkbox-inline \">\r\n                <Checkbox\r\n                  isChecked={cancelOrderIdList?.includes(orderId)}\r\n                  setIsChecked={() => {\r\n                    setCancelOrderIdList((prevState) => {\r\n                      if (prevState.includes(orderId)) {\r\n                        return prevState.filter((i) => i !== orderId);\r\n                      } else {\r\n                        return prevState.concat(orderId);\r\n                      }\r\n                    });\r\n                  }}\r\n                />\r\n              </div>\r\n            </td>\r\n            <td className=\"Exchange-list-item-type\">Limit</td>\r\n            <td>\r\n              Swap{\" \"}\r\n              {formatAmount(\r\n                order.amountIn,\r\n                fromTokenInfo.decimals,\r\n                fromTokenInfo.isStable || fromTokenInfo.isUsdg ? 2 : 4,\r\n                true\r\n              )}{\" \"}\r\n              {fromTokenInfo.symbol} for{\" \"}\r\n              {formatAmount(\r\n                order.minOut,\r\n                toTokenInfo.decimals,\r\n                toTokenInfo.isStable || toTokenInfo.isUsdg ? 2 : 4,\r\n                true\r\n              )}{\" \"}\r\n              {toTokenInfo.symbol}\r\n            </td>\r\n            <td>\r\n              <Tooltip\r\n                handle={getExchangeRateDisplay(order.triggerRatio, fromTokenInfo, toTokenInfo)}\r\n                renderContent={() => `\r\n                  You will receive at least ${formatAmount(\r\n                    order.minOut,\r\n                    toTokenInfo.decimals,\r\n                    toTokenInfo.isStable || toTokenInfo.isUsdg ? 2 : 4,\r\n                    true\r\n                  )} ${\r\n                  toTokenInfo.symbol\r\n                } if this order is executed. The execution price may vary depending on swap fees at the time the order is executed.\r\n                `}\r\n              />\r\n            </td>\r\n            <td>{getExchangeRateDisplay(markExchangeRate, fromTokenInfo, toTokenInfo, true)}</td>\r\n            {!hideActions && renderActions(order)}\r\n          </tr>\r\n        );\r\n      }\r\n\r\n      const indexToken = getTokenInfo(infoTokens, order.indexToken);\r\n\r\n      // Longs Increase: max price\r\n      // Longs Decrease: min price\r\n      // Short Increase: min price\r\n      // Short Decrease: max price\r\n      const maximisePrice = (order.type === INCREASE && order.isLong) || (order.type === DECREASE && !order.isLong);\r\n\r\n      const markPrice = maximisePrice ? indexToken.contractMaxPrice : indexToken.contractMinPrice;\r\n      const triggerPricePrefix = order.triggerAboveThreshold ? TRIGGER_PREFIX_ABOVE : TRIGGER_PREFIX_BELOW;\r\n      const indexTokenSymbol = indexToken.isWrapped ? indexToken.baseSymbol : indexToken.symbol;\r\n\r\n      const error = getOrderError(account, order, positionsMap);\r\n      const orderId = `${order.type}-${order.index}`;\r\n      const orderText = (\r\n        <>\r\n          {order.type === INCREASE ? \"Increase\" : \"Decrease\"} {indexTokenSymbol} {order.isLong ? \"Long\" : \"Short\"}\r\n          &nbsp;by ${formatAmount(order.sizeDelta, USD_DECIMALS, 2, true)}\r\n          {error && <div className=\"Exchange-list-item-error\">{error}</div>}\r\n        </>\r\n      );\r\n\r\n      return (\r\n        <tr className=\"Exchange-list-item\" key={`${order.isLong}-${order.type}-${order.index}`}>\r\n          <td className=\"Exchange-list-item-type\">\r\n            <div>\r\n              <Checkbox\r\n                isChecked={cancelOrderIdList?.includes(orderId)}\r\n                setIsChecked={() => {\r\n                  setCancelOrderIdList((prevState) => {\r\n                    if (prevState.includes(orderId)) {\r\n                      return prevState.filter((i) => i !== orderId);\r\n                    } else {\r\n                      return prevState.concat(orderId);\r\n                    }\r\n                  });\r\n                }}\r\n              />\r\n            </div>\r\n          </td>\r\n          <td className=\"Exchange-list-item-type\">{order.type === INCREASE ? \"Limit\" : \"Trigger\"}</td>\r\n          <td>\r\n            {order.type === DECREASE ? (\r\n              orderText\r\n            ) : (\r\n              <Tooltip\r\n                handle={orderText}\r\n                position=\"right-bottom\"\r\n                renderContent={() => {\r\n                  const collateralTokenInfo = getTokenInfo(infoTokens, order.purchaseToken);\r\n                  const collateralUSD = getUsd(order.purchaseTokenAmount, order.purchaseToken, false, infoTokens);\r\n                  return (\r\n                    <span>\r\n                      Collateral: ${formatAmount(collateralUSD, USD_DECIMALS, 2, true)} (\r\n                      {formatAmount(order.purchaseTokenAmount, collateralTokenInfo.decimals, 4, true)}{\" \"}\r\n                      {collateralTokenInfo.baseSymbol || collateralTokenInfo.symbol})\r\n                    </span>\r\n                  );\r\n                }}\r\n              />\r\n            )}\r\n          </td>\r\n          <td>\r\n            {triggerPricePrefix} {formatAmount(order.triggerPrice, USD_DECIMALS, 2, true)}\r\n          </td>\r\n          <td>\r\n            <Tooltip\r\n              handle={formatAmount(markPrice, USD_DECIMALS, 2, true)}\r\n              position=\"right-bottom\"\r\n              renderContent={() => {\r\n                return (\r\n                  <Trans>\r\n                    The price that orders can be executed at may differ slightly from the chart price, as market orders\r\n                    update oracle prices, while limit/trigger orders do not.\r\n                  </Trans>\r\n                );\r\n              }}\r\n            />\r\n          </td>\r\n          {!hideActions && renderActions(order)}\r\n        </tr>\r\n      );\r\n    });\r\n  }, [\r\n    orders,\r\n    renderActions,\r\n    infoTokens,\r\n    positionsMap,\r\n    hideActions,\r\n    chainId,\r\n    account,\r\n    cancelOrderIdList,\r\n    setCancelOrderIdList,\r\n  ]);\r\n\r\n  const renderSmallList = useCallback(() => {\r\n    if (!orders || !orders.length) {\r\n      return null;\r\n    }\r\n\r\n    return orders.map((order) => {\r\n      if (order.type === SWAP) {\r\n        const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\r\n        const fromTokenInfo = getTokenInfo(infoTokens, order.path[0], true, nativeTokenAddress);\r\n        const toTokenInfo = getTokenInfo(\r\n          infoTokens,\r\n          order.path[order.path.length - 1],\r\n          order.shouldUnwrap,\r\n          nativeTokenAddress\r\n        );\r\n        const markExchangeRate = getExchangeRate(fromTokenInfo, toTokenInfo);\r\n\r\n        return (\r\n          <div key={`${order.type}-${order.index}`} className=\"App-card\">\r\n            <div className=\"App-card-title-small\">\r\n              Swap {formatAmount(order.amountIn, fromTokenInfo.decimals, fromTokenInfo.isStable ? 2 : 4, true)}{\" \"}\r\n              {fromTokenInfo.symbol} for{\" \"}\r\n              {formatAmount(order.minOut, toTokenInfo.decimals, toTokenInfo.isStable ? 2 : 4, true)}{\" \"}\r\n              {toTokenInfo.symbol}\r\n            </div>\r\n            <div className=\"App-card-divider\"></div>\r\n            <div className=\"App-card-content\">\r\n              <div className=\"App-card-row\">\r\n                <div className=\"label\">Price</div>\r\n                <div>\r\n                  <Tooltip\r\n                    position=\"right-bottom\"\r\n                    handle={getExchangeRateDisplay(order.triggerRatio, fromTokenInfo, toTokenInfo)}\r\n                    renderContent={() => `\r\n                    You will receive at least ${formatAmount(\r\n                      order.minOut,\r\n                      toTokenInfo.decimals,\r\n                      toTokenInfo.isStable || toTokenInfo.isUsdg ? 2 : 4,\r\n                      true\r\n                    )} ${\r\n                      toTokenInfo.symbol\r\n                    } if this order is executed. The exact execution price may vary depending on fees at the time the order is executed.\r\n                  `}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"App-card-row\">\r\n                <div className=\"label\">\r\n                  <Trans>Mark Price</Trans>\r\n                </div>\r\n                <div>{getExchangeRateDisplay(markExchangeRate, fromTokenInfo, toTokenInfo)}</div>\r\n              </div>\r\n              {!hideActions && (\r\n                <>\r\n                  <div className=\"App-card-divider\"></div>\r\n                  <div className=\"App-card-options\">\r\n                    <button className=\"App-button-option App-card-option\" onClick={() => onEditClick(order)}>\r\n                      <Trans>Edit</Trans>\r\n                    </button>\r\n                    <button className=\"App-button-option App-card-option\" onClick={() => onCancelClick(order)}>\r\n                      <Trans>Cancel</Trans>\r\n                    </button>\r\n                  </div>\r\n                </>\r\n              )}\r\n            </div>\r\n          </div>\r\n        );\r\n      }\r\n\r\n      const indexToken = getTokenInfo(infoTokens, order.indexToken);\r\n      const maximisePrice = (order.type === INCREASE && order.isLong) || (order.type === DECREASE && !order.isLong);\r\n      const markPrice = maximisePrice ? indexToken.contractMaxPrice : indexToken.contractMinPrice;\r\n      const triggerPricePrefix = order.triggerAboveThreshold ? TRIGGER_PREFIX_ABOVE : TRIGGER_PREFIX_BELOW;\r\n      const indexTokenSymbol = indexToken.isWrapped ? indexToken.baseSymbol : indexToken.symbol;\r\n\r\n      const collateralTokenInfo = getTokenInfo(infoTokens, order.purchaseToken);\r\n      const collateralUSD = getUsd(order.purchaseTokenAmount, order.purchaseToken, true, infoTokens);\r\n\r\n      const error = getOrderError(account, order, positionsMap);\r\n\r\n      return (\r\n        <div key={`${order.isLong}-${order.type}-${order.index}`} className=\"App-card\">\r\n          <div className=\"App-card-title-small\">\r\n            {order.type === INCREASE ? \"Increase\" : \"Decrease\"} {indexTokenSymbol} {order.isLong ? \"Long\" : \"Short\"}\r\n            &nbsp;by ${formatAmount(order.sizeDelta, USD_DECIMALS, 2, true)}\r\n            {error && <div className=\"Exchange-list-item-error\">{error}</div>}\r\n          </div>\r\n          <div className=\"App-card-divider\"></div>\r\n          <div className=\"App-card-content\">\r\n            <div className=\"App-card-row\">\r\n              <div className=\"label\">\r\n                <Trans>Price</Trans>\r\n              </div>\r\n              <div>\r\n                {triggerPricePrefix} {formatAmount(order.triggerPrice, USD_DECIMALS, 2, true)}\r\n              </div>\r\n            </div>\r\n            <div className=\"App-card-row\">\r\n              <div className=\"label\">\r\n                <Trans>Mark Price</Trans>\r\n              </div>\r\n              <div>\r\n                <Tooltip\r\n                  handle={formatAmount(markPrice, USD_DECIMALS, 2, true)}\r\n                  position=\"right-bottom\"\r\n                  renderContent={() => {\r\n                    return (\r\n                      <Trans>\r\n                        The price that the order can be executed at may differ slightly from the chart price as market\r\n                        orders can change the price while limit / trigger orders cannot.\r\n                      </Trans>\r\n                    );\r\n                  }}\r\n                />\r\n              </div>\r\n            </div>\r\n            {order.type === INCREASE && (\r\n              <div className=\"App-card-row\">\r\n                <div className=\"label\">\r\n                  <Trans>Collateral</Trans>\r\n                </div>\r\n                <div>\r\n                  ${formatAmount(collateralUSD, USD_DECIMALS, 2, true)} (\r\n                  {formatAmount(order.purchaseTokenAmount, collateralTokenInfo.decimals, 4, true)}{\" \"}\r\n                  {collateralTokenInfo.baseSymbol || collateralTokenInfo.symbol})\r\n                </div>\r\n              </div>\r\n            )}\r\n            {!hideActions && (\r\n              <>\r\n                <div className=\"App-card-divider\"></div>\r\n                <div className=\"App-card-options\">\r\n                  <button className=\"App-button-option App-card-option\" onClick={() => onEditClick(order)}>\r\n                    <Trans>Edit</Trans>\r\n                  </button>\r\n                  <button className=\"App-button-option App-card-option\" onClick={() => onCancelClick(order)}>\r\n                    <Trans>Cancel</Trans>\r\n                  </button>\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n      );\r\n    });\r\n  }, [orders, onEditClick, onCancelClick, infoTokens, positionsMap, hideActions, chainId, account]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <table className=\"Exchange-list Orders App-box large\">\r\n        <tbody>\r\n          {renderHead()}\r\n          {renderEmptyRow()}\r\n          {renderLargeList()}\r\n        </tbody>\r\n      </table>\r\n      <div className=\"Exchange-list Orders small\">\r\n        {(!orders || orders.length === 0) && (\r\n          <div className=\"Exchange-empty-positions-list-note App-card\">No open orders</div>\r\n        )}\r\n        {renderSmallList()}\r\n      </div>\r\n      {editingOrder && (\r\n        <OrderEditor\r\n          account={account}\r\n          order={editingOrder}\r\n          setEditingOrder={setEditingOrder}\r\n          infoTokens={infoTokens}\r\n          pendingTxns={pendingTxns}\r\n          setPendingTxns={setPendingTxns}\r\n          getPositionForOrder={getPositionForOrder}\r\n          positionsMap={positionsMap}\r\n          library={library}\r\n          totalTokenWeights={totalTokenWeights}\r\n          usdgSupply={usdgSupply}\r\n          savedShouldDisableOrderValidation={savedShouldDisableOrderValidation}\r\n        />\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useCallback, useMemo } from \"react\";\r\nimport { ethers } from \"ethers\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Tooltip from \"../../components/Tooltip/Tooltip\";\r\n\r\nimport {\r\n  USD_DECIMALS,\r\n  MAX_LEVERAGE,\r\n  BASIS_POINTS_DIVISOR,\r\n  LIQUIDATION_FEE,\r\n  TRADES_PAGE_SIZE,\r\n  formatAmount,\r\n  getExplorerUrl,\r\n  formatDateTime,\r\n  deserialize,\r\n  getExchangeRateDisplay,\r\n  bigNumberify,\r\n} from \"../../lib/legacy\";\r\nimport { useTrades, useLiquidationsData } from \"../../domain/legacy\";\r\nimport { getContract } from \"../../config/Addresses\";\r\n\r\nimport \"./TradeHistory.css\";\r\n\r\nconst { AddressZero } = ethers.constants;\r\n\r\nfunction getPositionDisplay(increase, indexToken, isLong, sizeDelta) {\r\n  const symbol = indexToken ? (indexToken.isWrapped ? indexToken.baseSymbol : indexToken.symbol) : \"\";\r\n  return `\r\n    ${increase ? \"Increase\" : \"Decrease\"} ${symbol} ${isLong ? \"Long\" : \"Short\"}\r\n    ${increase ? \"+\" : \"-\"}${formatAmount(sizeDelta, USD_DECIMALS, 2, true)} USD`;\r\n}\r\n\r\nfunction getOrderActionTitle(action) {\r\n  let actionDisplay;\r\n\r\n  if (action.startsWith(\"Create\")) {\r\n    actionDisplay = \"Create\";\r\n  } else if (action.startsWith(\"Cancel\")) {\r\n    actionDisplay = \"Cancel\";\r\n  } else {\r\n    actionDisplay = \"Update\";\r\n  }\r\n\r\n  return `${actionDisplay} Order`;\r\n}\r\n\r\nfunction renderLiquidationTooltip(liquidationData, label) {\r\n  const minCollateral = liquidationData.size.mul(BASIS_POINTS_DIVISOR).div(MAX_LEVERAGE);\r\n  const text =\r\n    liquidationData.type === \"full\"\r\n      ? \"This position was liquidated as the max leverage of 100x was exceeded\"\r\n      : \"Max leverage of 100x was exceeded, the remaining collateral after deducting losses and fees have been sent back to your account\";\r\n  return (\r\n    <Tooltip\r\n      position=\"left-top\"\r\n      handle={label}\r\n      renderContent={() => (\r\n        <>\r\n          {text}\r\n          <br />\r\n          <br />\r\n          Initial collateral: ${formatAmount(liquidationData.collateral, USD_DECIMALS, 2, true)}\r\n          <br />\r\n          Min required collateral: ${formatAmount(minCollateral, USD_DECIMALS, 2, true)}\r\n          <br />\r\n          Borrow fee: ${formatAmount(liquidationData.borrowFee, USD_DECIMALS, 2, true)}\r\n          <br />\r\n          PnL: -${formatAmount(liquidationData.loss, USD_DECIMALS, 2, true)}\r\n          {liquidationData.type === \"full\" && <div>Liquidation fee: ${formatAmount(LIQUIDATION_FEE, 30, 2, true)}</div>}\r\n        </>\r\n      )}\r\n    />\r\n  );\r\n}\r\n\r\nfunction getLiquidationData(liquidationsDataMap, key, timestamp) {\r\n  return liquidationsDataMap && liquidationsDataMap[`${key}:${timestamp}`];\r\n}\r\n\r\nexport default function TradeHistory(props) {\r\n  const { account, infoTokens, getTokenInfo, chainId, nativeTokenAddress, shouldShowPaginationButtons } = props;\r\n  const [pageIds, setPageIds] = useState({});\r\n  const [pageIndex, setPageIndex] = useState(0);\r\n\r\n  const getAfterId = () => {\r\n    return pageIds[pageIndex];\r\n  };\r\n\r\n  const { trades, updateTrades } = useTrades(chainId, account, props.forSingleAccount, getAfterId());\r\n\r\n  const liquidationsData = useLiquidationsData(chainId, account);\r\n  const liquidationsDataMap = useMemo(() => {\r\n    if (!liquidationsData) {\r\n      return null;\r\n    }\r\n    return liquidationsData.reduce((memo, item) => {\r\n      const liquidationKey = `${item.key}:${item.timestamp}`;\r\n      memo[liquidationKey] = item;\r\n      return memo;\r\n    }, {});\r\n  }, [liquidationsData]);\r\n\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      updateTrades(undefined, true);\r\n    }, 10 * 1000);\r\n    return () => clearInterval(interval);\r\n  }, [updateTrades]);\r\n\r\n  const loadNextPage = () => {\r\n    if (!trades || trades.length === 0) {\r\n      return;\r\n    }\r\n\r\n    const lastTrade = trades[trades.length - 1];\r\n    pageIds[pageIndex + 1] = lastTrade.id;\r\n    setPageIds(pageIds);\r\n    setPageIndex(pageIndex + 1);\r\n  };\r\n\r\n  const loadPrevPage = () => {\r\n    setPageIndex(pageIndex - 1);\r\n  };\r\n\r\n  const getMsg = useCallback(\r\n    (trade) => {\r\n      const tradeData = trade.data;\r\n      const params = JSON.parse(tradeData.params);\r\n      const defaultMsg = \"\";\r\n\r\n      if (tradeData.action === \"BuyUSDG\") {\r\n        const token = getTokenInfo(infoTokens, params.token, true, nativeTokenAddress);\r\n        if (!token) {\r\n          return defaultMsg;\r\n        }\r\n        return `Swap ${formatAmount(params.tokenAmount, token.decimals, 4, true)} ${token.symbol} for ${formatAmount(\r\n          params.usdgAmount,\r\n          18,\r\n          4,\r\n          true\r\n        )} USDG`;\r\n      }\r\n\r\n      if (tradeData.action === \"SellUSDG\") {\r\n        const token = getTokenInfo(infoTokens, params.token, true, nativeTokenAddress);\r\n        if (!token) {\r\n          return defaultMsg;\r\n        }\r\n        return `Swap ${formatAmount(params.usdgAmount, 18, 4, true)} USDG for ${formatAmount(\r\n          params.tokenAmount,\r\n          token.decimals,\r\n          4,\r\n          true\r\n        )} ${token.symbol}`;\r\n      }\r\n\r\n      if (tradeData.action === \"Swap\") {\r\n        const tokenIn = getTokenInfo(infoTokens, params.tokenIn, true, nativeTokenAddress);\r\n        const tokenOut = getTokenInfo(infoTokens, params.tokenOut, true, nativeTokenAddress);\r\n        if (!tokenIn || !tokenOut) {\r\n          return defaultMsg;\r\n        }\r\n        return `Swap ${formatAmount(params.amountIn, tokenIn.decimals, 4, true)} ${tokenIn.symbol} for ${formatAmount(\r\n          params.amountOut,\r\n          tokenOut.decimals,\r\n          4,\r\n          true\r\n        )} ${tokenOut.symbol}`;\r\n      }\r\n\r\n      if (tradeData.action === \"CreateIncreasePosition\") {\r\n        const indexToken = getTokenInfo(infoTokens, params.indexToken, true, nativeTokenAddress);\r\n        if (!indexToken) {\r\n          return defaultMsg;\r\n        }\r\n\r\n        if (bigNumberify(params.sizeDelta).eq(0)) {\r\n          return `Request deposit into ${indexToken.symbol} ${params.isLong ? \"Long\" : \"Short\"}`;\r\n        }\r\n\r\n        return `Request increase ${indexToken.symbol} ${params.isLong ? \"Long\" : \"Short\"}, +${formatAmount(\r\n          params.sizeDelta,\r\n          USD_DECIMALS,\r\n          2,\r\n          true\r\n        )} USD, Acceptable Price: ${params.isLong ? \"<\" : \">\"} ${formatAmount(\r\n          params.acceptablePrice,\r\n          USD_DECIMALS,\r\n          2,\r\n          true\r\n        )} USD`;\r\n      }\r\n\r\n      if (tradeData.action === \"CreateDecreasePosition\") {\r\n        const indexToken = getTokenInfo(infoTokens, params.indexToken, true, nativeTokenAddress);\r\n        if (!indexToken) {\r\n          return defaultMsg;\r\n        }\r\n\r\n        if (bigNumberify(params.sizeDelta).eq(0)) {\r\n          return `Request withdrawal from ${indexToken.symbol} ${params.isLong ? \"Long\" : \"Short\"}`;\r\n        }\r\n\r\n        return `Request decrease ${indexToken.symbol} ${params.isLong ? \"Long\" : \"Short\"}, -${formatAmount(\r\n          params.sizeDelta,\r\n          USD_DECIMALS,\r\n          2,\r\n          true\r\n        )} USD, Acceptable Price: ${params.isLong ? \">\" : \"<\"} ${formatAmount(\r\n          params.acceptablePrice,\r\n          USD_DECIMALS,\r\n          2,\r\n          true\r\n        )} USD`;\r\n      }\r\n\r\n      if (tradeData.action === \"CancelIncreasePosition\") {\r\n        const indexToken = getTokenInfo(infoTokens, params.indexToken, true, nativeTokenAddress);\r\n        if (!indexToken) {\r\n          return defaultMsg;\r\n        }\r\n\r\n        if (bigNumberify(params.sizeDelta).eq(0)) {\r\n          return (\r\n            <>\r\n              Could not execute deposit into {indexToken.symbol} {params.isLong ? \"Long\" : \"Short\"}\r\n            </>\r\n          );\r\n        }\r\n\r\n        return (\r\n          <>\r\n            Could not increase {indexToken.symbol} {params.isLong ? \"Long\" : \"Short\"},\r\n            {`+${formatAmount(params.sizeDelta, USD_DECIMALS, 2, true)}`} USD, Acceptable Price:&nbsp;\r\n            {params.isLong ? \"<\" : \">\"}&nbsp;\r\n            <Tooltip\r\n              position=\"left-top\"\r\n              handle={`${formatAmount(params.acceptablePrice, USD_DECIMALS, 2, true)} USD`}\r\n              renderContent={() => <>Try increasing the \"Allowed Slippage\", under the Settings menu on the top right</>}\r\n            />\r\n          </>\r\n        );\r\n      }\r\n\r\n      if (tradeData.action === \"CancelDecreasePosition\") {\r\n        const indexToken = getTokenInfo(infoTokens, params.indexToken, true, nativeTokenAddress);\r\n        if (!indexToken) {\r\n          return defaultMsg;\r\n        }\r\n\r\n        if (bigNumberify(params.sizeDelta).eq(0)) {\r\n          return `Could not execute withdrawal from ${indexToken.symbol} ${params.isLong ? \"Long\" : \"Short\"}`;\r\n        }\r\n\r\n        return (\r\n          <>\r\n            Could not decrease {indexToken.symbol} {params.isLong ? \"Long\" : \"Short\"},\r\n            {`+${formatAmount(params.sizeDelta, USD_DECIMALS, 2, true)}`} USD, Acceptable Price:&nbsp;\r\n            {params.isLong ? \">\" : \"<\"}&nbsp;\r\n            <Tooltip\r\n              position=\"left-top\"\r\n              handle={`${formatAmount(params.acceptablePrice, USD_DECIMALS, 2, true)} USD`}\r\n              renderContent={() => <>Try increasing the \"Allowed Slippage\", under the Settings menu on the top right</>}\r\n            />\r\n          </>\r\n        );\r\n      }\r\n\r\n      if (tradeData.action === \"IncreasePosition-Long\" || tradeData.action === \"IncreasePosition-Short\") {\r\n        if (params.flags?.isOrderExecution) {\r\n          return;\r\n        }\r\n\r\n        const indexToken = getTokenInfo(infoTokens, params.indexToken, true, nativeTokenAddress);\r\n        if (!indexToken) {\r\n          return defaultMsg;\r\n        }\r\n        if (bigNumberify(params.sizeDelta).eq(0)) {\r\n          return `Deposit ${formatAmount(params.collateralDelta, USD_DECIMALS, 2, true)} USD into ${\r\n            indexToken.symbol\r\n          } ${params.isLong ? \"Long\" : \"Short\"}`;\r\n        }\r\n        return `Increase ${indexToken.symbol} ${params.isLong ? \"Long\" : \"Short\"}, +${formatAmount(\r\n          params.sizeDelta,\r\n          USD_DECIMALS,\r\n          2,\r\n          true\r\n        )} USD, ${indexToken.symbol} Price: ${formatAmount(params.price, USD_DECIMALS, 2, true)} USD`;\r\n      }\r\n\r\n      if (tradeData.action === \"DecreasePosition-Long\" || tradeData.action === \"DecreasePosition-Short\") {\r\n        if (params.flags?.isOrderExecution) {\r\n          return;\r\n        }\r\n\r\n        const indexToken = getTokenInfo(infoTokens, params.indexToken, true, nativeTokenAddress);\r\n        if (!indexToken) {\r\n          return defaultMsg;\r\n        }\r\n        if (bigNumberify(params.sizeDelta).eq(0)) {\r\n          return `Withdraw ${formatAmount(params.collateralDelta, USD_DECIMALS, 2, true)} USD from ${\r\n            indexToken.symbol\r\n          } ${params.isLong ? \"Long\" : \"Short\"}`;\r\n        }\r\n        const isLiquidation = params.flags?.isLiquidation;\r\n        const liquidationData = getLiquidationData(liquidationsDataMap, params.key, tradeData.timestamp);\r\n\r\n        if (isLiquidation && liquidationData) {\r\n          return (\r\n            <>\r\n              {renderLiquidationTooltip(liquidationData, \"Partial Liquidation\")} {indexToken.symbol}{\" \"}\r\n              {params.isLong ? \"Long\" : \"Short\"}, -{formatAmount(params.sizeDelta, USD_DECIMALS, 2, true)} USD,{\" \"}\r\n              {indexToken.symbol}&nbsp; Price: ${formatAmount(params.price, USD_DECIMALS, 2, true)} USD\r\n            </>\r\n          );\r\n        }\r\n        const actionDisplay = isLiquidation ? \"Partially Liquidated\" : \"Decreased\";\r\n        return `\r\n        ${actionDisplay} ${indexToken.symbol} ${params.isLong ? \"Long\" : \"Short\"},\r\n        -${formatAmount(params.sizeDelta, USD_DECIMALS, 2, true)} USD,\r\n        ${indexToken.symbol} Price: ${formatAmount(params.price, USD_DECIMALS, 2, true)} USD\r\n      `;\r\n      }\r\n\r\n      if (tradeData.action === \"LiquidatePosition-Long\" || tradeData.action === \"LiquidatePosition-Short\") {\r\n        const indexToken = getTokenInfo(infoTokens, params.indexToken, true, nativeTokenAddress);\r\n        if (!indexToken) {\r\n          return defaultMsg;\r\n        }\r\n        const liquidationData = getLiquidationData(liquidationsDataMap, params.key, tradeData.timestamp);\r\n        if (liquidationData) {\r\n          return (\r\n            <>\r\n              {renderLiquidationTooltip(liquidationData, \"Liquidated\")} {indexToken.symbol}{\" \"}\r\n              {params.isLong ? \"Long\" : \"Short\"}, -{formatAmount(params.size, USD_DECIMALS, 2, true)} USD,&nbsp;\r\n              {indexToken.symbol} Price: ${formatAmount(params.markPrice, USD_DECIMALS, 2, true)} USD\r\n            </>\r\n          );\r\n        }\r\n        return `\r\n        Liquidated ${indexToken.symbol} ${params.isLong ? \"Long\" : \"Short\"},\r\n        -${formatAmount(params.size, USD_DECIMALS, 2, true)} USD,\r\n        ${indexToken.symbol} Price: ${formatAmount(params.markPrice, USD_DECIMALS, 2, true)} USD\r\n      `;\r\n      }\r\n\r\n      if ([\"ExecuteIncreaseOrder\", \"ExecuteDecreaseOrder\"].includes(tradeData.action)) {\r\n        const order = deserialize(params.order);\r\n        const indexToken = getTokenInfo(infoTokens, order.indexToken, true, nativeTokenAddress);\r\n        if (!indexToken) {\r\n          return defaultMsg;\r\n        }\r\n        const longShortDisplay = order.isLong ? \"Long\" : \"Short\";\r\n        const executionPriceDisplay = formatAmount(order.executionPrice, USD_DECIMALS, 2, true);\r\n        const sizeDeltaDisplay = `${order.type === \"Increase\" ? \"+\" : \"-\"}${formatAmount(\r\n          order.sizeDelta,\r\n          USD_DECIMALS,\r\n          2,\r\n          true\r\n        )}`;\r\n\r\n        return `\r\n        Execute Order: ${order.type} ${indexToken.symbol} ${longShortDisplay}\r\n        ${sizeDeltaDisplay} USD, Price: ${executionPriceDisplay} USD\r\n      `;\r\n      }\r\n\r\n      if (\r\n        [\r\n          \"CreateIncreaseOrder\",\r\n          \"CancelIncreaseOrder\",\r\n          \"UpdateIncreaseOrder\",\r\n          \"CreateDecreaseOrder\",\r\n          \"CancelDecreaseOrder\",\r\n          \"UpdateDecreaseOrder\",\r\n        ].includes(tradeData.action)\r\n      ) {\r\n        const order = deserialize(params.order);\r\n        const indexToken = getTokenInfo(infoTokens, order.indexToken);\r\n        if (!indexToken) {\r\n          return defaultMsg;\r\n        }\r\n        const increase = tradeData.action.includes(\"Increase\");\r\n        const priceDisplay = `${order.triggerAboveThreshold ? \">\" : \"<\"} ${formatAmount(\r\n          order.triggerPrice,\r\n          USD_DECIMALS,\r\n          2,\r\n          true\r\n        )}`;\r\n        return `\r\n        ${getOrderActionTitle(tradeData.action)}:\r\n        ${getPositionDisplay(increase, indexToken, order.isLong, order.sizeDelta)},\r\n        Price: ${priceDisplay}\r\n      `;\r\n      }\r\n\r\n      if (tradeData.action === \"ExecuteSwapOrder\") {\r\n        const order = deserialize(params.order);\r\n        const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\r\n        const fromToken = getTokenInfo(infoTokens, order.path[0] === nativeTokenAddress ? AddressZero : order.path[0]);\r\n        const toToken = getTokenInfo(infoTokens, order.shouldUnwrap ? AddressZero : order.path[order.path.length - 1]);\r\n        if (!fromToken || !toToken) {\r\n          return defaultMsg;\r\n        }\r\n        const fromAmountDisplay = formatAmount(order.amountIn, fromToken.decimals, fromToken.isStable ? 2 : 4, true);\r\n        const toAmountDisplay = formatAmount(order.amountOut, toToken.decimals, toToken.isStable ? 2 : 4, true);\r\n        return `\r\n        Execute Order: Swap ${fromAmountDisplay} ${fromToken.symbol} for ${toAmountDisplay} ${toToken.symbol}\r\n      `;\r\n      }\r\n\r\n      if ([\"CreateSwapOrder\", \"UpdateSwapOrder\", \"CancelSwapOrder\"].includes(tradeData.action)) {\r\n        const order = deserialize(params.order);\r\n        const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\r\n        const fromToken = getTokenInfo(infoTokens, order.path[0] === nativeTokenAddress ? AddressZero : order.path[0]);\r\n        const toToken = getTokenInfo(infoTokens, order.shouldUnwrap ? AddressZero : order.path[order.path.length - 1]);\r\n        if (!fromToken || !toToken) {\r\n          return defaultMsg;\r\n        }\r\n        const amountInDisplay = fromToken\r\n          ? formatAmount(order.amountIn, fromToken.decimals, fromToken.isStable ? 2 : 4, true)\r\n          : \"\";\r\n        const minOutDisplay = toToken\r\n          ? formatAmount(order.minOut, toToken.decimals, toToken.isStable ? 2 : 4, true)\r\n          : \"\";\r\n\r\n        return `\r\n        ${getOrderActionTitle(tradeData.action)}:\r\n        Swap ${amountInDisplay} ${fromToken?.symbol || \"\"} for ${minOutDisplay} ${toToken?.symbol || \"\"},\r\n        Price: ${getExchangeRateDisplay(order.triggerRatio, fromToken, toToken)}`;\r\n      }\r\n    },\r\n    [getTokenInfo, infoTokens, nativeTokenAddress, chainId, liquidationsDataMap]\r\n  );\r\n\r\n  const tradesWithMessages = useMemo(() => {\r\n    if (!trades) {\r\n      return [];\r\n    }\r\n\r\n    return trades\r\n      .map((trade) => ({\r\n        msg: getMsg(trade),\r\n        ...trade,\r\n      }))\r\n      .filter((trade) => trade.msg);\r\n  }, [trades, getMsg]);\r\n\r\n  return (\r\n    <div className=\"TradeHistory\">\r\n      {tradesWithMessages.length === 0 && <div className=\"TradeHistory-row App-box\">No trades yet</div>}\r\n      {tradesWithMessages.length > 0 &&\r\n        tradesWithMessages.map((trade, index) => {\r\n          const tradeData = trade.data;\r\n          const txUrl = getExplorerUrl(chainId) + \"tx/\" + tradeData.txhash;\r\n\r\n          let msg = getMsg(trade);\r\n\r\n          if (!msg) {\r\n            return null;\r\n          }\r\n\r\n          return (\r\n            <div className=\"TradeHistory-row App-box App-box-border\" key={index}>\r\n              <div>\r\n                <div className=\"muted TradeHistory-time\">\r\n                  {formatDateTime(tradeData.timestamp)}\r\n                  {(!account || account.length === 0) && (\r\n                    <span>\r\n                      {\" \"}\r\n                      (<Link to={`/actions/${tradeData.account}`}>{tradeData.account}</Link>)\r\n                    </span>\r\n                  )}\r\n                </div>\r\n                <a className=\"plain\" href={txUrl} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                  {msg}\r\n                </a>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      {shouldShowPaginationButtons && (\r\n        <div>\r\n          {pageIndex > 0 && (\r\n            <button className=\"App-button-option App-card-option\" onClick={loadPrevPage}>\r\n              Prev\r\n            </button>\r\n          )}\r\n          {trades && trades.length >= TRADES_PAGE_SIZE && (\r\n            <button className=\"App-button-option App-card-option\" onClick={loadNextPage}>\r\n              Next\r\n            </button>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nimport { formatAmount, expandDecimals, bigNumberify } from \"../../lib/legacy\";\r\n\r\nimport \"./ExchangeWalletTokens.css\";\r\n\r\nexport default function ExchangeWalletTokens(props) {\r\n  const { tokens, mintingCap, infoTokens, onSelectToken } = props;\r\n\r\n  return (\r\n    <div className=\"ExchangeWalletTokens App-box\">\r\n      {tokens.map((token) => {\r\n        let info = infoTokens ? infoTokens[token.address] : {};\r\n        let mintAmount;\r\n        let balance = info.balance;\r\n        if (mintingCap && info.usdgAmount) {\r\n          mintAmount = mintingCap.sub(info.usdgAmount);\r\n        }\r\n        if (mintAmount && mintAmount.lt(0)) {\r\n          mintAmount = bigNumberify(0);\r\n        }\r\n        let balanceUsd;\r\n        if (balance && info.maxPrice) {\r\n          balanceUsd = balance.mul(info.maxPrice).div(expandDecimals(1, token.decimals));\r\n        }\r\n        return (\r\n          <div className=\"ExchangeWalletTokens-token-row\" onClick={() => onSelectToken(token)} key={token.address}>\r\n            <div className=\"ExchangeWalletTokens-top-row\">\r\n              <div>{token.symbol}</div>\r\n              {balance && (\r\n                <div className=\"align-right\">\r\n                  {balance.gt(0) && formatAmount(balance, token.decimals, 4, true)}\r\n                  {balance.eq(0) && \"-\"}\r\n                </div>\r\n              )}\r\n            </div>\r\n            <div className=\"ExchangeWalletTokens-content-row\">\r\n              <div className=\"ExchangeWalletTokens-token-name\">{token.name}</div>\r\n              {balanceUsd && balanceUsd.gt(0) && (\r\n                <div className=\"align-right\">${formatAmount(balanceUsd, 30, 2, true)}</div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\n\nimport \"./ExchangeBanner.css\";\n\nexport default function ExchangeBanner(props) {\n  const { hideBanner } = props;\n\n  return (\n    <div className=\"ExchangeBanner\">\n      <p className=\"ExchangeBanner-text\">\n        Trade on LeveragePro and win <span className=\"ExchangeBanner-price\">$250.000</span> in prizes! Live until\n        November 30th,{\" \"}\n        <a\n          href=\"https://medium.com/@gmx.io/gmx-trading-competition-win-250-000-usd-in-prizes-1346504b96f6\"\n          target=\"_blank\"\n          className=\"ExchangeBanner-link\"\n          rel=\"noreferrer\"\n        >\n          click here\n        </a>{\" \"}\n        to learn more.\n      </p>\n      <span\n        className=\"ExchangeBanner-close\"\n        onClick={(e) => {\n          hideBanner();\n        }}\n      >\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"11.25\" height=\"11.25\" viewBox=\"0 0 11.25 11.25\">\n          <path\n            id=\"ic_close\"\n            d=\"M11-2.565,6.818-6.75,11-10.935a.844.844,0,0,0,0-1.193.844.844,0,0,0-1.193,0L5.625-7.943,1.44-12.128a.844.844,0,0,0-1.193,0,.844.844,0,0,0,0,1.193L4.432-6.75.247-2.565a.844.844,0,0,0,0,1.193.844.844,0,0,0,1.193,0L5.625-5.557,9.81-1.372a.844.844,0,0,0,1.193,0A.844.844,0,0,0,11-2.565Z\"\n            transform=\"translate(0 12.375)\"\n            fill=\"#fff\"\n          />\n        </svg>\n      </span>\n    </div>\n  );\n}\n","import React, { useEffect, useState, useMemo, useCallback, forwardRef, useImperativeHandle } from \"react\";\nimport { Trans, t } from \"@lingui/macro\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport useSWR from \"swr\";\nimport { ethers } from \"ethers\";\nimport cx from \"classnames\";\n\nimport {\n  FUNDING_RATE_PRECISION,\n  BASIS_POINTS_DIVISOR,\n  MARGIN_FEE_BASIS_POINTS,\n  SWAP,\n  LONG,\n  SHORT,\n  USD_DECIMALS,\n  getExplorerUrl,\n  helperToast,\n  formatAmount,\n  bigNumberify,\n  getTokenInfo,\n  fetcher,\n  getPositionKey,\n  getPositionContractKey,\n  getLeverage,\n  useLocalStorageSerializeKey,\n  useLocalStorageByChainId,\n  getDeltaStr,\n  useChainId,\n  useAccountOrders,\n  getPageTitle,\n} from \"../../lib/legacy\";\nimport { getConstant } from \"../../config/chains\";\nimport { approvePlugin, useInfoTokens, useMinExecutionFee, cancelMultipleOrders } from \"../../domain/legacy\";\n\nimport { getContract } from \"../../config/Addresses\";\nimport { getTokens, getToken, getWhitelistedTokens, getTokenBySymbol } from \"../../config/Tokens\";\n\nimport Reader from \"../../abis/Reader.json\";\nimport VaultV2 from \"../../abis/Vault.json\";\nimport Router from \"../../abis/Router.json\";\nimport Token from \"../../abis/Token.json\";\n\nimport Checkbox from \"../../components/Checkbox/Checkbox\";\nimport SwapBox from \"../../components/Exchange/SwapBox\";\nimport ExchangeTVChart, { getChartToken } from \"../../components/Exchange/ExchangeTVChart\";\nimport PositionsList from \"../../components/Exchange/PositionsList\";\nimport OrdersList from \"../../components/Exchange/OrdersList\";\nimport TradeHistory from \"../../components/Exchange/TradeHistory\";\nimport ExchangeWalletTokens from \"../../components/Exchange/ExchangeWalletTokens\";\nimport ExchangeBanner from \"../../components/Exchange/ExchangeBanner\";\nimport Tab from \"../../components/Tab/Tab\";\nimport Footer from \"../../components/Footer/Footer\";\n\nimport \"./Exchange.css\";\nconst { AddressZero } = ethers.constants;\n\nconst PENDING_POSITION_VALID_DURATION = 600 * 1000;\nconst UPDATED_POSITION_VALID_DURATION = 60 * 1000;\n\nconst notifications = {};\n\nfunction pushSuccessNotification(chainId, message, e) {\n  const { transactionHash } = e;\n  const id = ethers.utils.id(message + transactionHash);\n  if (notifications[id]) {\n    return;\n  }\n\n  notifications[id] = true;\n\n  const txUrl = getExplorerUrl(chainId) + \"tx/\" + transactionHash;\n  helperToast.success(\n    <div>\n      {message}{\" \"}\n      <a href={txUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n        View\n      </a>\n    </div>\n  );\n}\n\nfunction pushErrorNotification(chainId, message, e) {\n  const { transactionHash } = e;\n  const id = ethers.utils.id(message + transactionHash);\n  if (notifications[id]) {\n    return;\n  }\n\n  notifications[id] = true;\n\n  const txUrl = getExplorerUrl(chainId) + \"tx/\" + transactionHash;\n  helperToast.error(\n    <div>\n      {message}{\" \"}\n      <a href={txUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n        View\n      </a>\n    </div>\n  );\n}\n\nfunction getFundingFee(data) {\n  let { entryFundingRate, cumulativeFundingRate, size } = data;\n  if (entryFundingRate && cumulativeFundingRate) {\n    return size.mul(cumulativeFundingRate.sub(entryFundingRate)).div(FUNDING_RATE_PRECISION);\n  }\n  return;\n}\n\nconst getTokenAddress = (token, nativeTokenAddress) => {\n  if (token.address === AddressZero) {\n    return nativeTokenAddress;\n  }\n  return token.address;\n};\n\nfunction applyPendingChanges(position, pendingPositions) {\n  if (!pendingPositions) {\n    return;\n  }\n  const { key } = position;\n\n  if (\n    pendingPositions[key] &&\n    pendingPositions[key].updatedAt &&\n    pendingPositions[key].pendingChanges &&\n    pendingPositions[key].updatedAt + PENDING_POSITION_VALID_DURATION > Date.now()\n  ) {\n    const { pendingChanges } = pendingPositions[key];\n    if (pendingChanges.size && position.size.eq(pendingChanges.size)) {\n      return;\n    }\n\n    if (pendingChanges.expectingCollateralChange && !position.collateral.eq(pendingChanges.collateralSnapshot)) {\n      return;\n    }\n\n    position.hasPendingChanges = true;\n    position.pendingChanges = pendingChanges;\n  }\n}\n\nexport function getPositions(\n  chainId,\n  positionQuery,\n  positionData,\n  infoTokens,\n  includeDelta,\n  showPnlAfterFees,\n  account,\n  pendingPositions,\n  updatedPositions\n) {\n  const propsLength = getConstant(chainId, \"positionReaderPropsLength\");\n  const positions = [];\n  const positionsMap = {};\n  if (!positionData) {\n    return { positions, positionsMap };\n  }\n  const { collateralTokens, indexTokens, isLong } = positionQuery;\n  for (let i = 0; i < collateralTokens.length; i++) {\n    const collateralToken = getTokenInfo(infoTokens, collateralTokens[i], true, getContract(chainId, \"NATIVE_TOKEN\"));\n    const indexToken = getTokenInfo(infoTokens, indexTokens[i], true, getContract(chainId, \"NATIVE_TOKEN\"));\n    const key = getPositionKey(account, collateralTokens[i], indexTokens[i], isLong[i]);\n    let contractKey;\n    if (account) {\n      contractKey = getPositionContractKey(account, collateralTokens[i], indexTokens[i], isLong[i]);\n    }\n\n    const position = {\n      key,\n      contractKey,\n      collateralToken,\n      indexToken,\n      isLong: isLong[i],\n      size: positionData[i * propsLength],\n      collateral: positionData[i * propsLength + 1],\n      averagePrice: positionData[i * propsLength + 2],\n      entryFundingRate: positionData[i * propsLength + 3],\n      cumulativeFundingRate: collateralToken.cumulativeFundingRate,\n      hasRealisedProfit: positionData[i * propsLength + 4].eq(1),\n      realisedPnl: positionData[i * propsLength + 5],\n      lastIncreasedTime: positionData[i * propsLength + 6].toNumber(),\n      hasProfit: positionData[i * propsLength + 7].eq(1),\n      delta: positionData[i * propsLength + 8],\n      markPrice: isLong[i] ? indexToken.minPrice : indexToken.maxPrice,\n    };\n\n    if (\n      updatedPositions &&\n      updatedPositions[key] &&\n      updatedPositions[key].updatedAt &&\n      updatedPositions[key].updatedAt + UPDATED_POSITION_VALID_DURATION > Date.now()\n    ) {\n      const updatedPosition = updatedPositions[key];\n      position.size = updatedPosition.size;\n      position.collateral = updatedPosition.collateral;\n      position.averagePrice = updatedPosition.averagePrice;\n      position.entryFundingRate = updatedPosition.entryFundingRate;\n    }\n\n    let fundingFee = getFundingFee(position);\n    position.fundingFee = fundingFee ? fundingFee : bigNumberify(0);\n    position.collateralAfterFee = position.collateral.sub(position.fundingFee);\n\n    position.closingFee = position.size.mul(MARGIN_FEE_BASIS_POINTS).div(BASIS_POINTS_DIVISOR);\n    position.positionFee = position.size.mul(MARGIN_FEE_BASIS_POINTS).mul(2).div(BASIS_POINTS_DIVISOR);\n    position.totalFees = position.positionFee.add(position.fundingFee);\n\n    position.pendingDelta = position.delta;\n\n    if (position.collateral.gt(0)) {\n      position.hasLowCollateral =\n        position.collateralAfterFee.lt(0) || position.size.div(position.collateralAfterFee.abs()).gt(50);\n\n      if (position.averagePrice && position.markPrice) {\n        const priceDelta = position.averagePrice.gt(position.markPrice)\n          ? position.averagePrice.sub(position.markPrice)\n          : position.markPrice.sub(position.averagePrice);\n        position.pendingDelta = position.size.mul(priceDelta).div(position.averagePrice);\n\n        position.delta = position.pendingDelta;\n\n        if (position.isLong) {\n          position.hasProfit = position.markPrice.gte(position.averagePrice);\n        } else {\n          position.hasProfit = position.markPrice.lte(position.averagePrice);\n        }\n      }\n\n      position.deltaPercentage = position.pendingDelta.mul(BASIS_POINTS_DIVISOR).div(position.collateral);\n\n      const { deltaStr, deltaPercentageStr } = getDeltaStr({\n        delta: position.pendingDelta,\n        deltaPercentage: position.deltaPercentage,\n        hasProfit: position.hasProfit,\n      });\n\n      position.deltaStr = deltaStr;\n      position.deltaPercentageStr = deltaPercentageStr;\n      position.deltaBeforeFeesStr = deltaStr;\n\n      let hasProfitAfterFees;\n      let pendingDeltaAfterFees;\n\n      if (position.hasProfit) {\n        if (position.pendingDelta.gt(position.totalFees)) {\n          hasProfitAfterFees = true;\n          pendingDeltaAfterFees = position.pendingDelta.sub(position.totalFees);\n        } else {\n          hasProfitAfterFees = false;\n          pendingDeltaAfterFees = position.totalFees.sub(position.pendingDelta);\n        }\n      } else {\n        hasProfitAfterFees = false;\n        pendingDeltaAfterFees = position.pendingDelta.add(position.totalFees);\n      }\n\n      position.hasProfitAfterFees = hasProfitAfterFees;\n      position.pendingDeltaAfterFees = pendingDeltaAfterFees;\n      position.deltaPercentageAfterFees = position.pendingDeltaAfterFees\n        .mul(BASIS_POINTS_DIVISOR)\n        .div(position.collateral);\n\n      const { deltaStr: deltaAfterFeesStr, deltaPercentageStr: deltaAfterFeesPercentageStr } = getDeltaStr({\n        delta: position.pendingDeltaAfterFees,\n        deltaPercentage: position.deltaPercentageAfterFees,\n        hasProfit: hasProfitAfterFees,\n      });\n\n      position.deltaAfterFeesStr = deltaAfterFeesStr;\n      position.deltaAfterFeesPercentageStr = deltaAfterFeesPercentageStr;\n\n      if (showPnlAfterFees) {\n        position.deltaStr = position.deltaAfterFeesStr;\n        position.deltaPercentageStr = position.deltaAfterFeesPercentageStr;\n      }\n\n      let netValue = position.hasProfit\n        ? position.collateral.add(position.pendingDelta)\n        : position.collateral.sub(position.pendingDelta);\n\n      netValue = netValue.sub(position.fundingFee);\n\n      if (showPnlAfterFees) {\n        netValue = netValue.sub(position.closingFee);\n      }\n\n      position.netValue = netValue;\n    }\n\n    position.leverage = getLeverage({\n      size: position.size,\n      collateral: position.collateral,\n      entryFundingRate: position.entryFundingRate,\n      cumulativeFundingRate: position.cumulativeFundingRate,\n      hasProfit: position.hasProfit,\n      delta: position.delta,\n      includeDelta,\n    });\n\n    positionsMap[key] = position;\n\n    applyPendingChanges(position, pendingPositions);\n\n    if (position.size.gt(0) || position.hasPendingChanges) {\n      positions.push(position);\n    }\n  }\n\n  return { positions, positionsMap };\n}\n\nexport function getPositionQuery(tokens, nativeTokenAddress) {\n  const collateralTokens = [];\n  const indexTokens = [];\n  const isLong = [];\n\n  for (let i = 0; i < tokens.length; i++) {\n    const token = tokens[i];\n    if (token.isStable) {\n      continue;\n    }\n    if (token.isWrapped) {\n      continue;\n    }\n    collateralTokens.push(getTokenAddress(token, nativeTokenAddress));\n    indexTokens.push(getTokenAddress(token, nativeTokenAddress));\n    isLong.push(true);\n  }\n\n  for (let i = 0; i < tokens.length; i++) {\n    const stableToken = tokens[i];\n    if (!stableToken.isStable) {\n      continue;\n    }\n\n    for (let j = 0; j < tokens.length; j++) {\n      const token = tokens[j];\n      if (token.isStable) {\n        continue;\n      }\n      if (token.isWrapped) {\n        continue;\n      }\n      collateralTokens.push(stableToken.address);\n      indexTokens.push(getTokenAddress(token, nativeTokenAddress));\n      isLong.push(false);\n    }\n  }\n\n  return { collateralTokens, indexTokens, isLong };\n}\n\nexport const Exchange = forwardRef((props, ref) => {\n  const {\n    savedIsPnlInLeverage,\n    setSavedIsPnlInLeverage,\n    savedShowPnlAfterFees,\n    savedSlippageAmount,\n    pendingTxns,\n    setPendingTxns,\n    savedShouldShowPositionLines,\n    setSavedShouldShowPositionLines,\n    connectWallet,\n    savedShouldDisableOrderValidation,\n  } = props;\n  const [showBanner, setShowBanner] = useLocalStorageSerializeKey(\"showBanner\", true);\n  const [bannerHidden, setBannerHidden] = useLocalStorageSerializeKey(\"bannerHidden\", null);\n\n  const [pendingPositions, setPendingPositions] = useState({});\n  const [updatedPositions, setUpdatedPositions] = useState({});\n\n  const hideBanner = () => {\n    const hiddenLimit = new Date(new Date().getTime() + 2 * 24 * 60 * 60 * 1000);\n    setBannerHidden(hiddenLimit);\n    setShowBanner(false);\n  };\n\n  useEffect(() => {\n    if (new Date() > new Date(\"2021-11-30\")) {\n      setShowBanner(false);\n    } else {\n      if (bannerHidden && new Date(bannerHidden) > new Date()) {\n        setShowBanner(false);\n      } else {\n        setBannerHidden(null);\n        setShowBanner(true);\n      }\n    }\n  }, [showBanner, bannerHidden, setBannerHidden, setShowBanner]);\n\n  const { active, account, library } = useWeb3React();\n  const { chainId } = useChainId();\n  const currentAccount = account;\n\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n\n  const vaultAddress = getContract(chainId, \"Vault\");\n  const positionRouterAddress = getContract(chainId, \"PositionRouter\");\n  const readerAddress = getContract(chainId, \"Reader\");\n  const usdgAddress = getContract(chainId, \"USDG\");\n\n  const whitelistedTokens = getWhitelistedTokens(chainId);\n  const whitelistedTokenAddresses = whitelistedTokens.map((token) => token.address);\n\n  const positionQuery = getPositionQuery(whitelistedTokens, nativeTokenAddress);\n\n  const defaultCollateralSymbol = getConstant(chainId, \"defaultCollateralSymbol\");\n  const defaultTokenSelection = useMemo(\n    () => ({\n      [SWAP]: {\n        from: AddressZero,\n        to: getTokenBySymbol(chainId, defaultCollateralSymbol).address,\n      },\n      [LONG]: {\n        from: AddressZero,\n        to: AddressZero,\n      },\n      [SHORT]: {\n        from: getTokenBySymbol(chainId, defaultCollateralSymbol).address,\n        to: AddressZero,\n      },\n    }),\n    [chainId, defaultCollateralSymbol]\n  );\n\n  const [tokenSelection, setTokenSelection] = useLocalStorageByChainId(\n    chainId,\n    \"Exchange-token-selection-v2\",\n    defaultTokenSelection\n  );\n  const [swapOption, setSwapOption] = useLocalStorageByChainId(chainId, \"Swap-option-v2\", LONG);\n\n  const fromTokenAddress = tokenSelection[swapOption].from;\n  const toTokenAddress = tokenSelection[swapOption].to;\n\n  const setFromTokenAddress = useCallback(\n    (selectedSwapOption, address) => {\n      const newTokenSelection = JSON.parse(JSON.stringify(tokenSelection));\n      newTokenSelection[selectedSwapOption].from = address;\n      setTokenSelection(newTokenSelection);\n    },\n    [tokenSelection, setTokenSelection]\n  );\n\n  const setToTokenAddress = useCallback(\n    (selectedSwapOption, address) => {\n      const newTokenSelection = JSON.parse(JSON.stringify(tokenSelection));\n      newTokenSelection[selectedSwapOption].to = address;\n      if (selectedSwapOption === LONG || selectedSwapOption === SHORT) {\n        newTokenSelection[LONG].to = address;\n        newTokenSelection[SHORT].to = address;\n      }\n      setTokenSelection(newTokenSelection);\n    },\n    [tokenSelection, setTokenSelection]\n  );\n\n  const setMarket = (selectedSwapOption, toTokenAddress) => {\n    setSwapOption(selectedSwapOption);\n    const newTokenSelection = JSON.parse(JSON.stringify(tokenSelection));\n    newTokenSelection[selectedSwapOption].to = toTokenAddress;\n    if (selectedSwapOption === LONG || selectedSwapOption === SHORT) {\n      newTokenSelection[LONG].to = toTokenAddress;\n      newTokenSelection[SHORT].to = toTokenAddress;\n    }\n    setTokenSelection(newTokenSelection);\n  };\n\n  const [isConfirming, setIsConfirming] = useState(false);\n  const [isPendingConfirmation, setIsPendingConfirmation] = useState(false);\n\n  const tokens = getTokens(chainId);\n\n  const tokenAddresses = tokens.map((token) => token.address);\n  const { data: tokenBalances } = useSWR(active && [active, chainId, readerAddress, \"getTokenBalances\", account], {\n    fetcher: fetcher(library, Reader, [tokenAddresses]),\n  });\n\n  const { data: positionData, error: positionDataError } = useSWR(\n    active && [active, chainId, readerAddress, \"getPositions\", vaultAddress, account],\n    {\n      fetcher: fetcher(library, Reader, [\n        positionQuery.collateralTokens,\n        positionQuery.indexTokens,\n        positionQuery.isLong,\n      ]),\n    }\n  );\n\n  const positionsDataIsLoading = active && !positionData && !positionDataError;\n\n  const { data: fundingRateInfo } = useSWR([active, chainId, readerAddress, \"getFundingRates\"], {\n    fetcher: fetcher(library, Reader, [vaultAddress, nativeTokenAddress, whitelistedTokenAddresses]),\n  });\n\n  const { data: totalTokenWeights } = useSWR(\n    [`Exchange:totalTokenWeights:${active}`, chainId, vaultAddress, \"totalTokenWeights\"],\n    {\n      fetcher: fetcher(library, VaultV2),\n    }\n  );\n\n  const { data: usdgSupply } = useSWR([`Exchange:usdgSupply:${active}`, chainId, usdgAddress, \"totalSupply\"], {\n    fetcher: fetcher(library, Token),\n  });\n\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const routerAddress = getContract(chainId, \"Router\");\n  const { data: orderBookApproved } = useSWR(\n    active && [active, chainId, routerAddress, \"approvedPlugins\", account, orderBookAddress],\n    {\n      fetcher: fetcher(library, Router),\n    }\n  );\n\n  const { data: positionRouterApproved } = useSWR(\n    active && [active, chainId, routerAddress, \"approvedPlugins\", account, positionRouterAddress],\n    {\n      fetcher: fetcher(library, Router),\n    }\n  );\n\n  const { infoTokens } = useInfoTokens(library, chainId, active, tokenBalances, fundingRateInfo);\n  const { minExecutionFee, minExecutionFeeUSD, minExecutionFeeErrorMessage } = useMinExecutionFee(\n    library,\n    active,\n    chainId,\n    infoTokens\n  );\n\n  useEffect(() => {\n    const fromToken = getTokenInfo(infoTokens, fromTokenAddress);\n    const toToken = getTokenInfo(infoTokens, toTokenAddress);\n    let selectedToken = getChartToken(swapOption, fromToken, toToken, chainId);\n    let currentTokenPriceStr = formatAmount(selectedToken.maxPrice, USD_DECIMALS, 2, true);\n    let title = getPageTitle(currentTokenPriceStr + ` | ${selectedToken.symbol}${selectedToken.isStable ? \"\" : \"USD\"}`);\n    document.title = title;\n  }, [tokenSelection, swapOption, infoTokens, chainId, fromTokenAddress, toTokenAddress]);\n\n  const { positions, positionsMap } = getPositions(\n    chainId,\n    positionQuery,\n    positionData,\n    infoTokens,\n    savedIsPnlInLeverage,\n    savedShowPnlAfterFees,\n    account,\n    pendingPositions,\n    updatedPositions\n  );\n\n  useImperativeHandle(ref, () => ({\n    onUpdatePosition(key, size, collateral, averagePrice, entryFundingRate, reserveAmount, realisedPnl) {\n      for (let i = 0; i < positions.length; i++) {\n        const position = positions[i];\n        if (position.contractKey === key) {\n          updatedPositions[position.key] = {\n            size,\n            collateral,\n            averagePrice,\n            entryFundingRate,\n            reserveAmount,\n            realisedPnl,\n            updatedAt: Date.now(),\n          };\n          setUpdatedPositions({ ...updatedPositions });\n          break;\n        }\n      }\n    },\n    onClosePosition(key, size, collateral, averagePrice, entryFundingRate, reserveAmount, realisedPnl, e) {\n      for (let i = 0; i < positions.length; i++) {\n        const position = positions[i];\n        if (position.contractKey === key) {\n          updatedPositions[position.key] = {\n            size: bigNumberify(0),\n            collateral: bigNumberify(0),\n            averagePrice,\n            entryFundingRate,\n            reserveAmount,\n            realisedPnl,\n            updatedAt: Date.now(),\n          };\n          setUpdatedPositions({ ...updatedPositions });\n          break;\n        }\n      }\n    },\n\n    onIncreasePosition(key, account, collateralToken, indexToken, collateralDelta, sizeDelta, isLong, price, fee, e) {\n      if (account !== currentAccount) {\n        return;\n      }\n\n      const indexTokenItem = getToken(chainId, indexToken);\n      const tokenSymbol = indexTokenItem.isWrapped ? getConstant(chainId, \"nativeTokenSymbol\") : indexTokenItem.symbol;\n\n      let message;\n      if (sizeDelta.eq(0)) {\n        message = `Deposited ${formatAmount(collateralDelta, USD_DECIMALS, 2, true)} USD into ${tokenSymbol} ${\n          isLong ? \"Long\" : \"Short.\"\n        }`;\n      } else {\n        message = `Increased ${tokenSymbol} ${isLong ? \"Long\" : \"Short\"}, +${formatAmount(\n          sizeDelta,\n          USD_DECIMALS,\n          2,\n          true\n        )} USD.`;\n      }\n\n      pushSuccessNotification(chainId, message, e);\n    },\n\n    onDecreasePosition(key, account, collateralToken, indexToken, collateralDelta, sizeDelta, isLong, price, fee, e) {\n      if (account !== currentAccount) {\n        return;\n      }\n\n      const indexTokenItem = getToken(chainId, indexToken);\n      const tokenSymbol = indexTokenItem.isWrapped ? getConstant(chainId, \"nativeTokenSymbol\") : indexTokenItem.symbol;\n\n      let message;\n      if (sizeDelta.eq(0)) {\n        message = `Withdrew ${formatAmount(collateralDelta, USD_DECIMALS, 2, true)} USD from ${tokenSymbol} ${\n          isLong ? \"Long\" : \"Short\"\n        }.`;\n      } else {\n        message = `Decreased ${tokenSymbol} ${isLong ? \"Long\" : \"Short\"}, -${formatAmount(\n          sizeDelta,\n          USD_DECIMALS,\n          2,\n          true\n        )} USD.`;\n      }\n\n      pushSuccessNotification(chainId, message, e);\n    },\n\n    onCancelIncreasePosition(\n      account,\n      path,\n      indexToken,\n      amountIn,\n      minOut,\n      sizeDelta,\n      isLong,\n      acceptablePrice,\n      executionFee,\n      blockGap,\n      timeGap,\n      e\n    ) {\n      if (account !== currentAccount) {\n        return;\n      }\n      const indexTokenItem = getToken(chainId, indexToken);\n      const tokenSymbol = indexTokenItem.isWrapped ? getConstant(chainId, \"nativeTokenSymbol\") : indexTokenItem.symbol;\n\n      const message = `Could not increase ${tokenSymbol} ${\n        isLong ? \"Long\" : \"Short\"\n      } within the allowed slippage, you can adjust the allowed slippage in the settings on the top right of the page.`;\n\n      pushErrorNotification(chainId, message, e);\n\n      const key = getPositionKey(account, path[path.length - 1], indexToken, isLong);\n      pendingPositions[key] = {};\n      setPendingPositions({ ...pendingPositions });\n    },\n\n    onCancelDecreasePosition(\n      account,\n      path,\n      indexToken,\n      collateralDelta,\n      sizeDelta,\n      isLong,\n      receiver,\n      acceptablePrice,\n      minOut,\n      executionFee,\n      blockGap,\n      timeGap,\n      e\n    ) {\n      if (account !== currentAccount) {\n        return;\n      }\n      const indexTokenItem = getToken(chainId, indexToken);\n      const tokenSymbol = indexTokenItem.isWrapped ? getConstant(chainId, \"nativeTokenSymbol\") : indexTokenItem.symbol;\n\n      const message = `Could not decrease ${tokenSymbol} ${\n        isLong ? \"Long\" : \"Short\"\n      } within the allowed slippage, you can adjust the allowed slippage in the settings on the top right of the page.`;\n\n      pushErrorNotification(chainId, message, e);\n\n      const key = getPositionKey(account, path[path.length - 1], indexToken, isLong);\n      pendingPositions[key] = {};\n      setPendingPositions({ ...pendingPositions });\n    },\n  }));\n\n  const flagOrdersEnabled = true;\n  const [orders] = useAccountOrders(flagOrdersEnabled);\n\n  const [isWaitingForPluginApproval, setIsWaitingForPluginApproval] = useState(false);\n  const [isWaitingForPositionRouterApproval, setIsWaitingForPositionRouterApproval] = useState(false);\n  const [isPluginApproving, setIsPluginApproving] = useState(false);\n  const [isPositionRouterApproving, setIsPositionRouterApproving] = useState(false);\n  const [isCancelMultipleOrderProcessing, setIsCancelMultipleOrderProcessing] = useState(false);\n  const [cancelOrderIdList, setCancelOrderIdList] = useState([]);\n\n  const onMultipleCancelClick = useCallback(\n    async function () {\n      setIsCancelMultipleOrderProcessing(true);\n      try {\n        const tx = await cancelMultipleOrders(chainId, library, cancelOrderIdList, {\n          successMsg: t`Orders cancelled.`,\n          failMsg: t`Cancel failed.`,\n          sentMsg: t`Cancel submitted.`,\n          pendingTxns,\n          setPendingTxns,\n        });\n        const receipt = await tx.wait();\n        if (receipt.status === 1) {\n          setCancelOrderIdList([]);\n        }\n      } catch (error) {\n        console.error(error);\n      } finally {\n        setIsCancelMultipleOrderProcessing(false);\n      }\n    },\n    [\n      chainId,\n      library,\n      pendingTxns,\n      setPendingTxns,\n      setCancelOrderIdList,\n      cancelOrderIdList,\n      setIsCancelMultipleOrderProcessing,\n    ]\n  );\n\n  const approveOrderBook = () => {\n    setIsPluginApproving(true);\n    return approvePlugin(chainId, orderBookAddress, {\n      library,\n      pendingTxns,\n      setPendingTxns,\n      sentMsg: t`Enable orders sent.`,\n      failMsg: t`Enable orders failed.`,\n    })\n      .then(() => {\n        setIsWaitingForPluginApproval(true);\n      })\n      .finally(() => {\n        setIsPluginApproving(false);\n      });\n  };\n\n  const approvePositionRouter = ({ sentMsg, failMsg }) => {\n    setIsPositionRouterApproving(true);\n    return approvePlugin(chainId, positionRouterAddress, {\n      library,\n      pendingTxns,\n      setPendingTxns,\n      sentMsg,\n      failMsg,\n    })\n      .then(() => {\n        setIsWaitingForPositionRouterApproval(true);\n      })\n      .finally(() => {\n        setIsPositionRouterApproving(false);\n      });\n  };\n\n  const LIST_SECTIONS = [\"Positions\", flagOrdersEnabled ? \"Orders\" : undefined, \"Trades\"].filter(Boolean);\n  let [listSection, setListSection] = useLocalStorageByChainId(chainId, \"List-section-v2\", LIST_SECTIONS[0]);\n  const LIST_SECTIONS_LABELS = {\n    Orders: orders.length ? `Orders (${orders.length})` : undefined,\n    Positions: positions.length ? `Positions (${positions.length})` : undefined,\n  };\n  if (!LIST_SECTIONS.includes(listSection)) {\n    listSection = LIST_SECTIONS[0];\n  }\n\n  if (!getToken(chainId, toTokenAddress)) {\n    return null;\n  }\n\n  const renderCancelOrderButton = () => {\n    const orderText = cancelOrderIdList.length > 1 ? t`orders` : t`order`;\n    if (cancelOrderIdList.length === 0) return;\n    return (\n      <button\n        className=\"muted font-base cancel-order-btn\"\n        disabled={isCancelMultipleOrderProcessing}\n        type=\"button\"\n        onClick={onMultipleCancelClick}\n      >\n        <Trans>\n          Cancel {cancelOrderIdList.length} {orderText}\n        </Trans>\n      </button>\n    );\n  };\n\n  const getListSection = () => {\n    return (\n      <div>\n        <div className=\"Exchange-list-tab-container\">\n          <Tab\n            options={LIST_SECTIONS}\n            optionLabels={LIST_SECTIONS_LABELS}\n            option={listSection}\n            onChange={(section) => setListSection(section)}\n            type=\"inline\"\n            className=\"Exchange-list-tabs\"\n          />\n          <div className=\"align-right Exchange-should-show-position-lines\">\n            {renderCancelOrderButton()}\n            <Checkbox\n              isChecked={savedShouldShowPositionLines}\n              setIsChecked={setSavedShouldShowPositionLines}\n              className={cx(\"muted chart-positions\", { active: savedShouldShowPositionLines })}\n            >\n              <span>\n                <Trans>Chart positions</Trans>\n              </span>\n            </Checkbox>\n          </div>\n        </div>\n        {listSection === \"Positions\" && (\n          <PositionsList\n            positionsDataIsLoading={positionsDataIsLoading}\n            pendingPositions={pendingPositions}\n            setPendingPositions={setPendingPositions}\n            setListSection={setListSection}\n            setIsWaitingForPluginApproval={setIsWaitingForPluginApproval}\n            setIsWaitingForPositionRouterApproval={setIsWaitingForPositionRouterApproval}\n            approveOrderBook={approveOrderBook}\n            approvePositionRouter={approvePositionRouter}\n            isPluginApproving={isPluginApproving}\n            isPositionRouterApproving={isPositionRouterApproving}\n            isWaitingForPluginApproval={isWaitingForPluginApproval}\n            isWaitingForPositionRouterApproval={isWaitingForPositionRouterApproval}\n            orderBookApproved={orderBookApproved}\n            positionRouterApproved={positionRouterApproved}\n            positions={positions}\n            positionsMap={positionsMap}\n            infoTokens={infoTokens}\n            active={active}\n            account={account}\n            library={library}\n            pendingTxns={pendingTxns}\n            setPendingTxns={setPendingTxns}\n            flagOrdersEnabled={flagOrdersEnabled}\n            savedIsPnlInLeverage={savedIsPnlInLeverage}\n            chainId={chainId}\n            nativeTokenAddress={nativeTokenAddress}\n            setMarket={setMarket}\n            orders={orders}\n            showPnlAfterFees={savedShowPnlAfterFees}\n            minExecutionFee={minExecutionFee}\n            minExecutionFeeUSD={minExecutionFeeUSD}\n            minExecutionFeeErrorMessage={minExecutionFeeErrorMessage}\n            usdgSupply={usdgSupply}\n            totalTokenWeights={totalTokenWeights}\n          />\n        )}\n        {listSection === \"Orders\" && (\n          <OrdersList\n            account={account}\n            active={active}\n            library={library}\n            pendingTxns={pendingTxns}\n            setPendingTxns={setPendingTxns}\n            infoTokens={infoTokens}\n            positionsMap={positionsMap}\n            chainId={chainId}\n            orders={orders}\n            totalTokenWeights={totalTokenWeights}\n            usdgSupply={usdgSupply}\n            savedShouldDisableOrderValidation={savedShouldDisableOrderValidation}\n            cancelOrderIdList={cancelOrderIdList}\n            setCancelOrderIdList={setCancelOrderIdList}\n          />\n        )}\n        {listSection === \"Trades\" && (\n          <TradeHistory\n            account={account}\n            forSingleAccount={true}\n            infoTokens={infoTokens}\n            getTokenInfo={getTokenInfo}\n            chainId={chainId}\n            nativeTokenAddress={nativeTokenAddress}\n            shouldShowPaginationButtons={true}\n          />\n        )}\n      </div>\n    );\n  };\n\n  const onSelectWalletToken = (token) => {\n    setFromTokenAddress(swapOption, token.address);\n  };\n\n  const renderChart = () => {\n    return (\n      <ExchangeTVChart\n        fromTokenAddress={fromTokenAddress}\n        toTokenAddress={toTokenAddress}\n        infoTokens={infoTokens}\n        swapOption={swapOption}\n        chainId={chainId}\n        positions={positions}\n        savedShouldShowPositionLines={savedShouldShowPositionLines}\n        orders={orders}\n        setToTokenAddress={setToTokenAddress}\n      />\n    );\n  };\n\n  return (\n    <div className=\"Exchange page-layout\">\n      {showBanner && <ExchangeBanner hideBanner={hideBanner} />}\n      <div className=\"Exchange-content\">\n        <div className=\"Exchange-left\">\n          {renderChart()}\n          <div className=\"Exchange-lists large\">{getListSection()}</div>\n        </div>\n        <div className=\"Exchange-right\">\n          <SwapBox\n            pendingPositions={pendingPositions}\n            setPendingPositions={setPendingPositions}\n            setIsWaitingForPluginApproval={setIsWaitingForPluginApproval}\n            setIsWaitingForPositionRouterApproval={setIsWaitingForPositionRouterApproval}\n            approveOrderBook={approveOrderBook}\n            approvePositionRouter={approvePositionRouter}\n            isPluginApproving={isPluginApproving}\n            isPositionRouterApproving={isPositionRouterApproving}\n            isWaitingForPluginApproval={isWaitingForPluginApproval}\n            isWaitingForPositionRouterApproval={isWaitingForPositionRouterApproval}\n            orderBookApproved={orderBookApproved}\n            positionRouterApproved={positionRouterApproved}\n            orders={orders}\n            flagOrdersEnabled={flagOrdersEnabled}\n            chainId={chainId}\n            infoTokens={infoTokens}\n            active={active}\n            connectWallet={connectWallet}\n            library={library}\n            account={account}\n            positionsMap={positionsMap}\n            fromTokenAddress={fromTokenAddress}\n            setFromTokenAddress={setFromTokenAddress}\n            toTokenAddress={toTokenAddress}\n            setToTokenAddress={setToTokenAddress}\n            swapOption={swapOption}\n            setSwapOption={setSwapOption}\n            pendingTxns={pendingTxns}\n            setPendingTxns={setPendingTxns}\n            tokenSelection={tokenSelection}\n            setTokenSelection={setTokenSelection}\n            isConfirming={isConfirming}\n            setIsConfirming={setIsConfirming}\n            isPendingConfirmation={isPendingConfirmation}\n            setIsPendingConfirmation={setIsPendingConfirmation}\n            savedIsPnlInLeverage={savedIsPnlInLeverage}\n            setSavedIsPnlInLeverage={setSavedIsPnlInLeverage}\n            nativeTokenAddress={nativeTokenAddress}\n            savedSlippageAmount={savedSlippageAmount}\n            totalTokenWeights={totalTokenWeights}\n            usdgSupply={usdgSupply}\n            savedShouldDisableOrderValidation={savedShouldDisableOrderValidation}\n            minExecutionFee={minExecutionFee}\n            minExecutionFeeUSD={minExecutionFeeUSD}\n            minExecutionFeeErrorMessage={minExecutionFeeErrorMessage}\n          />\n          <div className=\"Exchange-wallet-tokens\">\n            <div className=\"Exchange-wallet-tokens-content\">\n              <ExchangeWalletTokens tokens={tokens} infoTokens={infoTokens} onSelectToken={onSelectWalletToken} />\n            </div>\n          </div>\n        </div>\n        <div className=\"Exchange-lists small\">{getListSection()}</div>\n      </div>\n      <Footer />\n    </div>\n  );\n});\n","import React from \"react\";\r\nimport useSWR from \"swr\";\r\nimport { ethers } from \"ethers\";\r\nimport { useWeb3React } from \"@web3-react/core\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nimport \"./Actions.css\";\r\n\r\nimport { getContract } from \"../../config/Addresses\";\r\nimport { formatAmount, fetcher, getTokenInfo, getServerBaseUrl, useChainId, useAccountOrders } from \"../../lib/legacy\";\r\n\r\nimport { useInfoTokens } from \"../../domain/legacy\";\r\nimport { getToken, getTokens, getWhitelistedTokens } from \"../../config/Tokens\";\r\nimport { getPositions, getPositionQuery } from \"../Exchange/Exchange\";\r\n\r\nimport PositionsList from \"../../components/Exchange/PositionsList\";\r\nimport OrdersList from \"../../components/Exchange/OrdersList\";\r\n\r\nimport TradeHistory from \"../../components/Exchange/TradeHistory\";\r\nimport Reader from \"../../abis/Reader.json\";\r\n\r\nimport { Trans, t } from \"@lingui/macro\";\r\n\r\nconst USD_DECIMALS = 30;\r\n\r\nexport default function Actions() {\r\n  const { account } = useParams();\r\n  const { active, library } = useWeb3React();\r\n\r\n  const { chainId } = useChainId();\r\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\r\n  const vaultAddress = getContract(chainId, \"Vault\");\r\n  const readerAddress = getContract(chainId, \"Reader\");\r\n\r\n  const shouldShowPnl = false;\r\n\r\n  let checkSummedAccount = \"\";\r\n  if (ethers.utils.isAddress(account)) {\r\n    checkSummedAccount = ethers.utils.getAddress(account);\r\n  }\r\n  const pnlUrl = `${getServerBaseUrl(chainId)}/pnl?account=${checkSummedAccount}`;\r\n  const { data: pnlData } = useSWR([pnlUrl], {\r\n    fetcher: (...args) => fetch(...args).then((res) => res.json()),\r\n  });\r\n\r\n  const tokens = getTokens(chainId);\r\n  const whitelistedTokens = getWhitelistedTokens(chainId);\r\n  const positionQuery = getPositionQuery(whitelistedTokens, nativeTokenAddress);\r\n\r\n  const whitelistedTokenAddresses = whitelistedTokens.map((token) => token.address);\r\n  const tokenAddresses = tokens.map((token) => token.address);\r\n  const { data: tokenBalances } = useSWR([active, chainId, readerAddress, \"getTokenBalances\", account], {\r\n    fetcher: fetcher(library, Reader, [tokenAddresses]),\r\n  });\r\n\r\n  const { data: positionData } = useSWR([active, chainId, readerAddress, \"getPositions\", vaultAddress, account], {\r\n    fetcher: fetcher(library, Reader, [\r\n      positionQuery.collateralTokens,\r\n      positionQuery.indexTokens,\r\n      positionQuery.isLong,\r\n    ]),\r\n  });\r\n\r\n  const { data: fundingRateInfo } = useSWR([active, chainId, readerAddress, \"getFundingRates\"], {\r\n    fetcher: fetcher(library, Reader, [vaultAddress, nativeTokenAddress, whitelistedTokenAddresses]),\r\n  });\r\n\r\n  const { infoTokens } = useInfoTokens(library, chainId, active, tokenBalances, fundingRateInfo);\r\n  const { positions, positionsMap } = getPositions(\r\n    chainId,\r\n    positionQuery,\r\n    positionData,\r\n    infoTokens,\r\n    false,\r\n    false,\r\n    checkSummedAccount,\r\n    undefined,\r\n    undefined\r\n  );\r\n\r\n  const flagOrdersEnabled = true;\r\n  const [orders, updateOrders] = useAccountOrders(flagOrdersEnabled, checkSummedAccount);\r\n\r\n  return (\r\n    <div className=\"Actions\">\r\n      {checkSummedAccount.length > 0 && (\r\n        <div className=\"Actions-section\">\r\n          <Trans>Account</Trans>: {checkSummedAccount}\r\n        </div>\r\n      )}\r\n      {shouldShowPnl && (\r\n        <div className=\"Actions-section\">\r\n          <div className=\"Actions-title\">\r\n            <Trans>PnL</Trans>\r\n          </div>\r\n          {(!pnlData || pnlData.length === 0) && (\r\n            <div>\r\n              <Trans>No PnLs found</Trans>\r\n            </div>\r\n          )}\r\n          {pnlData &&\r\n            pnlData.length > 0 &&\r\n            pnlData.map((pnlRow, index) => {\r\n              const token = getToken(chainId, pnlRow.data.indexToken);\r\n              return (\r\n                <div className=\"TradeHistory-row App-box App-box-border\" key={index}>\r\n                  <div>\r\n                    {token.symbol} {pnlRow.data.isLong ? t`Long` : t`Short`} <Trans>Profit</Trans>:{\" \"}\r\n                    {formatAmount(pnlRow.data.profit, USD_DECIMALS, 2, true)} USD\r\n                  </div>\r\n                  <div>\r\n                    {token.symbol} {pnlRow.data.isLong ? t`Long` : t`Short`} <Trans>Loss</Trans>:{\" \"}\r\n                    {formatAmount(pnlRow.data.loss, USD_DECIMALS, 2, true)} USD\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n        </div>\r\n      )}\r\n      {checkSummedAccount.length > 0 && (\r\n        <div className=\"Actions-section\">\r\n          <div className=\"Actions-title\">\r\n            <Trans>Positions</Trans>\r\n          </div>\r\n          <PositionsList\r\n            positions={positions}\r\n            positionsMap={positionsMap}\r\n            infoTokens={infoTokens}\r\n            active={active}\r\n            orders={orders}\r\n            account={checkSummedAccount}\r\n            library={library}\r\n            flagOrdersEnabled={false}\r\n            savedIsPnlInLeverage={false}\r\n            chainId={chainId}\r\n            nativeTokenAddress={nativeTokenAddress}\r\n            showPnlAfterFees={false}\r\n          />\r\n        </div>\r\n      )}\r\n      {flagOrdersEnabled && checkSummedAccount.length > 0 && (\r\n        <div className=\"Actions-section\">\r\n          <div className=\"Actions-title\">\r\n            <Trans>Orders</Trans>\r\n          </div>\r\n          <OrdersList\r\n            account={checkSummedAccount}\r\n            infoTokens={infoTokens}\r\n            positionsMap={positionsMap}\r\n            chainId={chainId}\r\n            orders={orders}\r\n            updateOrders={updateOrders}\r\n            hideActions\r\n          />\r\n        </div>\r\n      )}\r\n      <div className=\"Actions-section\">\r\n        <div className=\"Actions-title\">\r\n          <Trans>Actions</Trans>\r\n        </div>\r\n        <TradeHistory\r\n          account={checkSummedAccount}\r\n          infoTokens={infoTokens}\r\n          getTokenInfo={getTokenInfo}\r\n          chainId={chainId}\r\n          nativeTokenAddress={nativeTokenAddress}\r\n          shouldShowPaginationButtons={true}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useWeb3React } from \"@web3-react/core\";\nimport cx from \"classnames\";\n\nimport { NavLink } from \"react-router-dom\";\n\nimport { getContract } from \"../../config/Addresses\";\nimport { useAllOrders, useAllOrdersStats, usePositionsForOrders } from \"../../domain/legacy\";\nimport {\n  USD_DECIMALS,\n  DECREASE,\n  INCREASE,\n  SWAP,\n  useChainId,\n  formatAmount,\n  shortenAddress,\n  getTokenInfo,\n  getExchangeRateDisplay,\n  getExchangeRate,\n  shouldInvertTriggerRatio,\n  formatDateTime,\n  getOrderKey,\n} from \"../../lib/legacy\";\n\nimport * as Api from \"../../domain/legacy\";\n\nimport \"./OrdersOverview.css\";\n\nexport default function OrdersOverview() {\n  const { chainId } = useChainId();\n  const { library, account, active } = useWeb3React();\n\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n\n  const { infoTokens } = Api.useInfoTokens(library, chainId, active, undefined, undefined);\n\n  const orders = useAllOrders(chainId, library);\n  const stats = useAllOrdersStats(chainId);\n\n  const positionsForOrders = usePositionsForOrders(\n    chainId,\n    library,\n    orders.filter((order) => order.type === DECREASE)\n  );\n\n  let openTotal;\n  let executedTotal;\n  let cancelledTotal;\n\n  if (stats) {\n    openTotal = stats.openDecrease + stats.openIncrease + stats.openSwap;\n    executedTotal = stats.executedDecrease + stats.executedIncrease + stats.executedSwap;\n    cancelledTotal = stats.cancelledDecrease + stats.cancelledIncrease + stats.cancelledSwap;\n  }\n\n  const NEAR_TRESHOLD = 98;\n\n  const executeOrder = (evt, order) => {\n    evt.preventDefault();\n\n    const params = [chainId, library, order.account, order.index, account];\n    let method;\n    if (order.type === \"Swap\") {\n      method = \"executeSwapOrder\";\n    } else if (order.type === \"Increase\") {\n      method = \"executeIncreaseOrder\";\n    } else {\n      method = \"executeDecreaseOrder\";\n    }\n    return Api[method](...params);\n  };\n\n  return (\n    <div className=\"Orders-overview\">\n      {stats && (\n        <p className=\"Orders-overview-stats\">\n          Total active: {openTotal}, executed: {executedTotal}, cancelled: {cancelledTotal}\n          <br />\n          Increase active: {stats.openIncrease}, executed: {stats.executedIncrease}, cancelled:{\" \"}\n          {stats.cancelledIncrease}\n          <br />\n          Decrease active: {stats.openDecrease}, executed: {stats.executedDecrease}, cancelled:{\" \"}\n          {stats.cancelledDecrease}\n          <br />\n          Swap active: {stats.openSwap}, executed: {stats.executedSwap}, cancelled: {stats.cancelledSwap}\n          <br />\n        </p>\n      )}\n      <p>\n        <span className=\"positive\">Price conditions are met</span>\n        <br />\n        <span style={{ color: \"orange\" }}>Close to execution price</span>\n        <br />\n        <span className=\"negative\">Can't execute because of an error</span>\n      </p>\n      <table className=\"Orders-overview-table\">\n        <thead>\n          <tr>\n            <th>Type</th>\n            <th colSpan=\"2\">Order</th>\n            <th>Price</th>\n            <th>Mark Price</th>\n            <th>Diff</th>\n            <th>Account</th>\n            <th>Created At</th>\n            <th>Index</th>\n            <th></th>\n          </tr>\n        </thead>\n        <tbody>\n          {orders.map((order) => {\n            const { type } = order;\n            const key = getOrderKey(order);\n            if (type === SWAP) {\n              const fromToken = getTokenInfo(infoTokens, order.path[0], true, nativeTokenAddress);\n              const toTokenAddress = order.path[order.path.length - 1];\n              const toToken = getTokenInfo(infoTokens, toTokenAddress, order.shouldUnwrap, nativeTokenAddress);\n\n              let markExchangeRate;\n              let prefix;\n              let shouldExecute;\n              let nearExecute;\n              let diffPercent;\n              let invalidToken = false;\n              let error;\n              if (fromToken && toToken) {\n                const invert = shouldInvertTriggerRatio(fromToken, toToken);\n                markExchangeRate = getExchangeRate(fromToken, toToken);\n                prefix =\n                  (order.triggerAboveThreshold && !invert) || (!order.triggerAboveThreshold && invert) ? \"> \" : \"< \";\n                shouldExecute = markExchangeRate && markExchangeRate.lt(order.triggerRatio);\n                nearExecute = markExchangeRate && markExchangeRate.lt(order.triggerRatio.mul(100).div(NEAR_TRESHOLD));\n\n                if (markExchangeRate) {\n                  const diff = order.triggerRatio.gt(markExchangeRate)\n                    ? order.triggerRatio.sub(markExchangeRate)\n                    : markExchangeRate.sub(order.triggerRatio);\n                  diffPercent = diff.mul(10000).div(markExchangeRate);\n                }\n              } else {\n                invalidToken = true;\n                error = `Invalid token fromToken: \"${order.path0}\" toToken: \"${toTokenAddress}\"`;\n              }\n\n              return (\n                <tr key={key}>\n                  <td>Swap</td>\n                  <td colSpan=\"2\">\n                    {!invalidToken && (\n                      <>\n                        {formatAmount(order.amountIn, fromToken.decimals, 4, true)} {fromToken.symbol}\n                        &nbsp;for&nbsp;\n                        {formatAmount(order.minOut, toToken.decimals, 4, true)} {toToken.symbol}\n                      </>\n                    )}\n                  </td>\n                  <td className={cx({ positive: shouldExecute, near: !shouldExecute && nearExecute })}>\n                    {!invalidToken && prefix}\n                    {getExchangeRateDisplay(order.triggerRatio, fromToken, toToken)}\n                  </td>\n                  <td className={cx({ positive: shouldExecute, near: !shouldExecute && nearExecute })}>\n                    {getExchangeRateDisplay(markExchangeRate, fromToken, toToken)}\n                  </td>\n                  <td className={cx({ positive: shouldExecute, near: !shouldExecute && nearExecute })}>\n                    {formatAmount(diffPercent, 2, 2)}%\n                  </td>\n                  <td>\n                    <NavLink to={`/actions/${order.account}`}>{shortenAddress(order.account)}</NavLink>\n                  </td>\n                  <td>{formatDateTime(order.createdTimestamp)}</td>\n                  <td>{order.index}</td>\n                  <td className=\"negative\">{error}</td>\n                  <td>\n                    <button className=\"Orders-overview-action\" onClick={(evt) => executeOrder(evt, order)}>\n                      Execute\n                    </button>\n                  </td>\n                </tr>\n              );\n            } else {\n              const indexToken = getTokenInfo(infoTokens, order.indexToken, true, nativeTokenAddress);\n              const collateralToken = getTokenInfo(infoTokens, order.collateralToken, true, nativeTokenAddress);\n              const purchaseToken = getTokenInfo(infoTokens, order.purchaseToken);\n\n              let markPrice;\n              let error;\n              if (indexToken && collateralToken && (order.type === DECREASE || purchaseToken)) {\n                markPrice = order.triggerAboveThreshold ? indexToken.minPrice : indexToken.maxPrice;\n              } else {\n                error = `Invalid token indexToken: \"${order.indexToken}\" collateralToken: \"${order.collateralToken}\"`;\n                if (order.type === \"increase\") {\n                  error += ` purchaseToken: ${order.purchaseToken}`;\n                }\n              }\n\n              let shouldExecute;\n              let nearExecute;\n              let diffPercent;\n              if (markPrice) {\n                shouldExecute = order.triggerAboveThreshold\n                  ? markPrice.gt(order.triggerPrice)\n                  : markPrice.lt(order.triggerPrice);\n\n                nearExecute = order.triggerAboveThreshold\n                  ? markPrice.gt(order.triggerPrice.mul(NEAR_TRESHOLD).div(100))\n                  : markPrice.lt(order.triggerPrice.mul(100).div(NEAR_TRESHOLD));\n\n                const diff = markPrice.gt(order.triggerPrice)\n                  ? markPrice.sub(order.triggerPrice)\n                  : order.triggerPrice.sub(markPrice);\n                diffPercent = diff.mul(10000).div(markPrice);\n              }\n\n              if (!error && type === DECREASE) {\n                if (positionsForOrders && key in positionsForOrders) {\n                  const position = positionsForOrders[key];\n                  if (!position) {\n                    error = \"No position\";\n                  } else if (order.sizeDelta.gt(position[0])) {\n                    error = `Order size exceeds position`;\n                  } else if (order.sizeDelta.eq(0)) {\n                    error = \"Order size is 0\";\n                  }\n                }\n              }\n\n              return (\n                <tr key={key}>\n                  <td>{order.type}</td>\n                  <td>\n                    {order.isLong ? \"Long\" : \"Short\"} {indexToken && indexToken.symbol}\n                  </td>\n                  <td>\n                    {type === INCREASE ? \"+\" : \"-\"}${formatAmount(order.sizeDelta, USD_DECIMALS, 2, true)}\n                  </td>\n                  <td className={cx({ positive: shouldExecute, near: !shouldExecute && nearExecute })}>\n                    {order.triggerAboveThreshold ? \"> \" : \"< \"}\n                    {formatAmount(order.triggerPrice, USD_DECIMALS, 2, true)}\n                  </td>\n                  <td className={cx({ positive: shouldExecute, near: !shouldExecute && nearExecute })}>\n                    ${formatAmount(markPrice, USD_DECIMALS, 2, true)}\n                  </td>\n                  <td className={cx({ positive: shouldExecute, near: !shouldExecute && nearExecute })}>\n                    {formatAmount(diffPercent, 2, 2)}%\n                  </td>\n                  <td>\n                    <NavLink to={`/actions/${order.account}`}>{shortenAddress(order.account, 12)}</NavLink>\n                  </td>\n                  <td>{formatDateTime(order.createdTimestamp)}</td>\n                  <td>{order.index}</td>\n                  <td className=\"negative\">{error}</td>\n                  <td>\n                    <button className=\"Orders-overview-action\" onClick={(evt) => executeOrder(evt, order)}>\n                      Execute\n                    </button>\n                  </td>\n                </tr>\n              );\n            }\n          })}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n","import { useWeb3React } from \"@web3-react/core\";\r\nimport cx from \"classnames\";\r\n\r\nimport { useAllPositions } from \"../../domain/legacy\";\r\nimport { USD_DECIMALS, useChainId, formatAmount, getTimeRemaining } from \"../../lib/legacy\";\r\n\r\nimport \"./PositionsOverview.css\";\r\n\r\nexport default function PositionsOverview() {\r\n  const { chainId } = useChainId();\r\n  const { library } = useWeb3React();\r\n\r\n  const positions = useAllPositions(chainId, library);\r\n\r\n  return (\r\n    <div className=\"Positions-overview\">\r\n      <p>\r\n        Open positions: {positions.length}\r\n        <br />\r\n        Under risk: {positions.filter((p) => p.danger).length}\r\n      </p>\r\n      <table className=\"Positions-overview-table\">\r\n        <thead>\r\n          <tr>\r\n            <th>account</th>\r\n            <th>size</th>\r\n            <th>collateral</th>\r\n            <th>fee</th>\r\n            <th>time to liq</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {positions &&\r\n            positions\r\n              .filter((p) => p.danger)\r\n              .map((position) => {\r\n                const { size, account, collateral, fee, danger } = position;\r\n\r\n                const diffToLiq = position.collateral.sub(position.fee);\r\n                const fundingFee = 80;\r\n                const feesPerHour = position.size.mul(fundingFee).div(1000000);\r\n                const hoursToLiq = diffToLiq.div(feesPerHour);\r\n                const liqTime = hoursToLiq.toNumber() * 60 * 60 + Date.now() / 1000;\r\n                return (\r\n                  <tr>\r\n                    <td>{account}</td>\r\n                    <td>${formatAmount(size, USD_DECIMALS, 2, true)}</td>\r\n                    <td>${formatAmount(collateral, USD_DECIMALS, 2, true)}</td>\r\n                    <td className={cx({ negative: danger })}>${formatAmount(fee, USD_DECIMALS, 2, true)}</td>\r\n                    <td>\r\n                      {getTimeRemaining(liqTime)} (${formatAmount(feesPerHour, USD_DECIMALS, 2, true)}/h)\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n","import \"./Loader.css\";\r\n\r\nexport default function Loader() {\r\n  return (\r\n    <div className=\"bouncing-loader\">\r\n      <div></div>\r\n      <div></div>\r\n      <div></div>\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect, useRef, useState } from \"react\";\r\nimport { Trans, t } from \"@lingui/macro\";\r\nimport { useWeb3React } from \"@web3-react/core\";\r\nimport { setTraderReferralCodeByUser, validateReferralCodeExists } from \"../../domain/referrals\";\r\nimport { REFERRAL_CODE_REGEX } from \"./referralsHelper\";\r\nimport { useDebounce } from \"../../lib/legacy\";\r\n\r\nfunction JoinReferralCode({ setPendingTxns, pendingTxns, active, connectWallet }) {\r\n  return (\r\n    <div className=\"referral-card section-center mt-medium\">\r\n      <h2 className=\"title\">\r\n        <Trans>Enter Referral Code</Trans>\r\n      </h2>\r\n      <p className=\"sub-title\">\r\n        <Trans>Please input a referral code to benefit from fee discounts.</Trans>\r\n      </p>\r\n      <div className=\"card-action\">\r\n        {active ? (\r\n          <ReferralCodeForm setPendingTxns={setPendingTxns} pendingTxns={pendingTxns} />\r\n        ) : (\r\n          <button className=\"App-cta Exchange-swap-button\" type=\"submit\" onClick={connectWallet}>\r\n            <Trans>Connect Wallet</Trans>\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function ReferralCodeForm({\r\n  setPendingTxns,\r\n  pendingTxns,\r\n  callAfterSuccess,\r\n  userReferralCodeString = \"\",\r\n  type = \"join\",\r\n}) {\r\n  const { account, library, chainId } = useWeb3React();\r\n  const [referralCode, setReferralCode] = useState(\"\");\r\n  const inputRef = useRef(\"\");\r\n  const [isValidating, setIsValidating] = useState(false);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [referralCodeExists, setReferralCodeExists] = useState(true);\r\n  const debouncedReferralCode = useDebounce(referralCode, 300);\r\n\r\n  function getPrimaryText() {\r\n    const isEdit = type === \"edit\";\r\n    if (isEdit && debouncedReferralCode === userReferralCodeString) {\r\n      return t`Same as current active code`;\r\n    }\r\n    if (isEdit && isSubmitting) {\r\n      return t`Updating...`;\r\n    }\r\n\r\n    if (isSubmitting) {\r\n      return t`Adding...`;\r\n    }\r\n    if (debouncedReferralCode === \"\") {\r\n      return t`Enter Referral Code`;\r\n    }\r\n    if (isValidating) {\r\n      return t`Checking code...`;\r\n    }\r\n    if (!referralCodeExists) {\r\n      return t`Referral Code does not exist`;\r\n    }\r\n\r\n    return isEdit ? t`Update` : t`Submit`;\r\n  }\r\n  function isPrimaryEnabled() {\r\n    if (\r\n      debouncedReferralCode === \"\" ||\r\n      isSubmitting ||\r\n      isValidating ||\r\n      !referralCodeExists ||\r\n      debouncedReferralCode === userReferralCodeString\r\n    ) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  async function handleSubmit(event) {\r\n    const isEdit = type === \"edit\";\r\n    event.preventDefault();\r\n    setIsSubmitting(true);\r\n\r\n    try {\r\n      const tx = await setTraderReferralCodeByUser(chainId, referralCode, library, {\r\n        account,\r\n        successMsg: isEdit ? t`Referral code updated!` : t`Referral code added!`,\r\n        failMsg: isEdit ? t`Referral code updated failed.` : t`Adding referral code failed.`,\r\n        setPendingTxns,\r\n        pendingTxns,\r\n      });\r\n      if (callAfterSuccess) {\r\n        callAfterSuccess();\r\n      }\r\n      const receipt = await tx.wait();\r\n      if (receipt.status === 1) {\r\n        setReferralCode(\"\");\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n      setIsValidating(false);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    let cancelled = false;\r\n    async function checkReferralCode() {\r\n      if (debouncedReferralCode === \"\" || !REFERRAL_CODE_REGEX.test(debouncedReferralCode)) {\r\n        setIsValidating(false);\r\n        setReferralCodeExists(false);\r\n        return;\r\n      }\r\n\r\n      setIsValidating(true);\r\n      const codeExists = await validateReferralCodeExists(debouncedReferralCode, chainId);\r\n      if (!cancelled) {\r\n        setReferralCodeExists(codeExists);\r\n        setIsValidating(false);\r\n      }\r\n    }\r\n    checkReferralCode();\r\n    return () => {\r\n      cancelled = true;\r\n    };\r\n  }, [debouncedReferralCode, chainId]);\r\n\r\n  useEffect(() => {\r\n    inputRef.current.focus();\r\n  }, []);\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <input\r\n        ref={inputRef}\r\n        disabled={isSubmitting}\r\n        type=\"text\"\r\n        placeholder=\"Enter referral code\"\r\n        className=\"text-input mb-sm\"\r\n        value={referralCode}\r\n        onChange={({ target }) => {\r\n          const { value } = target;\r\n          setReferralCode(value);\r\n        }}\r\n      />\r\n      <button type=\"submit\" className=\"App-cta Exchange-swap-button\" disabled={!isPrimaryEnabled()}>\r\n        {getPrimaryText()}\r\n      </button>\r\n    </form>\r\n  );\r\n}\r\nexport default JoinReferralCode;\r\n","import Tooltip from \"../Tooltip/Tooltip\";\r\nimport \"./Card.css\";\r\n\r\nfunction Card({ title, children, className, tooltipText }) {\r\n  return (\r\n    <div className={`card ${className ? className : \"\"}`}>\r\n      {tooltipText ? (\r\n        <Tooltip\r\n          handle={<div className=\"card-header\">{title}</div>}\r\n          position=\"left-bottom\"\r\n          renderContent={() => tooltipText}\r\n        />\r\n      ) : (\r\n        <div className=\"card-header\">{title}</div>\r\n      )}\r\n      <div className=\"card-divider\"></div>\r\n      <div className=\"card-body\">{children}</div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Card;\r\n","import Tooltip from \"../Tooltip/Tooltip\";\r\n\r\nfunction EmptyMessage({ message = \"\", tooltipText }) {\r\n  return (\r\n    <div className=\"empty-message\">\r\n      {tooltipText ? (\r\n        <Tooltip handle={<p>{message}</p>} position=\"center-bottom\" renderContent={() => tooltipText} />\r\n      ) : (\r\n        <p>{message}</p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EmptyMessage;\r\n","import Tooltip from \"../Tooltip/Tooltip\";\r\n\r\nfunction InfoCard({ label, data, tooltipText, toolTipPosition = \"left-bottom\" }) {\r\n  return (\r\n    <div className=\"info-card\">\r\n      <div className=\"card-details\">\r\n        <h3 className=\"label\">\r\n          {tooltipText ? (\r\n            <Tooltip handle={label} position={toolTipPosition} renderContent={() => tooltipText} />\r\n          ) : (\r\n            label\r\n          )}\r\n        </h3>\r\n        <div className=\"data\">{data}</div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default InfoCard;\r\n","import { useEffect, useRef, useState } from \"react\";\r\nimport { Trans, t } from \"@lingui/macro\";\r\nimport cx from \"classnames\";\r\nimport { ARBITRUM, helperToast, useDebounce } from \"../../lib/legacy\";\r\nimport { getCodeError, getReferralCodeTakenStatus, getSampleReferrarStat } from \"./referralsHelper\";\r\nimport { useWeb3React } from \"@web3-react/core\";\r\n\r\nfunction AddAffiliateCode({\r\n  handleCreateReferralCode,\r\n  active,\r\n  connectWallet,\r\n  setRecentlyAddedCodes,\r\n  recentlyAddedCodes,\r\n}) {\r\n  return (\r\n    <div className=\"referral-card section-center mt-medium\">\r\n      <h2 className=\"title\">\r\n        <Trans>Generate Referral Code</Trans>\r\n      </h2>\r\n      <p className=\"sub-title\">\r\n        <Trans>\r\n          Looks like you don't have a referral code to share. <br /> Create one now and start earning rebates!\r\n        </Trans>\r\n      </p>\r\n      <div className=\"card-action\">\r\n        {active ? (\r\n          <AffiliateCodeForm\r\n            handleCreateReferralCode={handleCreateReferralCode}\r\n            recentlyAddedCodes={recentlyAddedCodes}\r\n            setRecentlyAddedCodes={setRecentlyAddedCodes}\r\n          />\r\n        ) : (\r\n          <button className=\"App-cta Exchange-swap-button\" type=\"submit\" onClick={connectWallet}>\r\n            <Trans>Connect Wallet</Trans>\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function AffiliateCodeForm({\r\n  handleCreateReferralCode,\r\n  recentlyAddedCodes,\r\n  setRecentlyAddedCodes,\r\n  callAfterSuccess,\r\n}) {\r\n  const [referralCode, setReferralCode] = useState(\"\");\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n  const inputRef = useRef(\"\");\r\n  const [referralCodeCheckStatus, setReferralCodeCheckStatus] = useState(\"ok\");\r\n  const debouncedReferralCode = useDebounce(referralCode, 300);\r\n  const { account, chainId } = useWeb3React();\r\n  useEffect(() => {\r\n    inputRef.current.focus();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    let cancelled = false;\r\n    const checkCodeTakenStatus = async () => {\r\n      if (error) {\r\n        setReferralCodeCheckStatus(\"ok\");\r\n        return;\r\n      }\r\n      const { status: takenStatus } = await getReferralCodeTakenStatus(account, debouncedReferralCode, chainId);\r\n      // ignore the result if the referral code to check has changed\r\n      if (cancelled) {\r\n        return;\r\n      }\r\n      if (takenStatus === \"none\") {\r\n        setReferralCodeCheckStatus(\"ok\");\r\n      } else {\r\n        setReferralCodeCheckStatus(\"taken\");\r\n      }\r\n    };\r\n    setReferralCodeCheckStatus(\"checking\");\r\n    checkCodeTakenStatus();\r\n    return () => {\r\n      cancelled = true;\r\n    };\r\n  }, [account, debouncedReferralCode, error, chainId]);\r\n\r\n  function getButtonError() {\r\n    if (!debouncedReferralCode) {\r\n      return t`Enter a code`;\r\n    }\r\n    if (referralCodeCheckStatus === \"taken\") {\r\n      return t`Code already taken`;\r\n    }\r\n    if (referralCodeCheckStatus === \"checking\") {\r\n      return t`Checking code...`;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  const buttonError = getButtonError();\r\n\r\n  function getPrimaryText() {\r\n    if (buttonError) {\r\n      return buttonError;\r\n    }\r\n\r\n    if (isProcessing) {\r\n      return t`Creating...`;\r\n    }\r\n\r\n    return t`Create`;\r\n  }\r\n  function isPrimaryEnabled() {\r\n    if (buttonError) {\r\n      return false;\r\n    }\r\n    if (error || isProcessing) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  async function handleSubmit(event) {\r\n    event.preventDefault();\r\n    setIsProcessing(true);\r\n    const { status: takenStatus, info: takenInfo } = await getReferralCodeTakenStatus(account, referralCode, chainId);\r\n    if ([\"all\", \"current\", \"other\"].includes(takenStatus)) {\r\n      setIsProcessing(false);\r\n    }\r\n\r\n    if (takenStatus === \"none\" || takenStatus === \"other\") {\r\n      const ownerOnOtherNetwork = takenInfo[chainId === ARBITRUM ? \"ownerAvax\" : \"ownerArbitrum\"];\r\n      try {\r\n        const tx = await handleCreateReferralCode(referralCode);\r\n        if (callAfterSuccess) {\r\n          callAfterSuccess();\r\n        }\r\n        const receipt = await tx.wait();\r\n        if (receipt.status === 1) {\r\n          recentlyAddedCodes.push(getSampleReferrarStat(referralCode, ownerOnOtherNetwork, account));\r\n\r\n          helperToast.success(\"Referral code created!\");\r\n          setRecentlyAddedCodes(recentlyAddedCodes);\r\n          setReferralCode(\"\");\r\n        }\r\n      } catch (err) {\r\n        console.error(err);\r\n      } finally {\r\n        setIsProcessing(false);\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <input\r\n        type=\"text\"\r\n        ref={inputRef}\r\n        value={referralCode}\r\n        disabled={isProcessing}\r\n        className={cx(\"text-input\", { \"mb-sm\": !error })}\r\n        placeholder=\"Enter a code\"\r\n        onChange={({ target }) => {\r\n          const { value } = target;\r\n          setReferralCode(value);\r\n          setError(getCodeError(value));\r\n        }}\r\n      />\r\n      {error && <p className=\"error\">{error}</p>}\r\n      <button className=\"App-cta Exchange-swap-button\" type=\"submit\" disabled={!isPrimaryEnabled()}>\r\n        {getPrimaryText()}\r\n      </button>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default AddAffiliateCode;\r\n","import { useMemo, useRef, useState } from \"react\";\r\nimport { Trans, t } from \"@lingui/macro\";\r\nimport { FiPlus, FiTwitter } from \"react-icons/fi\";\r\nimport { useCopyToClipboard } from \"react-use\";\r\nimport { IoWarningOutline } from \"react-icons/io5\";\r\nimport { BiCopy, BiErrorCircle } from \"react-icons/bi\";\r\nimport Card from \"../Common/Card\";\r\nimport Modal from \"../Modal/Modal\";\r\nimport { getNativeToken, getToken } from \"../../config/Tokens\";\r\nimport {\r\n  AVALANCHE,\r\n  bigNumberify,\r\n  formatAmount,\r\n  formatDate,\r\n  getExplorerUrl,\r\n  helperToast,\r\n  REFERRAL_CODE_QUERY_PARAM,\r\n  shortenAddress,\r\n} from \"../../lib/legacy\";\r\nimport EmptyMessage from \"./EmptyMessage\";\r\nimport InfoCard from \"./InfoCard\";\r\nimport {\r\n  getTierIdDisplay,\r\n  getTwitterShareUrl,\r\n  getUSDValue,\r\n  isRecentReferralCodeNotExpired,\r\n  tierRebateInfo,\r\n} from \"./referralsHelper\";\r\nimport { AffiliateCodeForm } from \"./AddAffiliateCode\";\r\nimport TooltipWithPortal from \"../Tooltip/TooltipWithPortal\";\r\n\r\nfunction AffiliatesStats({\r\n  referralsData,\r\n  handleCreateReferralCode,\r\n  chainId,\r\n  setRecentlyAddedCodes,\r\n  recentlyAddedCodes,\r\n}) {\r\n  const [isAddReferralCodeModalOpen, setIsAddReferralCodeModalOpen] = useState(false);\r\n  const addNewModalRef = useRef(null);\r\n\r\n  const [, copyToClipboard] = useCopyToClipboard();\r\n  const open = () => setIsAddReferralCodeModalOpen(true);\r\n  const close = () => setIsAddReferralCodeModalOpen(false);\r\n\r\n  const { cumulativeStats, referrerTotalStats, rebateDistributions, referrerTierInfo } = referralsData;\r\n  const allReferralCodes = referrerTotalStats.map((c) => c.referralCode.trim());\r\n  const finalAffiliatesTotalStats = useMemo(\r\n    () =>\r\n      recentlyAddedCodes.filter(isRecentReferralCodeNotExpired).reduce((acc, cv) => {\r\n        if (!allReferralCodes.includes(cv.referralCode)) {\r\n          acc = acc.concat(cv);\r\n        }\r\n        return acc;\r\n      }, referrerTotalStats),\r\n    [allReferralCodes, referrerTotalStats, recentlyAddedCodes]\r\n  );\r\n\r\n  const tierId = referrerTierInfo?.tierId;\r\n  let referrerRebates = bigNumberify(0);\r\n  if (cumulativeStats && cumulativeStats.totalRebateUsd && cumulativeStats.discountUsd) {\r\n    referrerRebates = cumulativeStats.totalRebateUsd.sub(cumulativeStats.discountUsd);\r\n  }\r\n\r\n  return (\r\n    <div className=\"referral-body-container\">\r\n      <div className=\"referral-stats\">\r\n        <InfoCard\r\n          label={t`Total Traders Referred`}\r\n          tooltipText={t`Amount of traders you referred.`}\r\n          data={cumulativeStats?.registeredReferralsCount || \"0\"}\r\n        />\r\n        <InfoCard\r\n          label={t`Total Trading Volume`}\r\n          tooltipText={t`Volume traded by your referred traders.`}\r\n          data={getUSDValue(cumulativeStats?.volume)}\r\n        />\r\n        <InfoCard\r\n          label={t`Total Rebates`}\r\n          tooltipText={t`Rebates earned by this account as an affiliate.`}\r\n          data={getUSDValue(referrerRebates, 4)}\r\n        />\r\n      </div>\r\n      <div className=\"list\">\r\n        <Modal\r\n          className=\"Connect-wallet-modal\"\r\n          isVisible={isAddReferralCodeModalOpen}\r\n          setIsVisible={close}\r\n          label={t`Create Referral Code`}\r\n          onAfterOpen={() => addNewModalRef.current?.focus()}\r\n        >\r\n          <div className=\"edit-referral-modal\">\r\n            <AffiliateCodeForm\r\n              handleCreateReferralCode={handleCreateReferralCode}\r\n              recentlyAddedCodes={recentlyAddedCodes}\r\n              setRecentlyAddedCodes={setRecentlyAddedCodes}\r\n              callAfterSuccess={close}\r\n            />\r\n          </div>\r\n        </Modal>\r\n        <Card\r\n          title={\r\n            <div className=\"referral-table-header\">\r\n              <p className=\"title\">\r\n                Referral Codes{\" \"}\r\n                <span className=\"sub-title\">\r\n                  {referrerTierInfo && `Tier ${getTierIdDisplay(tierId)} (${tierRebateInfo[tierId]}% rebate)`}\r\n                </span>\r\n              </p>\r\n              <button className=\"transparent-btn\" onClick={open}>\r\n                <FiPlus /> <span className=\"ml-small\">Create</span>\r\n              </button>\r\n            </div>\r\n          }\r\n        >\r\n          <div className=\"table-wrapper\">\r\n            <table className=\"referral-table\">\r\n              <thead>\r\n                <tr>\r\n                  <th className=\"table-head\" scope=\"col\">\r\n                    <Trans>Referral Code</Trans>\r\n                  </th>\r\n                  <th className=\"table-head\" scope=\"col\">\r\n                    <Trans>Total Volume</Trans>\r\n                  </th>\r\n                  <th className=\"table-head\" scope=\"col\">\r\n                    <Trans>Traders Referred</Trans>\r\n                  </th>\r\n                  <th className=\"table-head\" scope=\"col\">\r\n                    <Trans>Total Rebates</Trans>\r\n                  </th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {finalAffiliatesTotalStats.map((stat, index) => {\r\n                  const ownerOnOtherChain = stat?.ownerOnOtherChain;\r\n                  let referrerRebate = bigNumberify(0);\r\n                  if (stat && stat.totalRebateUsd && stat.discountUsd) {\r\n                    referrerRebate = stat.totalRebateUsd.sub(stat.discountUsd);\r\n                  }\r\n                  return (\r\n                    <tr key={index}>\r\n                      <td data-label=\"Referral Code\">\r\n                        <div className=\"table-referral-code\">\r\n                          <span className=\"referral-text \">{stat.referralCode}</span>\r\n                          <div\r\n                            onClick={() => {\r\n                              copyToClipboard(`https://gmx.io/#/?${REFERRAL_CODE_QUERY_PARAM}=${stat.referralCode}`);\r\n                              helperToast.success(\"Referral link copied to your clipboard\");\r\n                            }}\r\n                            className=\"copy-icon\"\r\n                          >\r\n                            <BiCopy />\r\n                          </div>\r\n                          <a\r\n                            href={getTwitterShareUrl(stat.referralCode)}\r\n                            target=\"_blank\"\r\n                            rel=\"noopener noreferrer\"\r\n                            className=\"copy-icon\"\r\n                          >\r\n                            <FiTwitter />\r\n                          </a>\r\n                          {ownerOnOtherChain && !ownerOnOtherChain?.isTaken && (\r\n                            <div className=\"info\">\r\n                              <TooltipWithPortal\r\n                                position=\"right\"\r\n                                handle={<IoWarningOutline color=\"#ffba0e\" size={16} />}\r\n                                renderContent={() => (\r\n                                  <div>\r\n                                    This code is not yet registered on{\" \"}\r\n                                    {chainId === AVALANCHE ? \"Arbitrum\" : \"Avalanche\"}, you will not receive rebates\r\n                                    there.\r\n                                    <br />\r\n                                    <br />\r\n                                    Switch your network to create this code on{\" \"}\r\n                                    {chainId === AVALANCHE ? \"Arbitrum\" : \"Avalanche\"}.\r\n                                  </div>\r\n                                )}\r\n                              />\r\n                            </div>\r\n                          )}\r\n                          {ownerOnOtherChain && ownerOnOtherChain?.isTaken && !ownerOnOtherChain?.isTakenByCurrentUser && (\r\n                            <div className=\"info\">\r\n                              <TooltipWithPortal\r\n                                position=\"right\"\r\n                                handle={<BiErrorCircle color=\"#e82e56\" size={16} />}\r\n                                renderContent={() => (\r\n                                  <div>\r\n                                    This code has been taken by someone else on{\" \"}\r\n                                    {chainId === AVALANCHE ? \"Arbitrum\" : \"Avalanche\"}, you will not receive rebates\r\n                                    from traders using this code on {chainId === AVALANCHE ? \"Arbitrum\" : \"Avalanche\"}.\r\n                                  </div>\r\n                                )}\r\n                              />\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      </td>\r\n                      <td data-label=\"Total Volume\">{getUSDValue(stat.volume)}</td>\r\n                      <td data-label=\"Traders Referred\">{stat.registeredReferralsCount}</td>\r\n                      <td data-label=\"Total Rebates\">{getUSDValue(referrerRebate, 4)}</td>\r\n                    </tr>\r\n                  );\r\n                })}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </Card>\r\n      </div>\r\n      {rebateDistributions?.length > 0 ? (\r\n        <div className=\"reward-history\">\r\n          <Card title=\"Rewards Distribution History\" tooltipText=\"Rewards are airdropped weekly.\">\r\n            <div className=\"table-wrapper\">\r\n              <table className=\"referral-table\">\r\n                <thead>\r\n                  <tr>\r\n                    <th className=\"table-head\" scope=\"col\">\r\n                      <Trans>Date</Trans>\r\n                    </th>\r\n                    <th className=\"table-head\" scope=\"col\">\r\n                      <Trans>Amount</Trans>\r\n                    </th>\r\n                    <th className=\"table-head\" scope=\"col\">\r\n                      <Trans>Transaction</Trans>\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {rebateDistributions.map((rebate, index) => {\r\n                    let tokenInfo;\r\n                    try {\r\n                      tokenInfo = getToken(chainId, rebate.token);\r\n                    } catch {\r\n                      tokenInfo = getNativeToken(chainId);\r\n                    }\r\n                    const explorerURL = getExplorerUrl(chainId);\r\n                    return (\r\n                      <tr key={index}>\r\n                        <td className=\"table-head\" data-label=\"Date\">\r\n                          {formatDate(rebate.timestamp)}\r\n                        </td>\r\n                        <td className=\"table-head\" data-label=\"Amount\">\r\n                          {formatAmount(rebate.amount, tokenInfo.decimals, 6, true)} {tokenInfo.symbol}\r\n                        </td>\r\n                        <td className=\"table-head\" data-label=\"Transaction\">\r\n                          <a\r\n                            target=\"_blank\"\r\n                            rel=\"noopener noreferrer\"\r\n                            href={explorerURL + `tx/${rebate.transactionHash}`}\r\n                          >\r\n                            {shortenAddress(rebate.transactionHash, 13)}\r\n                          </a>\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </Card>\r\n        </div>\r\n      ) : (\r\n        <EmptyMessage\r\n          tooltipText={t`Rebates are airdropped weekly.`}\r\n          message={t`No rebates distribution history yet.`}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AffiliatesStats;\r\n","import { useRef, useState } from \"react\";\r\nimport { Trans, t } from \"@lingui/macro\";\r\nimport { BiEditAlt } from \"react-icons/bi\";\r\nimport Card from \"../Common/Card\";\r\nimport Modal from \"../Modal/Modal\";\r\nimport Tooltip from \"../Tooltip/Tooltip\";\r\nimport { getNativeToken, getToken } from \"../../config/Tokens\";\r\nimport { formatAmount, formatDate, getExplorerUrl, shortenAddress } from \"../../lib/legacy\";\r\nimport EmptyMessage from \"./EmptyMessage\";\r\nimport InfoCard from \"./InfoCard\";\r\nimport { getTierIdDisplay, getUSDValue, tierDiscountInfo } from \"./referralsHelper\";\r\nimport { ReferralCodeForm } from \"./JoinReferralCode\";\r\n\r\nfunction TradersStats({ referralsData, traderTier, chainId, userReferralCodeString, setPendingTxns, pendingTxns }) {\r\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false);\r\n  const editModalRef = useRef(null);\r\n\r\n  const open = () => setIsEditModalOpen(true);\r\n  const close = () => setIsEditModalOpen(false);\r\n  return (\r\n    <div className=\"rebate-container\">\r\n      <div className=\"referral-stats\">\r\n        <InfoCard\r\n          label={t`Total Trading Volume`}\r\n          tooltipText={t`Volume traded by this account with an active referral code.`}\r\n          data={getUSDValue(referralsData?.referralTotalStats?.volume)}\r\n        />\r\n        <InfoCard\r\n          label={t`Total Rebates`}\r\n          tooltipText={t`Rebates earned by this account as a trader.`}\r\n          data={getUSDValue(referralsData?.referralTotalStats?.discountUsd, 4)}\r\n        />\r\n        <InfoCard\r\n          label={t`Active Referral Code`}\r\n          data={\r\n            <div className=\"active-referral-code\">\r\n              <div className=\"edit\">\r\n                <span>{userReferralCodeString}</span>\r\n                <BiEditAlt onClick={open} />\r\n              </div>\r\n              {traderTier && (\r\n                <div className=\"tier\">\r\n                  <Tooltip\r\n                    handle={t`Tier ${getTierIdDisplay(traderTier)} (${tierDiscountInfo[traderTier]}% discount)`}\r\n                    position=\"right-bottom\"\r\n                    renderContent={() =>\r\n                      t`You will receive a ${tierDiscountInfo[traderTier]}% discount on your opening and closing fees, this discount will be airdropped to your account every Wednesday`\r\n                    }\r\n                  />\r\n                </div>\r\n              )}\r\n            </div>\r\n          }\r\n        />\r\n        <Modal\r\n          className=\"Connect-wallet-modal\"\r\n          isVisible={isEditModalOpen}\r\n          setIsVisible={close}\r\n          label={t`Edit Referral Code`}\r\n          onAfterOpen={() => editModalRef.current?.focus()}\r\n        >\r\n          <div className=\"edit-referral-modal\">\r\n            <ReferralCodeForm\r\n              userReferralCodeString={userReferralCodeString}\r\n              setPendingTxns={setPendingTxns}\r\n              pendingTxns={pendingTxns}\r\n              type=\"edit\"\r\n              callAfterSuccess={() => setIsEditModalOpen(false)}\r\n            />\r\n          </div>\r\n        </Modal>\r\n      </div>\r\n      {referralsData?.discountDistributions.length > 0 ? (\r\n        <div className=\"reward-history\">\r\n          <Card title=\"Rebates Distribution History\" tooltipText=\"Rebates are airdropped weekly.\">\r\n            <div className=\"table-wrapper\">\r\n              <table className=\"referral-table\">\r\n                <thead>\r\n                  <tr>\r\n                    <th className=\"table-head\" scope=\"col\">\r\n                      <Trans>Date</Trans>\r\n                    </th>\r\n                    <th className=\"table-head\" scope=\"col\">\r\n                      <Trans>Amount</Trans>\r\n                    </th>\r\n                    <th className=\"table-head\" scope=\"col\">\r\n                      <Trans>Transaction</Trans>\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {referralsData?.discountDistributions.map((rebate, index) => {\r\n                    let tokenInfo;\r\n                    try {\r\n                      tokenInfo = getToken(chainId, rebate.token);\r\n                    } catch {\r\n                      tokenInfo = getNativeToken(chainId);\r\n                    }\r\n                    const explorerURL = getExplorerUrl(chainId);\r\n                    return (\r\n                      <tr key={index}>\r\n                        <td data-label=\"Date\">{formatDate(rebate.timestamp)}</td>\r\n                        <td data-label=\"Amount\">\r\n                          {formatAmount(rebate.amount, tokenInfo.decimals, 6, true)} {tokenInfo.symbol}\r\n                        </td>\r\n                        <td data-label=\"Transaction\">\r\n                          <a\r\n                            target=\"_blank\"\r\n                            rel=\"noopener noreferrer\"\r\n                            href={explorerURL + `tx/${rebate.transactionHash}`}\r\n                          >\r\n                            {shortenAddress(rebate.transactionHash, 20)}\r\n                          </a>\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </Card>\r\n        </div>\r\n      ) : (\r\n        <EmptyMessage\r\n          message={t`No rebates distribution history yet.`}\r\n          tooltipText={t`Rebates are airdropped weekly.`}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TradersStats;\r\n","import \"./Referrals.css\";\nimport React from \"react\";\nimport { useLocalStorage } from \"react-use\";\nimport { Trans, t } from \"@lingui/macro\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport { useParams } from \"react-router-dom\";\nimport SEO from \"../../components/Common/SEO\";\nimport Tab from \"../../components/Tab/Tab\";\nimport Loader from \"../../components/Common/Loader\";\nimport Footer from \"../../components/Footer/Footer\";\nimport {\n  useChainId,\n  getPageTitle,\n  REFERRALS_SELECTED_TAB_KEY,\n  useLocalStorageSerializeKey,\n  isHashZero,\n} from \"../../lib/legacy\";\nimport {\n  useReferralsData,\n  registerReferralCode,\n  useCodeOwner,\n  useReferrerTier,\n  useUserReferralCode,\n} from \"../../domain/referrals\";\nimport JoinReferralCode from \"../../components/Referrals/JoinReferralCode\";\nimport AffiliatesStats from \"../../components/Referrals/AffiliatesStats\";\nimport TradersStats from \"../../components/Referrals/TradersStats\";\nimport AddAffiliateCode from \"../../components/Referrals/AddAffiliateCode\";\nimport { deserializeSampleStats, isRecentReferralCodeNotExpired } from \"../../components/Referrals/referralsHelper\";\nimport { ethers } from \"ethers\";\n\nconst TRADERS = t`Traders`;\nconst AFFILIATES = t`Affiliates`;\nconst TAB_OPTIONS = [TRADERS, AFFILIATES];\n\nfunction Referrals({ connectWallet, setPendingTxns, pendingTxns }) {\n  const { active, account: walletAccount, library } = useWeb3React();\n  const { account: queryAccount } = useParams();\n  let account;\n  if (queryAccount && ethers.utils.isAddress(queryAccount)) {\n    account = ethers.utils.getAddress(queryAccount);\n  } else {\n    account = walletAccount;\n  }\n  const { chainId } = useChainId();\n  const [activeTab, setActiveTab] = useLocalStorage(REFERRALS_SELECTED_TAB_KEY, TRADERS);\n  const { data: referralsData, loading } = useReferralsData(chainId, account);\n  const [recentlyAddedCodes, setRecentlyAddedCodes] = useLocalStorageSerializeKey([chainId, \"REFERRAL\", account], [], {\n    deserializer: deserializeSampleStats,\n  });\n  const { userReferralCode, userReferralCodeString } = useUserReferralCode(library, chainId, account);\n  const { codeOwner } = useCodeOwner(library, chainId, account, userReferralCode);\n  const { referrerTier: traderTier } = useReferrerTier(library, chainId, codeOwner);\n\n  function handleCreateReferralCode(referralCode) {\n    return registerReferralCode(chainId, referralCode, library, {\n      sentMsg: t`Referral code submitted!`,\n      failMsg: t`Referral code creation failed.`,\n      pendingTxns,\n    });\n  }\n\n  function renderAffiliatesTab() {\n    const isReferralCodeAvailable =\n      referralsData?.codes?.length > 0 || recentlyAddedCodes?.filter(isRecentReferralCodeNotExpired).length > 0;\n    if (loading) return <Loader />;\n    if (isReferralCodeAvailable) {\n      return (\n        <AffiliatesStats\n          referralsData={referralsData}\n          handleCreateReferralCode={handleCreateReferralCode}\n          setRecentlyAddedCodes={setRecentlyAddedCodes}\n          recentlyAddedCodes={recentlyAddedCodes}\n          chainId={chainId}\n        />\n      );\n    } else {\n      return (\n        <AddAffiliateCode\n          handleCreateReferralCode={handleCreateReferralCode}\n          active={active}\n          connectWallet={connectWallet}\n          recentlyAddedCodes={recentlyAddedCodes}\n          setRecentlyAddedCodes={setRecentlyAddedCodes}\n        />\n      );\n    }\n  }\n\n  function renderTradersTab() {\n    if (loading) return <Loader />;\n    if (isHashZero(userReferralCode) || !account || !userReferralCode) {\n      return (\n        <JoinReferralCode\n          connectWallet={connectWallet}\n          active={active}\n          setPendingTxns={setPendingTxns}\n          pendingTxns={pendingTxns}\n        />\n      );\n    }\n    return (\n      <TradersStats\n        userReferralCodeString={userReferralCodeString}\n        chainId={chainId}\n        referralsData={referralsData}\n        setPendingTxns={setPendingTxns}\n        pendingTxns={pendingTxns}\n        traderTier={traderTier}\n      />\n    );\n  }\n\n  return (\n    <SEO title={getPageTitle(\"Referrals\")}>\n      <div className=\"default-container page-layout Referrals\">\n        <div className=\"section-title-block\">\n          <div className=\"section-title-icon\"></div>\n          <div className=\"section-title-content\">\n            <div className=\"Page-title\">\n              <Trans>Referrals</Trans>\n            </div>\n            <div className=\"Page-description\">\n              <Trans>\n                Get fee discounts and earn rebates through the LeveragePro referral program.\n                <br />\n                For more information, please read the{\" \"}\n                <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"about:blank\">\n                  referral program details\n                </a>\n                .\n              </Trans>\n            </div>\n          </div>\n        </div>\n        <div className=\"referral-tab-container\">\n          <Tab options={TAB_OPTIONS} option={activeTab} setOption={setActiveTab} onChange={setActiveTab} />\n        </div>\n        {activeTab === AFFILIATES ? renderAffiliatesTab() : renderTradersTab()}\n      </div>\n      <Footer />\n    </SEO>\n  );\n}\n\nexport default Referrals;\n","import React from \"react\";\r\nimport cx from \"classnames\";\r\n\r\nimport \"./BuyInputSection.css\";\r\n\r\nimport { Trans } from '@lingui/macro'\r\n\r\nexport default function BuyInputSection(props) {\r\n  const {\r\n    topLeftLabel,\r\n    topRightLabel,\r\n    onClickTopRightLabel,\r\n    inputValue,\r\n    onInputValueChange,\r\n    onClickMax,\r\n    showMaxButton,\r\n    staticInput,\r\n    balance,\r\n    tokenBalance,\r\n  } = props;\r\n\r\n  return (\r\n    <div className=\"Exchange-swap-section buy-input\">\r\n      <div className=\"Exchange-swap-section-top\">\r\n        <div className=\"muted\">\r\n          {topLeftLabel}: {balance}\r\n        </div>\r\n        <div className={cx(\"align-right\", { clickable: onClickTopRightLabel })} onClick={onClickTopRightLabel}>\r\n          <span className=\"Exchange-swap-label muted\">{topRightLabel}</span>&nbsp;\r\n          <span className=\"Exchange-swap-balance\">\r\n            {tokenBalance} {/*(selectedToken && selectedToken.symbol) || defaultTokenName*/}\r\n          </span>\r\n        </div>\r\n      </div>\r\n      <div className=\"Exchange-swap-section-bottom\">\r\n        <div className=\"Exchange-swap-input-container\">\r\n          {!staticInput && (\r\n            <input\r\n              type=\"number\"\r\n              min=\"0\"\r\n              placeholder=\"0.0\"\r\n              className=\"Exchange-swap-input\"\r\n              value={inputValue}\r\n              onChange={onInputValueChange}\r\n            />\r\n          )}\r\n          {staticInput && <div className=\"InputSection-static-input\">{inputValue}</div>}\r\n          {showMaxButton && (\r\n            <div className=\"Exchange-swap-max\" onClick={onClickMax}>\r\n              <Trans>MAX</Trans>\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div className=\"PositionEditor-token-symbol\">{props.children}</div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { Trans, t } from \"@lingui/macro\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport useSWR from \"swr\";\nimport { ethers } from \"ethers\";\nimport Tab from \"../Tab/Tab\";\nimport cx from \"classnames\";\nimport { getToken, getTokens, getWhitelistedTokens, getWrappedToken, getNativeToken } from \"../../config/Tokens\";\nimport { getContract } from \"../../config/Addresses\";\nimport {\n  helperToast,\n  useLocalStorageByChainId,\n  getTokenInfo,\n  useChainId,\n  expandDecimals,\n  fetcher,\n  bigNumberify,\n  formatAmount,\n  formatAmountFree,\n  formatKeyAmount,\n  getBuyGlpToAmount,\n  getBuyGlpFromAmount,\n  getSellGlpFromAmount,\n  getSellGlpToAmount,\n  parseValue,\n  approveTokens,\n  getUsd,\n  adjustForDecimals,\n  GLP_DECIMALS,\n  USD_DECIMALS,\n  BASIS_POINTS_DIVISOR,\n  GLP_COOLDOWN_DURATION,\n  SECONDS_PER_YEAR,\n  USDG_DECIMALS,\n  ARBITRUM,\n  PLACEHOLDER_ACCOUNT,\n  importImage,\n  IS_NETWORK_DISABLED,\n  getChainName,\n} from \"../../lib/legacy\";\n\nimport { callContract, useLeveragePrice, useInfoTokens } from \"../../domain/legacy\";\n\nimport TokenSelector from \"../Exchange/TokenSelector\";\nimport BuyInputSection from \"../BuyInputSection/BuyInputSection\";\nimport Tooltip from \"../Tooltip/Tooltip\";\n\nimport ReaderV2 from \"../../abis/Reader.json\";\nimport RewardReader from \"../../abis/RewardReader.json\";\nimport VaultV2 from \"../../abis/Vault.json\";\nimport GlpManager from \"../../abis/GlpManager.json\";\nimport RewardTracker from \"../../abis/RewardTracker.json\";\nimport Vester from \"../../abis/Vester.json\";\nimport RewardRouter from \"../../abis/RewardRouter.json\";\nimport Token from \"../../abis/Token.json\";\n\nimport glp24Icon from \"../../img/ic_glp_24.svg\";\nimport glp40Icon from \"../../img/ic_glp_40.svg\";\nimport arrowIcon from \"../../img/ic_convert_down.svg\";\n\nimport avalanche16Icon from \"../../img/ic_avalanche_16.svg\";\nimport arbitrum16Icon from \"../../img/ic_arbitrum_16.svg\";\n\nimport \"./GlpSwap.css\";\nimport AssetDropdown from \"../../pages/Dashboard/AssetDropdown\";\n\nconst { AddressZero } = ethers.constants;\n\nfunction getStakingData(stakingInfo) {\n  if (!stakingInfo || stakingInfo.length === 0) {\n    return;\n  }\n\n  const keys = [\"stakedGlpTracker\", \"feeGlpTracker\"];\n  const data = {};\n  const propsLength = 5;\n\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    data[key] = {\n      claimable: stakingInfo[i * propsLength],\n      tokensPerInterval: stakingInfo[i * propsLength + 1],\n      averageStakedAmounts: stakingInfo[i * propsLength + 2],\n      cumulativeRewards: stakingInfo[i * propsLength + 3],\n      totalSupply: stakingInfo[i * propsLength + 4],\n    };\n  }\n\n  return data;\n}\n\nexport default function GlpSwap(props) {\n  const { savedSlippageAmount, isBuying, setPendingTxns, connectWallet, setIsBuying } = props;\n  const history = useHistory();\n  const swapLabel = isBuying ? \"BuyGlp\" : \"SellGlp\";\n  const tabLabel = isBuying ? t`Buy GLP` : t`Sell GLP`;\n  const { active, library, account } = useWeb3React();\n  const { chainId } = useChainId();\n  // const chainName = getChainName(chainId)\n  const tokens = getTokens(chainId);\n  const whitelistedTokens = getWhitelistedTokens(chainId);\n  const tokenList = whitelistedTokens.filter((t) => !t.isWrapped);\n  const visibleTokens = tokenList.filter((t) => !t.isTempHidden);\n  const [swapValue, setSwapValue] = useState(\"\");\n  const [glpValue, setGlpValue] = useState(\"\");\n  const [swapTokenAddress, setSwapTokenAddress] = useLocalStorageByChainId(\n    chainId,\n    `${swapLabel}-swap-token-address`,\n    AddressZero\n  );\n  const [isApproving, setIsApproving] = useState(false);\n  const [isWaitingForApproval, setIsWaitingForApproval] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [anchorOnSwapAmount, setAnchorOnSwapAmount] = useState(true);\n  const [feeBasisPoints, setFeeBasisPoints] = useState(\"\");\n\n  const readerAddress = getContract(chainId, \"Reader\");\n  const rewardReaderAddress = getContract(chainId, \"RewardReader\");\n  const vaultAddress = getContract(chainId, \"Vault\");\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n  const stakedGlpTrackerAddress = getContract(chainId, \"StakedGlpTracker\");\n  const feeGlpTrackerAddress = getContract(chainId, \"FeeGlpTracker\");\n  const usdgAddress = getContract(chainId, \"USDG\");\n  const glpManagerAddress = getContract(chainId, \"GlpManager\");\n  const rewardRouterAddress = getContract(chainId, \"RewardRouter\");\n  const tokensForBalanceAndSupplyQuery = [stakedGlpTrackerAddress, usdgAddress];\n\n  const tokenAddresses = tokens.map((token) => token.address);\n  const { data: tokenBalances } = useSWR(\n    [`GlpSwap:getTokenBalances:${active}`, chainId, readerAddress, \"getTokenBalances\", account || PLACEHOLDER_ACCOUNT],\n    {\n      fetcher: fetcher(library, ReaderV2, [tokenAddresses]),\n    }\n  );\n\n  const { data: balancesAndSupplies } = useSWR(\n    [\n      `GlpSwap:getTokenBalancesWithSupplies:${active}`,\n      chainId,\n      readerAddress,\n      \"getTokenBalancesWithSupplies\",\n      account || PLACEHOLDER_ACCOUNT,\n    ],\n    {\n      fetcher: fetcher(library, ReaderV2, [tokensForBalanceAndSupplyQuery]),\n    }\n  );\n\n  const { data: aums } = useSWR([`GlpSwap:getAums:${active}`, chainId, glpManagerAddress, \"getAums\"], {\n    fetcher: fetcher(library, GlpManager),\n  });\n\n  const { data: totalTokenWeights } = useSWR(\n    [`GlpSwap:totalTokenWeights:${active}`, chainId, vaultAddress, \"totalTokenWeights\"],\n    {\n      fetcher: fetcher(library, VaultV2),\n    }\n  );\n\n  const tokenAllowanceAddress = swapTokenAddress === AddressZero ? nativeTokenAddress : swapTokenAddress;\n  const { data: tokenAllowance } = useSWR(\n    [active, chainId, tokenAllowanceAddress, \"allowance\", account || PLACEHOLDER_ACCOUNT, glpManagerAddress],\n    {\n      fetcher: fetcher(library, Token),\n    }\n  );\n\n  const { data: lastPurchaseTime } = useSWR(\n    [`GlpSwap:lastPurchaseTime:${active}`, chainId, glpManagerAddress, \"lastAddedAt\", account || PLACEHOLDER_ACCOUNT],\n    {\n      fetcher: fetcher(library, GlpManager),\n    }\n  );\n\n  const { data: glpBalance } = useSWR(\n    [`GlpSwap:glpBalance:${active}`, chainId, feeGlpTrackerAddress, \"stakedAmounts\", account || PLACEHOLDER_ACCOUNT],\n    {\n      fetcher: fetcher(library, RewardTracker),\n    }\n  );\n\n  const glpVesterAddress = getContract(chainId, \"GlpVester\");\n  const { data: reservedAmount } = useSWR(\n    [`GlpSwap:reservedAmount:${active}`, chainId, glpVesterAddress, \"pairAmounts\", account || PLACEHOLDER_ACCOUNT],\n    {\n      fetcher: fetcher(library, Vester),\n    }\n  );\n\n  const { gmxPrice } = useLeveragePrice(chainId, { arbitrum: chainId === ARBITRUM ? library : undefined }, active);\n\n  const rewardTrackersForStakingInfo = [stakedGlpTrackerAddress, feeGlpTrackerAddress];\n  const { data: stakingInfo } = useSWR(\n    [`GlpSwap:stakingInfo:${active}`, chainId, rewardReaderAddress, \"getStakingInfo\", account || PLACEHOLDER_ACCOUNT],\n    {\n      fetcher: fetcher(library, RewardReader, [rewardTrackersForStakingInfo]),\n    }\n  );\n\n  const stakingData = getStakingData(stakingInfo);\n\n  const redemptionTime = lastPurchaseTime ? lastPurchaseTime.add(GLP_COOLDOWN_DURATION) : undefined;\n  const inCooldownWindow = redemptionTime && parseInt(Date.now() / 1000) < redemptionTime;\n\n  const glpSupply = balancesAndSupplies ? balancesAndSupplies[1] : bigNumberify(0);\n  const usdgSupply = balancesAndSupplies ? balancesAndSupplies[3] : bigNumberify(0);\n  let aum;\n  if (aums && aums.length > 0) {\n    aum = isBuying ? aums[0] : aums[1];\n  }\n  const glpPrice =\n    aum && aum.gt(0) && glpSupply.gt(0)\n      ? aum.mul(expandDecimals(1, GLP_DECIMALS)).div(glpSupply)\n      : expandDecimals(1, USD_DECIMALS);\n  let glpBalanceUsd;\n  if (glpBalance) {\n    glpBalanceUsd = glpBalance.mul(glpPrice).div(expandDecimals(1, GLP_DECIMALS));\n  }\n  const glpSupplyUsd = glpSupply.mul(glpPrice).div(expandDecimals(1, GLP_DECIMALS));\n\n  let reserveAmountUsd;\n  if (reservedAmount) {\n    reserveAmountUsd = reservedAmount.mul(glpPrice).div(expandDecimals(1, GLP_DECIMALS));\n  }\n\n  let maxSellAmount = glpBalance;\n  if (glpBalance && reservedAmount) {\n    maxSellAmount = glpBalance.sub(reservedAmount);\n  }\n\n  const { infoTokens } = useInfoTokens(library, chainId, active, tokenBalances, undefined);\n  const swapToken = getToken(chainId, swapTokenAddress);\n  const swapTokenInfo = getTokenInfo(infoTokens, swapTokenAddress);\n\n  const swapTokenBalance = swapTokenInfo && swapTokenInfo.balance ? swapTokenInfo.balance : bigNumberify(0);\n\n  const swapAmount = parseValue(swapValue, swapToken && swapToken.decimals);\n  const glpAmount = parseValue(glpValue, GLP_DECIMALS);\n\n  const needApproval =\n    isBuying && swapTokenAddress !== AddressZero && tokenAllowance && swapAmount && swapAmount.gt(tokenAllowance);\n\n  const swapUsdMin = getUsd(swapAmount, swapTokenAddress, false, infoTokens);\n  const glpUsdMax = glpAmount && glpPrice ? glpAmount.mul(glpPrice).div(expandDecimals(1, GLP_DECIMALS)) : undefined;\n\n  let isSwapTokenCapReached;\n  if (swapTokenInfo.managedUsd && swapTokenInfo.maxUsdgAmount) {\n    isSwapTokenCapReached = swapTokenInfo.managedUsd.gt(\n      adjustForDecimals(swapTokenInfo.maxUsdgAmount, USDG_DECIMALS, USD_DECIMALS)\n    );\n  }\n\n  const onSwapValueChange = (e) => {\n    setAnchorOnSwapAmount(true);\n    setSwapValue(e.target.value);\n  };\n\n  const onGlpValueChange = (e) => {\n    setAnchorOnSwapAmount(false);\n    setGlpValue(e.target.value);\n  };\n\n  const onSelectSwapToken = (token) => {\n    setSwapTokenAddress(token.address);\n    setIsWaitingForApproval(false);\n  };\n\n  const nativeToken = getTokenInfo(infoTokens, AddressZero);\n\n  let totalApr = bigNumberify(0);\n\n  let feeGlpTrackerAnnualRewardsUsd;\n  let feeGlpTrackerApr;\n  if (\n    stakingData &&\n    stakingData.feeGlpTracker &&\n    stakingData.feeGlpTracker.tokensPerInterval &&\n    nativeToken &&\n    nativeToken.minPrice &&\n    glpSupplyUsd &&\n    glpSupplyUsd.gt(0)\n  ) {\n    feeGlpTrackerAnnualRewardsUsd = stakingData.feeGlpTracker.tokensPerInterval\n      .mul(SECONDS_PER_YEAR)\n      .mul(nativeToken.minPrice)\n      .div(expandDecimals(1, 18));\n    feeGlpTrackerApr = feeGlpTrackerAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(glpSupplyUsd);\n    totalApr = totalApr.add(feeGlpTrackerApr);\n  }\n\n  let stakedGlpTrackerAnnualRewardsUsd;\n  let stakedGlpTrackerApr;\n\n  if (\n    gmxPrice &&\n    stakingData &&\n    stakingData.stakedGlpTracker &&\n    stakingData.stakedGlpTracker.tokensPerInterval &&\n    glpSupplyUsd &&\n    glpSupplyUsd.gt(0)\n  ) {\n    stakedGlpTrackerAnnualRewardsUsd = stakingData.stakedGlpTracker.tokensPerInterval\n      .mul(SECONDS_PER_YEAR)\n      .mul(gmxPrice)\n      .div(expandDecimals(1, 18));\n    stakedGlpTrackerApr = stakedGlpTrackerAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(glpSupplyUsd);\n    totalApr = totalApr.add(stakedGlpTrackerApr);\n  }\n\n  useEffect(() => {\n    const updateSwapAmounts = () => {\n      if (anchorOnSwapAmount) {\n        if (!swapAmount) {\n          setGlpValue(\"\");\n          setFeeBasisPoints(\"\");\n          return;\n        }\n\n        if (isBuying) {\n          const { amount: nextAmount, feeBasisPoints: feeBps } = getBuyGlpToAmount(\n            swapAmount,\n            swapTokenAddress,\n            infoTokens,\n            glpPrice,\n            usdgSupply,\n            totalTokenWeights\n          );\n          const nextValue = formatAmountFree(nextAmount, GLP_DECIMALS, GLP_DECIMALS);\n          setGlpValue(nextValue);\n          setFeeBasisPoints(feeBps);\n        } else {\n          const { amount: nextAmount, feeBasisPoints: feeBps } = getSellGlpFromAmount(\n            swapAmount,\n            swapTokenAddress,\n            infoTokens,\n            glpPrice,\n            usdgSupply,\n            totalTokenWeights\n          );\n          const nextValue = formatAmountFree(nextAmount, GLP_DECIMALS, GLP_DECIMALS);\n          setGlpValue(nextValue);\n          setFeeBasisPoints(feeBps);\n        }\n\n        return;\n      }\n\n      if (!glpAmount) {\n        setSwapValue(\"\");\n        setFeeBasisPoints(\"\");\n        return;\n      }\n\n      if (swapToken) {\n        if (isBuying) {\n          const { amount: nextAmount, feeBasisPoints: feeBps } = getBuyGlpFromAmount(\n            glpAmount,\n            swapTokenAddress,\n            infoTokens,\n            glpPrice,\n            usdgSupply,\n            totalTokenWeights\n          );\n          const nextValue = formatAmountFree(nextAmount, swapToken.decimals, swapToken.decimals);\n          setSwapValue(nextValue);\n          setFeeBasisPoints(feeBps);\n        } else {\n          const { amount: nextAmount, feeBasisPoints: feeBps } = getSellGlpToAmount(\n            glpAmount,\n            swapTokenAddress,\n            infoTokens,\n            glpPrice,\n            usdgSupply,\n            totalTokenWeights,\n            true\n          );\n\n          const nextValue = formatAmountFree(nextAmount, swapToken.decimals, swapToken.decimals);\n          setSwapValue(nextValue);\n          setFeeBasisPoints(feeBps);\n        }\n      }\n    };\n\n    updateSwapAmounts();\n  }, [\n    isBuying,\n    anchorOnSwapAmount,\n    swapAmount,\n    glpAmount,\n    swapToken,\n    swapTokenAddress,\n    infoTokens,\n    glpPrice,\n    usdgSupply,\n    totalTokenWeights,\n  ]);\n\n  const switchSwapOption = (hash = \"\") => {\n    history.push(`${history.location.pathname}#${hash}`);\n    props.setIsBuying(hash === \"redeem\" ? false : true);\n  };\n\n  const fillMaxAmount = () => {\n    if (isBuying) {\n      setAnchorOnSwapAmount(true);\n      setSwapValue(formatAmountFree(swapTokenBalance, swapToken.decimals, swapToken.decimals));\n      return;\n    }\n\n    setAnchorOnSwapAmount(false);\n    setGlpValue(formatAmountFree(maxSellAmount, GLP_DECIMALS, GLP_DECIMALS));\n  };\n\n  const getError = () => {\n    if (IS_NETWORK_DISABLED[chainId]) {\n      if (isBuying) return [t`GLP buy disabled, pending ${getChainName(chainId)} upgrade`];\n      return [t`GLP sell disabled, pending ${getChainName(chainId)} upgrade`];\n    }\n\n    if (!isBuying && inCooldownWindow) {\n      return [t`Redemption time not yet reached`];\n    }\n\n    if (!swapAmount || swapAmount.eq(0)) {\n      return [t`Enter an amount`];\n    }\n    if (!glpAmount || glpAmount.eq(0)) {\n      return [t`Enter an amount`];\n    }\n\n    if (isBuying) {\n      const swapTokenInfo = getTokenInfo(infoTokens, swapTokenAddress);\n      if (swapTokenInfo && swapTokenInfo.balance && swapAmount && swapAmount.gt(swapTokenInfo.balance)) {\n        return [t`Insufficient ${swapTokenInfo.symbol} balance`];\n      }\n\n      if (swapTokenInfo.maxUsdgAmount && swapTokenInfo.usdgAmount && swapUsdMin) {\n        const usdgFromAmount = adjustForDecimals(swapUsdMin, USD_DECIMALS, USDG_DECIMALS);\n        const nextUsdgAmount = swapTokenInfo.usdgAmount.add(usdgFromAmount);\n        if (swapTokenInfo.maxUsdgAmount.gt(0) && nextUsdgAmount.gt(swapTokenInfo.maxUsdgAmount)) {\n          return [t`${swapTokenInfo.symbol} pool exceeded, try different token`, true];\n        }\n      }\n    }\n\n    if (!isBuying) {\n      if (maxSellAmount && glpAmount && glpAmount.gt(maxSellAmount)) {\n        return [t`Insufficient GLP balance`];\n      }\n\n      const swapTokenInfo = getTokenInfo(infoTokens, swapTokenAddress);\n      if (\n        swapTokenInfo &&\n        swapTokenInfo.availableAmount &&\n        swapAmount &&\n        swapAmount.gt(swapTokenInfo.availableAmount)\n      ) {\n        return [t`Insufficient liquidity`];\n      }\n    }\n\n    return [false];\n  };\n\n  const isPrimaryEnabled = () => {\n    if (IS_NETWORK_DISABLED[chainId]) {\n      return false;\n    }\n    if (!active) {\n      return true;\n    }\n    const [error, modal] = getError();\n    if (error && !modal) {\n      return false;\n    }\n    if ((needApproval && isWaitingForApproval) || isApproving) {\n      return false;\n    }\n    if (isApproving) {\n      return false;\n    }\n    if (isSubmitting) {\n      return false;\n    }\n    if (isBuying && isSwapTokenCapReached) {\n      return false;\n    }\n\n    return true;\n  };\n\n  const getPrimaryText = () => {\n    if (!active) {\n      return t`Connect Wallet`;\n    }\n    const [error, modal] = getError();\n    if (error && !modal) {\n      return error;\n    }\n    if (isBuying && isSwapTokenCapReached) {\n      return t`Max Capacity for ${swapToken.symbol} Reached`;\n    }\n\n    if (needApproval && isWaitingForApproval) {\n      return t`Waiting for Approval`;\n    }\n    if (isApproving) {\n      return t`Approving ${swapToken.symbol}...`;\n    }\n    if (needApproval) {\n      return t`Approve ${swapToken.symbol}`;\n    }\n\n    if (isSubmitting) {\n      return isBuying ? t`Buying...` : t`Selling...`;\n    }\n\n    return isBuying ? t`Buy GLP` : t`Sell GLP`;\n  };\n\n  const approveFromToken = () => {\n    approveTokens({\n      setIsApproving,\n      library,\n      tokenAddress: swapToken.address,\n      spender: glpManagerAddress,\n      chainId: chainId,\n      onApproveSubmitted: () => {\n        setIsWaitingForApproval(true);\n      },\n      infoTokens,\n      getTokenInfo,\n    });\n  };\n\n  const buyGlp = () => {\n    setIsSubmitting(true);\n\n    const minGlp = glpAmount.mul(BASIS_POINTS_DIVISOR - savedSlippageAmount).div(BASIS_POINTS_DIVISOR);\n\n    const contract = new ethers.Contract(rewardRouterAddress, RewardRouter.abi, library.getSigner());\n    const method = swapTokenAddress === AddressZero ? \"mintAndStakeGlpETH\" : \"mintAndStakeGlp\";\n    const params = swapTokenAddress === AddressZero ? [0, minGlp] : [swapTokenAddress, swapAmount, 0, minGlp];\n    const value = swapTokenAddress === AddressZero ? swapAmount : 0;\n\n    callContract(chainId, contract, method, params, {\n      value,\n      sentMsg: t`Buy submitted.`,\n      failMsg: t`Buy failed.`,\n      successMsg: t`${formatAmount(glpAmount, 18, 4, true)} GLP bought with ${formatAmount(\n        swapAmount,\n        swapTokenInfo.decimals,\n        4,\n        true\n      )} ${swapTokenInfo.symbol}!`,\n      setPendingTxns,\n    })\n      .then(async () => {})\n      .finally(() => {\n        setIsSubmitting(false);\n      });\n  };\n\n  const sellGlp = () => {\n    setIsSubmitting(true);\n\n    const minOut = swapAmount.mul(BASIS_POINTS_DIVISOR - savedSlippageAmount).div(BASIS_POINTS_DIVISOR);\n\n    const contract = new ethers.Contract(rewardRouterAddress, RewardRouter.abi, library.getSigner());\n    const method = swapTokenAddress === AddressZero ? \"unstakeAndRedeemGlpETH\" : \"unstakeAndRedeemGlp\";\n    const params =\n      swapTokenAddress === AddressZero ? [glpAmount, minOut, account] : [swapTokenAddress, glpAmount, minOut, account];\n\n    callContract(chainId, contract, method, params, {\n      sentMsg: t`Sell submitted!`,\n      failMsg: t`Sell failed.`,\n      successMsg: t`${formatAmount(glpAmount, 18, 4, true)} GLP sold for ${formatAmount(\n        swapAmount,\n        swapTokenInfo.decimals,\n        4,\n        true\n      )} ${swapTokenInfo.symbol}!`,\n      setPendingTxns,\n    })\n      .then(async () => {})\n      .finally(() => {\n        setIsSubmitting(false);\n      });\n  };\n\n  const onClickPrimary = () => {\n    if (!active) {\n      connectWallet();\n      return;\n    }\n\n    if (needApproval) {\n      approveFromToken();\n      return;\n    }\n\n    const [, modal] = getError();\n\n    if (modal) {\n      return;\n    }\n\n    if (isBuying) {\n      buyGlp();\n    } else {\n      sellGlp();\n    }\n  };\n\n  let payLabel = t`Pay`;\n  let receiveLabel = t`Receive`;\n  let payBalance = \"$0.00\";\n  let receiveBalance = \"$0.00\";\n  if (isBuying) {\n    if (swapUsdMin) {\n      payBalance = `$${formatAmount(swapUsdMin, USD_DECIMALS, 2, true)}`;\n    }\n    if (glpUsdMax) {\n      receiveBalance = `$${formatAmount(glpUsdMax, USD_DECIMALS, 2, true)}`;\n    }\n  } else {\n    if (glpUsdMax) {\n      payBalance = `$${formatAmount(glpUsdMax, USD_DECIMALS, 2, true)}`;\n    }\n    if (swapUsdMin) {\n      receiveBalance = `$${formatAmount(swapUsdMin, USD_DECIMALS, 2, true)}`;\n    }\n  }\n\n  const selectToken = (token) => {\n    setAnchorOnSwapAmount(false);\n    setSwapTokenAddress(token.address);\n    helperToast.success(t`${token.symbol} selected in order form`);\n  };\n\n  let feePercentageText = formatAmount(feeBasisPoints, 2, 2, true, \"-\");\n  if (feeBasisPoints !== undefined && feeBasisPoints.toString().length > 0) {\n    feePercentageText += \"%\";\n  }\n\n  const wrappedTokenSymbol = getWrappedToken(chainId).symbol;\n  const nativeTokenSymbol = getNativeToken(chainId).symbol;\n\n  const onSwapOptionChange = (opt) => {\n    if (opt === t`Sell GLP`) {\n      switchSwapOption(\"redeem\");\n    } else {\n      switchSwapOption();\n    }\n  };\n\n  return (\n    <div className=\"GlpSwap\">\n      {/* <div className=\"Page-title-section\">\n        <div className=\"Page-title\">{isBuying ? \"Buy GLP\" : \"Sell GLP\"}</div>\n        {isBuying && <div className=\"Page-description\">\n          Purchase <a href=\"https://gmxio.gitbook.io/gmx/glp\" target=\"_blank\" rel=\"noopener noreferrer\">GLP tokens</a> to earn {nativeTokenSymbol} fees from swaps and leverage trading.<br/>\n          Note that there is a minimum holding time of 15 minutes after a purchase.<br/>\n          <div>View <Link to=\"/earn\">staking</Link> page.</div>\n        </div>}\n        {!isBuying && <div className=\"Page-description\">\n          Redeem your GLP tokens for any supported asset.\n          {inCooldownWindow && <div>\n            GLP tokens can only be redeemed 15 minutes after your most recent purchase.<br/>\n            Your last purchase was at {formatDateTime(lastPurchaseTime)}, you can redeem GLP tokens after {formatDateTime(redemptionTime)}.<br/>\n          </div>}\n          <div>View <Link to=\"/earn\">staking</Link> page.</div>\n        </div>}\n      </div> */}\n      <div className=\"GlpSwap-content\">\n        <div className=\"App-card GlpSwap-stats-card\">\n          <div className=\"App-card-title\">\n            <div className=\"App-card-title-mark\">\n              <div className=\"App-card-title-mark-icon\">\n                <img src={glp40Icon} alt=\"glp40Icon\" />\n                {chainId === ARBITRUM ? (\n                  <img src={arbitrum16Icon} alt=\"arbitrum16Icon\" className=\"selected-network-symbol\" />\n                ) : (\n                  <img src={avalanche16Icon} alt=\"avalanche16Icon\" className=\"selected-network-symbol\" />\n                )}\n              </div>\n              <div className=\"App-card-title-mark-info\">\n                <div className=\"App-card-title-mark-title\">GLP</div>\n                <div className=\"App-card-title-mark-subtitle\">GLP</div>\n              </div>\n              <div>\n                <AssetDropdown assetSymbol=\"GLP\" />\n              </div>\n            </div>\n          </div>\n          <div className=\"App-card-divider\"></div>\n          <div className=\"App-card-content\">\n            <div className=\"App-card-row\">\n              <div className=\"label\">\n                <Trans>Price</Trans>\n              </div>\n              <div className=\"value\">${formatAmount(glpPrice, USD_DECIMALS, 3, true)}</div>\n            </div>\n            <div className=\"App-card-row\">\n              <div className=\"label\">\n                <Trans>Wallet</Trans>\n              </div>\n              <div className=\"value\">\n                {formatAmount(glpBalance, GLP_DECIMALS, 4, true)} GLP ($\n                {formatAmount(glpBalanceUsd, USD_DECIMALS, 2, true)})\n              </div>\n            </div>\n            <div className=\"App-card-row\">\n              <div className=\"label\">Staked</div>\n              <div className=\"value\">\n                {formatAmount(glpBalance, GLP_DECIMALS, 4, true)} GLP ($\n                {formatAmount(glpBalanceUsd, USD_DECIMALS, 2, true)})\n              </div>\n            </div>\n          </div>\n          <div className=\"App-card-divider\"></div>\n          <div className=\"App-card-content\">\n            {!isBuying && (\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Reserved</Trans>\n                </div>\n                <div className=\"value\">\n                  <Tooltip\n                    handle={`${formatAmount(reservedAmount, 18, 4, true)} GLP ($${formatAmount(\n                      reserveAmountUsd,\n                      USD_DECIMALS,\n                      2,\n                      true\n                    )})`}\n                    position=\"right-bottom\"\n                    renderContent={() =>\n                      t`${formatAmount(reservedAmount, 18, 4, true)} GLP have been reserved for vesting.`\n                    }\n                  />\n                </div>\n              </div>\n            )}\n            <div className=\"App-card-row\">\n              <div className=\"label\">\n                <Trans>APR</Trans>\n              </div>\n              <div className=\"value\">\n                <Tooltip\n                  handle={`${formatAmount(totalApr, 2, 2, true)}%`}\n                  position=\"right-bottom\"\n                  renderContent={() => {\n                    return (\n                      <>\n                        <div className=\"Tooltip-row\">\n                          <span className=\"label\">\n                            <Trans>\n                              {nativeTokenSymbol} ({wrappedTokenSymbol}) APR\n                            </Trans>\n                          </span>\n                          <span>{formatAmount(feeGlpTrackerApr, 2, 2, false)}%</span>\n                        </div>\n                        <div className=\"Tooltip-row\">\n                          <span className=\"label\">\n                            <Trans>Escrowed LeveragePro APR</Trans>\n                          </span>\n                          <span>{formatAmount(stakedGlpTrackerApr, 2, 2, false)}%</span>\n                        </div>\n                      </>\n                    );\n                  }}\n                />\n              </div>\n            </div>\n            <div className=\"App-card-row\">\n              <div className=\"label\">\n                <Trans>Total Supply</Trans>\n              </div>\n              <div className=\"value\">\n                <Trans>\n                  {formatAmount(glpSupply, GLP_DECIMALS, 4, true)} GLP ($\n                  {formatAmount(glpSupplyUsd, USD_DECIMALS, 2, true)})\n                </Trans>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className=\"GlpSwap-box App-box\">\n          <Tab\n            options={[t`Buy GLP`, t`Sell GLP`]}\n            option={tabLabel}\n            onChange={onSwapOptionChange}\n            className=\"Exchange-swap-option-tabs\"\n          />\n          {isBuying && (\n            <BuyInputSection\n              topLeftLabel={payLabel}\n              topRightLabel={t`Balance: `}\n              tokenBalance={`${formatAmount(swapTokenBalance, swapToken.decimals, 4, true)}`}\n              inputValue={swapValue}\n              onInputValueChange={onSwapValueChange}\n              showMaxButton={swapValue !== formatAmountFree(swapTokenBalance, swapToken.decimals, swapToken.decimals)}\n              onClickTopRightLabel={fillMaxAmount}\n              onClickMax={fillMaxAmount}\n              selectedToken={swapToken}\n              balance={payBalance}\n            >\n              <TokenSelector\n                label={t`Pay`}\n                chainId={chainId}\n                tokenAddress={swapTokenAddress}\n                onSelectToken={onSelectSwapToken}\n                tokens={whitelistedTokens}\n                infoTokens={infoTokens}\n                className=\"GlpSwap-from-token\"\n                showSymbolImage={true}\n                showTokenImgInDropdown={true}\n              />\n            </BuyInputSection>\n          )}\n\n          {!isBuying && (\n            <BuyInputSection\n              topLeftLabel={payLabel}\n              topRightLabel={t`Available: `}\n              tokenBalance={`${formatAmount(maxSellAmount, GLP_DECIMALS, 4, true)}`}\n              inputValue={glpValue}\n              onInputValueChange={onGlpValueChange}\n              showMaxButton={glpValue !== formatAmountFree(maxSellAmount, GLP_DECIMALS, GLP_DECIMALS)}\n              onClickTopRightLabel={fillMaxAmount}\n              onClickMax={fillMaxAmount}\n              balance={payBalance}\n              defaultTokenName={\"GLP\"}\n            >\n              <div className=\"selected-token\">\n                GLP <img src={glp24Icon} alt=\"glp24Icon\" />\n              </div>\n            </BuyInputSection>\n          )}\n\n          <div className=\"AppOrder-ball-container\">\n            <div className=\"AppOrder-ball\">\n              <img\n                src={arrowIcon}\n                alt=\"arrowIcon\"\n                onClick={() => {\n                  setIsBuying(!isBuying);\n                  switchSwapOption(isBuying ? \"redeem\" : \"\");\n                }}\n              />\n            </div>\n          </div>\n\n          {isBuying && (\n            <BuyInputSection\n              topLeftLabel={receiveLabel}\n              topRightLabel={t`Balance: `}\n              tokenBalance={`${formatAmount(glpBalance, GLP_DECIMALS, 4, true)}`}\n              inputValue={glpValue}\n              onInputValueChange={onGlpValueChange}\n              balance={receiveBalance}\n              defaultTokenName={\"GLP\"}\n            >\n              <div className=\"selected-token\">\n                GLP <img src={glp24Icon} alt=\"glp24Icon\" />\n              </div>\n            </BuyInputSection>\n          )}\n\n          {!isBuying && (\n            <BuyInputSection\n              topLeftLabel={receiveLabel}\n              topRightLabel={t`Balance: `}\n              tokenBalance={`${formatAmount(swapTokenBalance, swapToken.decimals, 4, true)}`}\n              inputValue={swapValue}\n              onInputValueChange={onSwapValueChange}\n              balance={receiveBalance}\n              selectedToken={swapToken}\n            >\n              <TokenSelector\n                label={t`Receive`}\n                chainId={chainId}\n                tokenAddress={swapTokenAddress}\n                onSelectToken={onSelectSwapToken}\n                tokens={whitelistedTokens}\n                infoTokens={infoTokens}\n                className=\"GlpSwap-from-token\"\n                showSymbolImage={true}\n                showTokenImgInDropdown={true}\n              />\n            </BuyInputSection>\n          )}\n          <div>\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">{feeBasisPoints > 50 ? t`WARNING: High Fees` : t`Fees`}</div>\n              <div className=\"align-right fee-block\">\n                {isBuying && (\n                  <Tooltip\n                    handle={isBuying && isSwapTokenCapReached ? \"NA\" : feePercentageText}\n                    position=\"right-bottom\"\n                    renderContent={() => {\n                      return (\n                        <>\n                          {feeBasisPoints > 50 && (\n                            <div>\n                              <Trans>To reduce fees, select a different asset to pay with.</Trans>\n                            </div>\n                          )}\n                          <Trans>Check the \"Save on Fees\" section below to get the lowest fee percentages.</Trans>\n                        </>\n                      );\n                    }}\n                  />\n                )}\n                {!isBuying && (\n                  <Tooltip\n                    handle={feePercentageText}\n                    position=\"right-bottom\"\n                    renderContent={() => {\n                      return (\n                        <>\n                          {feeBasisPoints > 50 && (\n                            <div>\n                              <Trans>To reduce fees, select a different asset to receive.</Trans>\n                            </div>\n                          )}\n                          <Trans>Check the \"Save on Fees\" section below to get the lowest fee percentages.</Trans>\n                        </>\n                      );\n                    }}\n                  />\n                )}\n              </div>\n            </div>\n          </div>\n          <div className=\"GlpSwap-cta Exchange-swap-button-container\">\n            <button className=\"App-cta Exchange-swap-button\" onClick={onClickPrimary} disabled={!isPrimaryEnabled()}>\n              {getPrimaryText()}\n            </button>\n          </div>\n        </div>\n      </div>\n      <div className=\"Tab-title-section\">\n        <div className=\"Page-title\">Save on Fees</div>\n        {isBuying && (\n          <div className=\"Page-description\">\n            <Trans>Fees may vary depending on which asset you use to buy GLP.</Trans>\n            <br />{\" \"}\n            <Trans>\n              Enter the amount of GLP you want to purchase in the order form, then check here to compare fees.\n            </Trans>\n          </div>\n        )}\n        {!isBuying && (\n          <div className=\"Page-description\">\n            <Trans>Fees may vary depending on which asset you sell GLP for.</Trans>\n            <br />{\" \"}\n            <Trans>\n              Enter the amount of GLP you want to redeem in the order form, then check here to compare fees.\n            </Trans>\n          </div>\n        )}\n      </div>\n      <div className=\"GlpSwap-token-list\">\n        {/* <div className=\"GlpSwap-token-list-content\"> */}\n        <table className=\"token-table\">\n          <thead>\n            <tr>\n              <th>\n                <Trans>TOKEN</Trans>\n              </th>\n              <th>\n                <Trans>PRICE</Trans>\n              </th>\n              <th>\n                {isBuying ? (\n                  <Tooltip\n                    handle={t`AVAILABLE`}\n                    tooltipIconPosition=\"right\"\n                    position=\"right-bottom text-none\"\n                    renderContent={() => t`Available amount to deposit into GLP.`}\n                  />\n                ) : (\n                  <Tooltip\n                    handle={t`AVAILABLE`}\n                    tooltipIconPosition=\"right\"\n                    position=\"right-bottom text-none\"\n                    renderContent={() => {\n                      return (\n                        <>\n                          <div>\n                            <Trans>Available amount to withdraw from GLP.</Trans>\n                          </div>\n                          <div>\n                            <Trans>Funds not utilized by current open positions.</Trans>\n                          </div>\n                        </>\n                      );\n                    }}\n                  />\n                )}\n              </th>\n              <th>\n                <Trans>WALLET</Trans>\n              </th>\n              <th>\n                <Tooltip\n                  handle={t`FEES`}\n                  tooltipIconPosition=\"right\"\n                  position=\"right-bottom text-none\"\n                  renderContent={() => {\n                    return (\n                      <>\n                        <div>\n                          <Trans>Fees will be shown once you have entered an amount in the order form.</Trans>\n                        </div>\n                      </>\n                    );\n                  }}\n                />\n              </th>\n              <th></th>\n            </tr>\n          </thead>\n          <tbody>\n            {visibleTokens.map((token) => {\n              let tokenFeeBps;\n              if (isBuying) {\n                const { feeBasisPoints: feeBps } = getBuyGlpFromAmount(\n                  glpAmount,\n                  token.address,\n                  infoTokens,\n                  glpPrice,\n                  usdgSupply,\n                  totalTokenWeights\n                );\n                tokenFeeBps = feeBps;\n              } else {\n                const { feeBasisPoints: feeBps } = getSellGlpToAmount(\n                  glpAmount,\n                  token.address,\n                  infoTokens,\n                  glpPrice,\n                  usdgSupply,\n                  totalTokenWeights\n                );\n                tokenFeeBps = feeBps;\n              }\n              const tokenInfo = getTokenInfo(infoTokens, token.address);\n              let managedUsd;\n              if (tokenInfo && tokenInfo.managedUsd) {\n                managedUsd = tokenInfo.managedUsd;\n              }\n              let availableAmountUsd;\n              if (tokenInfo && tokenInfo.minPrice && tokenInfo.availableAmount) {\n                availableAmountUsd = tokenInfo.availableAmount\n                  .mul(tokenInfo.minPrice)\n                  .div(expandDecimals(1, token.decimals));\n              }\n              let balanceUsd;\n              if (tokenInfo && tokenInfo.minPrice && tokenInfo.balance) {\n                balanceUsd = tokenInfo.balance.mul(tokenInfo.minPrice).div(expandDecimals(1, token.decimals));\n              }\n              const tokenImage = importImage(\"ic_\" + token.symbol.toLowerCase() + \"_40.svg\");\n              let isCapReached = tokenInfo.managedAmount?.gt(tokenInfo.maxUsdgAmount);\n\n              let amountLeftToDeposit;\n              if (tokenInfo.maxUsdgAmount && tokenInfo.maxUsdgAmount.gt(0)) {\n                amountLeftToDeposit = adjustForDecimals(tokenInfo.maxUsdgAmount, USDG_DECIMALS, USD_DECIMALS).sub(\n                  tokenInfo.managedUsd\n                );\n              }\n              function renderFees() {\n                const swapUrl =\n                  chainId === ARBITRUM\n                    ? `https://app.uniswap.org/#/swap?inputCurrency=${token.address}`\n                    : `https://traderjoexyz.com/trade?inputCurrency=${token.address}`;\n                switch (true) {\n                  case (isBuying && isCapReached) || (!isBuying && managedUsd?.lt(1)):\n                    return (\n                      <Tooltip\n                        handle=\"NA\"\n                        position=\"right-bottom\"\n                        renderContent={() => (\n                          <div>\n                            <Trans>Max pool capacity reached for {tokenInfo.symbol}</Trans>\n                            <br />\n                            <br />\n                            <Trans>Please mint GLP using another token</Trans>\n                            <br />\n                            <p>\n                              <a href={swapUrl} target=\"_blank\" rel=\"noreferrer\">\n                                <Trans>Swap on {chainId === ARBITRUM ? \"Uniswap\" : \"Trader Joe\"}</Trans>\n                              </a>\n                            </p>\n                          </div>\n                        )}\n                      />\n                    );\n                  case (isBuying && !isCapReached) || (!isBuying && managedUsd?.gt(0)):\n                    return `${formatAmount(tokenFeeBps, 2, 2, true, \"-\")}${\n                      tokenFeeBps !== undefined && tokenFeeBps.toString().length > 0 ? \"%\" : \"\"\n                    }`;\n                  default:\n                    return \"\";\n                }\n              }\n\n              return (\n                <tr key={token.symbol}>\n                  <td>\n                    <div className=\"App-card-title-info\">\n                      <div className=\"App-card-title-info-icon\">\n                        <img src={tokenImage} alt={token.symbol} width=\"40px\" />\n                      </div>\n                      <div className=\"App-card-title-info-text\">\n                        <div className=\"App-card-info-title\">{token.name}</div>\n                        <div className=\"App-card-info-subtitle\">{token.symbol}</div>\n                      </div>\n                      <div>\n                        <AssetDropdown assetSymbol={token.symbol} assetInfo={token} />\n                      </div>\n                    </div>\n                  </td>\n                  <td>${formatKeyAmount(tokenInfo, \"minPrice\", USD_DECIMALS, 2, true)}</td>\n                  <td>\n                    {isBuying && (\n                      <div>\n                        <Tooltip\n                          handle={\n                            amountLeftToDeposit && amountLeftToDeposit.lt(0)\n                              ? \"$0.00\"\n                              : `$${formatAmount(amountLeftToDeposit, USD_DECIMALS, 2, true)}`\n                          }\n                          position=\"right-bottom\"\n                          tooltipIconPosition=\"right\"\n                          renderContent={() => {\n                            return (\n                              <>\n                                <Trans>Current Pool Amount</Trans>: ${formatAmount(managedUsd, USD_DECIMALS, 2, true)} (\n                                {formatKeyAmount(tokenInfo, \"poolAmount\", token.decimals, 2, true)} {token.symbol})\n                                <br />\n                                <br />\n                                <Trans>Max Pool Capacity</Trans>: ${formatAmount(tokenInfo.maxUsdgAmount, 18, 0, true)}\n                              </>\n                            );\n                          }}\n                        />\n                      </div>\n                    )}\n                    {!isBuying && (\n                      <div>\n                        <Tooltip\n                          handle={\n                            availableAmountUsd && availableAmountUsd.lt(0)\n                              ? \"$0.00\"\n                              : `$${formatAmount(availableAmountUsd, USD_DECIMALS, 2, true)}`\n                          }\n                          position=\"right-bottom\"\n                          tooltipIconPosition=\"right\"\n                          renderContent={() => {\n                            return (\n                              <>\n                                Current Pool Amount: {formatKeyAmount(tokenInfo, \"poolAmount\", token.decimals, 2, true)}\n                                {token.symbol}\n                                <br />\n                                <br />\n                                Max Pool Capacity: ${formatAmount(tokenInfo.maxUsdgAmount, 18, 0, true)}\n                              </>\n                            );\n                          }}\n                        />\n                      </div>\n                    )}\n                  </td>\n                  <td>\n                    {formatKeyAmount(tokenInfo, \"balance\", tokenInfo.decimals, 2, true)} {tokenInfo.symbol} ($\n                    {formatAmount(balanceUsd, USD_DECIMALS, 2, true)})\n                  </td>\n                  <td>{renderFees()}</td>\n                  <td>\n                    <button\n                      className={cx(\"App-button-option action-btn\", isBuying ? \"buying\" : \"selling\")}\n                      onClick={() => selectToken(token)}\n                    >\n                      {isBuying ? t`Buy with ${token.symbol}` : t`Sell for ${token.symbol}`}\n                    </button>\n                  </td>\n                </tr>\n              );\n            })}\n          </tbody>\n        </table>\n        <div className=\"token-grid\">\n          {visibleTokens.map((token) => {\n            let tokenFeeBps;\n            if (isBuying) {\n              const { feeBasisPoints: feeBps } = getBuyGlpFromAmount(\n                glpAmount,\n                token.address,\n                infoTokens,\n                glpPrice,\n                usdgSupply,\n                totalTokenWeights\n              );\n              tokenFeeBps = feeBps;\n            } else {\n              const { feeBasisPoints: feeBps } = getSellGlpToAmount(\n                glpAmount,\n                token.address,\n                infoTokens,\n                glpPrice,\n                usdgSupply,\n                totalTokenWeights\n              );\n              tokenFeeBps = feeBps;\n            }\n            const tokenInfo = getTokenInfo(infoTokens, token.address);\n            let managedUsd;\n            if (tokenInfo && tokenInfo.managedUsd) {\n              managedUsd = tokenInfo.managedUsd;\n            }\n            let availableAmountUsd;\n            if (tokenInfo && tokenInfo.minPrice && tokenInfo.availableAmount) {\n              availableAmountUsd = tokenInfo.availableAmount\n                .mul(tokenInfo.minPrice)\n                .div(expandDecimals(1, token.decimals));\n            }\n            let balanceUsd;\n            if (tokenInfo && tokenInfo.minPrice && tokenInfo.balance) {\n              balanceUsd = tokenInfo.balance.mul(tokenInfo.minPrice).div(expandDecimals(1, token.decimals));\n            }\n\n            let amountLeftToDeposit;\n            if (tokenInfo.maxUsdgAmount && tokenInfo.maxUsdgAmount.gt(0)) {\n              amountLeftToDeposit = adjustForDecimals(tokenInfo.maxUsdgAmount, USDG_DECIMALS, USD_DECIMALS).sub(\n                tokenInfo.managedUsd\n              );\n            }\n            let isCapReached = tokenInfo.managedAmount?.gt(tokenInfo.maxUsdgAmount);\n\n            function renderFees() {\n              switch (true) {\n                case (isBuying && isCapReached) || (!isBuying && managedUsd?.lt(1)):\n                  return (\n                    <Tooltip\n                      handle=\"NA\"\n                      position=\"right-bottom\"\n                      renderContent={() =>\n                        t`Max pool capacity reached for ${tokenInfo.symbol}. Please mint GLP using another token`\n                      }\n                    />\n                  );\n                case (isBuying && !isCapReached) || (!isBuying && managedUsd?.gt(0)):\n                  return `${formatAmount(tokenFeeBps, 2, 2, true, \"-\")}${\n                    tokenFeeBps !== undefined && tokenFeeBps.toString().length > 0 ? \"%\" : \"\"\n                  }`;\n                default:\n                  return \"\";\n              }\n            }\n            const tokenImage = importImage(\"ic_\" + token.symbol.toLowerCase() + \"_24.svg\");\n            return (\n              <div className=\"App-card\" key={token.symbol}>\n                <div className=\"mobile-token-card\">\n                  <img src={tokenImage} alt={token.symbol} width=\"20px\" />\n                  <div className=\"token-symbol-text\">{token.symbol}</div>\n                  <div>\n                    <AssetDropdown assetSymbol={token.symbol} assetInfo={token} />\n                  </div>\n                </div>\n                <div className=\"App-card-divider\"></div>\n                <div className=\"App-card-content\">\n                  <div className=\"App-card-row\">\n                    <div className=\"label\">Price</div>\n                    <div>${formatKeyAmount(tokenInfo, \"minPrice\", USD_DECIMALS, 2, true)}</div>\n                  </div>\n                  {isBuying && (\n                    <div className=\"App-card-row\">\n                      <Tooltip\n                        className=\"label\"\n                        handle=\"Available\"\n                        position=\"left-bottom\"\n                        renderContent={() => t`Available amount to deposit into GLP.`}\n                      />\n                      <div>\n                        <Tooltip\n                          handle={amountLeftToDeposit && `$${formatAmount(amountLeftToDeposit, USD_DECIMALS, 2, true)}`}\n                          position=\"right-bottom\"\n                          tooltipIconPosition=\"right\"\n                          renderContent={() => {\n                            return (\n                              <>\n                                <Trans>Current Pool Amount</Trans>: ${formatAmount(managedUsd, USD_DECIMALS, 2, true)} (\n                                {formatKeyAmount(tokenInfo, \"poolAmount\", token.decimals, 2, true)} {token.symbol})\n                                <br />\n                                <br />\n                                <Trans>Max Pool Capacity</Trans>: ${formatAmount(tokenInfo.maxUsdgAmount, 18, 0, true)}\n                              </>\n                            );\n                          }}\n                        />\n                      </div>\n                    </div>\n                  )}\n                  {!isBuying && (\n                    <div className=\"App-card-row\">\n                      <Tooltip\n                        handle={t`Available`}\n                        position=\"left-bottom\"\n                        renderContent={() => {\n                          return (\n                            <>\n                              <div>\n                                <Trans>Available amount to withdraw from GLP.</Trans>\n                              </div>\n                              <div>\n                                <Trans>Funds not utilized by current open positions.</Trans>\n                              </div>\n                            </>\n                          );\n                        }}\n                      />\n                      <div>\n                        <Tooltip\n                          handle={\n                            availableAmountUsd && availableAmountUsd.lt(0)\n                              ? \"$0.00\"\n                              : `$${formatAmount(availableAmountUsd, USD_DECIMALS, 2, true)}`\n                          }\n                          position=\"right-bottom\"\n                          tooltipIconPosition=\"right\"\n                          renderContent={() => {\n                            return (\n                              <>\n                                Current Pool Amount: {formatKeyAmount(tokenInfo, \"poolAmount\", token.decimals, 2, true)}\n                                {token.symbol}\n                                <br />\n                                <br />\n                                Max Pool Capacity: ${formatAmount(tokenInfo.maxUsdgAmount, 18, 0, true)}\n                              </>\n                            );\n                          }}\n                        />\n                      </div>\n                    </div>\n                  )}\n\n                  <div className=\"App-card-row\">\n                    <div className=\"label\">\n                      <Trans>Wallet</Trans>\n                    </div>\n                    <div>\n                      {formatKeyAmount(tokenInfo, \"balance\", tokenInfo.decimals, 2, true)} {tokenInfo.symbol} ($\n                      {formatAmount(balanceUsd, USD_DECIMALS, 2, true)})\n                    </div>\n                  </div>\n                  <div className=\"App-card-row\">\n                    <div className=\"label\">\n                      {tokenFeeBps ? (\n                        t`Fees`\n                      ) : (\n                        <Tooltip\n                          handle={t`Fees`}\n                          renderContent={() => t`Please enter an amount to see fee percentages`}\n                        />\n                      )}\n                    </div>\n                    <div>{renderFees()}</div>\n                  </div>\n                  <div className=\"App-card-divider\"></div>\n                  <div className=\"App-card-options\">\n                    {isBuying && (\n                      <button className=\"App-button-option App-card-option\" onClick={() => selectToken(token)}>\n                        <Trans>Buy with {token.symbol}</Trans>\n                      </button>\n                    )}\n                    {!isBuying && (\n                      <button className=\"App-button-option App-card-option\" onClick={() => selectToken(token)}>\n                        <Trans>Sell for {token.symbol}</Trans>\n                      </button>\n                    )}\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\n\r\nimport GlpSwap from \"../../components/Glp/GlpSwap\";\r\nimport buyGLPIcon from \"../../img/ic_buy_glp.svg\";\r\nimport Footer from \"../../components/Footer/Footer\";\r\nimport \"./BuyGlp.css\";\r\n\r\nimport { useChainId } from \"../../lib/legacy\";\r\nimport { getNativeToken } from \"../../config/Tokens\";\r\n\r\nimport { Trans } from \"@lingui/macro\";\r\n\r\nexport default function BuyGlp(props) {\r\n  const { chainId } = useChainId();\r\n  const history = useHistory();\r\n  const [isBuying, setIsBuying] = useState(true);\r\n  const nativeTokenSymbol = getNativeToken(chainId).symbol;\r\n\r\n  useEffect(() => {\r\n    const hash = history.location.hash.replace(\"#\", \"\");\r\n    const buying = hash === \"redeem\" ? false : true;\r\n    setIsBuying(buying);\r\n  }, [history.location.hash]);\r\n\r\n  return (\r\n    <div className=\"default-container page-layout\">\r\n      <div className=\"section-title-block\">\r\n        <div className=\"section-title-icon\">\r\n          <img src={buyGLPIcon} alt=\"buyGLPIcon\" />\r\n        </div>\r\n        <div className=\"section-title-content\">\r\n          <div className=\"Page-title\">\r\n            <Trans>Buy / Sell GLP</Trans>\r\n          </div>\r\n          <div className=\"Page-description\">\r\n            <Trans>\r\n              Purchase{\" \"}\r\n              <a href=\"https://gmxio.gitbook.io/gmx/glp\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n                GLP tokens\r\n              </a>{\" \"}\r\n              to earn {nativeTokenSymbol} fees from swaps and leverages trading.\r\n            </Trans>\r\n            <br />\r\n            <Trans>Note that there is a minimum holding time of 15 minutes after a purchase.</Trans>\r\n            <br />\r\n            <Trans>\r\n              View <Link to=\"/earn\">staking</Link> page.\r\n            </Trans>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <GlpSwap {...props} isBuying={isBuying} setIsBuying={setIsBuying} />\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n","import cx from \"classnames\";\r\nimport \"./Button.css\";\r\n\r\nexport default function Button({ href, imgSrc, children, onClick, className, size = \"lg\", align = \"center\", ...rest }) {\r\n  let classNames = cx(\"btn btn-primary\", align === \"left\" ? \"btn-left\" : \"btn-center\", `btn-${size}`, className);\r\n  if (typeof children === \"object\") {\r\n    return (\r\n      <a className={classNames} href={href} target=\"_blank\" rel=\"noopener noreferrer\" {...rest}>\r\n        {children}\r\n      </a>\r\n    );\r\n  }\r\n\r\n  if (href) {\r\n    return (\r\n      <a className={classNames} href={href} target=\"_blank\" rel=\"noopener noreferrer\" {...rest}>\r\n        {imgSrc && <img className=\"btn-image\" src={imgSrc} alt={children} />}\r\n        <span className=\"btn-label\">{children}</span>\r\n      </a>\r\n    );\r\n  }\r\n  return (\r\n    <button className={classNames} onClick={onClick} {...rest}>\r\n      {imgSrc && <img className=\"btn-image\" src={imgSrc} alt={children} />}\r\n      <span className=\"btn-label\">{children}</span>\r\n    </button>\r\n  );\r\n}\r\n\r\nexport function ConnectWalletButton({ imgSrc, children, onClick, className = undefined }) {\r\n  let classNames = cx(\"btn btn-primary btn-sm connect-wallet\", className);\r\n  return (\r\n    <button className={classNames} onClick={onClick}>\r\n      {imgSrc && <img className=\"btn-image\" src={imgSrc} alt={children} />}\r\n      <span className=\"btn-label\">{children}</span>\r\n    </button>\r\n  );\r\n}\r\n","import React, { useCallback } from \"react\";\nimport Footer from \"../../components/Footer/Footer\";\nimport \"./BuyLeveragePro.css\";\n\nimport {ARBITRUM, AVALANCHE, BSC_TESTNET, switchNetwork, useChainId} from \"../../lib/legacy\";\n\nimport { useWeb3React } from \"@web3-react/core\";\n\nimport Synapse from \"../../img/ic_synapse.svg\";\nimport Multiswap from \"../../img/ic_multiswap.svg\";\nimport Hop from \"../../img/ic_hop.svg\";\nimport Banxa from \"../../img/ic_banxa.svg\";\nimport Binance from \"../../img/ic_binance_logo.svg\";\nimport avax30Icon from \"../../img/ic_avax_30.svg\";\nimport gmxArbitrum from \"../../img/ic_gmx_arbitrum.svg\";\nimport gmxAvax from \"../../img/ic_gmx_avax.svg\";\nimport ohmArbitrum from \"../../img/ic_olympus_arbitrum.svg\";\nimport Button from \"../../components/Common/Button\";\n\nimport { Trans } from \"@lingui/macro\";\n\nexport default function BuyLeveragePro() {\n  const { chainId } = useChainId();\n  const { active } = useWeb3React();\n\n  const onNetworkSelect = useCallback(\n    (value) => {\n      if (value === chainId) {\n        return;\n      }\n      return switchNetwork(value, active);\n    },\n    [chainId, active]\n  );\n\n  return (\n    <div className=\"BuyGMXGLP default-container page-layout\">\n      <div className=\"BuyGMXGLP-container\">\n        {chainId === BSC_TESTNET && (\n          <div className=\"section-title-block\">\n            <div className=\"section-title-content\">\n              <div className=\"Page-title\">\n                <Trans>Buy / Transfer BNB</Trans>\n              </div>\n              <div className=\"Page-description\">\n                <Trans>BNB is needed on Binance to purchase LeveragePro.</Trans>\n                <br />\n                {/*<Trans>*/}\n                {/*  To purchase GMX on <span onClick={() => onNetworkSelect(AVALANCHE)}>Avalanche</span>, please change*/}\n                {/*  your network.*/}\n                {/*</Trans>*/}\n              </div>\n            </div>\n          </div>\n        )}\n        {chainId === BSC_TESTNET && (\n          <div className=\"BuyGMXGLP-panel\">\n            <div className=\"App-card no-height\">\n              <div className=\"App-card-title\">\n                <Trans>Buy BNB</Trans>\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-content\">\n                <div className=\"BuyGMXGLP-description\">\n                  <Trans>\n                    You can buy BNB directly on{\" \"}\n                    <a href=\"https://www.binance.com/\" target=\"_blank\" rel=\"noopener noreferrer\">\n                      Binance\n                    </a>{\" \"}\n                    using Banxa:\n                  </Trans>\n                </div>\n                <div className=\"direct-purchase-options\">\n                  <Button\n                    href=\"https://gmx.banxa.com?coinType=ETH&fiatType=USD&fiatAmount=500&blockchain=arbitrum\"\n                    imgSrc={Banxa}\n                  >\n                    <Trans>Banxa</Trans>\n                  </Button>\n                </div>\n              </div>\n            </div>\n            <div className=\"App-card no-height\">\n              <div className=\"App-card-title\">\n                <Trans>Transfer ETH</Trans>\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-content\">\n                <div className=\"BuyGMXGLP-description\">\n                  <Trans>You can transfer ETH from other networks to Binance using any of the below options:</Trans>\n                </div>\n                <div className=\"bridge-options\">\n                  <Button\n                    href=\"https://synapseprotocol.com/?inputCurrency=ETH&outputCurrency=ETH&outputChain=42161\"\n                    align=\"left\"\n                    imgSrc={Synapse}\n                  >\n                    <Trans>Synapse</Trans>\n                  </Button>\n                  <Button href=\"https://app.multichain.org/#/router\" align=\"left\" imgSrc={Multiswap}>\n                    <Trans>Multiswap</Trans>\n                  </Button>\n                  <Button\n                    href=\"https://app.hop.exchange/send?token=ETH&sourceNetwork=ethereum&destNetwork=arbitrum\"\n                    align=\"left\"\n                    imgSrc={Hop}\n                  >\n                    <Trans>Hop</Trans>\n                  </Button>\n                  <Button href=\"https://binance.com/\" align=\"left\" imgSrc={Binance}>\n                    <Trans>Binance</Trans>\n                  </Button>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n        {chainId === AVALANCHE && (\n          <div className=\"section-title-block\">\n            <div className=\"section-title-content\">\n              <div className=\"Page-title\">\n                <Trans>Buy / Transfer AVAX</Trans>\n              </div>\n              <div className=\"Page-description\">\n                <Trans>Avax is needed on Avalanche to purchase GMX.</Trans>\n                <br />\n                <Trans>\n                  {\" \"}\n                  To purchase GMX on <span onClick={() => onNetworkSelect(ARBITRUM)}>Arbitrum</span>, please change your\n                  network.\n                </Trans>\n              </div>\n            </div>\n          </div>\n        )}\n        {chainId === AVALANCHE && (\n          <div className=\"BuyGMXGLP-panel\">\n            <div className=\"App-card no-height\">\n              <div className=\"App-card-title\">\n                <Trans>Buy AVAX</Trans>\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-content\">\n                <div className=\"BuyGMXGLP-description\">\n                  <Trans>\n                    You can buy AVAX directly on{\" \"}\n                    <a href=\"https://www.avax.network/\" target=\"_blank\" rel=\"noopener noreferrer\">\n                      Avalanche\n                    </a>{\" \"}\n                    using Banxa:\n                  </Trans>\n                </div>\n                <div className=\"direct-purchase-options\">\n                  <Button\n                    href=\"https://gmx.banxa.com?coinType=AVAX&fiatType=USD&fiatAmount=500&blockchain=avalanche\"\n                    imgSrc={Banxa}\n                  >\n                    <Trans>Banxa</Trans>\n                  </Button>\n                </div>\n              </div>\n            </div>\n            <div className=\"App-card no-height\">\n              <div className=\"App-card-title\">\n                <Trans>Transfer AVAX</Trans>\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-content\">\n                <div className=\"BuyGMXGLP-description\">\n                  <Trans>You can transfer AVAX to Avalanche using any of the below options.</Trans> <br />\n                  <br />\n                  <Trans>\n                    Using the Avalanche or Synapse bridges, you can also transfer any other supported cryptocurrency,\n                    and receive free AVAX to pay for the network's fees.\n                  </Trans>\n                </div>\n                <div className=\"bridge-options\">\n                  <Button align=\"left\" href=\"https://bridge.avax.network/\" imgSrc={avax30Icon}>\n                    <Trans>Avalanche</Trans>\n                  </Button>\n                  <Button align=\"left\" href=\"https://synapseprotocol.com/\" imgSrc={Synapse}>\n                    <Trans>Synapse</Trans>\n                  </Button>\n                  <Button align=\"left\" href=\"https://app.multichain.org/\" imgSrc={Multiswap}>\n                    <Trans>Multiswap</Trans>\n                  </Button>\n                  <Button align=\"left\" href=\"https://binance.com\" imgSrc={Binance}>\n                    <Trans>Binance</Trans>\n                  </Button>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n        {chainId === BSC_TESTNET && (\n          <div className=\"BuyGMXGLP-panel\">\n            <div className=\"buy-card\">\n              <div className=\"section-title-content\">\n                <div className=\"card-title\">\n                  <Trans>Buy LeveragePro</Trans>\n                </div>\n              </div>\n              <div className=\"App-card no-height\">\n                <div className=\"App-card-content no-title\">\n                  <div className=\"BuyGMXGLP-description better-rates-description\">\n                    <Trans>\n                      After you have BNB, set your network to{\" \"}\n                      <a href=\"https://www.binance.com/\" target=\"_blank\" rel=\"noopener noreferrer\">\n                        Binance\n                      </a>{\" \"}\n                      then click the button below:\n                    </Trans>\n                  </div>\n                  <div className=\"direct-purchase-options\">\n                    <Button\n                      size=\"xl\"\n                      imgSrc={gmxAvax}\n                      href=\"https://traderjoexyz.com/trade?outputCurrency=0x62edc0692BD897D2295872a9FFCac5425011c661#/\"\n                    >\n                      <Trans>Purchase LeveragePro</Trans>\n                    </Button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {chainId === ARBITRUM && (\n          <div className=\"BuyGMXGLP-panel\">\n            <div className=\"buy-card\">\n              <div className=\"section-title-content\">\n                <div className=\"card-title\">\n                  <Trans>Buy GMX</Trans>\n                </div>\n              </div>\n              <div className=\"App-card no-height\">\n                <div className=\"App-card-content no-title\">\n                  <div className=\"BuyGMXGLP-description better-rates-description\">\n                    <Trans>\n                      After you have ETH, set your network to{\" \"}\n                      <a href=\"https://arbitrum.io/bridge-tutorial/\" target=\"_blank\" rel=\"noopener noreferrer\">\n                        Arbitrum\n                      </a>{\" \"}\n                      then click the button below:\n                    </Trans>\n                  </div>\n                  <div className=\"buy-gmx\">\n                    <Button\n                      size=\"xl\"\n                      imgSrc={gmxArbitrum}\n                      href=\"https://app.uniswap.org/#/swap?inputCurrency=ETH&outputCurrency=0xfc5A1A6EB076a2C7aD06eD22C90d7E710E35ad0a\"\n                    >\n                      <Trans>Purchase GMX</Trans>\n                    </Button>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div className=\"buy-card\">\n              <div className=\"section-title-content\">\n                <div className=\"card-title\">\n                  <Trans>Buy GMX Bonds</Trans>\n                </div>\n              </div>\n              <div className=\"App-card no-height\">\n                <div className=\"App-card-content no-title\">\n                  <div className=\"BuyGMXGLP-description\">\n                    <Trans>GMX bonds can be bought on Olympus Pro with a discount and a small vesting period:</Trans>\n                  </div>\n                  <div className=\"buy-gmx\">\n                    <Button size=\"xl\" imgSrc={ohmArbitrum} href=\"https://pro.olympusdao.finance/#/partners/GMX\">\n                      <Trans>Olympus Pro</Trans>\n                    </Button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n      <Footer />\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Trans } from \"@lingui/macro\";\nimport Footer from \"../../components/Footer/Footer\";\nimport \"./Buy.css\";\nimport TokenCard from \"../../components/TokenCard/TokenCard\";\nimport buyGMXIcon from \"../../img/buy_gmx.svg\";\nimport SEO from \"../../components/Common/SEO\";\nimport { getPageTitle } from \"../../lib/legacy\";\n\nexport default function BuyGMXGLP() {\n  return (\n    <SEO title={getPageTitle(\"Buy GLP or GMX\")}>\n      <div className=\"BuyGMXGLP page-layout\">\n        <div className=\"BuyGMXGLP-container default-container\">\n          <div className=\"section-title-block\">\n            <div className=\"section-title-icon\">\n              <img src={buyGMXIcon} alt=\"buyGMXIcon\" />\n            </div>\n            <div className=\"section-title-content\">\n              <div className=\"Page-title\">\n                <Trans>Buy LeveragePro or GLP</Trans>\n              </div>\n            </div>\n          </div>\n          <TokenCard />\n        </div>\n        <Footer />\n      </div>\n    </SEO>\n  );\n}\n","import React, { useState } from \"react\";\r\nimport { ethers } from \"ethers\";\r\nimport { useWeb3React } from \"@web3-react/core\";\r\nimport { useChainId } from \"../../lib/legacy\";\r\n\r\nimport ERC721 from \"../../abis/ERC721.json\";\r\n\r\nimport { callContract } from \"../../domain/legacy\";\r\nimport \"./NftWallet.css\";\r\n\r\nexport default function NftWallet() {\r\n  const [nftAddress, setNftAddress] = useState(\"\");\r\n  const [nftId, setNftId] = useState(\"\");\r\n  const [receiver, setReceiver] = useState(\"\");\r\n  const [isSubmitting, setIsSubmitting] = useState(\"\");\r\n\r\n  const { active, account, library } = useWeb3React();\r\n  const { chainId } = useChainId();\r\n\r\n  function getTransferError() {\r\n    if (!active) {\r\n      return \"Wallet not connected\";\r\n    }\r\n    if (!receiver || receiver.length === 0) {\r\n      return \"Enter Receiver Address\";\r\n    }\r\n    if (!ethers.utils.isAddress(receiver)) {\r\n      return \"Invalid Receiver Address\";\r\n    }\r\n    if (!nftAddress || nftAddress.length === 0) {\r\n      return \"Enter NFT Address\";\r\n    }\r\n    if (!ethers.utils.isAddress(nftAddress)) {\r\n      return \"Invalid NFT Address\";\r\n    }\r\n    if (!nftId || nftId.toString().length === 0) {\r\n      return \"Enter NFT ID\";\r\n    }\r\n  }\r\n\r\n  function getPrimaryText() {\r\n    const transferError = getTransferError();\r\n    if (transferError) {\r\n      return transferError;\r\n    }\r\n    if (isSubmitting) {\r\n      return \"Tranferring...\";\r\n    }\r\n    return \"Transfer NFT\";\r\n  }\r\n\r\n  function isPrimaryEnabled() {\r\n    return !getTransferError();\r\n  }\r\n\r\n  function transferNft() {\r\n    setIsSubmitting(true);\r\n    const contract = new ethers.Contract(nftAddress, ERC721.abi, library.getSigner());\r\n    callContract(chainId, contract, \"transferFrom\", [account, receiver, nftId], {\r\n      sentMsg: \"Transfer submitted!\",\r\n      failMsg: \"Transfer failed.\",\r\n    }).finally(() => {\r\n      setIsSubmitting(false);\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div className=\"NftWallet Page page-layout\">\r\n      <div className=\"Page-title-section\">\r\n        <div className=\"Page-title\">NFT Wallet</div>\r\n      </div>\r\n      <div className=\"NftWallet-content\">\r\n        <div className=\"NftWallet-row\">\r\n          <label>Receiver Address</label>\r\n          <div>\r\n            <input type=\"text\" value={receiver} onChange={(e) => setReceiver(e.target.value)} />\r\n          </div>\r\n        </div>\r\n        <div className=\"NftWallet-row\">\r\n          <label>NFT Address</label>\r\n          <div>\r\n            <input type=\"text\" value={nftAddress} onChange={(e) => setNftAddress(e.target.value)} />\r\n          </div>\r\n        </div>\r\n        <div className=\"NftWallet-row\">\r\n          <label>NFT ID</label>\r\n          <div>\r\n            <input type=\"number\" value={nftId} onChange={(e) => setNftId(e.target.value)} />\r\n          </div>\r\n        </div>\r\n        <div className=\"NftWallet-row\">\r\n          <button className=\"App-cta Exchange-swap-button\" disabled={!isPrimaryEnabled()} onClick={() => transferNft()}>\r\n            {getPrimaryText()}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport useSWR from \"swr\";\r\nimport { ethers } from \"ethers\";\r\nimport { useWeb3React } from \"@web3-react/core\";\r\nimport {\r\n  ARBITRUM,\r\n  AVALANCHE,\r\n  PLACEHOLDER_ACCOUNT,\r\n  useChainId,\r\n  fetcher,\r\n  formatAmount,\r\n  formatAmountFree,\r\n  parseValue,\r\n  bigNumberify,\r\n} from \"../../lib/legacy\";\r\n\r\nimport { getContract } from \"../../config/Addresses\";\r\n\r\nimport { callContract } from \"../../domain/legacy\";\r\n\r\nimport Token from \"../../abis/Token.json\";\r\nimport RewardReader from \"../../abis/RewardReader.json\";\r\n\r\nimport Checkbox from \"../../components/Checkbox/Checkbox\";\r\n\r\nimport \"./ClaimEsGmx.css\";\r\n\r\nimport arbitrumIcon from \"../../img/ic_arbitrum_96.svg\";\r\nimport avaIcon from \"../../img/ic_avalanche_96.svg\";\r\n\r\nimport { Trans, t } from \"@lingui/macro\";\r\n\r\nconst VEST_WITH_GMX_ARB = \"VEST_WITH_GMX_ARB\";\r\nconst VEST_WITH_GLP_ARB = \"VEST_WITH_GLP_ARB\";\r\nconst VEST_WITH_GMX_AVAX = \"VEST_WITH_GMX_AVAX\";\r\nconst VEST_WITH_GLP_AVAX = \"VEST_WITH_GLP_AVAX\";\r\n\r\nexport function getVestingDataV2(vestingInfo) {\r\n  if (!vestingInfo || vestingInfo.length === 0) {\r\n    return;\r\n  }\r\n\r\n  const keys = [\"gmxVester\", \"glpVester\"];\r\n  const data = {};\r\n  const propsLength = 12;\r\n\r\n  for (let i = 0; i < keys.length; i++) {\r\n    const key = keys[i];\r\n    data[key] = {\r\n      pairAmount: vestingInfo[i * propsLength],\r\n      vestedAmount: vestingInfo[i * propsLength + 1],\r\n      escrowedBalance: vestingInfo[i * propsLength + 2],\r\n      claimedAmounts: vestingInfo[i * propsLength + 3],\r\n      claimable: vestingInfo[i * propsLength + 4],\r\n      maxVestableAmount: vestingInfo[i * propsLength + 5],\r\n      combinedAverageStakedAmount: vestingInfo[i * propsLength + 6],\r\n      cumulativeReward: vestingInfo[i * propsLength + 7],\r\n      transferredCumulativeReward: vestingInfo[i * propsLength + 8],\r\n      bonusReward: vestingInfo[i * propsLength + 9],\r\n      averageStakedAmount: vestingInfo[i * propsLength + 10],\r\n      transferredAverageStakedAmount: vestingInfo[i * propsLength + 11],\r\n    };\r\n\r\n    data[key + \"PairAmount\"] = data[key].pairAmount;\r\n    data[key + \"VestedAmount\"] = data[key].vestedAmount;\r\n    data[key + \"EscrowedBalance\"] = data[key].escrowedBalance;\r\n    data[key + \"ClaimSum\"] = data[key].claimedAmounts.add(data[key].claimable);\r\n    data[key + \"Claimable\"] = data[key].claimable;\r\n    data[key + \"MaxVestableAmount\"] = data[key].maxVestableAmount;\r\n    data[key + \"CombinedAverageStakedAmount\"] = data[key].combinedAverageStakedAmount;\r\n    data[key + \"CumulativeReward\"] = data[key].cumulativeReward;\r\n    data[key + \"TransferredCumulativeReward\"] = data[key].transferredCumulativeReward;\r\n    data[key + \"BonusReward\"] = data[key].bonusReward;\r\n    data[key + \"AverageStakedAmount\"] = data[key].averageStakedAmount;\r\n    data[key + \"TransferredAverageStakedAmount\"] = data[key].transferredAverageStakedAmount;\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\nfunction getVestingValues({ minRatio, amount, vestingDataItem }) {\r\n  if (!vestingDataItem || !amount || amount.eq(0)) {\r\n    return;\r\n  }\r\n\r\n  let currentRatio = bigNumberify(0);\r\n\r\n  const ratioMultiplier = 10000;\r\n  const maxVestableAmount = vestingDataItem.maxVestableAmount;\r\n  const nextMaxVestableEsGmx = maxVestableAmount.add(amount);\r\n\r\n  const combinedAverageStakedAmount = vestingDataItem.combinedAverageStakedAmount;\r\n  if (maxVestableAmount.gt(0)) {\r\n    currentRatio = combinedAverageStakedAmount.mul(ratioMultiplier).div(maxVestableAmount);\r\n  }\r\n\r\n  const transferredCumulativeReward = vestingDataItem.transferredCumulativeReward;\r\n  const nextTransferredCumulativeReward = transferredCumulativeReward.add(amount);\r\n  const cumulativeReward = vestingDataItem.cumulativeReward;\r\n  const totalCumulativeReward = cumulativeReward.add(nextTransferredCumulativeReward);\r\n\r\n  let nextCombinedAverageStakedAmount = combinedAverageStakedAmount;\r\n\r\n  if (combinedAverageStakedAmount.lt(totalCumulativeReward.mul(minRatio))) {\r\n    const averageStakedAmount = vestingDataItem.averageStakedAmount;\r\n    let nextTransferredAverageStakedAmount = totalCumulativeReward.mul(minRatio);\r\n    nextTransferredAverageStakedAmount = nextTransferredAverageStakedAmount.sub(\r\n      averageStakedAmount.mul(cumulativeReward).div(totalCumulativeReward)\r\n    );\r\n    nextTransferredAverageStakedAmount = nextTransferredAverageStakedAmount\r\n      .mul(totalCumulativeReward)\r\n      .div(nextTransferredCumulativeReward);\r\n\r\n    nextCombinedAverageStakedAmount = averageStakedAmount\r\n      .mul(cumulativeReward)\r\n      .div(totalCumulativeReward)\r\n      .add(nextTransferredAverageStakedAmount.mul(nextTransferredCumulativeReward).div(totalCumulativeReward));\r\n  }\r\n\r\n  const nextRatio = nextCombinedAverageStakedAmount.mul(ratioMultiplier).div(nextMaxVestableEsGmx);\r\n\r\n  const initialStakingAmount = currentRatio.mul(maxVestableAmount);\r\n  const nextStakingAmount = nextRatio.mul(nextMaxVestableEsGmx);\r\n\r\n  return {\r\n    maxVestableAmount,\r\n    currentRatio,\r\n    nextMaxVestableEsGmx,\r\n    nextRatio,\r\n    initialStakingAmount,\r\n    nextStakingAmount,\r\n  };\r\n}\r\n\r\nexport default function ClaimEsGmx({ setPendingTxns }) {\r\n  const { active, account, library } = useWeb3React();\r\n  const { chainId } = useChainId();\r\n  const [selectedOption, setSelectedOption] = useState(\"\");\r\n  const [isClaiming, setIsClaiming] = useState(false);\r\n  const [value, setValue] = useState(\"\");\r\n\r\n  const isArbitrum = chainId === ARBITRUM;\r\n\r\n  const esGmxIouAddress = getContract(chainId, \"ES_GMX_IOU\");\r\n\r\n  const { data: esGmxIouBalance } = useSWR(\r\n    isArbitrum && [\r\n      `ClaimEsGmx:esGmxIouBalance:${active}`,\r\n      chainId,\r\n      esGmxIouAddress,\r\n      \"balanceOf\",\r\n      account || PLACEHOLDER_ACCOUNT,\r\n    ],\r\n    {\r\n      fetcher: fetcher(library, Token),\r\n    }\r\n  );\r\n\r\n  const arbRewardReaderAddress = getContract(ARBITRUM, \"RewardReader\");\r\n  const avaxRewardReaderAddress = getContract(AVALANCHE, \"RewardReader\");\r\n\r\n  const arbVesterAdddresses = [getContract(ARBITRUM, \"GmxVester\"), getContract(ARBITRUM, \"GlpVester\")];\r\n  const avaxVesterAdddresses = [getContract(AVALANCHE, \"GmxVester\"), getContract(AVALANCHE, \"GlpVester\")];\r\n\r\n  const { data: arbVestingInfo } = useSWR(\r\n    [\r\n      `StakeV2:vestingInfo:${active}`,\r\n      ARBITRUM,\r\n      arbRewardReaderAddress,\r\n      \"getVestingInfoV2\",\r\n      account || PLACEHOLDER_ACCOUNT,\r\n    ],\r\n    {\r\n      fetcher: fetcher(undefined, RewardReader, [arbVesterAdddresses]),\r\n    }\r\n  );\r\n\r\n  const { data: avaxVestingInfo } = useSWR(\r\n    [\r\n      `StakeV2:vestingInfo:${active}`,\r\n      AVALANCHE,\r\n      avaxRewardReaderAddress,\r\n      \"getVestingInfoV2\",\r\n      account || PLACEHOLDER_ACCOUNT,\r\n    ],\r\n    {\r\n      fetcher: fetcher(undefined, RewardReader, [avaxVesterAdddresses]),\r\n    }\r\n  );\r\n\r\n  const arbVestingData = getVestingDataV2(arbVestingInfo);\r\n  const avaxVestingData = getVestingDataV2(avaxVestingInfo);\r\n\r\n  let amount = parseValue(value, 18);\r\n\r\n  let maxVestableAmount;\r\n  let currentRatio;\r\n\r\n  let nextMaxVestableEsGmx;\r\n  let nextRatio;\r\n\r\n  let initialStakingAmount;\r\n  let nextStakingAmount;\r\n\r\n  let stakingToken = \"staked GMX\";\r\n\r\n  const shouldShowStakingAmounts = false;\r\n\r\n  if (selectedOption === VEST_WITH_GMX_ARB && arbVestingData) {\r\n    const result = getVestingValues({\r\n      minRatio: bigNumberify(4),\r\n      amount,\r\n      vestingDataItem: arbVestingData.gmxVester,\r\n    });\r\n\r\n    if (result) {\r\n      ({ maxVestableAmount, currentRatio, nextMaxVestableEsGmx, nextRatio, initialStakingAmount, nextStakingAmount } =\r\n        result);\r\n    }\r\n  }\r\n\r\n  if (selectedOption === VEST_WITH_GLP_ARB && arbVestingData) {\r\n    const result = getVestingValues({\r\n      minRatio: bigNumberify(320),\r\n      amount,\r\n      vestingDataItem: arbVestingData.glpVester,\r\n    });\r\n\r\n    if (result) {\r\n      ({ maxVestableAmount, currentRatio, nextMaxVestableEsGmx, nextRatio, initialStakingAmount, nextStakingAmount } =\r\n        result);\r\n    }\r\n\r\n    stakingToken = \"GLP\";\r\n  }\r\n\r\n  if (selectedOption === VEST_WITH_GMX_AVAX && avaxVestingData) {\r\n    const result = getVestingValues({\r\n      minRatio: bigNumberify(4),\r\n      amount,\r\n      vestingDataItem: avaxVestingData.gmxVester,\r\n    });\r\n\r\n    if (result) {\r\n      ({ maxVestableAmount, currentRatio, nextMaxVestableEsGmx, nextRatio, initialStakingAmount, nextStakingAmount } =\r\n        result);\r\n    }\r\n  }\r\n\r\n  if (selectedOption === VEST_WITH_GLP_AVAX && avaxVestingData) {\r\n    const result = getVestingValues({\r\n      minRatio: bigNumberify(320),\r\n      amount,\r\n      vestingDataItem: avaxVestingData.glpVester,\r\n    });\r\n\r\n    if (result) {\r\n      ({ maxVestableAmount, currentRatio, nextMaxVestableEsGmx, nextRatio, initialStakingAmount, nextStakingAmount } =\r\n        result);\r\n    }\r\n\r\n    stakingToken = \"GLP\";\r\n  }\r\n\r\n  const getError = () => {\r\n    if (!active) {\r\n      return t`Wallet not connected`;\r\n    }\r\n\r\n    if (esGmxIouBalance && esGmxIouBalance.eq(0)) {\r\n      return t`No esGMX to claim`;\r\n    }\r\n\r\n    if (!amount || amount.eq(0)) {\r\n      return t`Enter an amount`;\r\n    }\r\n\r\n    if (selectedOption === \"\") {\r\n      return t`Select an option`;\r\n    }\r\n\r\n    return false;\r\n  };\r\n\r\n  const error = getError();\r\n\r\n  const getPrimaryText = () => {\r\n    if (error) {\r\n      return error;\r\n    }\r\n\r\n    if (isClaiming) {\r\n      return t`Claiming...`;\r\n    }\r\n\r\n    return t`Claim`;\r\n  };\r\n\r\n  const isPrimaryEnabled = () => {\r\n    return !error && !isClaiming;\r\n  };\r\n\r\n  const claim = () => {\r\n    setIsClaiming(true);\r\n\r\n    let receiver;\r\n\r\n    if (selectedOption === VEST_WITH_GMX_ARB) {\r\n      receiver = \"0x544a6ec142Aa9A7F75235fE111F61eF2EbdC250a\";\r\n    }\r\n\r\n    if (selectedOption === VEST_WITH_GLP_ARB) {\r\n      receiver = \"0x9d8f6f6eE45275A5Ca3C6f6269c5622b1F9ED515\";\r\n    }\r\n\r\n    if (selectedOption === VEST_WITH_GMX_AVAX) {\r\n      receiver = \"0x171a321A78dAE0CDC0Ba3409194df955DEEcA746\";\r\n    }\r\n\r\n    if (selectedOption === VEST_WITH_GLP_AVAX) {\r\n      receiver = \"0x28863Dd19fb52DF38A9f2C6dfed40eeB996e3818\";\r\n    }\r\n\r\n    const contract = new ethers.Contract(esGmxIouAddress, Token.abi, library.getSigner());\r\n    callContract(chainId, contract, \"transfer\", [receiver, amount], {\r\n      sentMsg: t`Claim submitted!`,\r\n      failMsg: t`Claim failed.`,\r\n      successMsg: t`Claim completed!`,\r\n      setPendingTxns,\r\n    })\r\n      .then(async (res) => {})\r\n      .finally(() => {\r\n        setIsClaiming(false);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"ClaimEsGmx Page page-layout\">\r\n      <div className=\"Page-title-section mt-0\">\r\n        <div className=\"Page-title\">\r\n          <Trans>Claim esGMX</Trans>\r\n        </div>\r\n        {!isArbitrum && (\r\n          <div className=\"Page-description\">\r\n            <br />\r\n            <Trans>Please switch your network to Arbitrum.</Trans>\r\n          </div>\r\n        )}\r\n        {isArbitrum && (\r\n          <div>\r\n            <div className=\"Page-description\">\r\n              <br />\r\n              <Trans>You have {formatAmount(esGmxIouBalance, 18, 2, true)} esGMX (IOU) tokens.</Trans>\r\n              <br />\r\n              <br />\r\n              <Trans>The address of the esGMX (IOU) token is {esGmxIouAddress}.</Trans>\r\n              <br />\r\n              <Trans>\r\n                The esGMX (IOU) token is transferrable. You can add the token to your wallet and send it to another\r\n                address to claim if you'd like.\r\n              </Trans>\r\n              <br />\r\n              <br />\r\n              <Trans>Select your vesting option below then click \"Claim\".</Trans>\r\n              <br />\r\n              <Trans>\r\n                After claiming, the esGMX tokens will be airdropped to your account on the selected network within 7\r\n                days.\r\n              </Trans>\r\n              <br />\r\n              <Trans>The esGMX tokens can be staked or vested at any time.</Trans>\r\n              <br />\r\n              <Trans>\r\n                Your esGMX (IOU) balance will decrease by your claim amount after claiming, this is expected behaviour.\r\n              </Trans>\r\n              <br />\r\n              <Trans>\r\n                You can check your claim history{\" \"}\r\n                <a\r\n                  href={`https://arbiscan.io/token/${esGmxIouAddress}?a=${account}`}\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                >\r\n                  here\r\n                </a>\r\n                .\r\n              </Trans>\r\n            </div>\r\n            <br />\r\n            <div className=\"ClaimEsGmx-vesting-options\">\r\n              <Checkbox\r\n                className=\"arbitrum btn btn-primary btn-left btn-lg\"\r\n                isChecked={selectedOption === VEST_WITH_GMX_ARB}\r\n                setIsChecked={() => setSelectedOption(VEST_WITH_GMX_ARB)}\r\n              >\r\n                <div className=\"ClaimEsGmx-option-label\">\r\n                  <Trans>Vest with GMX on Arbitrum</Trans>\r\n                </div>\r\n                <img src={arbitrumIcon} alt=\"arbitrum\" />\r\n              </Checkbox>\r\n              <Checkbox\r\n                className=\"arbitrum btn btn-primary btn-left btn-lg\"\r\n                isChecked={selectedOption === VEST_WITH_GLP_ARB}\r\n                setIsChecked={() => setSelectedOption(VEST_WITH_GLP_ARB)}\r\n              >\r\n                <div className=\"ClaimEsGmx-option-label\">\r\n                  <Trans>Vest with GLP on Arbitrum</Trans>\r\n                </div>\r\n                <img src={arbitrumIcon} alt=\"arbitrum\" />\r\n              </Checkbox>\r\n              <Checkbox\r\n                className=\"avalanche btn btn-primary btn-left btn-lg\"\r\n                isChecked={selectedOption === VEST_WITH_GMX_AVAX}\r\n                setIsChecked={() => setSelectedOption(VEST_WITH_GMX_AVAX)}\r\n              >\r\n                <div className=\"ClaimEsGmx-option-label\">\r\n                  <Trans>Vest with GMX on Avalanche</Trans>\r\n                </div>\r\n                <img src={avaIcon} alt=\"avalanche\" />\r\n              </Checkbox>\r\n              <Checkbox\r\n                className=\"avalanche btn btn-primary btn-left btn-lg\"\r\n                isChecked={selectedOption === VEST_WITH_GLP_AVAX}\r\n                setIsChecked={() => setSelectedOption(VEST_WITH_GLP_AVAX)}\r\n              >\r\n                <div className=\"ClaimEsGmx-option-label avalanche\">\r\n                  <Trans>Vest with GLP on Avalanche</Trans>\r\n                </div>\r\n                <img src={avaIcon} alt=\"avalanche\" />\r\n              </Checkbox>\r\n            </div>\r\n            <br />\r\n            {!error && (\r\n              <div className=\"muted\">\r\n                <Trans>\r\n                  You can currently vest a maximum of {formatAmount(maxVestableAmount, 18, 2, true)} esGMX tokens at a\r\n                  ratio of {formatAmount(currentRatio, 4, 2, true)} {stakingToken} to 1 esGMX.\r\n                </Trans>\r\n                {shouldShowStakingAmounts && `${formatAmount(initialStakingAmount, 18, 2, true)}.`}\r\n                <br />\r\n                <Trans>\r\n                  After claiming you will be able to vest a maximum of {formatAmount(nextMaxVestableEsGmx, 18, 2, true)}{\" \"}\r\n                  esGMX at a ratio of {formatAmount(nextRatio, 4, 2, true)} {stakingToken} to 1 esGMX.\r\n                </Trans>\r\n                {shouldShowStakingAmounts && `${formatAmount(nextStakingAmount, 18, 2, true)}.`}\r\n                <br />\r\n                <br />\r\n              </div>\r\n            )}\r\n            <div>\r\n              <div className=\"ClaimEsGmx-input-label muted\">\r\n                <Trans>Amount to claim</Trans>\r\n              </div>\r\n              <div className=\"ClaimEsGmx-input-container\">\r\n                <input type=\"number\" placeholder=\"0.0\" value={value} onChange={(e) => setValue(e.target.value)} />\r\n                {value !== formatAmountFree(esGmxIouBalance, 18, 18) && (\r\n                  <div\r\n                    className=\"ClaimEsGmx-max-button\"\r\n                    onClick={() => setValue(formatAmountFree(esGmxIouBalance, 18, 18))}\r\n                  >\r\n                    <Trans>MAX</Trans>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n            <br />\r\n            <div>\r\n              <button className=\"App-cta Exchange-swap-button\" disabled={!isPrimaryEnabled()} onClick={() => claim()}>\r\n                {getPrimaryText()}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport useSWR from \"swr\";\r\nimport { ethers } from \"ethers\";\r\nimport { useWeb3React } from \"@web3-react/core\";\r\n\r\nimport { getContract } from \"../../config/Addresses\";\r\nimport { callContract } from \"../../domain/legacy\";\r\n\r\nimport Modal from \"../../components/Modal/Modal\";\r\nimport Footer from \"../../components/Footer/Footer\";\r\n\r\nimport Token from \"../../abis/Token.json\";\r\nimport Vester from \"../../abis/Vester.json\";\r\nimport RewardTracker from \"../../abis/RewardTracker.json\";\r\nimport RewardRouter from \"../../abis/RewardRouter.json\";\r\n\r\nimport { FaCheck, FaTimes } from \"react-icons/fa\";\r\n\r\nimport { fetcher, approveTokens, useChainId } from \"../../lib/legacy\";\r\n\r\nimport { Trans, t } from \"@lingui/macro\";\r\n\r\nimport \"./BeginAccountTransfer.css\";\r\n\r\nfunction ValidationRow({ isValid, children }) {\r\n  return (\r\n    <div className=\"ValidationRow\">\r\n      <div className=\"ValidationRow-icon-container\">\r\n        {isValid && <FaCheck className=\"ValidationRow-icon\" />}\r\n        {!isValid && <FaTimes className=\"ValidationRow-icon\" />}\r\n      </div>\r\n      <div>{children}</div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function BeginAccountTransfer(props) {\r\n  const { setPendingTxns } = props;\r\n  const { active, library, account } = useWeb3React();\r\n  const { chainId } = useChainId();\r\n\r\n  const [receiver, setReceiver] = useState(\"\");\r\n  const [isTransferring, setIsTransferring] = useState(false);\r\n  const [isApproving, setIsApproving] = useState(false);\r\n  const [isTransferSubmittedModalVisible, setIsTransferSubmittedModalVisible] = useState(false);\r\n  let parsedReceiver = ethers.constants.AddressZero;\r\n  if (ethers.utils.isAddress(receiver)) {\r\n    parsedReceiver = receiver;\r\n  }\r\n\r\n  const gmxAddress = getContract(chainId, \"GMX\");\r\n  const gmxVesterAddress = getContract(chainId, \"GmxVester\");\r\n  const glpVesterAddress = getContract(chainId, \"GlpVester\");\r\n\r\n  const rewardRouterAddress = getContract(chainId, \"RewardRouter\");\r\n\r\n  const { data: gmxVesterBalance } = useSWR([active, chainId, gmxVesterAddress, \"balanceOf\", account], {\r\n    fetcher: fetcher(library, Token),\r\n  });\r\n\r\n  const { data: glpVesterBalance } = useSWR([active, chainId, glpVesterAddress, \"balanceOf\", account], {\r\n    fetcher: fetcher(library, Token),\r\n  });\r\n\r\n  const stakedGmxTrackerAddress = getContract(chainId, \"StakedGmxTracker\");\r\n  const { data: cumulativeGmxRewards } = useSWR(\r\n    [active, chainId, stakedGmxTrackerAddress, \"cumulativeRewards\", parsedReceiver],\r\n    {\r\n      fetcher: fetcher(library, RewardTracker),\r\n    }\r\n  );\r\n\r\n  const stakedGlpTrackerAddress = getContract(chainId, \"StakedGlpTracker\");\r\n  const { data: cumulativeGlpRewards } = useSWR(\r\n    [active, chainId, stakedGlpTrackerAddress, \"cumulativeRewards\", parsedReceiver],\r\n    {\r\n      fetcher: fetcher(library, RewardTracker),\r\n    }\r\n  );\r\n\r\n  const { data: transferredCumulativeGmxRewards } = useSWR(\r\n    [active, chainId, gmxVesterAddress, \"transferredCumulativeRewards\", parsedReceiver],\r\n    {\r\n      fetcher: fetcher(library, Vester),\r\n    }\r\n  );\r\n\r\n  const { data: transferredCumulativeGlpRewards } = useSWR(\r\n    [active, chainId, glpVesterAddress, \"transferredCumulativeRewards\", parsedReceiver],\r\n    {\r\n      fetcher: fetcher(library, Vester),\r\n    }\r\n  );\r\n\r\n  const { data: pendingReceiver } = useSWR([active, chainId, rewardRouterAddress, \"pendingReceivers\", account], {\r\n    fetcher: fetcher(library, RewardRouter),\r\n  });\r\n\r\n  const { data: gmxAllowance } = useSWR([active, chainId, gmxAddress, \"allowance\", account, stakedGmxTrackerAddress], {\r\n    fetcher: fetcher(library, Token),\r\n  });\r\n\r\n  const { data: gmxStaked } = useSWR(\r\n    [active, chainId, stakedGmxTrackerAddress, \"depositBalances\", account, gmxAddress],\r\n    {\r\n      fetcher: fetcher(library, RewardTracker),\r\n    }\r\n  );\r\n\r\n  const needApproval = gmxAllowance && gmxStaked && gmxStaked.gt(gmxAllowance);\r\n\r\n  const hasVestedGmx = gmxVesterBalance && gmxVesterBalance.gt(0);\r\n  const hasVestedGlp = glpVesterBalance && glpVesterBalance.gt(0);\r\n  const hasStakedGmx =\r\n    (cumulativeGmxRewards && cumulativeGmxRewards.gt(0)) ||\r\n    (transferredCumulativeGmxRewards && transferredCumulativeGmxRewards.gt(0));\r\n  const hasStakedGlp =\r\n    (cumulativeGlpRewards && cumulativeGlpRewards.gt(0)) ||\r\n    (transferredCumulativeGlpRewards && transferredCumulativeGlpRewards.gt(0));\r\n  const hasPendingReceiver = pendingReceiver && pendingReceiver !== ethers.constants.AddressZero;\r\n\r\n  const getError = () => {\r\n    if (!account) {\r\n      return t`Wallet is not connected`;\r\n    }\r\n    if (hasVestedGmx) {\r\n      return t`Vested GMX not withdrawn`;\r\n    }\r\n    if (hasVestedGlp) {\r\n      return t`Vested GLP not withdrawn`;\r\n    }\r\n    if (!receiver || receiver.length === 0) {\r\n      return t`Enter Receiver Address`;\r\n    }\r\n    if (!ethers.utils.isAddress(receiver)) {\r\n      return t`Invalid Receiver Address`;\r\n    }\r\n    if (hasStakedGmx || hasStakedGlp) {\r\n      return t`Invalid Receiver`;\r\n    }\r\n    if ((parsedReceiver || \"\").toString().toLowerCase() === (account || \"\").toString().toLowerCase()) {\r\n      return t`Self-transfer not supported`;\r\n    }\r\n\r\n    if (\r\n      (parsedReceiver || \"\").length > 0 &&\r\n      (parsedReceiver || \"\").toString().toLowerCase() === (pendingReceiver || \"\").toString().toLowerCase()\r\n    ) {\r\n      return t`Transfer already initiated`;\r\n    }\r\n  };\r\n\r\n  const isPrimaryEnabled = () => {\r\n    const error = getError();\r\n    if (error) {\r\n      return false;\r\n    }\r\n    if (isApproving) {\r\n      return false;\r\n    }\r\n    if (isTransferring) {\r\n      return false;\r\n    }\r\n    return true;\r\n  };\r\n\r\n  const getPrimaryText = () => {\r\n    const error = getError();\r\n    if (error) {\r\n      return error;\r\n    }\r\n    if (needApproval) {\r\n      return t`Approve GMX`;\r\n    }\r\n    if (isApproving) {\r\n      return t`Approving...`;\r\n    }\r\n    if (isTransferring) {\r\n      return t`Transferring`;\r\n    }\r\n\r\n    return t`Begin Transfer`;\r\n  };\r\n\r\n  const onClickPrimary = () => {\r\n    if (needApproval) {\r\n      approveTokens({\r\n        setIsApproving,\r\n        library,\r\n        tokenAddress: gmxAddress,\r\n        spender: stakedGmxTrackerAddress,\r\n        chainId,\r\n      });\r\n      return;\r\n    }\r\n\r\n    setIsTransferring(true);\r\n    const contract = new ethers.Contract(rewardRouterAddress, RewardRouter.abi, library.getSigner());\r\n\r\n    callContract(chainId, contract, \"signalTransfer\", [parsedReceiver], {\r\n      sentMsg: t`Transfer submitted!`,\r\n      failMsg: t`Transfer failed.`,\r\n      setPendingTxns,\r\n    })\r\n      .then(async (res) => {\r\n        setIsTransferSubmittedModalVisible(true);\r\n      })\r\n      .finally(() => {\r\n        setIsTransferring(false);\r\n      });\r\n  };\r\n\r\n  const completeTransferLink = `/complete_account_transfer/${account}/${parsedReceiver}`;\r\n  const pendingTransferLink = `/complete_account_transfer/${account}/${pendingReceiver}`;\r\n\r\n  return (\r\n    <div className=\"BeginAccountTransfer Page page-layout\">\r\n      <Modal\r\n        isVisible={isTransferSubmittedModalVisible}\r\n        setIsVisible={setIsTransferSubmittedModalVisible}\r\n        label=\"Transfer Submitted\"\r\n      >\r\n        <Trans>Your transfer has been initiated.</Trans>\r\n        <br />\r\n        <br />\r\n        <Link className=\"App-cta\" to={completeTransferLink}>\r\n          <Trans>Continue</Trans>\r\n        </Link>\r\n      </Modal>\r\n      <div className=\"Page-title-section\">\r\n        <div className=\"Page-title\">\r\n          <Trans>Transfer Account</Trans>\r\n        </div>\r\n        <div className=\"Page-description\">\r\n          <Trans>Please only use this for full account transfers.</Trans>\r\n          <br />\r\n          <Trans>This will transfer all your GMX, esGMX, GLP and Multiplier Points to your new account.</Trans>\r\n          <br />\r\n          <Trans>Transfers are only supported if the receiving account has not staked GMX or GLP tokens before.</Trans>\r\n          <br />\r\n          <Trans>\r\n            Transfers are one-way, you will not be able to transfer staked tokens back to the sending account.\r\n          </Trans>\r\n        </div>\r\n        {hasPendingReceiver && (\r\n          <div className=\"Page-description\">\r\n            <Trans>\r\n              You have a <Link to={pendingTransferLink}>pending transfer</Link> to {pendingReceiver}.\r\n            </Trans>\r\n          </div>\r\n        )}\r\n      </div>\r\n      <div className=\"Page-content\">\r\n        <div className=\"input-form\">\r\n          <div className=\"input-row\">\r\n            <label className=\"input-label\">\r\n              <Trans>Receiver Address</Trans>\r\n            </label>\r\n            <div>\r\n              <input\r\n                type=\"text\"\r\n                value={receiver}\r\n                onChange={(e) => setReceiver(e.target.value)}\r\n                className=\"text-input\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"BeginAccountTransfer-validations\">\r\n            <ValidationRow isValid={!hasVestedGmx}>\r\n              <Trans>Sender has withdrawn all tokens from GMX Vesting Vault</Trans>\r\n            </ValidationRow>\r\n            <ValidationRow isValid={!hasVestedGlp}>\r\n              <Trans>Sender has withdrawn all tokens from GLP Vesting Vault</Trans>\r\n            </ValidationRow>\r\n            <ValidationRow isValid={!hasStakedGmx}>\r\n              <Trans>Receiver has not staked GMX tokens before</Trans>\r\n            </ValidationRow>\r\n            <ValidationRow isValid={!hasStakedGlp}>\r\n              <Trans>Receiver has not staked GLP tokens before</Trans>\r\n            </ValidationRow>\r\n          </div>\r\n          <div className=\"input-row\">\r\n            <button\r\n              className=\"App-cta Exchange-swap-button\"\r\n              disabled={!isPrimaryEnabled()}\r\n              onClick={() => onClickPrimary()}\r\n            >\r\n              {getPrimaryText()}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { Link, useParams } from \"react-router-dom\";\r\nimport { ethers } from \"ethers\";\r\nimport { useWeb3React } from \"@web3-react/core\";\r\nimport { useCopyToClipboard } from \"react-use\";\r\n\r\nimport { getContract } from \"../../config/Addresses\";\r\nimport { callContract } from \"../../domain/legacy\";\r\nimport { useChainId, helperToast } from \"../../lib/legacy\";\r\n\r\nimport Modal from \"../../components/Modal/Modal\";\r\nimport Footer from \"../../components/Footer/Footer\";\r\n\r\nimport RewardRouter from \"../../abis/RewardRouter.json\";\r\n\r\nimport \"./CompleteAccountTransfer.css\";\r\n\r\nimport { Trans, t } from \"@lingui/macro\";\r\n\r\nexport default function CompleteAccountTransfer(props) {\r\n  const [, copyToClipboard] = useCopyToClipboard();\r\n  const { sender, receiver } = useParams();\r\n  const { setPendingTxns } = props;\r\n  const { library, account } = useWeb3React();\r\n  const [isTransferSubmittedModalVisible, setIsTransferSubmittedModalVisible] = useState(false);\r\n\r\n  const { chainId } = useChainId();\r\n\r\n  const [isConfirming, setIsConfirming] = useState(false);\r\n  const isCorrectAccount = (account || \"\").toString().toLowerCase() === (receiver || \"\").toString().toLowerCase();\r\n\r\n  const rewardRouterAddress = getContract(chainId, \"RewardRouter\");\r\n\r\n  const getError = () => {\r\n    if (!account) {\r\n      return t`Wallet is not connected`;\r\n    }\r\n    if (!isCorrectAccount) {\r\n      return t`Incorrect Account`;\r\n    }\r\n  };\r\n\r\n  const isPrimaryEnabled = () => {\r\n    const error = getError();\r\n    if (error) {\r\n      return false;\r\n    }\r\n    if (isConfirming) {\r\n      return false;\r\n    }\r\n    return true;\r\n  };\r\n\r\n  const getPrimaryText = () => {\r\n    const error = getError();\r\n    if (error) {\r\n      return error;\r\n    }\r\n    return t`Complete Transfer`;\r\n  };\r\n\r\n  const onClickPrimary = () => {\r\n    setIsConfirming(true);\r\n\r\n    const contract = new ethers.Contract(rewardRouterAddress, RewardRouter.abi, library.getSigner());\r\n\r\n    callContract(chainId, contract, \"acceptTransfer\", [sender], {\r\n      sentMsg: t`Transfer submitted!`,\r\n      failMsg: t`Transfer failed.`,\r\n      setPendingTxns,\r\n    })\r\n      .then(async (res) => {\r\n        setIsTransferSubmittedModalVisible(true);\r\n      })\r\n      .finally(() => {\r\n        setIsConfirming(false);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"CompleteAccountTransfer Page page-layout\">\r\n      <Modal\r\n        isVisible={isTransferSubmittedModalVisible}\r\n        setIsVisible={setIsTransferSubmittedModalVisible}\r\n        label=\"Transfer Completed\"\r\n      >\r\n        <Trans>Your transfer has been completed.</Trans>\r\n        <br />\r\n        <br />\r\n        <Link className=\"App-cta\" to=\"/earn\">\r\n          <Trans>Continue</Trans>\r\n        </Link>\r\n      </Modal>\r\n      <div className=\"Page-title-section\">\r\n        <div className=\"Page-title\">\r\n          <Trans>Complete Account Transfer</Trans>\r\n        </div>\r\n        {!isCorrectAccount && (\r\n          <div className=\"Page-description\">\r\n            <Trans>To complete the transfer, you must switch your connected account to {receiver}.</Trans>\r\n            <br />\r\n            <br />\r\n            <Trans>\r\n              You will need to be on this page to accept the transfer,{\" \"}\r\n              <span\r\n                onClick={() => {\r\n                  copyToClipboard(window.location.href);\r\n                  helperToast.success(\"Link copied to your clipboard\");\r\n                }}\r\n              >\r\n                click here\r\n              </span>{\" \"}\r\n              to copy the link to this page if needed.\r\n            </Trans>\r\n            <br />\r\n            <br />\r\n          </div>\r\n        )}\r\n        {isCorrectAccount && (\r\n          <div className=\"Page-description\">\r\n            <Trans>You have a pending transfer from {sender}.</Trans>\r\n            <br />\r\n          </div>\r\n        )}\r\n      </div>\r\n      {isCorrectAccount && (\r\n        <div className=\"Page-content\">\r\n          <div className=\"input-form\">\r\n            <div className=\"input-row\">\r\n              <button className=\"App-cta Exchange-swap-button\" disabled={!isPrimaryEnabled()} onClick={onClickPrimary}>\r\n                {getPrimaryText()}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n","// date format: d MMM yyyy, H:mm, time should be specifed based on UTC time\r\n\r\nexport const homeEventsData = [\r\n  {\r\n    id: \"app-gmx-io-launch\",\r\n    title: \"Frontend Updates\",\r\n    isActive: true,\r\n    validTill: \"10 Jul 2022, 12:00\",\r\n    bodyText:\r\n      \"Updates have been applied to the GMX frontend to inform users of the separation between gmx.io and app.gmx.io\",\r\n    buttons: [\r\n      {\r\n        text: \"Read More\",\r\n        link: \"https://medium.com/@gmx.io/gmx-frontend-updates-8d13f2346e1e\",\r\n        newTab: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    id: \"arbitrum-nitro-upgrade\",\r\n    title: \"Arbitrum Nitro Upgrade\",\r\n    isActive: true,\r\n    validTill: \"31 Aug 2022, 20:00\",\r\n    bodyText: \"The Arbitrum Nitro upgrade has been completed.\",\r\n    buttons: [\r\n      {\r\n        text: \"Read More\",\r\n        link: \"https://medium.com/@gmx.io/arbitrum-nitro-5f88c03a46fe\",\r\n        newTab: true,\r\n      },\r\n    ],\r\n  },\r\n];\r\n\r\nexport const appEventsData = [\r\n  // {\r\n  //   id: \"removal-of-min-profit-rule\",\r\n  //   title: \"Trading improvements\",\r\n  //   isActive: true,\r\n  //   validTill: \"1 Apr 2022, 12:00\",\r\n  //   bodyText: \"The 1.5% minimum profit rule has been removed\",\r\n  //   buttons: [\r\n  //     {\r\n  //       text: \"Read more\",\r\n  //       link: \"https://gmxio.gitbook.io/gmx/roadmap#30-march-2022\",\r\n  //       newTab: true,\r\n  //     },\r\n  //     {\r\n  //       text: \"Trade Now\",\r\n  //       link: \"https://gmx.io/trade\",\r\n  //     },\r\n  //   ],\r\n  // },\r\n  // {\r\n  //   id: \"shorting-of-link-uni-re-enabled\",\r\n  //   title: \"Shorting of LINK and UNI\",\r\n  //   isActive: true,\r\n  //   validTill: \"20 Apr 2022, 12:00\",\r\n  //   bodyText: \"Shorting has been re-enabled for LINK and UNI.\",\r\n  //   buttons: [\r\n  //     {\r\n  //       text: \"Trade Now\",\r\n  //       link: \"https://gmx.io/trade\",\r\n  //     },\r\n  //   ],\r\n  // },\r\n  // {\r\n  //   id: \"speed-up-page-loading\",\r\n  //   title: \"Speed Up Page Loading\",\r\n  //   isActive: true,\r\n  //   validTill: \"4 May 2022, 12:00\",\r\n  //   bodyText: \"If you experience data loading issues, please use a free RPC URL from Alchemy.\",\r\n  //   buttons: [\r\n  //     {\r\n  //       text: \"Learn More\",\r\n  //       link: \"https://gmxio.gitbook.io/gmx/trading#backup-rpc-urls\",\r\n  //       newTab: true,\r\n  //     },\r\n  //   ],\r\n  // },\r\n  // {\r\n  //   id: \"referral-program-launch\",\r\n  //   title: \"Referral Program Launch\",\r\n  //   isActive: true,\r\n  //   validTill: \"4 May 2022, 12:00\",\r\n  //   bodyText: \"The GMX referral program is now live! Get fee discounts and refer traders to earn rewards.\",\r\n  //   buttons: [\r\n  //     {\r\n  //       text: \"Read More\",\r\n  //       link: \"https://gmx.io/referrals\",\r\n  //     },\r\n  //     {\r\n  //       text: \"Join Now\",\r\n  //       link: \"https://gmx.io/referrals\",\r\n  //     },\r\n  //   ],\r\n  // },\r\n  // {\r\n  //   id: \"gmx-arbitrum-odyssey\",\r\n  //   title: \"GMX Arbitrum Odyssey\",\r\n  //   isActive: true,\r\n  //   validTill: \"3 Jul 2022, 12:00\",\r\n  //   bodyText:\r\n  //     \"The GMX Arbitrum Odyssey is taking place this week, all participants will receive prizes. Read on to find out more.\",\r\n  //   buttons: [\r\n  //     {\r\n  //       text: \"Read More\",\r\n  //       link: \"https://medium.com/@gmx.io/gmx-arbitrum-odyssey-fc12cba2d10d\",\r\n  //     },\r\n  //   ],\r\n  // },\r\n  // {\r\n  //   id: \"fix-arbitrum-transaction-issues\",\r\n  //   title: \"Fix Arbitrum Transactions\",\r\n  //   isActive: true,\r\n  //   validTill: \"30 Jun 2022, 12:00\",\r\n  //   bodyText:\r\n  //     \"If you experience transaction errors on Arbitrum or data loading issues, please use a free RPC URL from Alchemy.\",\r\n  //   buttons: [\r\n  //     {\r\n  //       text: \"Learn More\",\r\n  //       link: \"https://gmxio.gitbook.io/gmx/trading#backup-rpc-urls\",\r\n  //       newTab: true,\r\n  //     },\r\n  //   ],\r\n  // },\r\n  // {\r\n  //   id: \"gmx-arbitrum-odyssey-paused\",\r\n  //   title: \"GMX Arbitrum Odyssey Paused\",\r\n  //   isActive: true,\r\n  //   validTill: \"3 Jul 2022, 12:00\",\r\n  //   bodyText: \"The GMX Arbitrum Odyssey has been paused. Please read the linked post for more information.\",\r\n  //   buttons: [\r\n  //     {\r\n  //       text: \"Read More\",\r\n  //       link: \"https://twitter.com/GMX_IO/status/1542163585111150592\",\r\n  //       newTab: true,\r\n  //     },\r\n  //   ],\r\n  // },\r\n  // {\r\n  //   id: \"app-gmx-io\",\r\n  //   title: \"Frontend Updates\",\r\n  //   isActive: true,\r\n  //   validTill: \"6 Jul 2022, 12:00\",\r\n  //   bodyText:\r\n  //     \"On 6 Jul 2022, updates will be applied to the GMX frontend to inform users of the separation between gmx.io and app.gmx.io\",\r\n  //   buttons: [\r\n  //     {\r\n  //       text: \"Read More\",\r\n  //       link: \"https://medium.com/@gmx.io/gmx-frontend-updates-8d13f2346e1e\",\r\n  //       newTab: true,\r\n  //     },\r\n  //   ],\r\n  // },\r\n  // {\r\n  //   id: \"degraded-alchemy-performance\",\r\n  //   title: \"Alchemy RPC\",\r\n  //   isActive: true,\r\n  //   validTill: \"3 Jul 2022, 12:00\",\r\n  //   bodyText:\r\n  //     \"There are ongoing syncing issues on Alchemy for Arbitrum at the moment, please check their status page and use the public Arbitrum RPC in the meantime\",\r\n  //   buttons: [\r\n  //     {\r\n  //       text: \"Check Status\",\r\n  //       link: \"https://status.alchemy.com/\",\r\n  //       newTab: true,\r\n  //     },\r\n  //     {\r\n  //       text: \"Public RPC URL\",\r\n  //       link: \"https://metamask.zendesk.com/hc/en-us/articles/4415758358299-Network-profile-Arbitrum\",\r\n  //       newTab: true,\r\n  //     },\r\n  //   ],\r\n  // },\r\n  {\r\n    id: \"app-gmx-io-settings\",\r\n    title: \"Frontend Updates\",\r\n    isActive: true,\r\n    validTill: \"10 Jul 2022, 12:00\",\r\n    bodyText:\r\n      \"You are currently using app.gmx.io. Customized settings have been reset, you may need to adjust your settings by clicking on the menu in the top right after connecting your wallet.\",\r\n    buttons: [\r\n      {\r\n        text: \"Read More\",\r\n        link: \"https://medium.com/@gmx.io/gmx-frontend-updates-8d13f2346e1e\",\r\n        newTab: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    id: \"use-alchemy-rpc-url\",\r\n    title: \"Use Alchemy RPC URL\",\r\n    isActive: true,\r\n    validTill: \"10 Jul 2022, 12:00\",\r\n    bodyText:\r\n      \"If you experience data loading or transaction issues on Arbitrum, please use a free RPC URL from Alchemy.\",\r\n    buttons: [\r\n      {\r\n        text: \"Learn More\",\r\n        link: \"https://gmxio.gitbook.io/gmx/trading#backup-rpc-urls\",\r\n        newTab: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    id: \"arbitrum-nitro-upgrade\",\r\n    title: \"Arbitrum Nitro Upgrade\",\r\n    isActive: true,\r\n    validTill: \"31 Aug 2022, 20:00\",\r\n    bodyText: \"The Arbitrum Nitro upgrade has been completed.\",\r\n    buttons: [\r\n      {\r\n        text: \"Read More\",\r\n        link: \"https://medium.com/@gmx.io/arbitrum-nitro-5f88c03a46fe\",\r\n        newTab: true,\r\n      },\r\n    ],\r\n  },\r\n];\r\n","function Icon({ className }) {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      fill=\"none\"\r\n      stroke=\"currentColor\"\r\n      aria-hidden=\"true\"\r\n      className={className}\r\n      viewBox=\"0 0 24 24\"\r\n    >\r\n      <path\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n        strokeWidth=\"2\"\r\n        d=\"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z\"\r\n      ></path>\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default Icon;\r\n","import \"./EventToast.css\";\r\nimport Icon from \"./AnnouncementIcon\";\r\nimport { MdOutlineClose } from \"react-icons/md\";\r\n\r\nexport default function EventToast({ event, id, onClick, t }) {\r\n  return (\r\n    <div className={`single-toast ${t.visible ? \"zoomIn\" : \"zoomOut\"}`} key={id}>\r\n      <header>\r\n        <div className=\"toast-title\">\r\n          <Icon className=\"announcement-icon\" />\r\n          <p>{event.title}</p>\r\n        </div>\r\n        <MdOutlineClose onClick={onClick} className=\"cross-icon\" color=\"white\" />\r\n      </header>\r\n      <p className=\"toast-body\">{event.bodyText}</p>\r\n      <div className=\"toast-links\">\r\n        {event.buttons.map((button) => {\r\n          if (button.newTab) {\r\n            return (\r\n              <a key={event.id + button.text} target=\"_blank\" rel=\"noreferrer noopener\" href={button.link}>\r\n                {button.text}\r\n              </a>\r\n            );\r\n          } else {\r\n            return (\r\n              <a key={event.id + button.text} href={button.link}>\r\n                {button.text}\r\n              </a>\r\n            );\r\n          }\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useLocalStorage } from \"react-use\";\r\nimport toast from \"react-hot-toast\";\r\nimport { homeEventsData, appEventsData } from \"../../config/events\";\r\nimport { useEffect } from \"react\";\r\nimport EventToast from \"./EventToast\";\r\nimport { isFuture, parse } from \"date-fns\";\r\nimport { isHomeSite } from \"../../lib/legacy\";\r\n\r\nfunction useEventToast() {\r\n  const isHome = isHomeSite();\r\n  const [visited, setVisited] = useLocalStorage(\"visited-announcements\", []);\r\n\r\n  useEffect(() => {\r\n    const eventsData = isHome ? homeEventsData : appEventsData;\r\n\r\n    eventsData\r\n      .filter((event) => event.isActive)\r\n      .filter((event) => isFuture(parse(event.validTill + \", +00\", \"d MMM yyyy, H:mm, x\", new Date())))\r\n      .filter((event) => Array.isArray(visited) && !visited.includes(event.id))\r\n      .forEach((event) => {\r\n        toast.custom(\r\n          (t) => (\r\n            <EventToast\r\n              event={event}\r\n              id={event.id}\r\n              t={t}\r\n              onClick={() => {\r\n                toast.dismiss(event.id);\r\n                visited.push(event.id);\r\n                setVisited(visited);\r\n              }}\r\n            />\r\n          ),\r\n          {\r\n            id: event.id,\r\n            style: {},\r\n          }\r\n        );\r\n      });\r\n  }, [visited, setVisited, isHome]);\r\n}\r\n\r\nexport default useEventToast;\r\n","import { Toaster } from \"react-hot-toast\";\r\nimport { useWindowScroll, createBreakpoint } from \"react-use\";\r\n\r\nfunction EventToastContainer() {\r\n  let { y: scrollY } = useWindowScroll();\r\n  const useBreakpoint = createBreakpoint({ XL: 1033, L: 768, S: 350 });\r\n  const breakpoint = useBreakpoint();\r\n  return (\r\n    <Toaster\r\n      position=\"top-right\"\r\n      reverseOrder={true}\r\n      gutter={30}\r\n      containerClassName=\"event-toast-container\"\r\n      containerStyle={{\r\n        zIndex: 2,\r\n        transition: \"all 200ms\",\r\n        top: scrollY > 60 ? \"30px\" : `${93 - scrollY}px`,\r\n        right: breakpoint === \"XL\" ? \"30px\" : \"1rem\",\r\n      }}\r\n      toastOptions={{\r\n        duration: Infinity,\r\n      }}\r\n    />\r\n  );\r\n}\r\nexport default EventToastContainer;\r\n","import SEO from \"../../components/Common/SEO\";\r\nimport Footer from \"../../components/Footer/Footer\";\r\nimport { getPageTitle } from \"../../lib/legacy\";\r\nimport \"./PageNotFound.css\";\r\n\r\nimport { getHomeUrl, getTradePageUrl } from \"../../lib/legacy\";\r\n\r\nfunction PageNotFound() {\r\n  const homeUrl = getHomeUrl();\r\n  const tradePageUrl = getTradePageUrl();\r\n\r\n  return (\r\n    <SEO title={getPageTitle(\"Page not found\")}>\r\n      <div className=\"page-layout\">\r\n        <div className=\"page-not-found-container\">\r\n          <div className=\"page-not-found\">\r\n            <h2>Page not found</h2>\r\n            <p className=\"go-back\">\r\n              <span>Return to </span>\r\n              <a href={homeUrl}>Homepage</a> <span>or </span> <a href={tradePageUrl}>Trade</a>\r\n            </p>\r\n          </div>\r\n        </div>\r\n        <Footer />\r\n      </div>\r\n    </SEO>\r\n  );\r\n}\r\n\r\nexport default PageNotFound;\r\n","import React from \"react\";\r\nimport Footer from \"../../components/Footer/Footer\";\r\nimport SEO from \"../../components/Common/SEO\";\r\nimport { getPageTitle } from \"../../lib/legacy\";\r\nimport \"./ReferralTerms.css\";\r\n\r\nexport default function ReferralTerms() {\r\n  return (\r\n    <SEO title={getPageTitle(\"Referral Terms\")}>\r\n      <div className=\"default-container Page page-layout\">\r\n        <div>\r\n          <div className=\"Page-title-section center\">\r\n            <div className=\"Page-title\">GMX Referral Program</div>\r\n            <div className=\"Page-subtitle\">Terms and Conditions</div>\r\n            <div className=\"Page-description\">Last modified: August 1st, 2022</div>\r\n          </div>\r\n          <div className=\"content\">\r\n            <div className=\"section\">\r\n              <p className=\"body-text\">\r\n                Welcome to GMX.io (\"we,\" \"us,\" or \"our\"), the informational resource for GMX Protocol, as defined below.\r\n              </p>\r\n              <p className=\"body-text\">\r\n                GMX.io provides information and resources about the fundamentals of the decentralized non-custodial\r\n                protocol called the GMX Protocol (the \"GMX Protocol,\" \"Protocol,\" or \"GMX DApp\"). GMX.io is not an\r\n                available access point to the GMX Protocol.\r\n              </p>\r\n              <p className=\"body-text\">\r\n                These Terms and Conditions and any other documents incorporated herein by reference (collectively, these\r\n                \"Terms\") to you or the company or other legal entity you represent (\"you,\" \"your,\" \"the Referrer,\" \"the\r\n                Affiliate\"), explains the terms and conditions by which you may use the GMX Referral Program (\"Referral\r\n                Program\") as defined below.\r\n              </p>\r\n              <p className=\"body-text\">\r\n                Please do not use the Referral Program if you disagree with any of these Terms.\r\n              </p>\r\n            </div>\r\n            <div className=\"section\">\r\n              <h3 className=\"body-title\">1. USE OF THE REFERRAL PROGRAM</h3>\r\n              <p className=\"body-text\">All this content is for informational purposes only.</p>\r\n              <p className=\"body-text\">\r\n                The Referral Program allows you to advertise the GMX DApp, thereby driving traffic to it, whereby you\r\n                may earn a portion of the fees generated (\"Rebates\") if a person that is not you (\"Trader,\" \"Referred\r\n                User\") trades in the GMX DApp after being referred to it from a hyperlink (\"Link\") or manually input\r\n                code (\"Referral Code\"). The Trader will benefit from a fee discount (\"Discount\") associated with the\r\n                Referrer's tier.\r\n              </p>\r\n              <p className=\"body-text\">\r\n                After being referred to the GMX DApp from a Link, the Trader's browser will save your Referral Code,\r\n                which will be assigned to the Trader on his first trade.\r\n              </p>\r\n              <p className=\"body-text\">\r\n                A Trader can also manually enter your Referral Code in the Traders section and change it at any time.\r\n              </p>\r\n            </div>\r\n            <div className=\"section\">\r\n              <h3 className=\"body-title\">2. OBLIGATIONS</h3>\r\n              <p className=\"body-text\">\r\n                2.1 As an Affiliate, GMX DApp provides you with the Links and Referral Codes necessary to promote the\r\n                GMX Protocol. You acknowledge and agree it is your sole responsibility to indicate your correct Referral\r\n                Code. You may promote the GMX Protocol offers in any manner you choose unless it misleads someone about\r\n                the GMX Protocol.\r\n              </p>\r\n              <p className=\"body-text\">\r\n                2.2 GMX.io is not responsible for (i) lost sales or lost opportunity to earn Rebates due to any cause,\r\n                such as technical difficulties or over-capacity, including system overload in the Arbitrum or Avalanche\r\n                blockchains; (ii) tracking Rebates, Discounts, or any other data, as this is handled by independent,\r\n                smart contracts.\r\n              </p>\r\n              <p className=\"body-text\">\r\n                2.3 You will be excluded from the Referral Program, following the directives of the GMX tokenholders:\r\n                (i) if you use any language libelous, defamatory, profane, obscene, pornographic, sexually explicit,\r\n                indecent, lewd, vulgar, suggestive, harassing, stalking, hateful, threatening, offensive,\r\n                discriminatory, bigoted, abusive, inflammatory, fraudulent, deceptive, or otherwise objectionable or\r\n                likely or intended to incite, threaten, facilitate, promote, or encourage hate, racial intolerance, or\r\n                violent acts against others; (ii) if you try any form of gaming through self-referrals.\r\n              </p>\r\n            </div>\r\n            <div className=\"section\">\r\n              <h3 className=\"body-title\">3. REBATES AND DISCOUNTS</h3>\r\n              <p className=\"body-text\">\r\n                Referrers will receive rebates based on a sliding percentage of fees paid by Referred Users. Rebates\r\n                will never be retroactive.\r\n              </p>\r\n              <p className=\"body-text\">\r\n                GMX.io is under no obligation for Rebates or Discounts to any Referrer or Trader. Rebates and Discounts\r\n                are handled following the directives of the GMX tokenholders.\r\n              </p>\r\n              <p className=\"body-text\">\r\n                The Rebates and Discounts percentages for the default tier Tier 1, and instructions to upgrade to Tier 2\r\n                and Tier 3, are contained in{\" \"}\r\n                <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://gmxio.gitbook.io/gmx/referrals\">\r\n                  https://gmxio.gitbook.io/gmx/referrals.\r\n                </a>\r\n              </p>\r\n            </div>\r\n            <div className=\"section\">\r\n              <h3 className=\"body-title\">4. LIMITATION OF LIABILITY</h3>\r\n              <p className=\"body-text\">\r\n                Under no circumstances shall GMX.io be liable for any direct, indirect, incidental, punitive, special,\r\n                consequential damages, or similar damages or liabilities whatsoever for any reason whatsoever related to\r\n                these Terms, your use or inability to use our web site(s), or the materials and content of the web\r\n                site(s) or any other web sites linked to such web site(s) or your provision of any personally\r\n                identifiable information to a backend service provider or any third party. This limitation applies\r\n                regardless of whether the alleged liability is based on contract, tort, warranty, negligence, strict\r\n                liability, or any other basis, even if we have been advised of the possibility of such damages or such\r\n                damages were reasonably foreseeable.\r\n              </p>\r\n              <p className=\"body-text\">\r\n                In no event shall GMX.io's aggregate liability arising out of or in connection with the Site exceed five\r\n                hundred Singapore Dollars (500 SGD).\r\n              </p>\r\n            </div>\r\n            <div className=\"section\">\r\n              <h3 className=\"body-title\">5. INDEMNIFICATION</h3>\r\n              <p className=\"body-text\">\r\n                You will defend, indemnify, and hold harmless GMX.io, its affiliates, members, member, managers,\r\n                employees, attorneys, representatives, suppliers, and contractors from any claim, demand, lawsuit,\r\n                action, proceeding, investigation, liability, damage, loss, cost or expense, including without\r\n                limitation reasonable attorneys' fees, arising out of or relating to arising under these Terms, the\r\n                service(s) provided by GMX.io, or your use of the service(s) provided by GMX.io, including, without\r\n                limitation, an infringement by you, or by anyone else using such service(s) we provide to you, of any\r\n                intellectual property or other proprietary rights of any person or entity, or from the violation of any\r\n                of our operating rules or policies relating to the service(s) provided. When we may be involved in a\r\n                suit involving a third party and which is related to our service(s) to you under these Terms, we may\r\n                seek written assurances from you in which you promise to defend, indemnify and hold us harmless from the\r\n                costs and liabilities described in this paragraph. Such written assurances may include, in our sole\r\n                discretion, the posting of a performance bond(s) or other guarantees reasonably calculated to guarantee\r\n                payment. We may consider your failure to provide such assurances a breach of these Terms by you. The\r\n                terms of this paragraph will survive any termination or cancellation of the Terms.\r\n              </p>\r\n            </div>\r\n            <div className=\"section\">\r\n              <h3 className=\"body-title\">6. MODIFICATION, SUSPENSION, AND TERMINATION</h3>\r\n              <p className=\"body-text\">\r\n                The Referral Program runs independently from GMX.io, which the token holders of GMX determine. Due to\r\n                this, from time to time and with or without prior notice to you, the Referral Program could be subject\r\n                to modifications, suspensions, or disabilities, in whole or in part, for any reason whatsoever.\r\n              </p>\r\n              <p className=\"body-text\">\r\n                GMX.io will not be liable for any losses suffered by you resulting from any modification to the Referral\r\n                Program or from any modification, suspension, or termination, for any reason, of your access to all or\r\n                any portion of the Interface or the Protocol.\r\n              </p>\r\n              <p className=\"body-text\">\r\n                GMX.io may revise these Terms from time to time. We will notify you by updating the date at the top of\r\n                the Terms and maintaining a current version. The most current version of the Terms will always be at\r\n                https://gmx.io/referral-terms. All modifications will be effective when they are posted. By using the\r\n                Referral Program after those revisions become effective, you agree to be bound by the revised Terms.\r\n              </p>\r\n            </div>\r\n            <div className=\"section\">\r\n              <h3 className=\"body-title\">7. GOVERNING LAW</h3>\r\n              <p className=\"body-text\">\r\n                The interpretation and enforcement of these Terms, and any dispute related to these Terms, the Site, or\r\n                the Interface, will be governed by and construed and enforced under the laws of the Bahamas, as\r\n                applicable.\r\n              </p>\r\n            </div>\r\n            <div className=\"section\">\r\n              <h3 className=\"body-title\">8. GENERAL</h3>\r\n              <p className=\"body-text\">\r\n                8.1 These Terms, including other policies or agreements incorporated herein, constitute the entire and\r\n                only agreement between you and GMX.io concerning the subject matter of these Terms and supersede all\r\n                prior or contemporaneous agreements, representations, warranties, and understandings, written or oral,\r\n                concerning the subject matter of these Terms. Any failure by us to exercise or enforce any right or\r\n                provision of the Terms shall not constitute a waiver of such right or provision.\r\n              </p>\r\n              <p className=\"body-text\">\r\n                8.2 You must legally be able to enter into the Terms. Using the Referral Program, you represent and\r\n                warrant that you meet the eligibility requirement. If you do not meet the requirement, you must not\r\n                access the Referral Program.\r\n              </p>\r\n              <p className=\"body-text\">\r\n                8.3 Nothing contained herein will be construed to create the relationship of principal and agent,\r\n                employer and employee, partners or joint venturers. Each party shall ensure that the foregoing persons\r\n                shall not represent to the contrary, either expressly, implicitly, by appearance, or otherwise.\r\n              </p>\r\n              <p className=\"body-text\">\r\n                8.4 If any provision of these Terms shall be unenforceable or invalid under any applicable law or be\r\n                held by any applicable court decision, such unenforceability or invalidity shall not render these Terms\r\n                unenforceable or invalid as a whole. GMX.io will amend or replace such provision with one that is valid\r\n                and enforceable and which achieves, to the extent possible, our original objectives and intent as\r\n                reflected in the original provision.\r\n              </p>\r\n              <p className=\"body-text\">\r\n                8.5 You may not assign or transfer any right to use the Referral Program, or any of your rights or\r\n                obligations under these Terms, without our express prior written consent, including by operation of law\r\n                or in connection with any change of control. GMX.io may assign or transfer any or all of our rights or\r\n                obligations under these Terms, in whole or part, without notice or obtaining your consent or approval.\r\n              </p>\r\n              <p className=\"body-text\">\r\n                8.6 GMX.io will have no responsibility or liability for any failure or delay in performance of the Site,\r\n                or any loss or damage that you may incur, due to any circumstance or event beyond our control, including\r\n                without limitation any flood, extraordinary weather conditions, earthquake, or other act of God, fire,\r\n                war, insurrection, riot, labor dispute, accident, any law, order regulation, direction, action or\r\n                request of the government, communications, power failure, or equipment or software malfunction.\r\n              </p>\r\n            </div>\r\n            <div className=\"section\">\r\n              <h3 className=\"body-title\">9. CONTACT INFORMATION</h3>\r\n              <p className=\"body-text\">\r\n                If you have any questions about these Terms, the Site, or the Interface, please get in touch with GMX.io\r\n                on any of our official channels.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <Footer />\r\n      </div>\r\n    </SEO>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Footer from \"../../components/Footer/Footer\";\r\nimport SEO from \"../../components/Common/SEO\";\r\nimport { getPageTitle } from \"../../lib/legacy\";\r\nimport \"./TermsAndConditions.css\";\r\n\r\nexport default function TermsAndConditions() {\r\n  return (\r\n    <SEO title={getPageTitle(\"Referral Terms\")}>\r\n      <div className=\"default-container Page page-layout\">\r\n        <div>\r\n          <div className=\"Page-title-section center\">\r\n            <div className=\"Page-title\">GMX</div>\r\n            <div className=\"Page-subtitle\">Terms and Conditions</div>\r\n            <div className=\"Page-description\">Last modified: August 1st, 2022</div>\r\n          </div>\r\n          <div className=\"content\">\r\n            <div className=\"section\">\r\n              <p className=\"body-text\">\r\n                Welcome to GMX.io (\"we,\" \"us,\" or \"our\"), the informational resource for GMX Protocol, as defined below.\r\n              </p>\r\n              <p className=\"body-text\">\r\n                GMX.io provides information and resources about the fundamentals of the decentralized non-custodial\r\n                protocol called the GMX Protocol (the \"GMX Protocol,\" \"Protocol,\" or \"GMX DApp\"). GMX.io is not an\r\n                available access point to the GMX Protocol.\r\n              </p>\r\n              <p className=\"body-text\">\r\n                These Terms and Conditions and any other documents incorporated herein by reference (collectively, these\r\n                \"Terms\") to you or the company or other legal entity you represent (\"you\" or \"your\") explains the terms\r\n                and conditions by which you may access GMX.io (\"the Site\") and app.GMX.io (\"the Interface\"). Please do\r\n                not use the Site or Interface if you disagree with any of these Terms.\r\n              </p>\r\n            </div>\r\n            <div className=\"section\">\r\n              <h3 className=\"body-title\">1. USE OF THE SITE AND THE INTERFACE</h3>\r\n              <p className=\"body-text\">The GMX.io site is for informational purposes only.</p>\r\n              <p className=\"body-text\">\r\n                GMX.io is not part of any transaction on the blockchain networks underlying the GMX Protocol; we do not\r\n                have possession, custody, or control over any crypto assets appearing on the Interface; and we do not\r\n                have possession, custody, or control over any user's funds. Further, we do not store, send, or receive\r\n                any crypto assets. You understand that when you interact with any GMX Protocol smart contracts, you\r\n                always retain control over your crypto assets. We do not have access to your private keys.\r\n              </p>\r\n              <ul className=\"list-style-none\">\r\n                <li>\r\n                  <p className=\"body-text\">\r\n                    1.1. As a condition to accessing or using the Site or Interface, you represent and warrant to GMX.io\r\n                    the following:\r\n                  </p>\r\n                  <ul className=\"list-style-none\">\r\n                    <li>\r\n                      <p className=\"body-text\">\r\n                        1.1.1. If you are an individual person, then you are of legal age in the jurisdiction in which\r\n                        you reside, and you have the legal capacity to enter into these Terms and be bound by them;\r\n                      </p>\r\n                    </li>\r\n                    <li>\r\n                      <p className=\"body-text\">\r\n                        1.1.2. If you are an entity, then you must have the legal authority to accept these Terms on\r\n                        that entity's behalf, in which case \"you\" (except as used in this paragraph) will mean that\r\n                        entity;\r\n                      </p>\r\n                    </li>\r\n                    <li>\r\n                      <p className=\"body-text\">1.1.3. You are not a U.S. Person;</p>\r\n                    </li>\r\n                    <li>\r\n                      <p className=\"body-text\">\r\n                        1.1.4. You are not a resident, national, or agent of any country to which the United States, the\r\n                        United Kingdom, or the European Union embargoes goods or imposes similar sanctions\r\n                        (collectively, \"Restricted Territories\");\r\n                      </p>\r\n                    </li>\r\n                    <li>\r\n                      <p className=\"body-text\">\r\n                        1.1.5. You are not subject to economic or trade sanctions administered or enforced by any\r\n                        governmental authority; or otherwise, you are not a member of any sanctions list or equivalent\r\n                        maintained by the United States government, the United Kingdom government, the European Union,\r\n                        or the United Nations, including without limitation the U.S. Office of Foreign Asset Control\r\n                        Specifically Designated Nationals and Blocked Person List (collectively, \"Sanctions Lists\r\n                        Persons\");\r\n                      </p>\r\n                    </li>\r\n                    <li>\r\n                      <p className=\"body-text\">\r\n                        1.1.6. You do intend to transact with any Restricted Person or Sanctions List Person;\r\n                      </p>\r\n                    </li>\r\n                    <li>\r\n                      <p className=\"body-text\">\r\n                        1.1.7. You do not, and will not, use VPN software or any other privacy or anonymization tools or\r\n                        techniques, or other means, to circumvent, or attempt to circumvent, any restrictions that\r\n                        apply; and\r\n                      </p>\r\n                    </li>\r\n                    <li>\r\n                      <p className=\"body-text\">\r\n                        1.1.8. Your access is not (a) prohibited by and does not otherwise violate or assist you in\r\n                        violating any domestic or foreign law, rule, statute, regulation, by-law, order, protocol, code,\r\n                        decree, letter, or another directive, requirement, guidance, or guideline, published or in force\r\n                        that applies to or is otherwise intended to govern or regulate any person, property,\r\n                        transaction, activity, event or other matter, including any rule, letter, order, judgment,\r\n                        directive or other requirements, guidance, or guideline issued by any domestic or foreign\r\n                        federal, provincial or state, municipal, local or other governmental, regulatory, judicial or\r\n                        administrative authority having jurisdiction over GMX.io or you as otherwise duly enacted,\r\n                        enforceable by law, the common law or equity (collectively, \"Applicable Laws\"); or (b)\r\n                        contribute to or facilitate any illegal activity.\r\n                      </p>\r\n                    </li>\r\n                  </ul>\r\n                </li>\r\n              </ul>\r\n              <ul className=\"list-style-none\">\r\n                <li>\r\n                  <p className=\"body-text\">\r\n                    1.2. As a condition to accessing or using the Site or the Interface, you acknowledge, understand,\r\n                    and agree to the following:\r\n                  </p>\r\n                  <ul className=\"list-style-none\">\r\n                    <li>\r\n                      <p className=\"body-text\">\r\n                        1.2.1. From time to time, the Site or the Interface may be inaccessible or inoperable for any\r\n                        reason, including, but not limited to: (a) equipment malfunctions; (b) periodic maintenance\r\n                        procedures or repairs that GMX.io or any of its suppliers or contractors may undertake from time\r\n                        to time; (c) causes beyond GMX.io's control or that GMX.io could not reasonably foresee; (d)\r\n                        disruptions and temporary or permanent unavailability of underlying blockchain infrastructure;\r\n                        or (e) unavailability of third-party service providers or external partners for any reason;\r\n                      </p>\r\n                    </li>\r\n                    <li>\r\n                      <p className=\"body-text\">\r\n                        1.2.2. We reserve the right to disable or modify access to the Site at any time in the event of\r\n                        any breach of these Terms, including, without limitation, if we reasonably believe any of your\r\n                        representations and warranties may be untrue or inaccurate, and we will not be liable to you for\r\n                        any losses or damages you may suffer as a result of or in connection with the Site or the\r\n                        Interface being inaccessible to you at any time or for any reason;\r\n                      </p>\r\n                    </li>\r\n                    <li>\r\n                      <p className=\"body-text\">\r\n                        1.2.3. The Interface may evolve, which means third parties may apply changes, replace, or\r\n                        discontinue (temporarily or permanently) the access at any time in their sole discretion;\r\n                      </p>\r\n                    </li>\r\n                    <li>\r\n                      <p className=\"body-text\">\r\n                        1.2.4. The pricing information provided on the Site or the Interface does not represent an\r\n                        offer, a solicitation of an offer, or any advice regarding, or recommendation to enter into, a\r\n                        transaction with GMX.io;\r\n                      </p>\r\n                    </li>\r\n                    <li>\r\n                      <p className=\"body-text\">1.2.5. GMX.io does not act as a broker or advisor for you;</p>\r\n                    </li>\r\n                    <li>\r\n                      <p className=\"body-text\">\r\n                        1.2.6. You are solely responsible for your use of the Site or the Interface, including all of\r\n                        your transfers of digital assets;\r\n                      </p>\r\n                    </li>\r\n                    <li>\r\n                      <p className=\"body-text\">\r\n                        1.2.7. To the fullest not prohibited by Applicable Law, we owe no fiduciary duties or\r\n                        liabilities to you or any other party, and that to the extent any such duties or liabilities may\r\n                        exist at law or in equity, you hereby irrevocably disclaim, waive, and eliminate those duties\r\n                        and liabilities;\r\n                      </p>\r\n                    </li>\r\n                    <li>\r\n                      <p className=\"body-text\">\r\n                        1.2.8. You are solely responsible for reporting and paying any taxes applicable to your use of\r\n                        the Interface; and\r\n                      </p>\r\n                    </li>\r\n                    <li>\r\n                      <p className=\"body-text\">\r\n                        1.2.9. We have no control over, or liability for, the delivery, quality, safety, legality, or\r\n                        any other aspect of any digital assets that you may transfer to or from a third party, and we\r\n                        are not responsible for ensuring that an entity with whom you transact completes the transaction\r\n                        or is authorized to do so. If you experience a problem with any transactions in digital assets\r\n                        using the Site or the Interface, you bear the entire risk.\r\n                      </p>\r\n                    </li>\r\n                  </ul>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n            <div className=\"section\">\r\n              <h3 className=\"body-title\">2. FEES</h3>\r\n              <p className=\"body-text\">\r\n                You are required to pay all fees for transactions involving certain blockchain networks. These fees may\r\n                include gas costs and all other fees reflected on the Interface at your use, including trading-related\r\n                fees. GMX.io does not receive fees for any blockchain transactions or using the Site or the Interface.\r\n              </p>\r\n            </div>\r\n            <div className=\"section\">\r\n              <h3 className=\"body-title\">3. NO PROFESSIONAL ADVICE OR FIDUCIARY DUTIES</h3>\r\n              <p className=\"body-text\">\r\n                Nothing herein constitutes legal, financial, business, or tax advice, and you are strongly advised to\r\n                consult an advisor(s) before engaging in any activity in connection herewith. All information provided\r\n                by the Site is for informational purposes only and should not be construed as professional advice. You\r\n                should not take, or refrain from taking, any action based on any information contained on the Site or\r\n                any other information that we make available at any time, including, without limitation, blog posts,\r\n                articles, links to third-party content, discord content, news feeds, tutorials, tweets, and videos. The\r\n                Terms are not intended to, and do not, create or impose any fiduciary duties on us.\r\n              </p>\r\n            </div>\r\n            <div className=\"section\">\r\n              <h3 className=\"body-title\">4. PROPRIETARY RIGHT</h3>\r\n              <ul className=\"list-style-none\">\r\n                <li>\r\n                  <p className=\"body-text\">\r\n                    4.1. GMX.io own all rights, names, logos, and other marks used on the Site and the Interface,\r\n                    including, without limitation, any copyrights in and to any content, code, data, or other materials\r\n                    that you may access or use on or through the Site or the Interface; however, the code for the GMX\r\n                    Protocol and the Interface (app.GMX.io) deployed on IPFS is open-sourced. Except as expressly set\r\n                    forth herein, your use of or access to the Site or the Interface does not grant you any ownership or\r\n                    other rights therein.\r\n                  </p>\r\n                </li>\r\n                <li>\r\n                  <p className=\"body-text\">\r\n                    4.2. GMX.io may use and share your comments, bug reports, ideas, or other feedback that you may\r\n                    provide, including suggestions about how we might improve. You agree that GMX.io is free to use or\r\n                    not use any feedback we receive from you as we see fit, including copying and sharing such feedback\r\n                    with third parties, without any obligation to you.\r\n                  </p>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n            <div className=\"section\">\r\n              <h3 className=\"body-title\">5. MODIFICATION, SUSPENSION, AND TERMINATION</h3>\r\n              <ul className=\"list-style-none\">\r\n                <li>\r\n                  <p className=\"body-text\">\r\n                    5.1. GMX.io reserve the right, at our sole discretion, from time to time and with or without prior\r\n                    notice to you, to modify, suspend or disable (temporarily or permanently) the Site or our subdomain\r\n                    to the Interface, in whole or in part, for any reason whatsoever, including, without limitation.\r\n                    Upon termination of your access, your right to use the Site or the Interface from our subdomain will\r\n                    immediately cease. However, it would still be accessible via a third party since we do not host or\r\n                    own its code. GMX.io will not be liable for any losses suffered by you resulting from any\r\n                    modification to the Site or the Interface or from any modification, suspension, or termination, for\r\n                    any reason, of your access to all or any portion of the Site or the Interface.\r\n                  </p>\r\n                </li>\r\n                <li>\r\n                  <p className=\"body-text\">\r\n                    5.2. GMX.io may revise these Terms from time to time. We will notify you by updating the date at the\r\n                    top of the Terms and maintaining a current version. The most current version of the Terms will\r\n                    always be at https://gmx.io/#/terms-and-conditions. All modifications will be effective when they\r\n                    are posted. By continuing to access or use the Site or the Interface after those revisions become\r\n                    effective, you agree to be bound by the revised Terms.\r\n                  </p>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n            <div className=\"section\">\r\n              <h3 className=\"body-title\">6. RISKS</h3>\r\n              <ul className=\"list-style-none\">\r\n                <li>\r\n                  <p className=\"body-text\">\r\n                    6.1. The use of technology related to blockchain, smart contracts, and cryptocurrencies, among\r\n                    others, entails a risk that by accessing transactions, you are assuming. GMX.io does not own or\r\n                    control any underlying software through which blockchain networks are formed. The software\r\n                    underlying blockchain networks are open-source so anyone can use, copy, modify, and distribute it.\r\n                    By using the Interface, you acknowledge and agree:\r\n                  </p>\r\n                  <ul className=\"list-style-none\">\r\n                    <li>\r\n                      <p className=\"body-text\">\r\n                        6.1.1. That GMX.io is not responsible for the operation of the open-source software and networks\r\n                        underlying the Interface;\r\n                      </p>\r\n                    </li>\r\n                    <li>\r\n                      <p className=\"body-text\">\r\n                        6.1.2. That there exists no guarantee of the functionality, security, or availability of that\r\n                        software and networks; and\r\n                      </p>\r\n                    </li>\r\n                    <li>\r\n                      <p className=\"body-text\">\r\n                        6.1.3. That the underlying networks are subject to sudden changes in operating rules, such as\r\n                        those commonly referred to as \"forks,\" which may materially affect the Interface. You are\r\n                        responsible for securing your private key(s). We do not have access to your private key(s);\r\n                        losing control of your private key(s) will permanently and irreversibly deny you access to any\r\n                        blockchain-based network. Neither GMX.io nor any other person or entity will be able to retrieve\r\n                        or protect your digital assets. If your private key(s) are lost, you will not be able to\r\n                        transfer your digital assets to any blockchain address or wallet. If this occurs, you will not\r\n                        be able to realize any value or utility from the digital assets you may hold.\r\n                      </p>\r\n                    </li>\r\n                  </ul>\r\n                </li>\r\n                <li>\r\n                  <p className=\"body-text\">\r\n                    6.2. GMX.io is not responsible for the content of any third party, including, but not limited to,\r\n                    information, materials, products, or services that GMX.io does not own or control. In addition,\r\n                    third parties may offer promotions related to your access and use of the Interface. GMX.io does not\r\n                    endorse or assume any responsibility for such resources or promotions. Suppose you access any such\r\n                    resources or participate in any such promotions. In that case, you do so at your own risk and\r\n                    understand that these Terms do not apply to your dealings or relationships with any third parties.\r\n                    You expressly relieve GMX.io of all liability arising from using such resources or participating in\r\n                    such promotions.\r\n                  </p>\r\n                </li>\r\n                <li>\r\n                  <p className=\"body-text\">\r\n                    6.3. You understand that the Arbitrum and Avalanche blockchain remains under development, which\r\n                    creates technological and security risks when using the Interface, in addition to uncertainty\r\n                    relating to digital assets and transactions therein. You acknowledge that the cost of transacting on\r\n                    the Arbitrum and Avalanche blockchain is variable and may increase at any time, causing an impact on\r\n                    any activities taking place on these blockchains, which may result in price fluctuations or\r\n                    increased costs when using the Interface.\r\n                  </p>\r\n                </li>\r\n                <li>\r\n                  <p className=\"body-text\">\r\n                    6.4. Transactions entered into in connection with the Interface are irreversible and final, and\r\n                    there are no refunds. You acknowledge and agree that you will access and use the Interface at your\r\n                    own risk.\r\n                  </p>\r\n                </li>\r\n                <li>\r\n                  <p className=\"body-text\">\r\n                    6.5. We must comply with Applicable Law, which may require us to, upon request by government\r\n                    agencies, take certain actions or provide information that may not be in your best interests.\r\n                  </p>\r\n                </li>\r\n                <li>\r\n                  <p className=\"body-text\">\r\n                    6.6. You hereby assume and agree that GMX.io will have no responsibility or liability for the risks\r\n                    in Section 9. You hereby irrevocably waive, release and discharge all claims, whether known or\r\n                    unknown to you, against GMX.io, its affiliates, and their respective shareholders, members,\r\n                    directors, officers, employees, agents, representatives, suppliers, and contractors related to any\r\n                    of the risks set forth in this Section 6.\r\n                  </p>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n            <div className=\"section\">\r\n              <h3 className=\"body-title\">7. PROHIBITED USES</h3>\r\n              <ul className=\"list-style-none\">\r\n                <li>\r\n                  <p className=\"body-text\">\r\n                    7.1 You agree not to engage in the prohibited uses set forth below. The specific activities set\r\n                    forth below are representative but not exhaustive. By using the Site or the Interface, you confirm\r\n                    that you will not do any of the following:\r\n                  </p>\r\n                  <ul className=\"list-style-none\">\r\n                    <li>\r\n                      <p className=\"body-text\">\r\n                        7.1.1. Promote or facilitate illegal activities, including but not limited to money laundering,\r\n                        terrorist financing, tax evasion, buying or selling illegal drugs, contraband, counterfeit\r\n                        goods, or illegal weapons;\r\n                      </p>\r\n                    </li>\r\n                    <li>\r\n                      <p className=\"body-text\">\r\n                        7.1.2. Engage in transactions involving items that infringe or violate any copyright, trademark,\r\n                        right of publicity, privacy, or any other proprietary right of GMX.io;\r\n                      </p>\r\n                    </li>\r\n                    <li>\r\n                      <p className=\"body-text\">\r\n                        7.1.3. Engage in improper or abusive trading practices, including but not limited to (a) any\r\n                        fraudulent act or scheme to defraud, deceive, trick, or mislead; (b) trading ahead of another\r\n                        user of the Site or the Interface or front-running; (c) fraudulent trading; (d) accommodation\r\n                        trading; (e) fictitious transactions; (f) pre-arranged or non-competitive transactions; or (g)\r\n                        cornering;\r\n                      </p>\r\n                    </li>\r\n                    <li>\r\n                      <p className=\"body-text\">\r\n                        7.1.4. Uploading or transmitting viruses, worms, Trojan horses, time bombs, cancelbots, spiders,\r\n                        malware, or any other type of malicious code that will or may be used in any way that will\r\n                        affect the functionality or operation of the Site or the Interface;\r\n                      </p>\r\n                    </li>\r\n                    <li>\r\n                      <p className=\"body-text\">\r\n                        7.1.5. Use the Site or Interface in any way that is, in our sole discretion, libelous,\r\n                        defamatory, profane, obscene, pornographic, sexually explicit, indecent, lewd, vulgar,\r\n                        suggestive, harassing, stalking, hateful, threatening, offensive, discriminatory, bigoted,\r\n                        abusive, inflammatory, fraudulent, deceptive, or otherwise objectionable or likely or intended\r\n                        to incite, threaten, facilitate, promote, or encourage hate, racial intolerance, or violent acts\r\n                        against others;\r\n                      </p>\r\n                    </li>\r\n                    <li>\r\n                      <p className=\"body-text\">\r\n                        7.1.6. Harass, abuse, or harm another person or entity, including GMX.io's collaborator and\r\n                        service providers;\r\n                      </p>\r\n                    </li>\r\n                    <li>\r\n                      <p className=\"body-text\">\r\n                        7.1.7. Impersonate another user of the Site or the Interface or otherwise misrepresent yourself;\r\n                        or\r\n                      </p>\r\n                    </li>\r\n                    <li>\r\n                      <p className=\"body-text\">\r\n                        7.1.8. Engage or attempt to engage or encourage, induce or assist any third party, or yourself\r\n                        attempt, to engage in any of the activities prohibited under this Section 4 or any other\r\n                        provision of these Terms.\r\n                      </p>\r\n                    </li>\r\n                  </ul>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n            <div className=\"section\">\r\n              <h3 className=\"body-title\">8. DISCLOSURES; DISCLAIMERS</h3>\r\n              <p className=\"body-text\">\r\n                GMX.io is an informational site for the GMX Protocol. GMX.io does not operate an exchange platform or\r\n                offer trade execution or clearing services and has no oversight, involvement, or control concerning your\r\n                transactions using the Interface. All transactions between users of the Interface are executed\r\n                peer-to-peer directly between the users' blockchain addresses through a third-party developed\r\n                open-source smart contract.\r\n              </p>\r\n              <p className=\"body-text\">\r\n                You are responsible for complying with all Applicable Laws that govern your Perpetual Contracts. As a\r\n                result of restrictions under the Commodity Exchange Act and the regulations promulgated thereunder by\r\n                the U.S. Commodity Futures Trading Commission (\"CFTC\"), no U.S. Person may enter into Perpetual\r\n                Contracts using the Interface.\r\n              </p>\r\n              <p className=\"body-text\">\r\n                You understand that GMX.io is not registered or licensed by any regulatory agency or authority. No such\r\n                agency or authority has reviewed or approved the use of the Site or the Interface.\r\n              </p>\r\n              <p className=\"body-text\">\r\n                You agree that the Site and the Interface are provided on an \"AS IS\" and \"AS AVAILABLE\" basis. GMX.io\r\n                makes no guarantees of any kind or connection with the Site or the Interface.\r\n              </p>\r\n            </div>\r\n            <div className=\"section\">\r\n              <h3 className=\"body-title\">9. LIMITATION OF LIABILITY</h3>\r\n              <p className=\"body-text\">\r\n                In no event shall GMX.io, its affiliates, its suppliers and contractors, and its affiliates', suppliers'\r\n                and contractors' respective stockholders, members, directors, officers, managers, employees, attorneys,\r\n                agents, representatives, suppliers, and contractors shall be liable for any direct, indirect,\r\n                incidental, special, punitive, consequential or similar damages or liabilities whatsoever (including,\r\n                without limitation, damages for loss of fiat, assets, data, information, revenue, opportunities, use,\r\n                goodwill, profits or other business or financial benefit) arising out of or in connection with the Site\r\n                or the Interface, or other item provided by or on behalf of GMX.io, whether under contract, tort\r\n                (including negligence), civil liability, statute, strict liability, breach of warranties, or under any\r\n                other theory of liability, and whether or not we have been advised of, knew of or should have known of\r\n                the possibility of such damages and notwithstanding any failure of the essential purpose of these Terms\r\n                or any limited remedy hereunder nor is GMX.io in any way responsible for the execution or settlement of\r\n                transactions between users of the Interface.\r\n              </p>\r\n              <p className=\"body-text\">\r\n                In no event shall GMX.io's aggregate liability arising out of or in connection with the Site or\r\n                Interface exceed one thousand Singapore Dollars (1,000.00 SGD).\r\n              </p>\r\n            </div>\r\n            <div className=\"section\">\r\n              <h3 className=\"body-title\">10. INDEMNIFICATION</h3>\r\n              <p className=\"body-text\">\r\n                You will defend, indemnify, and hold harmless GMX.io, its affiliates, members, member, managers,\r\n                employees, attorneys, representatives, suppliers, and contractors from any claim, demand, lawsuit,\r\n                action, proceeding, investigation, liability, damage, loss, cost or expense, including without\r\n                limitation reasonable attorneys' fees, arising out of or relating to (a) your use of or conduct in\r\n                connection with the Site or the Interface (b) your violation of these Terms; or (c) your misuse of the\r\n                Site or the Interface, or any smart contract and/or script related thereto; (d) your violation of any\r\n                laws, rules, regulations, codes, statutes, ordinances, or orders of any governmental or\r\n                quasi-governmental authorities; (e) your violation of the rights of any third party, including any\r\n                intellectual property right, publicity, confidentiality, property, or privacy right; (f) your use of a\r\n                third-party product, service, and/or website; or (g) any misrepresentation made by you. We reserve the\r\n                right to assume, at your expense, the exclusive defense, and control of any matter subject to\r\n                indemnification by you. You agree to cooperate with our defense of any claim. You will not, in any\r\n                event, settle any claim without.\r\n              </p>\r\n            </div>\r\n            <div className=\"section\">\r\n              <h3 className=\"body-title\">11. DISPUTE RESOLUTION & ARBITRATION</h3>\r\n              <p className=\"body-text\">\r\n                GMX.io will use its best efforts to resolve potential disputes through informal, good faith\r\n                negotiations. If a potential dispute arises, you must contact us by sending a written notice of your\r\n                claim (\"Notice\") to GMX.io on any of our official channels. The notice must (a) describe the nature and\r\n                basis of the claim and (b) set forth the specific relief sought. Our notice to you will be similar in\r\n                form to that described above. If you and GMX.io cannot reach an agreement to resolve the claim within\r\n                sixty (60) days of your email, then you and GMX.io agree to resolve the potential dispute according to\r\n                the process set forth below.\r\n              </p>\r\n              <p className=\"body-text\">\r\n                Any claim or controversy arising out of or relating to the Site, the Interface, or these Terms, or any\r\n                other acts or omissions for which you may contend that we are liable, including (but not limited to) any\r\n                claim or controversy as to arbitrability (\"Dispute\"), shall be finally and exclusively settled by\r\n                arbitration under the Corte Civil y Mercantil de Arbitraje (CIMA). You understand that you are required\r\n                to resolve all Disputes by binding arbitration. The arbitration shall be confidential before a single\r\n                arbitrator, who shall be selected pursuant to the CIMA rules. The arbitration will be held in Madrid,\r\n                Spain, unless you and we both agree to hold it elsewhere. Unless we agree otherwise, the arbitrator may\r\n                not consolidate your claims with those of any other party. Any judgment on the award rendered by the\r\n                arbitrator may be entered in any court of competent jurisdiction.\r\n              </p>\r\n              <p className=\"body-text\">\r\n                Any claim arising out of or related to these Terms or the Site or the Interface must be filed within one\r\n                year after such claim arose; otherwise, the claim is permanently barred, which means that you and GMX.io\r\n                will not have the right to assert the claim.\r\n              </p>\r\n            </div>\r\n            <div className=\"section\">\r\n              <h3 className=\"body-title\">12. GOVERNING LAW</h3>\r\n              <p className=\"body-text\">\r\n                The interpretation and enforcement of these Terms, and any dispute related to these Terms, the Site, or\r\n                the Interface, will be governed by and construed and enforced under the laws of the Bahamas, as\r\n                applicable.\r\n              </p>\r\n            </div>\r\n            <div className=\"section\">\r\n              <h3 className=\"body-title\">13. GENERAL INFORMATION</h3>\r\n              <ul className=\"list-style-none\">\r\n                <li>\r\n                  <p className=\"body-text\">\r\n                    13.1. Any right or remedy of GMX.io set forth in these Terms is in addition to, and not in lieu of,\r\n                    any other right or remedy whether described in these Terms, under Applicable Law, at law, or in\r\n                    equity. The failure or delay of GMX.io in exercising any right, power, or privilege under these\r\n                    Terms shall not operate as a waiver thereof.\r\n                  </p>\r\n                </li>\r\n                <li>\r\n                  <p className=\"body-text\">\r\n                    13.2. The following sections of these Terms will survive any termination of your access to the Site\r\n                    or the Interface, regardless of the reasons for its expiration or termination, in addition to any\r\n                    other provision which by law or by its nature should survive: Sections 3 through 12.\r\n                  </p>\r\n                </li>\r\n                <li>\r\n                  <p className=\"body-text\">\r\n                    13.3. The invalidity or unenforceability of any of these Terms shall not affect the validity or\r\n                    enforceability of any other of these Terms, all of which shall remain in full force and effect.\r\n                  </p>\r\n                </li>\r\n                <li>\r\n                  <p className=\"body-text\">\r\n                    13.4. GMX.io will have no responsibility or liability for any failure or delay in performance of the\r\n                    Site or the Interface, or any loss or damage that you may incur, due to any circumstance or event\r\n                    beyond our control, including without limitation any flood, extraordinary weather conditions,\r\n                    earthquake, or other act of God, fire, war, insurrection, riot, labor dispute, accident, any law,\r\n                    order regulation, direction, action or request of the government, communications, power failure, or\r\n                    equipment or software malfunction.\r\n                  </p>\r\n                </li>\r\n                <li>\r\n                  <p className=\"body-text\">\r\n                    13.5. You may not assign or transfer any right to use the Site, the Interface, or any of your rights\r\n                    or obligations under these Terms, without our express prior written consent, including by operation\r\n                    of law or in connection with any change of control. We may assign or transfer any or all of our\r\n                    rights or obligations under these Terms, in whole or part, without notice or obtaining your consent\r\n                    or approval.\r\n                  </p>\r\n                </li>\r\n                <li>\r\n                  <p className=\"body-text\">\r\n                    13.6. These Terms contain the entire agreement between you and GMX.io and supersede all prior and\r\n                    contemporaneous understandings between the parties regarding the Interface and the Site or the\r\n                    Interface.\r\n                  </p>\r\n                </li>\r\n                <li>\r\n                  <p className=\"body-text\">\r\n                    13.7. In the event of any conflict between these Terms and any other agreement you may have with us,\r\n                    these Terms will control unless the other agreement specifically identifies these Terms and declares\r\n                    that the other agreement supersedes these Terms.\r\n                  </p>\r\n                </li>\r\n                <li>\r\n                  <p className=\"body-text\">\r\n                    13.8. You agree that, except as otherwise expressly provided in these Terms, there shall be no\r\n                    third-party beneficiaries to the Terms other than the Indemnified Parties.\r\n                  </p>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n            <div className=\"section\">\r\n              <h3 className=\"body-title\">CONTACT INFORMATION</h3>\r\n              <p className=\"body-text\">\r\n                If you have any questions about these Terms, the Site, or the Interface, please get in touch with GMX.io\r\n                on any of our official channels.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <Footer />\r\n      </div>\r\n    </SEO>\r\n  );\r\n}\r\n","import \"./RedirectModal.css\";\nimport Modal from \"../Modal/Modal\";\nimport Checkbox from \"../Checkbox/Checkbox\";\n\nexport function RedirectPopupModal({\n  redirectModalVisible,\n  setRedirectModalVisible,\n  appRedirectUrl,\n  setRedirectPopupTimestamp,\n  setShouldHideRedirectModal,\n  shouldHideRedirectModal,\n  removeRedirectPopupTimestamp,\n}) {\n  const onClickAgree = () => {\n    setRedirectModalVisible(false)\n    if (shouldHideRedirectModal) {\n      setRedirectPopupTimestamp(Date.now());\n    }\n  };\n  return (\n    <Modal\n      className=\"RedirectModal\"\n      isVisible={redirectModalVisible}\n      setIsVisible={setRedirectModalVisible}\n      label=\"Launch App\"\n    >\n      You are leaving LeaveragePro.com and will be redirected to a third party, independent website.\n      <br />\n      <br />\n      The website is a community deployed and maintained instance of the open source{\" \"}\n      <a href=\"about:blank\" target=\"_blank\" rel=\"noopener noreferrer\">\n        LeaveragePro front end\n      </a>\n      , hosted and served on the distributed, peer-to-peer{\" \"}\n      <a href=\"https://ipfs.io/\" target=\"_blank\" rel=\"noopener noreferrer\">\n        IPFS network\n      </a>\n      .\n      <br />\n      <br />\n      Alternative links can be found in the{\" \"}\n      <a href=\"about:blank\" target=\"_blank\" rel=\"noopener noreferrer\">\n        docs\n      </a>\n      .\n      <br />\n      <br />\n      By clicking Agree you accept the{\" \"}\n      <a href=\"about:blank\" target=\"_blank\" rel=\"noopener noreferrer\">\n        T&Cs\n      </a>{\" \"}\n      and{\" \"}\n      <a href=\"about:blank\" target=\"_blank\" rel=\"noopener noreferrer\">\n        Referral T&Cs\n      </a>\n      .\n      <br />\n      <br />\n      <div className=\"mb-sm\">\n        <Checkbox isChecked={shouldHideRedirectModal} setIsChecked={setShouldHideRedirectModal}>\n          Don't show this message again for 30 days.\n        </Checkbox>\n      </div>\n      <a href={appRedirectUrl} className=\"App-cta Exchange-swap-button\" onClick={() => onClickAgree()}>\n        Agree\n      </a>\n    </Modal>\n  );\n}\n","import \"./Jobs.css\";\r\nimport React, { useEffect } from \"react\";\r\nimport SEO from \"../../components/Common/SEO\";\r\nimport Footer from \"../../components/Footer/Footer\";\r\nimport { getPageTitle } from \"../../lib/legacy\";\r\nimport Card from \"../../components/Common/Card\";\r\n\r\nfunction Jobs() {\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n  }, []);\r\n  return (\r\n    <SEO title={getPageTitle(\"Job Openings\")}>\r\n      <div className=\"default-container page-layout Referrals\">\r\n        <div className=\"section-title-block\">\r\n          <div className=\"section-title-icon\"></div>\r\n          <div className=\"section-title-content\">\r\n            <div className=\"Page-title\">Jobs</div>\r\n            <div className=\"Page-description\">Job openings at GMX.</div>\r\n          </div>\r\n        </div>\r\n        <div className=\"jobs-page-body\">\r\n          <NoJob />\r\n        </div>\r\n      </div>\r\n      <Footer />\r\n    </SEO>\r\n  );\r\n}\r\n\r\nfunction NoJob() {\r\n  return (\r\n    <Card title=\"No open positions at GMX currently\">\r\n      <div className=\"body-para\">\r\n        <p className=\"subheading\">\r\n          GMX is not actively looking for new hires at the moment. However, if you think you can contribute to the\r\n          project, please email{\" \"}\r\n          <a target=\"_blank\" href=\"mailto:jobs@gmx.io\" rel=\"noopener noreferrer\">\r\n            jobs@gmx.io\r\n          </a>\r\n          .\r\n        </p>\r\n      </div>\r\n    </Card>\r\n  );\r\n}\r\n\r\n// function JobCard() {\r\n//   return (\r\n//     <Card title=\"Senior front-end developer (Full-time position)\">\r\n//       <div className=\"body-para\">\r\n//         <p className=\"subheading\">What you will do:</p>\r\n//         <ul>\r\n//           <li>Work closely with the GMX team on the GMX front-end website.</li>\r\n//           <li>Collaborate and discuss features to be worked on.</li>\r\n//           <li>Remote full-time position, flexible working hours.</li>\r\n//         </ul>\r\n//         <div className=\"mt-lg\">\r\n//           <p className=\"subheading\">What we are looking for:</p>\r\n//           <ul>\r\n//             <li>Required skills: HTML5, CSS3, React, Ethers, Web3 JS.</li>\r\n//             <li>Bonus skills: Node JS.</li>\r\n//             <li>5+ years of experience.</li>\r\n//             <li>Previous DeFi experience and knowledge.</li>\r\n//             <li>Must speak fluent English and available to start right away.</li>\r\n//             <li>Comfortable making changes to the interface following our current design guidelines.</li>\r\n//           </ul>\r\n//           <p>The salary is 60,000 to 120,000 USD + 1,000 to 3,000 GMX a year.</p>\r\n//           <p className=\"jobs-contact\">\r\n//             If the job suits you, please get in touch with{\" \"}\r\n//             <a target=\"_blank\" href=\"mailto:jobs@gmx.io\" rel=\"noopener noreferrer\">\r\n//               jobs@gmx.io\r\n//             </a>{\" \"}\r\n//             using the following email subject: Application for Senior front-end developer: [Your name]\r\n//           </p>\r\n//         </div>\r\n//       </div>\r\n//     </Card>\r\n//   );\r\n// }\r\n\r\nexport default Jobs;\r\n","import { i18n } from \"@lingui/core\";\r\nimport { en, es, zh, ko, ru, ja, fr } from \"make-plural/plurals\";\r\nimport { LANGUAGE_LOCALSTORAGE_KEY } from \"./legacy\";\r\n\r\nexport const locales = {\r\n  en: \"English\",\r\n  es: \"Spanish\",\r\n  // zh: \"Chinese\",\r\n  ko: \"Korean\",\r\n  // ru: \"Russian\",\r\n  ja: \"Japanese\",\r\n  // fr: \"French\",\r\n};\r\n\r\nexport const defaultLocale = \"en\";\r\n\r\ni18n.loadLocaleData({\r\n  en: { plurals: en },\r\n  es: { plurals: es },\r\n  zh: { plurals: zh },\r\n  ko: { plurals: ko },\r\n  ru: { plurals: ru },\r\n  ja: { plurals: ja },\r\n  fr: { plurals: fr },\r\n});\r\n\r\nexport async function dynamicActivate(locale) {\r\n  const { messages } = await import(`@lingui/loader!../config/locales/${locale}/messages.po`);\r\n  localStorage.setItem(LANGUAGE_LOCALSTORAGE_KEY, locale);\r\n  i18n.load(locale, messages);\r\n  i18n.activate(locale);\r\n}\r\n","import \"./AddressDropdown.css\";\r\nimport { Menu } from \"@headlessui/react\";\r\nimport { Trans } from \"@lingui/macro\";\r\nimport { helperToast, shortenAddress, useENS } from \"../../lib/legacy\";\r\nimport { useCopyToClipboard, createBreakpoint } from \"react-use\";\r\nimport externalLink from \"../../img/ic_new_link_16.svg\";\r\nimport copy from \"../../img/ic_copy_16.svg\";\r\nimport disconnect from \"../../img/ic_sign_out_16.svg\";\r\nimport { FaChevronDown } from \"react-icons/fa\";\r\nimport Davatar from \"@davatar/react\";\r\n\r\nfunction AddressDropdown({ account, accountUrl, disconnectAccountAndCloseSettings }) {\r\n  const useBreakpoint = createBreakpoint({ L: 600, M: 550, S: 400 });\r\n  const breakpoint = useBreakpoint();\r\n  const [, copyToClipboard] = useCopyToClipboard();\r\n  const { ensName } = useENS(account);\r\n\r\n  return (\r\n    <Menu>\r\n      <Menu.Button as=\"div\">\r\n        <button className=\"App-cta small transparent address-btn\">\r\n          <div className=\"user-avatar\">\r\n            <Davatar size={20} address={account} />\r\n          </div>\r\n          <span className=\"user-address\">{ensName || shortenAddress(account, breakpoint === \"S\" ? 9 : 13)}</span>\r\n          <FaChevronDown />\r\n        </button>\r\n      </Menu.Button>\r\n      <div>\r\n        <Menu.Items as=\"div\" className=\"menu-items\">\r\n          <Menu.Item>\r\n            <div\r\n              className=\"menu-item\"\r\n              onClick={() => {\r\n                copyToClipboard(account);\r\n                helperToast.success(\"Address copied to your clipboard\");\r\n              }}\r\n            >\r\n              <img src={copy} alt=\"Copy user address\" />\r\n              <p>\r\n                <Trans>Copy Address</Trans>\r\n              </p>\r\n            </div>\r\n          </Menu.Item>\r\n          <Menu.Item>\r\n            <a href={accountUrl} target=\"_blank\" rel=\"noopener noreferrer\" className=\"menu-item\">\r\n              <img src={externalLink} alt=\"Open address in explorer\" />\r\n              <p>\r\n                <Trans>View in Explorer</Trans>\r\n              </p>\r\n            </a>\r\n          </Menu.Item>\r\n          <Menu.Item>\r\n            <div className=\"menu-item\" onClick={disconnectAccountAndCloseSettings}>\r\n              <img src={disconnect} alt=\"Disconnect the wallet\" />\r\n              <p>\r\n                <Trans>Disconnect</Trans>\r\n              </p>\r\n            </div>\r\n          </Menu.Item>\r\n        </Menu.Items>\r\n      </div>\r\n    </Menu>\r\n  );\r\n}\r\n\r\nexport default AddressDropdown;\r\n","import Portal from \"../Common/Portal\";\r\nimport Modal from \"./Modal\";\r\n\r\nexport default function ModalWithPortal(props) {\r\n  return (\r\n    <Portal>\r\n      <Modal {...props} />\r\n    </Portal>\r\n  );\r\n}\r\n","import React, { useRef, useState } from \"react\";\nimport { Menu } from \"@headlessui/react\";\nimport ModalWithPortal from \"../Modal/ModalWithPortal\";\nimport { t } from \"@lingui/macro\";\nimport cx from \"classnames\";\nimport { HiDotsVertical } from \"react-icons/hi\";\nimport \"./NetworkDropdown.css\";\nimport language24Icon from \"../../img/ic_language24.svg\";\nimport settingsIcon from \"../../img/ic_settings_16.svg\";\nimport bscIcon from \"../../img/ic_binance_logo.svg\";\nimport velasIcon from \"../../img/ic_velas_logo.svg\";\nimport checkedIcon from \"../../img/ic_checked.svg\";\nimport { importImage, LANGUAGE_LOCALSTORAGE_KEY } from \"../../lib/legacy\";\nimport { defaultLocale, dynamicActivate, locales } from \"../../lib/i18n\";\n\nconst LANGUAGE_MODAL_KEY = \"LANGUAGE\";\nconst NETWORK_MODAL_KEY = \"NETWORK\";\n\nexport default function NetworkDropdown(props) {\n  const currentLanguage = useRef(localStorage.getItem(LANGUAGE_LOCALSTORAGE_KEY) || defaultLocale);\n  const [activeModal, setActiveModal] = useState(null);\n\n  function getModalContent(modalName) {\n    switch (modalName) {\n      case LANGUAGE_MODAL_KEY:\n        return <LanguageModalContent currentLanguage={currentLanguage} />;\n      case NETWORK_MODAL_KEY:\n        return (\n          <NetworkModalContent\n            setActiveModal={setActiveModal}\n            networkOptions={props.networkOptions}\n            onNetworkSelect={props.onNetworkSelect}\n            selectorLabel={props.selectorLabel}\n            openSettings={props.openSettings}\n          />\n        );\n      default:\n        return;\n    }\n  }\n\n  function getModalProps(modalName) {\n    switch (modalName) {\n      case LANGUAGE_MODAL_KEY:\n        return {\n          className: \"language-popup\",\n          isVisible: activeModal === LANGUAGE_MODAL_KEY,\n          setIsVisible: () => setActiveModal(null),\n          label: t`Select Language`,\n        };\n      case NETWORK_MODAL_KEY:\n        return {\n          className: \"network-popup\",\n          isVisible: activeModal === NETWORK_MODAL_KEY,\n          setIsVisible: () => setActiveModal(null),\n          label: t`Networks and Settings`,\n        };\n      default:\n        return {};\n    }\n  }\n\n  return (\n    <>\n      {props.small ? (\n        <div className=\"App-header-network\" onClick={() => setActiveModal(NETWORK_MODAL_KEY)}>\n          <div className=\"network-dropdown\">\n            <NavIcons selectorLabel={props.selectorLabel} />\n          </div>\n        </div>\n      ) : (\n        <DesktopDropdown\n          currentLanguage={currentLanguage}\n          activeModal={activeModal}\n          setActiveModal={setActiveModal}\n          {...props}\n        />\n      )}\n      <ModalWithPortal {...getModalProps(activeModal)}>{getModalContent(activeModal)}</ModalWithPortal>\n    </>\n  );\n}\nfunction NavIcons({ selectorLabel }) {\n  return (\n    <>\n      <button className={cx(\"btn-primary small transparent\")}>\n        {selectorLabel == \"BSCTestnet\" && <img className=\"network-dropdown-icon\" src={bscIcon} alt={selectorLabel} />}\n        {selectorLabel == \"VelasTestnet\" && <img className=\"network-dropdown-icon\" src={velasIcon} alt={selectorLabel} />}\n      </button>\n      <div className=\"network-dropdown-seperator\" />\n      <button className={cx(\"btn-primary small transparent\")}>\n        <HiDotsVertical color=\"white\" size={20} />\n      </button>\n    </>\n  );\n}\n\nfunction DesktopDropdown({ setActiveModal, selectorLabel, networkOptions, onNetworkSelect, openSettings }) {\n  return (\n    <div className=\"App-header-network\">\n      <Menu>\n        <Menu.Button as=\"div\" className=\"network-dropdown\">\n          <NavIcons selectorLabel={selectorLabel} />\n        </Menu.Button>\n        <Menu.Items as=\"div\" className=\"menu-items network-dropdown-items\">\n          <div className=\"dropdown-label\">Networks</div>\n          <div className=\"network-dropdown-list\">\n            <NetworkMenuItems\n              networkOptions={networkOptions}\n              selectorLabel={selectorLabel}\n              onNetworkSelect={onNetworkSelect}\n            />\n          </div>\n          <div className=\"network-dropdown-divider\" />\n          <Menu.Item>\n            <div className=\"network-dropdown-menu-item menu-item\" onClick={openSettings}>\n              <div className=\"menu-item-group\">\n                <div className=\"menu-item-icon\">\n                  <img className=\"network-dropdown-icon\" src={settingsIcon} alt=\"\" />\n                </div>\n                <span className=\"network-dropdown-item-label\">Settings</span>\n              </div>\n            </div>\n          </Menu.Item>\n          <Menu.Item>\n            <div\n              className=\"network-dropdown-menu-item menu-item last-dropdown-menu\"\n              onClick={() => setActiveModal(LANGUAGE_MODAL_KEY)}\n            >\n              <div className=\"menu-item-group\">\n                <div className=\"menu-item-icon\">\n                  <img className=\"network-dropdown-icon\" src={language24Icon} alt=\"\" />\n                </div>\n                <span className=\"network-dropdown-item-label\">Language</span>\n              </div>\n            </div>\n          </Menu.Item>\n        </Menu.Items>\n      </Menu>\n    </div>\n  );\n}\n\nfunction NetworkMenuItems({ networkOptions, selectorLabel, onNetworkSelect }) {\n  async function handleNetworkSelect(option) {\n    await onNetworkSelect(option);\n  }\n  return networkOptions.map((network) => {\n    const networkIcon = importImage(network.icon);\n    return (\n      <Menu.Item key={network.value}>\n        <div\n          className=\"network-dropdown-menu-item menu-item\"\n          onClick={() => handleNetworkSelect({ value: network.value })}\n        >\n          <div className=\"menu-item-group\">\n            <div className=\"menu-item-icon\">\n              <img className=\"network-dropdown-icon\" src={networkIcon} alt={network.label} />\n            </div>\n            <span className=\"network-dropdown-item-label\">{network.label}</span>\n          </div>\n          <div className=\"network-dropdown-menu-item-img\">\n            <div className={cx(\"active-dot\", { [selectorLabel]: selectorLabel === network.label })} />\n          </div>\n        </div>\n      </Menu.Item>\n    );\n  });\n}\n\nfunction LanguageModalContent({ currentLanguage }) {\n  return Object.keys(locales).map((item) => {\n    const image = importImage(`flag_${item}.svg`);\n    return (\n      <div\n        key={item}\n        className={cx(\"network-dropdown-menu-item  menu-item language-modal-item\", {\n          active: currentLanguage.current === item,\n        })}\n        onClick={() => {\n          localStorage.setItem(LANGUAGE_LOCALSTORAGE_KEY, item);\n          dynamicActivate(item);\n        }}\n      >\n        <div className=\"menu-item-group\">\n          <div className=\"menu-item-icon\">\n            <img className=\"network-dropdown-icon\" src={image} alt=\"language-menu-open-icon\" />\n          </div>\n          <span className=\"network-dropdown-item-label menu-item-label\">{locales[item]}</span>\n        </div>\n        <div className=\"network-dropdown-menu-item-img\">\n          {currentLanguage.current === item && <img src={checkedIcon} alt={locales[item]} />}\n        </div>\n      </div>\n    );\n  });\n}\nfunction NetworkModalContent({ networkOptions, onNetworkSelect, selectorLabel, setActiveModal, openSettings }) {\n  console.log(\"selectorLabel:\", selectorLabel);\n  async function handleNetworkSelect(option) {\n    await onNetworkSelect(option);\n  }\n  return (\n    <div className=\"network-dropdown-items\">\n      <div className=\"network-dropdown-list\">\n        <span className=\"network-dropdown-label\">Networks</span>\n\n        {networkOptions.map((network) => {\n          const networkIcon = importImage(network.icon);\n          return (\n            <div\n              className=\"network-option\"\n              onClick={() => handleNetworkSelect({ value: network.value })}\n              key={network.value}\n            >\n              <div className=\"menu-item-group\">\n                <img src={networkIcon} alt={network.label} />\n                <span>{network.label}</span>\n              </div>\n              <div className={cx(\"active-dot\", { [selectorLabel]: selectorLabel === network.label })} />\n            </div>\n          );\n        })}\n        <span className=\"network-dropdown-label more-options\">More Options</span>\n        <div\n          className=\"network-option\"\n          onClick={() => {\n            setActiveModal(LANGUAGE_MODAL_KEY);\n          }}\n        >\n          <div className=\"menu-item-group\">\n            <img className=\"network-option-img\" src={language24Icon} alt=\"Select Language\" />\n            <span className=\"network-option-img-label\">Language</span>\n          </div>\n        </div>\n        <div\n          className=\"network-option\"\n          onClick={() => {\n            openSettings();\n            setActiveModal(null);\n          }}\n        >\n          <div className=\"menu-item-group\">\n            <img className=\"network-option-img\" src={settingsIcon} alt=\"\" />\n            <span className=\"network-option-img-label\">Settings</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useRef, useState } from \"react\";\r\nimport ModalWithPortal from \"../Modal/ModalWithPortal\";\r\nimport { t } from \"@lingui/macro\";\r\nimport cx from \"classnames\";\r\nimport \"./NetworkDropdown.css\";\r\nimport language24Icon from \"../../img/ic_language24.svg\";\r\nimport checkedIcon from \"../../img/ic_checked.svg\";\r\nimport { importImage, isHomeSite, LANGUAGE_LOCALSTORAGE_KEY } from \"../../lib/legacy\";\r\nimport { defaultLocale, dynamicActivate, locales } from \"../../lib/i18n\";\r\n\r\nexport default function LanguagePopupHome() {\r\n  const currentLanguage = useRef(localStorage.getItem(LANGUAGE_LOCALSTORAGE_KEY) || defaultLocale);\r\n  const [isLanguageModalOpen, setIsLanguageModalOpen] = useState(false);\r\n\r\n  return (\r\n    <>\r\n      <div className=\"App-header-network App-header-language\" onClick={() => setIsLanguageModalOpen(true)}>\r\n        <div className={cx(\"network-dropdown\", { \"homepage-header\": isHomeSite() })}>\r\n          <button className={cx(\"btn-primary small transparent\")}>\r\n            <img className=\"network-dropdown-icon\" src={language24Icon} alt=\"Select Language\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <ModalWithPortal\r\n        className=\"language-popup\"\r\n        isVisible={isLanguageModalOpen}\r\n        setIsVisible={setIsLanguageModalOpen}\r\n        label={t`Select Language`}\r\n      >\r\n        {Object.keys(locales).map((item) => {\r\n          const image = importImage(`flag_${item}.svg`);\r\n          return (\r\n            <div\r\n              key={item}\r\n              className={cx(\"network-dropdown-menu-item  menu-item language-modal-item\", {\r\n                active: currentLanguage.current === item,\r\n              })}\r\n              onClick={() => {\r\n                localStorage.setItem(LANGUAGE_LOCALSTORAGE_KEY, item);\r\n                dynamicActivate(item);\r\n              }}\r\n            >\r\n              <div className=\"menu-item-group\">\r\n                <div className=\"menu-item-icon\">\r\n                  <img className=\"network-dropdown-icon\" src={image} alt=\"language-menu-open-icon\" />\r\n                </div>\r\n                <span className=\"network-dropdown-item-label menu-item-label\">{locales[item]}</span>\r\n              </div>\r\n              <div className=\"network-dropdown-menu-item-img\">\r\n                {currentLanguage.current === item && <img src={checkedIcon} alt={locales[item]} />}\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </ModalWithPortal>\r\n    </>\r\n  );\r\n}\r\n","import {useWeb3React} from \"@web3-react/core\";\nimport AddressDropdown from \"../AddressDropdown/AddressDropdown\";\nimport {ConnectWalletButton} from \"../Common/Button\";\nimport React, {useCallback, useEffect} from \"react\";\nimport {HeaderLink} from \"./HeaderLink\";\nimport connectWalletImg from \"../../img/ic_wallet_24.svg\";\n\nimport \"./Header.css\";\nimport {\n  BSC,\n  BSC_TESTNET,\n  getAccountUrl,\n  getChainName,\n  isHomeSite,\n  switchNetwork,\n  useChainId,\n  VELAS_TESTNET\n} from \"../../lib/legacy\";\nimport cx from \"classnames\";\nimport {Trans} from \"@lingui/macro\";\nimport NetworkDropdown from \"../NetworkDropdown/NetworkDropdown\";\nimport LanguagePopupHome from \"../NetworkDropdown/LanguagePopupHome\";\n\ntype Props = {\n  openSettings: () => void;\n  small?: boolean;\n  setWalletModalVisible: (visible: boolean) => void;\n  disconnectAccountAndCloseSettings: () => void;\n  redirectPopupTimestamp: number;\n  showRedirectModal: (to: string) => void;\n};\n\nexport function AppHeaderUser({\n openSettings,\n small,\n setWalletModalVisible,\n disconnectAccountAndCloseSettings,\n redirectPopupTimestamp,\n showRedirectModal\n}: Props) {\n  const { chainId } = useChainId();\n  const { active, account } = useWeb3React();\n  const showConnectionOptions = !isHomeSite();\n\n  const networkOptions = [\n    {\n      label: getChainName(BSC_TESTNET),\n      value: BSC_TESTNET,\n      icon: \"ic_binance_logo.svg\",\n      color: \"#264f79\",\n    },\n    {\n      label: getChainName(VELAS_TESTNET),\n      value: VELAS_TESTNET,\n      icon: \"ic_velas_logo.svg\",\n      color: \"#264f79\",\n    }\n  ];\n\n  useEffect(() => {\n    if (active) {\n      setWalletModalVisible(false);\n    }\n  }, [active, setWalletModalVisible]);\n\n  const onNetworkSelect = useCallback(\n    (option) => {\n      if (option.value === chainId) {\n        return;\n      }\n      return switchNetwork(option.value, active);\n    },\n    [chainId, active]\n  );\n\n  const selectorLabel = getChainName(chainId);\n\n  if (!active) {\n    return (\n      <div className=\"App-header-user\">\n        <div className={cx(\"App-header-trade-link\", { \"homepage-header\": isHomeSite() })}>\n          <HeaderLink\n              className=\"default-btn\"\n              to=\"/trade\"\n              redirectPopupTimestamp={redirectPopupTimestamp}\n              showRedirectModal={showRedirectModal}\n          >\n            <Trans>Trade</Trans>\n          </HeaderLink>\n        </div>\n\n        {showConnectionOptions ? (\n          <>\n            <ConnectWalletButton onClick={() => setWalletModalVisible(true)} imgSrc={connectWalletImg}>\n              {small ? <Trans>Connect</Trans> : <Trans>Connect Wallet</Trans>}\n            </ConnectWalletButton>\n            <NetworkDropdown\n              small={small}\n              networkOptions={networkOptions}\n              selectorLabel={selectorLabel}\n              onNetworkSelect={onNetworkSelect}\n              openSettings={openSettings}\n            />\n          </>\n        ) : (\n          <LanguagePopupHome />\n        )}\n      </div>\n    );\n  }\n\n  const accountUrl = getAccountUrl(chainId, account);\n\n  return (\n    <div className=\"App-header-user\">\n      <div className=\"App-header-trade-link\">\n        <HeaderLink\n          className=\"default-btn\"\n          to=\"/trade\"\n          redirectPopupTimestamp={redirectPopupTimestamp}\n          showRedirectModal={showRedirectModal}\n        >\n          <Trans>Trade</Trans>\n        </HeaderLink>\n      </div>\n\n      {showConnectionOptions ? (\n        <>\n          <div className=\"App-header-user-address\">\n            <AddressDropdown\n              account={account}\n              accountUrl={accountUrl}\n              disconnectAccountAndCloseSettings={disconnectAccountAndCloseSettings}\n            />\n          </div>\n          <NetworkDropdown\n            small={small}\n            networkOptions={networkOptions}\n            selectorLabel={selectorLabel}\n            onNetworkSelect={onNetworkSelect}\n            openSettings={openSettings}\n          />\n        </>\n      ) : (\n        <LanguagePopupHome />\n      )}\n    </div>\n  );\n}\n","\nimport { FiX } from \"react-icons/fi\";\nimport { HeaderLink } from \"./HeaderLink\";\nimport logoImg from \"../../img/logo_GMX.svg\";\n\nimport \"./Header.css\";\nimport { isHomeSite } from \"../../lib/legacy\";\nimport {Trans} from \"@lingui/macro\";\nimport React from \"react\";\n\ntype Props = {\n  small?: boolean;\n  clickCloseIcon?: () => void;\n  openSettings?: () => void;\n  redirectPopupTimestamp: number;\n  showRedirectModal: (to: string) => void;\n};\n\nexport function AppHeaderLinks({\n   small,\n   openSettings,\n   clickCloseIcon,\n   redirectPopupTimestamp,\n   showRedirectModal\n}: Props) {\n  return (\n    <div className=\"App-header-links\">\n      {small && (\n        <div className=\"App-header-links-header\">\n          <HeaderLink\n            isHomeLink={true}\n            className=\"App-header-link-main\"\n            to=\"/\"\n            redirectPopupTimestamp={redirectPopupTimestamp}\n            showRedirectModal={showRedirectModal}\n          >\n            <img src={logoImg} alt=\"GMX Logo\" />\n          </HeaderLink>\n          <div className=\"App-header-menu-icon-block mobile-cross-menu\" onClick={() => clickCloseIcon && clickCloseIcon()}>\n            <FiX className=\"App-header-menu-icon\" />\n          </div>\n        </div>\n      )}\n      <div className=\"App-header-link-container App-header-link-home\">\n        <HeaderLink\n          to=\"/\"\n          exact={true}\n          isHomeLink={true}\n          redirectPopupTimestamp={redirectPopupTimestamp}\n          showRedirectModal={showRedirectModal}\n        >\n          <Trans>Home</Trans>\n        </HeaderLink>\n      </div>\n      <div className=\"App-header-link-container\">\n        <HeaderLink\n          to=\"/dashboard\"\n          redirectPopupTimestamp={redirectPopupTimestamp}\n          showRedirectModal={showRedirectModal}\n        >\n          <Trans>Dashboard</Trans>\n        </HeaderLink>\n      </div>\n      <div className=\"App-header-link-container\">\n        <HeaderLink\n          to=\"/earn\"\n          redirectPopupTimestamp={redirectPopupTimestamp}\n          showRedirectModal={showRedirectModal}\n        >\n          <Trans>Earn</Trans>\n        </HeaderLink>\n      </div>\n      <div className=\"App-header-link-container\">\n        <HeaderLink\n          to=\"/buy\"\n          redirectPopupTimestamp={redirectPopupTimestamp}\n          showRedirectModal={showRedirectModal}\n        >\n          <Trans>Buy</Trans>\n        </HeaderLink>\n      </div>\n      <div className=\"App-header-link-container\">\n        <HeaderLink\n          to=\"/referrals\"\n          redirectPopupTimestamp={redirectPopupTimestamp}\n          showRedirectModal={showRedirectModal}\n        >\n          <Trans>Referrals</Trans>\n        </HeaderLink>\n      </div>\n      <div className=\"App-header-link-container\">\n        <HeaderLink\n          to=\"/ecosystem\"\n          redirectPopupTimestamp={redirectPopupTimestamp}\n          showRedirectModal={showRedirectModal}\n        >\n          <Trans>Ecosystem</Trans>\n        </HeaderLink>\n      </div>\n      <div className=\"App-header-link-container\">\n        <a href=\"about:blank\" target=\"_blank\" rel=\"noopener noreferrer\">\n          <Trans>About</Trans>\n        </a>\n      </div>\n      {small && !isHomeSite() && (\n        <div className=\"App-header-link-container\">\n          {/* eslint-disable-next-line */}\n          <a href=\"#\" onClick={openSettings}>\n            <Trans>Settings</Trans>\n          </a>\n        </div>\n      )}\n    </div>\n  );\n}\n","import React, { ReactNode, useEffect, useState } from \"react\";\nimport cx from \"classnames\";\n\nimport { AppHeaderUser } from \"./AppHeaderUser\";\nimport { HeaderLink } from \"./HeaderLink\";\nimport { AppHeaderLinks } from \"./AppHeaderLinks\";\n\nimport logoImg from \"../../img/ic_gmx_custom.svg\";\nimport logoSmallImg from \"../../img/logo_GMX_small.svg\";\nimport { RiMenuLine } from \"react-icons/ri\";\nimport { FaTimes } from \"react-icons/fa\";\nimport { AnimatePresence as FramerAnimatePresence, motion } from \"framer-motion\";\n\nimport \"./Header.css\";\n\n// Fix framer-motion old React FC type (solved in react 18)\nconst AnimatePresence = (props: React.ComponentProps<typeof FramerAnimatePresence> & { children: ReactNode }) => (\n  <FramerAnimatePresence {...props} />\n);\n\nconst fadeVariants = {\n  hidden: { opacity: 0 },\n  visible: { opacity: 1 },\n};\n\nconst slideVariants = {\n  hidden: { x: \"-100%\" },\n  visible: { x: 0 },\n};\n\ntype Props = {\n  disconnectAccountAndCloseSettings: () => void;\n  openSettings: () => void;\n  setWalletModalVisible: (visible: boolean) => void;\n  redirectPopupTimestamp: number;\n  showRedirectModal: (to: string) => void;\n};\n\nexport function Header({\n  disconnectAccountAndCloseSettings,\n  openSettings,\n  setWalletModalVisible,\n  redirectPopupTimestamp,\n  showRedirectModal\n}: Props) {\n  const [isDrawerVisible, setIsDrawerVisible] = useState(false);\n  const [isNativeSelectorModalVisible, setIsNativeSelectorModalVisible] = useState(false);\n\n  useEffect(() => {\n    if (isDrawerVisible) {\n      document.body.style.overflow = \"hidden\";\n    } else {\n      document.body.style.overflow = \"unset\";\n    }\n\n    return () => {\n      document.body.style.overflow = \"unset\";\n    };\n  }, [isDrawerVisible]);\n\n  return (\n    <>\n      {isDrawerVisible && (\n        <AnimatePresence>\n          {isDrawerVisible && (\n            <motion.div\n              className=\"App-header-backdrop\"\n              initial=\"hidden\"\n              animate=\"visible\"\n              exit=\"hidden\"\n              variants={fadeVariants}\n              transition={{ duration: 0.2 }}\n              onClick={() => setIsDrawerVisible(!isDrawerVisible)}\n            ></motion.div>\n          )}\n        </AnimatePresence>\n      )}\n      {isNativeSelectorModalVisible && (\n        <AnimatePresence>\n          {isNativeSelectorModalVisible && (\n            <motion.div\n              className=\"selector-backdrop\"\n              initial=\"hidden\"\n              animate=\"visible\"\n              exit=\"hidden\"\n              variants={fadeVariants}\n              transition={{ duration: 0.2 }}\n              onClick={() => setIsNativeSelectorModalVisible(!isNativeSelectorModalVisible)}\n            ></motion.div>\n          )}\n        </AnimatePresence>\n      )}\n      <header>\n        <div className=\"App-header large\">\n          <div className=\"App-header-container-left\">\n            <HeaderLink\n              isHomeLink={true}\n              exact={true}\n              className=\"App-header-link-main\"\n              to=\"/\"\n              redirectPopupTimestamp={redirectPopupTimestamp}\n              showRedirectModal={showRedirectModal}\n            >\n              <img src={logoSmallImg} className=\"small\" alt=\"GMX Logo\" />\n              <span style={{ fontSize: 28, color: \"white\" }}>\n                <img src={logoImg} className=\"big\" alt=\"GMX Logo\" style={{ height: 24 }} />\n                &nbsp;LeveragePro\n              </span>\n            </HeaderLink>\n            <AppHeaderLinks redirectPopupTimestamp={redirectPopupTimestamp} showRedirectModal={showRedirectModal} />\n          </div>\n          <div className=\"App-header-container-right\">\n            <AppHeaderUser\n              disconnectAccountAndCloseSettings={disconnectAccountAndCloseSettings}\n              openSettings={openSettings}\n              setWalletModalVisible={setWalletModalVisible}\n              redirectPopupTimestamp={redirectPopupTimestamp}\n              showRedirectModal={showRedirectModal}\n            />\n          </div>\n        </div>\n        <div className={cx(\"App-header\", \"small\", { active: isDrawerVisible })}>\n          <div\n            className={cx(\"App-header-link-container\", \"App-header-top\", {\n              active: isDrawerVisible,\n            })}\n          >\n            <div className=\"App-header-container-left\">\n              <div className=\"App-header-menu-icon-block\" onClick={() => setIsDrawerVisible(!isDrawerVisible)}>\n                {!isDrawerVisible && <RiMenuLine className=\"App-header-menu-icon\" />}\n                {isDrawerVisible && <FaTimes className=\"App-header-menu-icon\" />}\n              </div>\n              <div className=\"App-header-link-main clickable\" onClick={() => setIsDrawerVisible(!isDrawerVisible)}>\n                <img src={logoImg} className=\"big\" alt=\"GMX Logo\" />\n                <img src={logoSmallImg} className=\"small\" alt=\"GMX Logo\" />\n              </div>\n            </div>\n            <div className=\"App-header-container-right\">\n              <AppHeaderUser\n                disconnectAccountAndCloseSettings={disconnectAccountAndCloseSettings}\n                openSettings={openSettings}\n                small\n                setWalletModalVisible={setWalletModalVisible}\n                redirectPopupTimestamp={redirectPopupTimestamp}\n                showRedirectModal={showRedirectModal}\n              />\n            </div>\n          </div>\n        </div>\n      </header>\n      <AnimatePresence>\n        {isDrawerVisible && (\n          <motion.div\n            onClick={() => setIsDrawerVisible(false)}\n            className=\"App-header-links-container App-header-drawer\"\n            initial=\"hidden\"\n            animate=\"visible\"\n            exit=\"hidden\"\n            variants={slideVariants}\n            transition={{ duration: 0.2 }}\n          >\n            <AppHeaderLinks\n              small\n              openSettings={openSettings}\n              clickCloseIcon={() => setIsDrawerVisible(false)}\n              redirectPopupTimestamp={redirectPopupTimestamp}\n              showRedirectModal={showRedirectModal}\n            />\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </>\n  );\n}\n","import React, {useCallback, useEffect, useRef, useState} from \"react\";\nimport {SWRConfig} from \"swr\";\nimport {ethers} from \"ethers\";\nimport {useWeb3React, Web3ReactProvider} from \"@web3-react/core\";\nimport {Web3Provider} from \"@ethersproject/providers\";\nimport useScrollToTop from \"../lib/useScrollToTop\";\n\nimport {HashRouter as Router, Route, Switch, useHistory, useLocation} from \"react-router-dom\";\n\nimport {\n  activateInjectedProvider,\n  BASIS_POINTS_DIVISOR, BSC_TESTNET,\n  clearWalletConnectData,\n  clearWalletLinkData,\n  CURRENT_PROVIDER_LOCALSTORAGE_KEY,\n  DEFAULT_SLIPPAGE_AMOUNT,\n  DISABLE_ORDER_VALIDATION_KEY,\n  getAppBaseUrl,\n  getExplorerUrl,\n  getInjectedHandler,\n  getWalletConnectHandler,\n  hasCoinBaseWalletExtension,\n  hasMetaMaskWalletExtension,\n  helperToast,\n  IS_PNL_IN_LEVERAGE_KEY,\n  isMobileDevice,\n  LANGUAGE_LOCALSTORAGE_KEY,\n  REFERRAL_CODE_KEY,\n  REFERRAL_CODE_QUERY_PARAM, RPC_PROVIDERS,\n  SHOULD_EAGER_CONNECT_LOCALSTORAGE_KEY,\n  SHOULD_SHOW_POSITION_LINES_KEY,\n  SHOW_PNL_AFTER_FEES_KEY,\n  SLIPPAGE_BPS_KEY,\n  useChainId,\n  useEagerConnect,\n  useInactiveListener,\n  useLocalStorageSerializeKey, VELAS, VELAS_TESTNET,\n} from \"../lib/legacy\";\n\nimport Home from \"../pages/Home/Home\";\nimport Dashboard from \"../pages/Dashboard/Dashboard\";\nimport Ecosystem from \"../pages/Ecosystem/Ecosystem\";\nimport Stake from \"../pages/Stake/Stake\";\nimport {Exchange} from \"../pages/Exchange/Exchange\";\nimport Actions from \"../pages/Actions/Actions\";\nimport OrdersOverview from \"../pages/OrdersOverview/OrdersOverview\";\nimport PositionsOverview from \"../pages/PositionsOverview/PositionsOverview\";\nimport Referrals from \"../pages/Referrals/Referrals\";\nimport BuyGlp from \"../pages/BuyGlp/BuyGlp\";\nimport BuyLeveragePro from \"../pages/BuyLeveragePro/BuyLeveragePro\";\nimport Buy from \"../pages/Buy/Buy\";\nimport NftWallet from \"../pages/NftWallet/NftWallet\";\nimport ClaimEsGmx from \"../pages/ClaimEsGmx/ClaimEsGmx\";\nimport BeginAccountTransfer from \"../pages/BeginAccountTransfer/BeginAccountTransfer\";\nimport CompleteAccountTransfer from \"../pages/CompleteAccountTransfer/CompleteAccountTransfer\";\n\nimport {cssTransition, ToastContainer} from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport Modal from \"../components/Modal/Modal\";\nimport Checkbox from \"../components/Checkbox/Checkbox\";\n\nimport \"../styles/Shared.css\";\nimport \"../styles/Font.css\";\nimport \"./App.css\";\nimport \"../styles/Input.css\";\n\nimport metamaskImg from \"../img/metamask.png\";\nimport coinbaseImg from \"../img/coinbaseWallet.png\";\nimport walletConnectImg from \"../img/walletconnect-circle-blue.svg\";\nimport useEventToast from \"../components/EventToast/useEventToast\";\nimport EventToastContainer from \"../components/EventToast/EventToastContainer\";\nimport SEO from \"../components/Common/SEO\";\nimport useRouteQuery from \"../lib/useRouteQuery\";\nimport {decodeReferralCode, encodeReferralCode} from \"../domain/referrals\";\n\nimport {getContract} from \"../config/Addresses\";\nimport Vault from \"../abis/Vault.json\";\nimport PositionRouter from \"../abis/PositionRouter.json\";\nimport PageNotFound from \"../pages/PageNotFound/PageNotFound\";\nimport ReferralTerms from \"../pages/ReferralTerms/ReferralTerms\";\nimport TermsAndConditions from \"../pages/TermsAndConditions/TermsAndConditions\";\nimport {useLocalStorage} from \"react-use\";\nimport {RedirectPopupModal} from \"../components/ModalViews/RedirectModal\";\nimport {REDIRECT_POPUP_TIMESTAMP_KEY} from \"../config/ui\";\nimport Jobs from \"../pages/Jobs/Jobs\";\n\nimport {i18n} from \"@lingui/core\";\nimport {I18nProvider} from \"@lingui/react\";\nimport {t, Trans} from \"@lingui/macro\";\nimport {defaultLocale, dynamicActivate} from \"../lib/i18n\";\nimport {Header} from \"../components/Header/Header\";\nimport _ from \"lodash\";\n\nif (\"ethereum\" in window) {\n  window.ethereum.autoRefreshOnNetworkChange = false;\n}\n\nfunction getLibrary(provider) {\n  const library = new Web3Provider(provider);\n  return library;\n}\n\nconst Zoom = cssTransition({\n  enter: \"zoomIn\",\n  exit: \"zoomOut\",\n  appendPosition: false,\n  collapse: true,\n  collapseDuration: 200,\n  duration: 200,\n});\n\nfunction getWsProvider(active, chainId) {\n  if (!active) {\n    return;\n  }\n  if (chainId === BSC_TESTNET) {\n    return new ethers.providers.JsonRpcProvider(_.sample(RPC_PROVIDERS[chainId]));\n  } else if (chainId == VELAS_TESTNET) {\n    return new ethers.providers.JsonRpcProvider(_.sample(RPC_PROVIDERS[chainId]));\n  }\n  return;\n}\n\nfunction FullApp() {\n  const exchangeRef = useRef();\n  const {connector, library, deactivate, activate, active} = useWeb3React();\n  const {chainId} = useChainId();\n  const location = useLocation();\n  const history = useHistory();\n  useEventToast();\n  const [activatingConnector, setActivatingConnector] = useState();\n  useEffect(() => {\n    if (activatingConnector && activatingConnector === connector) {\n      setActivatingConnector(undefined);\n    }\n  }, [activatingConnector, connector, chainId]);\n  const triedEager = useEagerConnect(setActivatingConnector);\n  useInactiveListener(!triedEager || !!activatingConnector);\n\n  const query = useRouteQuery();\n\n  useEffect(() => {\n    let referralCode = query.get(REFERRAL_CODE_QUERY_PARAM);\n    if (!referralCode || referralCode.length === 0) {\n      const params = new URLSearchParams(window.location.search);\n      referralCode = params.get(REFERRAL_CODE_QUERY_PARAM);\n    }\n\n    if (referralCode && referralCode.length <= 20) {\n      const encodedReferralCode = encodeReferralCode(referralCode);\n      if (encodeReferralCode !== ethers.constants.HashZero) {\n        localStorage.setItem(REFERRAL_CODE_KEY, encodedReferralCode);\n        const queryParams = new URLSearchParams(location.search);\n        if (queryParams.has(\"ref\")) {\n          queryParams.delete(\"ref\");\n          history.replace({\n            search: queryParams.toString(),\n          });\n        }\n      }\n    }\n  }, [query, history, location]);\n\n  const disconnectAccount = useCallback(() => {\n    // only works with WalletConnect\n    clearWalletConnectData();\n    // force clear localStorage connection for MM/CB Wallet (Brave legacy)\n    clearWalletLinkData();\n    deactivate();\n  }, [deactivate]);\n\n  const disconnectAccountAndCloseSettings = () => {\n    disconnectAccount();\n    localStorage.removeItem(SHOULD_EAGER_CONNECT_LOCALSTORAGE_KEY);\n    localStorage.removeItem(CURRENT_PROVIDER_LOCALSTORAGE_KEY);\n    setIsSettingsVisible(false);\n  };\n\n  const connectInjectedWallet = getInjectedHandler(activate);\n  const activateWalletConnect = () => {\n    getWalletConnectHandler(activate, deactivate, setActivatingConnector)();\n  };\n\n  const userOnMobileDevice = \"navigator\" in window && isMobileDevice(window.navigator);\n\n  const activateMetaMask = () => {\n    if (!hasMetaMaskWalletExtension()) {\n      helperToast.error(\n        <div>\n          <Trans>MetaMask not detected.</Trans>\n          <br/>\n          <br/>\n          <a href=\"https://metamask.io\" target=\"_blank\" rel=\"noopener noreferrer\">\n            <Trans>Install MetaMask</Trans>\n          </a>\n          {userOnMobileDevice ? (\n            <Trans>, and use LeveragePro with its built-in browser</Trans>\n          ) : (\n            <Trans> to start using LeveragePro</Trans>\n          )}\n          .\n        </div>\n      );\n      return false;\n    }\n    attemptActivateWallet(\"MetaMask\");\n  };\n  const activateCoinBase = () => {\n    if (!hasCoinBaseWalletExtension()) {\n      helperToast.error(\n        <div>\n          <Trans>Coinbase Wallet not detected.</Trans>\n          <br/>\n          <br/>\n          <a href=\"https://www.coinbase.com/wallet\" target=\"_blank\" rel=\"noopener noreferrer\">\n            <Trans>Install Coinbase Wallet</Trans>\n          </a>\n          {userOnMobileDevice ? (\n            <Trans>, and use LeveragePro with its built-in browser</Trans>\n          ) : (\n            <Trans> to start using LeveragePro</Trans>\n          )}\n          .\n        </div>\n      );\n      return false;\n    }\n    attemptActivateWallet(\"CoinBase\");\n  };\n\n  const attemptActivateWallet = (providerName) => {\n    localStorage.setItem(SHOULD_EAGER_CONNECT_LOCALSTORAGE_KEY, true);\n    localStorage.setItem(CURRENT_PROVIDER_LOCALSTORAGE_KEY, providerName);\n    activateInjectedProvider(providerName);\n    connectInjectedWallet();\n  };\n\n  const [walletModalVisible, setWalletModalVisible] = useState(false);\n  const [redirectModalVisible, setRedirectModalVisible] = useState(false);\n  const [shouldHideRedirectModal, setShouldHideRedirectModal] = useState(false);\n  const [redirectPopupTimestamp, setRedirectPopupTimestamp, removeRedirectPopupTimestamp] =\n    useLocalStorage(REDIRECT_POPUP_TIMESTAMP_KEY);\n  const [selectedToPage, setSelectedToPage] = useState(\"\");\n  const connectWallet = () => setWalletModalVisible(true);\n\n  const [isSettingsVisible, setIsSettingsVisible] = useState(false);\n  const [savedSlippageAmount, setSavedSlippageAmount] = useLocalStorageSerializeKey(\n    [chainId, SLIPPAGE_BPS_KEY],\n    DEFAULT_SLIPPAGE_AMOUNT\n  );\n  const [slippageAmount, setSlippageAmount] = useState(0);\n  const [isPnlInLeverage, setIsPnlInLeverage] = useState(false);\n  const [shouldDisableOrderValidation, setShouldDisableOrderValidation] = useState(false);\n  const [showPnlAfterFees, setShowPnlAfterFees] = useState(false);\n\n  const [savedIsPnlInLeverage, setSavedIsPnlInLeverage] = useLocalStorageSerializeKey(\n    [chainId, IS_PNL_IN_LEVERAGE_KEY],\n    false\n  );\n\n  const [savedShowPnlAfterFees, setSavedShowPnlAfterFees] = useLocalStorageSerializeKey(\n    [chainId, SHOW_PNL_AFTER_FEES_KEY],\n    false\n  );\n  const [savedShouldDisableOrderValidation, setSavedShouldDisableOrderValidation] = useLocalStorageSerializeKey(\n    [chainId, DISABLE_ORDER_VALIDATION_KEY],\n    false\n  );\n\n  const [savedShouldShowPositionLines, setSavedShouldShowPositionLines] = useLocalStorageSerializeKey(\n    [chainId, SHOULD_SHOW_POSITION_LINES_KEY],\n    false\n  );\n\n  const openSettings = () => {\n    const slippage = parseInt(savedSlippageAmount);\n    setSlippageAmount((slippage / BASIS_POINTS_DIVISOR) * 100);\n    setIsPnlInLeverage(savedIsPnlInLeverage);\n    setShowPnlAfterFees(savedShowPnlAfterFees);\n    setShouldDisableOrderValidation(savedShouldDisableOrderValidation);\n    setIsSettingsVisible(true);\n  };\n\n  const saveAndCloseSettings = () => {\n    const slippage = parseFloat(slippageAmount);\n    if (isNaN(slippage)) {\n      helperToast.error(t`Invalid slippage value`);\n      return;\n    }\n    if (slippage > 5) {\n      helperToast.error(t`Slippage should be less than 5%`);\n      return;\n    }\n\n    const basisPoints = (slippage * BASIS_POINTS_DIVISOR) / 100;\n    if (parseInt(basisPoints) !== parseFloat(basisPoints)) {\n      helperToast.error(t`Max slippage precision is 0.01%`);\n      return;\n    }\n\n    setSavedIsPnlInLeverage(isPnlInLeverage);\n    setSavedShowPnlAfterFees(showPnlAfterFees);\n    setSavedShouldDisableOrderValidation(shouldDisableOrderValidation);\n    setSavedSlippageAmount(basisPoints);\n    setIsSettingsVisible(false);\n  };\n\n  const localStorageCode = window.localStorage.getItem(REFERRAL_CODE_KEY);\n  const baseUrl = getAppBaseUrl();\n  let appRedirectUrl = baseUrl + selectedToPage;\n  if (localStorageCode && localStorageCode.length > 0 && localStorageCode !== ethers.constants.HashZero) {\n    const decodedRefCode = decodeReferralCode(localStorageCode);\n    if (decodedRefCode) {\n      appRedirectUrl = `${appRedirectUrl}?ref=${decodedRefCode}`;\n    }\n  }\n\n  const [pendingTxns, setPendingTxns] = useState([]);\n\n  const showRedirectModal = (to) => {\n    setRedirectModalVisible(true);\n    setSelectedToPage(to);\n  };\n\n  useEffect(() => {\n    const checkPendingTxns = async () => {\n      const updatedPendingTxns = [];\n      for (let i = 0; i < pendingTxns.length; i++) {\n        const pendingTxn = pendingTxns[i];\n        const receipt = await library.getTransactionReceipt(pendingTxn.hash);\n        if (receipt) {\n          if (receipt.status === 0) {\n            const txUrl = getExplorerUrl(chainId) + \"tx/\" + pendingTxn.hash;\n            helperToast.error(\n              <div>\n                <Trans>Txn failed.</Trans>{\" \"}\n                <a href={txUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n                  <Trans>View</Trans>\n                </a>\n                <br/>\n              </div>\n            );\n          }\n          if (receipt.status === 1 && pendingTxn.message) {\n            const txUrl = getExplorerUrl(chainId) + \"tx/\" + pendingTxn.hash;\n            helperToast.success(\n              <div>\n                {pendingTxn.message}{\" \"}\n                <a href={txUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n                  <Trans>View</Trans>\n                </a>\n                <br/>\n              </div>\n            );\n          }\n          continue;\n        }\n        updatedPendingTxns.push(pendingTxn);\n      }\n\n      if (updatedPendingTxns.length !== pendingTxns.length) {\n        setPendingTxns(updatedPendingTxns);\n      }\n    };\n\n    const interval = setInterval(() => {\n      checkPendingTxns();\n    }, 2 * 1000);\n    return () => clearInterval(interval);\n  }, [library, pendingTxns, chainId]);\n\n  const vaultAddress = getContract(chainId, \"Vault\");\n  const positionRouterAddress = getContract(chainId, \"PositionRouter\");\n\n  useEffect(() => {\n    const wsVaultAbi = Vault.abi;\n    const wsProvider = getWsProvider(active, chainId);\n    if (!wsProvider) {\n      return;\n    }\n\n    const wsVault = new ethers.Contract(vaultAddress, wsVaultAbi, wsProvider);\n    const wsPositionRouter = new ethers.Contract(positionRouterAddress, PositionRouter.abi, wsProvider);\n\n    const callExchangeRef = (method, ...args) => {\n      if (!exchangeRef || !exchangeRef.current) {\n        return;\n      }\n\n      exchangeRef.current[method](...args);\n    };\n\n    // handle the subscriptions here instead of within the Exchange component to avoid unsubscribing and re-subscribing\n    // each time the Exchange components re-renders, which happens on every data update\n    const onUpdatePosition = (...args) => callExchangeRef(\"onUpdatePosition\", ...args);\n    const onClosePosition = (...args) => callExchangeRef(\"onClosePosition\", ...args);\n    const onIncreasePosition = (...args) => callExchangeRef(\"onIncreasePosition\", ...args);\n    const onDecreasePosition = (...args) => callExchangeRef(\"onDecreasePosition\", ...args);\n    const onCancelIncreasePosition = (...args) => callExchangeRef(\"onCancelIncreasePosition\", ...args);\n    const onCancelDecreasePosition = (...args) => callExchangeRef(\"onCancelDecreasePosition\", ...args);\n\n    wsVault.on(\"UpdatePosition\", onUpdatePosition);\n    wsVault.on(\"ClosePosition\", onClosePosition);\n    wsVault.on(\"IncreasePosition\", onIncreasePosition);\n    wsVault.on(\"DecreasePosition\", onDecreasePosition);\n    wsPositionRouter.on(\"CancelIncreasePosition\", onCancelIncreasePosition);\n    wsPositionRouter.on(\"CancelDecreasePosition\", onCancelDecreasePosition);\n\n    return function cleanup() {\n      wsVault.off(\"UpdatePosition\", onUpdatePosition);\n      wsVault.off(\"ClosePosition\", onClosePosition);\n      wsVault.off(\"IncreasePosition\", onIncreasePosition);\n      wsVault.off(\"DecreasePosition\", onDecreasePosition);\n      wsPositionRouter.off(\"CancelIncreasePosition\", onCancelIncreasePosition);\n      wsPositionRouter.off(\"CancelDecreasePosition\", onCancelDecreasePosition);\n    };\n  }, [active, chainId, vaultAddress, positionRouterAddress]);\n\n  return (\n    <>\n      <div className=\"App\">\n        <div className=\"App-content\">\n          <Header\n            disconnectAccountAndCloseSettings={disconnectAccountAndCloseSettings}\n            openSettings={openSettings}\n            setWalletModalVisible={setWalletModalVisible}\n            redirectPopupTimestamp={redirectPopupTimestamp}\n            showRedirectModal={showRedirectModal}\n          />\n          <Switch>\n            <Route exact path=\"/\">\n              <Home showRedirectModal={showRedirectModal} redirectPopupTimestamp={redirectPopupTimestamp}/>\n            </Route>\n            <Route exact path=\"/trade\">\n              <Exchange\n                ref={exchangeRef}\n                savedShowPnlAfterFees={savedShowPnlAfterFees}\n                savedIsPnlInLeverage={savedIsPnlInLeverage}\n                setSavedIsPnlInLeverage={setSavedIsPnlInLeverage}\n                savedSlippageAmount={savedSlippageAmount}\n                setPendingTxns={setPendingTxns}\n                pendingTxns={pendingTxns}\n                savedShouldShowPositionLines={savedShouldShowPositionLines}\n                setSavedShouldShowPositionLines={setSavedShouldShowPositionLines}\n                connectWallet={connectWallet}\n                savedShouldDisableOrderValidation={savedShouldDisableOrderValidation}\n              />\n            </Route>\n            <Route exact path=\"/dashboard\">\n              <Dashboard/>\n            </Route>\n            <Route exact path=\"/earn\">\n              <Stake setPendingTxns={setPendingTxns} connectWallet={connectWallet}/>\n            </Route>\n            <Route exact path=\"/buy\">\n              <Buy\n                savedSlippageAmount={savedSlippageAmount}\n                setPendingTxns={setPendingTxns}\n                connectWallet={connectWallet}\n              />\n            </Route>\n            <Route exact path=\"/buy_glp\">\n              <BuyGlp\n                savedSlippageAmount={savedSlippageAmount}\n                setPendingTxns={setPendingTxns}\n                connectWallet={connectWallet}\n              />\n            </Route>\n            <Route exact path=\"/jobs\">\n              <Jobs/>\n            </Route>\n            <Route exact path=\"/buy_leveragepro\">\n              <BuyLeveragePro/>\n            </Route>\n            <Route exact path=\"/ecosystem\">\n              <Ecosystem/>\n            </Route>\n            <Route exact path=\"/referrals\">\n              <Referrals pendingTxns={pendingTxns} connectWallet={connectWallet} setPendingTxns={setPendingTxns}/>\n            </Route>\n            <Route exact path=\"/referrals/:account\">\n              <Referrals pendingTxns={pendingTxns} connectWallet={connectWallet} setPendingTxns={setPendingTxns}/>\n            </Route>\n            <Route exact path=\"/nft_wallet\">\n              <NftWallet/>\n            </Route>\n            <Route exact path=\"/claim_es_gmx\">\n              <ClaimEsGmx setPendingTxns={setPendingTxns}/>\n            </Route>\n            <Route exact path=\"/actions\">\n              <Actions/>\n            </Route>\n            <Route exact path=\"/actions/:account\">\n              <Actions/>\n            </Route>\n            <Route exact path=\"/orders_overview\">\n              <OrdersOverview/>\n            </Route>\n            <Route exact path=\"/positions_overview\">\n              <PositionsOverview/>\n            </Route>\n            <Route exact path=\"/begin_account_transfer\">\n              <BeginAccountTransfer setPendingTxns={setPendingTxns}/>\n            </Route>\n            <Route exact path=\"/complete_account_transfer/:sender/:receiver\">\n              <CompleteAccountTransfer setPendingTxns={setPendingTxns}/>\n            </Route>\n            <Route exact path=\"/referral-terms\">\n              <ReferralTerms/>\n            </Route>\n            <Route exact path=\"/terms-and-conditions\">\n              <TermsAndConditions/>\n            </Route>\n            <Route path=\"*\">\n              <PageNotFound/>\n            </Route>\n          </Switch>\n          )\n          )\n        </div>\n      </div>\n      <ToastContainer\n        limit={1}\n        transition={Zoom}\n        position=\"bottom-right\"\n        autoClose={7000}\n        hideProgressBar={true}\n        newestOnTop={false}\n        closeOnClick={false}\n        draggable={false}\n        pauseOnHover\n      />\n      <EventToastContainer/>\n      <RedirectPopupModal\n        redirectModalVisible={redirectModalVisible}\n        setRedirectModalVisible={setRedirectModalVisible}\n        appRedirectUrl={appRedirectUrl}\n        setRedirectPopupTimestamp={setRedirectPopupTimestamp}\n        setShouldHideRedirectModal={setShouldHideRedirectModal}\n        shouldHideRedirectModal={shouldHideRedirectModal}\n        removeRedirectPopupTimestamp={removeRedirectPopupTimestamp}\n      />\n      <Modal\n        className=\"Connect-wallet-modal\"\n        isVisible={walletModalVisible}\n        setIsVisible={setWalletModalVisible}\n        label=\"Connect Wallet\"\n      >\n        <button className=\"Wallet-btn MetaMask-btn\" onClick={activateMetaMask}>\n          <img src={metamaskImg} alt=\"MetaMask\"/>\n          <div>\n            <Trans>MetaMask</Trans>\n          </div>\n        </button>\n        <button className=\"Wallet-btn CoinbaseWallet-btn\" onClick={activateCoinBase}>\n          <img src={coinbaseImg} alt=\"Coinbase Wallet\"/>\n          <div>\n            <Trans>Coinbase Wallet</Trans>\n          </div>\n        </button>\n        <button className=\"Wallet-btn WalletConnect-btn\" onClick={activateWalletConnect}>\n          <img src={walletConnectImg} alt=\"WalletConnect\"/>\n          <div>\n            <Trans>WalletConnect</Trans>\n          </div>\n        </button>\n      </Modal>\n      <Modal\n        className=\"App-settings\"\n        isVisible={isSettingsVisible}\n        setIsVisible={setIsSettingsVisible}\n        label=\"Settings\"\n      >\n        <div className=\"App-settings-row\">\n          <div>\n            <Trans>Allowed Slippage</Trans>\n          </div>\n          <div className=\"App-slippage-tolerance-input-container\">\n            <input\n              type=\"number\"\n              className=\"App-slippage-tolerance-input\"\n              min=\"0\"\n              value={slippageAmount}\n              onChange={(e) => setSlippageAmount(e.target.value)}\n            />\n            <div className=\"App-slippage-tolerance-input-percent\">%</div>\n          </div>\n        </div>\n        <div className=\"Exchange-settings-row\">\n          <Checkbox isChecked={showPnlAfterFees} setIsChecked={setShowPnlAfterFees}>\n            <Trans>Display PnL after fees</Trans>\n          </Checkbox>\n        </div>\n        <div className=\"Exchange-settings-row\">\n          <Checkbox isChecked={isPnlInLeverage} setIsChecked={setIsPnlInLeverage}>\n            <Trans>Include PnL in leverage display</Trans>\n          </Checkbox>\n        </div>\n        {/*{isDevelopment() && (*/}\n        <div className=\"Exchange-settings-row\">\n          <Checkbox isChecked={shouldDisableOrderValidation} setIsChecked={setShouldDisableOrderValidation}>\n            <Trans>Disable order validations</Trans>\n          </Checkbox>\n        </div>\n        {/*)}*/}\n\n        <button className=\"App-cta Exchange-swap-button\" onClick={saveAndCloseSettings}>\n          <Trans>Save</Trans>\n        </button>\n      </Modal>\n    </>\n  );\n}\n\nfunction App() {\n  useScrollToTop();\n  useEffect(() => {\n    const defaultLanguage = localStorage.getItem(LANGUAGE_LOCALSTORAGE_KEY) || defaultLocale;\n    dynamicActivate(defaultLanguage);\n  }, []);\n  return (\n    <SWRConfig value={{refreshInterval: 5000}}>\n      <Web3ReactProvider getLibrary={getLibrary}>\n        <SEO>\n          <Router>\n            <I18nProvider i18n={i18n}>\n              <FullApp/>\n            </I18nProvider>\n          </Router>\n        </SEO>\n      </Web3ReactProvider>\n    </SWRConfig>\n  );\n}\n\nexport default App;\n","import React from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nexport default function useRouteQuery() {\r\n  const { search } = useLocation();\r\n  return React.useMemo(() => new URLSearchParams(search), [search]);\r\n}\r\n","import { useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nexport default function useScrollToTop() {\r\n  const history = useHistory();\r\n  useEffect(() => {\r\n    const unlisten = history.listen(() => {\r\n      window.scrollTo(0, 0);\r\n    });\r\n    return () => {\r\n      unlisten();\r\n    };\r\n  }, [history]);\r\n}\r\n","const reportWebVitals = (onPerfEntry) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"regenerator-runtime/runtime\";\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\nimport App from \"./App/App\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Router>\r\n      <App />\r\n    </Router>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.info))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}